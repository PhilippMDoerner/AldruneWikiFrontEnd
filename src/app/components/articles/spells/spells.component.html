<div class="main">
    <article *ngIf="spells; else loading" class="container">
        <h1 class="text-center mb-3">
            Spells
            <span 
            *ngFor="let selectedClass of selectedClasses; let i = index" 
            class="badge badge-secondary pointer" 
            (click)="selectedClasses.splice(i, 1)"
            >
                {{ selectedClass }} <i class="fa fa-times"></i>
            </span>
        </h1>


        <!-- Spells -->
        <div *ngFor="let spell of spells; let i = index">
            <app-spell
            #spellElements
            [id]="spell.name.replaceAll(' ', '-').replaceAll('\'', '')"
            [index] = "i"
            [cardData] = "spell"
            (cardDelete) = "onSpellDelete(i)"
            (classSelect) = "selectClass($event)"
            *ngIf="hasSelectedClasses(spell)"
            ></app-spell>
        </div>


        <!-- Insert new Spell -->
        <div class="expand row justify-content-center" *ngIf="this.tokenService.isAdmin()">
            <div class="btn btn-primary" (click)="addSpell()">
                <i class="fa fa-3x fa-plus pointer" title="Add Spell"></i>
            </div>
        </div>

        <div class="btn btn-secondary" routerLink="{{routingService.getRoutePath('home1', {campaign: campaign})}}">
            Back To Frontpage
        </div>
    </article>
    <ng-template #loading class="mb-4"> <app-spinner></app-spinner> </ng-template> 
</div>
