<div class="main" #adminCard>
    <!-- TODO: Make Design mobile useable -->
    <article *ngIf="users && groups && statistics; else loading">
        <!-- Users Section -->
        <div class="mb-3">
            <!-- Section Heading -->
            <div class="d-flex justify-content-between">
                <h3 class="mb-0"> 
                    <span class="fa fa-user"></span>
                    Users
                </h3>
                
                <!-- Heading Buttons -->
                <div class="align-self-end position-relative top1">
                    <!-- Add Users -->
                    <div class="btn btn-dark border-white" (click)="toggleUserCreateState()">
                        <span *ngIf="!isUserCreateState">
                            <span class="fa fa-user-plus"></span>
                            Add User
                        </span>
                        <span *ngIf="isUserCreateState">
                            <span class="fa fa-times"></span>
                            Cancel User Creation
                        </span>
                    </div>
                </div>

            </div>
    
            <hr class="white-separator">

            <!-- New Table Entry -->

            <div *ngIf="isUserCreateState" class="my-2 card p-3">
                <h4>Adding new User</h4>
                <!-- Form -->
                <app-formly-formcontainer 
                [model]="userModel" 
                [fields]="userFields" 
                (formlySubmit)="saveNewUser()" 
                (formlyCancel)="toggleUserCreateState()"
                ></app-formly-formcontainer>
            </div>
    
            <!-- Table -->
            <div class="usertable container">
                <!-- Table Heading -->
                <div class="row">
                    <h4 class="col-3 d-flex flex-column">
                        <div>
                            <span class="fa fa-user-circle" placement="top" [ngbTooltip]="'Username'"></span>
                            Username
                        </div>
                    </h4>
                    <h4 class="col-1">
                        <span class="fas fa-crown" placement="top" [ngbTooltip]="'Admins'"></span>
                    </h4>                    
                    <h4 class="col-1">
                        <span class="fas fa-gamepad" placement="top" [ngbTooltip]="'SuperUsers aka Admins of Admins'"></span>
                    </h4>
                    <h4 class="col-3">
                        <span class="fa fa-group" placement="top" [ngbTooltip]="'Access-right groups'"></span>
                        Groups
                    </h4>
                    <h4 class="col-3">
                        <span class="fa fa-envelope-o" placement="top" [ngbTooltip]="'Email-Address'"></span>
                        Email
                    </h4>
                </div>
    
                <!-- Table Entries -->
                <div class="" *ngFor="let user of users; let i=index" [ngClass]="{'light-row': i%2===0}">
                    <app-user-row
                    [index] = "i"
                    [user] = "user"
                    [groups]="groups"
                    (delete)="removeDeletedUser(i)"
                    ></app-user-row>
                </div>
                
                <div class="mt-3">(â€ ): Deactivated/Deleted Account </div>

            </div>
        </div>

        <!-- Database Section -->
        <div class="mb-3">
            <!-- Section Heading -->
            <div class="d-flex justify-content-between">
                <h3 class="mb-0"> 
                    <span class="fa fa-database"></span>
                    Database
                </h3>

                <!-- Heading Buttons -->
                <div class="align-self-end position-relative top1">
                    <!-- Download Database -->
                    <div class="btn btn-primary border-white" (click)="startDatabaseDownload()"> 
                        <span class="fa fa-database"></span>
                        Download Database 
                    </div>
    
                    <!-- Clear Tokens -->
                    <!-- <div class="btn btn-danger border-white"> 
                        <span class="fa fa-trash"></span>
                        Clear > 7 day old Tokens 
                    </div> -->
                </div>

            </div>

            <hr class="white-separator">
            
            <!-- Section Body -->
            <!-- Statistics -->
            <div class="container mb-5">
                <div class="row" *ngFor="let statistic of statistics | keyvalue">
                    <div class="col-6 col-sm-3"> {{ statistic.key }}</div>
                    <div class="col-6 col-sm-3"> {{ statistic.value }}</div>
                </div>
            </div>
        </div>

        <div class="btn btn-secondary" routerLink="{{routingService.getRoutePath('home1', {campaign: campaign})}}">Back To Home</div>

    </article>

    <!-- Loading Spinner -->
    <ng-template #loading class="mb-4"> <app-spinner></app-spinner> </ng-template> 
</div>