(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[179],{255:mo=>{function pi(ne){return Promise.resolve().then(()=>{var Xn=new Error("Cannot find module '"+ne+"'");throw Xn.code="MODULE_NOT_FOUND",Xn})}pi.keys=()=>[],pi.resolve=pi,pi.id=255,mo.exports=pi},524:(mo,pi,ne)=>{var Xn;!function(Je,fi,Ut,Fn){"use strict";var Er,mt=["","webkit","Moz","MS","ms","o"],Fl=fi.createElement("div"),qt=Math.round,gt=Math.abs,ta=Date.now;function Tr(x,I,V){return setTimeout(Ll(x,V),I)}function Zt(x,I,V){return!!Array.isArray(x)&&(vt(x,V[I],V),!0)}function vt(x,I,V){var Q;if(x)if(x.forEach)x.forEach(I,V);else if(x.length!==Fn)for(Q=0;Q<x.length;)I.call(V,x[Q],Q,x),Q++;else for(Q in x)x.hasOwnProperty(Q)&&I.call(V,x[Q],Q,x)}function Oc(x,I,V){var Q="DEPRECATED METHOD: "+I+"\n"+V+" AT \n";return function(){var ee=new Error("get-stack-trace"),me=ee&&ee.stack?ee.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",ve=Je.console&&(Je.console.warn||Je.console.log);return ve&&ve.call(Je.console,Q,me),x.apply(this,arguments)}}Er="function"!=typeof Object.assign?function(I){if(I===Fn||null===I)throw new TypeError("Cannot convert undefined or null to object");for(var V=Object(I),Q=1;Q<arguments.length;Q++){var ee=arguments[Q];if(ee!==Fn&&null!==ee)for(var me in ee)ee.hasOwnProperty(me)&&(V[me]=ee[me])}return V}:Object.assign;var kr=Oc(function(I,V,Q){for(var ee=Object.keys(V),me=0;me<ee.length;)(!Q||Q&&I[ee[me]]===Fn)&&(I[ee[me]]=V[ee[me]]),me++;return I},"extend","Use `assign`."),na=Oc(function(I,V){return kr(I,V,!0)},"merge","Use `assign`.");function Rn(x,I,V){var ee,Q=I.prototype;(ee=x.prototype=Object.create(Q)).constructor=x,ee._super=Q,V&&Er(ee,V)}function Ll(x,I){return function(){return x.apply(I,arguments)}}function ja(x,I){return"function"==typeof x?x.apply(I&&I[0]||Fn,I):x}function _t(x,I){return x===Fn?I:x}function gs(x,I,V){vt(za(I),function(Q){x.addEventListener(Q,V,!1)})}function $l(x,I,V){vt(za(I),function(Q){x.removeEventListener(Q,V,!1)})}function un(x,I){for(;x;){if(x==I)return!0;x=x.parentNode}return!1}function wn(x,I){return x.indexOf(I)>-1}function za(x){return x.trim().split(/\s+/g)}function Fe(x,I,V){if(x.indexOf&&!V)return x.indexOf(I);for(var Q=0;Q<x.length;){if(V&&x[Q][V]==I||!V&&x[Q]===I)return Q;Q++}return-1}function Ga(x){return Array.prototype.slice.call(x,0)}function Ln(x,I,V){for(var Q=[],ee=[],me=0;me<x.length;){var ve=I?x[me][I]:x[me];Fe(ee,ve)<0&&Q.push(x[me]),ee[me]=ve,me++}return V&&(Q=I?Q.sort(function(en,dt){return en[I]>dt[I]}):Q.sort()),Q}function he(x,I){for(var V,Q,ee=I[0].toUpperCase()+I.slice(1),me=0;me<mt.length;){if((Q=(V=mt[me])?V+ee:I)in x)return Q;me++}return Fn}var Qe=1;function Dt(x){var I=x.ownerDocument||x;return I.defaultView||I.parentWindow||Je}var sr="ontouchstart"in Je,Sn=he(Je,"PointerEvent")!==Fn,ei=sr&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),Rt="touch",ar="mouse",qr=["x","y"],rn=["clientX","clientY"];function cr(x,I){var V=this;this.manager=x,this.callback=I,this.element=x.element,this.target=x.options.inputTarget,this.domHandler=function(Q){ja(x.options.enable,[x])&&V.handler(Q)},this.init()}function Hu(x,I,V){var Q=V.pointers.length,ee=V.changedPointers.length,me=1&I&&Q-ee==0,ve=12&I&&Q-ee==0;V.isFirst=!!me,V.isFinal=!!ve,me&&(x.session={}),V.eventType=I,function(x,I){var V=x.session,Q=I.pointers,ee=Q.length;V.firstInput||(V.firstInput=Wa(I)),ee>1&&!V.firstMultiple?V.firstMultiple=Wa(I):1===ee&&(V.firstMultiple=!1);var me=V.firstInput,ve=V.firstMultiple,Pe=ve?ve.center:me.center,en=I.center=Fc(Q);I.timeStamp=ta(),I.deltaTime=I.timeStamp-me.timeStamp,I.angle=Bl(Pe,en),I.distance=oa(Pe,en),function(x,I){var V=I.center,Q=x.offsetDelta||{},ee=x.prevDelta||{},me=x.prevInput||{};(1===I.eventType||4===me.eventType)&&(ee=x.prevDelta={x:me.deltaX||0,y:me.deltaY||0},Q=x.offsetDelta={x:V.x,y:V.y}),I.deltaX=ee.x+(V.x-Q.x),I.deltaY=ee.y+(V.y-Q.y)}(V,I),I.offsetDirection=qa(I.deltaX,I.deltaY);var dt=Rc(I.deltaTime,I.deltaX,I.deltaY);I.overallVelocityX=dt.x,I.overallVelocityY=dt.y,I.overallVelocity=gt(dt.x)>gt(dt.y)?dt.x:dt.y,I.scale=ve?function(x,I){return oa(I[0],I[1],rn)/oa(x[0],x[1],rn)}(ve.pointers,Q):1,I.rotation=ve?function(x,I){return Bl(I[1],I[0],rn)+Bl(x[1],x[0],rn)}(ve.pointers,Q):0,I.maxPointers=V.prevInput?I.pointers.length>V.prevInput.maxPointers?I.pointers.length:V.prevInput.maxPointers:I.pointers.length,function(x,I){var ee,me,ve,Pe,V=x.lastInterval||I,Q=I.timeStamp-V.timeStamp;if(8!=I.eventType&&(Q>25||V.velocity===Fn)){var en=I.deltaX-V.deltaX,dt=I.deltaY-V.deltaY,bt=Rc(Q,en,dt);me=bt.x,ve=bt.y,ee=gt(bt.x)>gt(bt.y)?bt.x:bt.y,Pe=qa(en,dt),x.lastInterval=I}else ee=V.velocity,me=V.velocityX,ve=V.velocityY,Pe=V.direction;I.velocity=ee,I.velocityX=me,I.velocityY=ve,I.direction=Pe}(V,I);var bt=x.element;un(I.srcEvent.target,bt)&&(bt=I.srcEvent.target),I.target=bt}(x,V),x.emit("hammer.input",V),x.recognize(V),x.session.prevInput=V}function Wa(x){for(var I=[],V=0;V<x.pointers.length;)I[V]={clientX:qt(x.pointers[V].clientX),clientY:qt(x.pointers[V].clientY)},V++;return{timeStamp:ta(),pointers:I,center:Fc(I),deltaX:x.deltaX,deltaY:x.deltaY}}function Fc(x){var I=x.length;if(1===I)return{x:qt(x[0].clientX),y:qt(x[0].clientY)};for(var V=0,Q=0,ee=0;ee<I;)V+=x[ee].clientX,Q+=x[ee].clientY,ee++;return{x:qt(V/I),y:qt(Q/I)}}function Rc(x,I,V){return{x:I/x||0,y:V/x||0}}function qa(x,I){return x===I?1:gt(x)>=gt(I)?x<0?2:4:I<0?8:16}function oa(x,I,V){V||(V=qr);var Q=I[V[0]]-x[V[0]],ee=I[V[1]]-x[V[1]];return Math.sqrt(Q*Q+ee*ee)}function Bl(x,I,V){return V||(V=qr),180*Math.atan2(I[V[1]]-x[V[1]],I[V[0]]-x[V[0]])/Math.PI}cr.prototype={handler:function(){},init:function(){this.evEl&&gs(this.element,this.evEl,this.domHandler),this.evTarget&&gs(this.target,this.evTarget,this.domHandler),this.evWin&&gs(Dt(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&$l(this.element,this.evEl,this.domHandler),this.evTarget&&$l(this.target,this.evTarget,this.domHandler),this.evWin&&$l(Dt(this.element),this.evWin,this.domHandler)}};var Lc={mousedown:1,mousemove:2,mouseup:4},jh="mousedown",Go="mousemove mouseup";function Ii(){this.evEl=jh,this.evWin=Go,this.pressed=!1,cr.apply(this,arguments)}Rn(Ii,cr,{handler:function(I){var V=Lc[I.type];1&V&&0===I.button&&(this.pressed=!0),2&V&&1!==I.which&&(V=4),this.pressed&&(4&V&&(this.pressed=!1),this.callback(this.manager,V,{pointers:[I],changedPointers:[I],pointerType:ar,srcEvent:I}))}});var ut={pointerdown:1,pointermove:2,pointerup:4,pointercancel:8,pointerout:8},Hl={2:Rt,3:"pen",4:ar,5:"kinect"},rt="pointerdown",xr="pointermove pointerup pointercancel";function Wo(){this.evEl=rt,this.evWin=xr,cr.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}Je.MSPointerEvent&&!Je.PointerEvent&&(rt="MSPointerDown",xr="MSPointerMove MSPointerUp MSPointerCancel"),Rn(Wo,cr,{handler:function(I){var V=this.store,Q=!1,ee=I.type.toLowerCase().replace("ms",""),me=ut[ee],ve=Hl[I.pointerType]||I.pointerType,Pe=ve==Rt,en=Fe(V,I.pointerId,"pointerId");1&me&&(0===I.button||Pe)?en<0&&(V.push(I),en=V.length-1):12&me&&(Q=!0),!(en<0)&&(V[en]=I,this.callback(this.manager,me,{pointers:V,changedPointers:[I],pointerType:ve,srcEvent:I}),Q&&V.splice(en,1))}});var ot={touchstart:1,touchmove:2,touchend:4,touchcancel:8},Se="touchstart",Qa="touchstart touchmove touchend touchcancel";function Qr(){this.evTarget=Se,this.evWin=Qa,this.started=!1,cr.apply(this,arguments)}function ys(x,I){var V=Ga(x.touches),Q=Ga(x.changedTouches);return 12&I&&(V=Ln(V.concat(Q),"identifier",!0)),[V,Q]}Rn(Qr,cr,{handler:function(I){var V=ot[I.type];if(1===V&&(this.started=!0),this.started){var Q=ys.call(this,I,V);12&V&&Q[0].length-Q[1].length==0&&(this.started=!1),this.callback(this.manager,V,{pointers:Q[0],changedPointers:Q[1],pointerType:Rt,srcEvent:I})}}});var ju={touchstart:1,touchmove:2,touchend:4,touchcancel:8},Za="touchstart touchmove touchend touchcancel";function Re(){this.evTarget=Za,this.targetIds={},cr.apply(this,arguments)}function ni(x,I){var V=Ga(x.touches),Q=this.targetIds;if(3&I&&1===V.length)return Q[V[0].identifier]=!0,[V,V];var ee,me,ve=Ga(x.changedTouches),Pe=[],en=this.target;if(me=V.filter(function(dt){return un(dt.target,en)}),1===I)for(ee=0;ee<me.length;)Q[me[ee].identifier]=!0,ee++;for(ee=0;ee<ve.length;)Q[ve[ee].identifier]&&Pe.push(ve[ee]),12&I&&delete Q[ve[ee].identifier],ee++;return Pe.length?[Ln(me.concat(Pe),"identifier",!0),Pe]:void 0}function Gu(){cr.apply(this,arguments);var x=Ll(this.handler,this);this.touch=new Re(this.manager,x),this.mouse=new Ii(this.manager,x),this.primaryTouch=null,this.lastTouches=[]}function jl(x,I){1&x?(this.primaryTouch=I.changedPointers[0].identifier,Pi.call(this,I)):12&x&&Pi.call(this,I)}function Pi(x){var I=x.changedPointers[0];if(I.identifier===this.primaryTouch){var V={x:I.clientX,y:I.clientY};this.lastTouches.push(V);var Q=this.lastTouches;setTimeout(function(){var me=Q.indexOf(V);me>-1&&Q.splice(me,1)},2500)}}function wm(x){for(var I=x.srcEvent.clientX,V=x.srcEvent.clientY,Q=0;Q<this.lastTouches.length;Q++){var ee=this.lastTouches[Q],me=Math.abs(I-ee.x),ve=Math.abs(V-ee.y);if(me<=25&&ve<=25)return!0}return!1}Rn(Re,cr,{handler:function(I){var V=ju[I.type],Q=ni.call(this,I,V);!Q||this.callback(this.manager,V,{pointers:Q[0],changedPointers:Q[1],pointerType:Rt,srcEvent:I})}}),Rn(Gu,cr,{handler:function(I,V,Q){var me=Q.pointerType==ar;if(!(me&&Q.sourceCapabilities&&Q.sourceCapabilities.firesTouchEvents)){if(Q.pointerType==Rt)jl.call(this,V,Q);else if(me&&wm.call(this,Q))return;this.callback(I,V,Q)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Wu=he(Fl.style,"touchAction"),qu=Wu!==Fn,ur="compute",Qu="manipulation",vo="none",bs="pan-x",Zr="pan-y",$c=function(){if(!qu)return!1;var x={},I=Je.CSS&&Je.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(V){x[V]=!I||Je.CSS.supports("touch-action",V)}),x}();function Uc(x,I){this.manager=x,this.set(I)}function _n(x){this.options=Er({},this.defaults,x||{}),this.id=Qe++,this.manager=null,this.options.enable=_t(this.options.enable,!0),this.state=1,this.simultaneous={},this.requireFail=[]}function Ka(x){return 16&x?"cancel":8&x?"end":4&x?"move":2&x?"start":""}function Xe(x){return 16==x?"down":8==x?"up":2==x?"left":4==x?"right":""}function on(x,I){var V=I.manager;return V?V.get(x):x}function Ai(){_n.apply(this,arguments)}function Kr(){Ai.apply(this,arguments),this.pX=null,this.pY=null}function si(){Ai.apply(this,arguments)}function zl(){_n.apply(this,arguments),this._timer=null,this._input=null}function la(){Ai.apply(this,arguments)}function we(){Ai.apply(this,arguments)}function sn(){_n.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function Oi(x,I){return(I=I||{}).recognizers=_t(I.recognizers,Oi.defaults.preset),new Gl(x,I)}function Gl(x,I){this.options=Er({},Oi.defaults,I||{}),this.options.inputTarget=this.options.inputTarget||x,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=x,this.input=function(x){return new(x.options.inputClass||(Sn?Wo:ei?Re:sr?Gu:Ii))(x,Hu)}(this),this.touchAction=new Uc(this,this.options.touchAction),Wi(this,!0),vt(this.options.recognizers,function(V){var Q=this.add(new V[0](V[1]));V[2]&&Q.recognizeWith(V[2]),V[3]&&Q.requireFailure(V[3])},this)}function Wi(x,I){var Q,V=x.element;V.style&&(vt(x.options.cssProps,function(ee,me){Q=he(V.style,me),I?(x.oldCssProps[Q]=V.style[Q],V.style[Q]=ee):V.style[Q]=x.oldCssProps[Q]||""}),I||(x.oldCssProps={}))}Uc.prototype={set:function(x){x==ur&&(x=this.compute()),qu&&this.manager.element.style&&$c[x]&&(this.manager.element.style[Wu]=x),this.actions=x.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var x=[];return vt(this.manager.recognizers,function(I){ja(I.options.enable,[I])&&(x=x.concat(I.getTouchAction()))}),function(x){if(wn(x,vo))return vo;var I=wn(x,bs),V=wn(x,Zr);return I&&V?vo:I||V?I?bs:Zr:wn(x,Qu)?Qu:"auto"}(x.join(" "))},preventDefaults:function(x){var I=x.srcEvent,V=x.offsetDirection;if(!this.manager.session.prevented){var Q=this.actions,ee=wn(Q,vo)&&!$c[vo],me=wn(Q,Zr)&&!$c[Zr],ve=wn(Q,bs)&&!$c[bs];if(ee&&1===x.pointers.length&&x.distance<2&&x.deltaTime<250)return;return ve&&me||!(ee||me&&6&V||ve&&24&V)?void 0:this.preventSrc(I)}I.preventDefault()},preventSrc:function(x){this.manager.session.prevented=!0,x.preventDefault()}},_n.prototype={defaults:{},set:function(x){return Er(this.options,x),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(x){if(Zt(x,"recognizeWith",this))return this;var I=this.simultaneous;return I[(x=on(x,this)).id]||(I[x.id]=x,x.recognizeWith(this)),this},dropRecognizeWith:function(x){return Zt(x,"dropRecognizeWith",this)||(x=on(x,this),delete this.simultaneous[x.id]),this},requireFailure:function(x){if(Zt(x,"requireFailure",this))return this;var I=this.requireFail;return-1===Fe(I,x=on(x,this))&&(I.push(x),x.requireFailure(this)),this},dropRequireFailure:function(x){if(Zt(x,"dropRequireFailure",this))return this;x=on(x,this);var I=Fe(this.requireFail,x);return I>-1&&this.requireFail.splice(I,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(x){return!!this.simultaneous[x.id]},emit:function(x){var I=this,V=this.state;function Q(ee){I.manager.emit(ee,x)}V<8&&Q(I.options.event+Ka(V)),Q(I.options.event),x.additionalEvent&&Q(x.additionalEvent),V>=8&&Q(I.options.event+Ka(V))},tryEmit:function(x){if(this.canEmit())return this.emit(x);this.state=32},canEmit:function(){for(var x=0;x<this.requireFail.length;){if(!(33&this.requireFail[x].state))return!1;x++}return!0},recognize:function(x){var I=Er({},x);if(!ja(this.options.enable,[this,I]))return this.reset(),void(this.state=32);56&this.state&&(this.state=1),this.state=this.process(I),30&this.state&&this.tryEmit(I)},process:function(x){},getTouchAction:function(){},reset:function(){}},Rn(Ai,_n,{defaults:{pointers:1},attrTest:function(x){var I=this.options.pointers;return 0===I||x.pointers.length===I},process:function(x){var I=this.state,V=x.eventType,Q=6&I,ee=this.attrTest(x);return Q&&(8&V||!ee)?16|I:Q||ee?4&V?8|I:2&I?4|I:2:32}}),Rn(Kr,Ai,{defaults:{event:"pan",threshold:10,pointers:1,direction:30},getTouchAction:function(){var x=this.options.direction,I=[];return 6&x&&I.push(Zr),24&x&&I.push(bs),I},directionTest:function(x){var I=this.options,V=!0,Q=x.distance,ee=x.direction,me=x.deltaX,ve=x.deltaY;return ee&I.direction||(6&I.direction?(ee=0===me?1:me<0?2:4,V=me!=this.pX,Q=Math.abs(x.deltaX)):(ee=0===ve?1:ve<0?8:16,V=ve!=this.pY,Q=Math.abs(x.deltaY))),x.direction=ee,V&&Q>I.threshold&&ee&I.direction},attrTest:function(x){return Ai.prototype.attrTest.call(this,x)&&(2&this.state||!(2&this.state)&&this.directionTest(x))},emit:function(x){this.pX=x.deltaX,this.pY=x.deltaY;var I=Xe(x.direction);I&&(x.additionalEvent=this.options.event+I),this._super.emit.call(this,x)}}),Rn(si,Ai,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[vo]},attrTest:function(x){return this._super.attrTest.call(this,x)&&(Math.abs(x.scale-1)>this.options.threshold||2&this.state)},emit:function(x){1!==x.scale&&(x.additionalEvent=this.options.event+(x.scale<1?"in":"out")),this._super.emit.call(this,x)}}),Rn(zl,_n,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return["auto"]},process:function(x){var I=this.options,V=x.pointers.length===I.pointers,Q=x.distance<I.threshold,ee=x.deltaTime>I.time;if(this._input=x,!Q||!V||12&x.eventType&&!ee)this.reset();else if(1&x.eventType)this.reset(),this._timer=Tr(function(){this.state=8,this.tryEmit()},I.time,this);else if(4&x.eventType)return 8;return 32},reset:function(){clearTimeout(this._timer)},emit:function(x){8===this.state&&(x&&4&x.eventType?this.manager.emit(this.options.event+"up",x):(this._input.timeStamp=ta(),this.manager.emit(this.options.event,this._input)))}}),Rn(la,Ai,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[vo]},attrTest:function(x){return this._super.attrTest.call(this,x)&&(Math.abs(x.rotation)>this.options.threshold||2&this.state)}}),Rn(we,Ai,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:30,pointers:1},getTouchAction:function(){return Kr.prototype.getTouchAction.call(this)},attrTest:function(x){var V,I=this.options.direction;return 30&I?V=x.overallVelocity:6&I?V=x.overallVelocityX:24&I&&(V=x.overallVelocityY),this._super.attrTest.call(this,x)&&I&x.offsetDirection&&x.distance>this.options.threshold&&x.maxPointers==this.options.pointers&&gt(V)>this.options.velocity&&4&x.eventType},emit:function(x){var I=Xe(x.offsetDirection);I&&this.manager.emit(this.options.event+I,x),this.manager.emit(this.options.event,x)}}),Rn(sn,_n,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Qu]},process:function(x){var I=this.options,V=x.pointers.length===I.pointers,Q=x.distance<I.threshold,ee=x.deltaTime<I.time;if(this.reset(),1&x.eventType&&0===this.count)return this.failTimeout();if(Q&&ee&&V){if(4!=x.eventType)return this.failTimeout();var me=!this.pTime||x.timeStamp-this.pTime<I.interval,ve=!this.pCenter||oa(this.pCenter,x.center)<I.posThreshold;if(this.pTime=x.timeStamp,this.pCenter=x.center,ve&&me?this.count+=1:this.count=1,this._input=x,0==this.count%I.taps)return this.hasRequireFailures()?(this._timer=Tr(function(){this.state=8,this.tryEmit()},I.interval,this),2):8}return 32},failTimeout:function(){return this._timer=Tr(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),Oi.VERSION="2.0.7",Oi.defaults={domEvents:!1,touchAction:ur,enable:!0,inputTarget:null,inputClass:null,preset:[[la,{enable:!1}],[si,{enable:!1},["rotate"]],[we,{direction:6}],[Kr,{direction:6},["swipe"]],[sn],[sn,{event:"doubletap",taps:2},["tap"]],[zl]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},Gl.prototype={set:function(x){return Er(this.options,x),x.touchAction&&this.touchAction.update(),x.inputTarget&&(this.input.destroy(),this.input.target=x.inputTarget,this.input.init()),this},stop:function(x){this.session.stopped=x?2:1},recognize:function(x){var I=this.session;if(!I.stopped){this.touchAction.preventDefaults(x);var V,Q=this.recognizers,ee=I.curRecognizer;(!ee||ee&&8&ee.state)&&(ee=I.curRecognizer=null);for(var me=0;me<Q.length;)V=Q[me],2===I.stopped||ee&&V!=ee&&!V.canRecognizeWith(ee)?V.reset():V.recognize(x),!ee&&14&V.state&&(ee=I.curRecognizer=V),me++}},get:function(x){if(x instanceof _n)return x;for(var I=this.recognizers,V=0;V<I.length;V++)if(I[V].options.event==x)return I[V];return null},add:function(x){if(Zt(x,"add",this))return this;var I=this.get(x.options.event);return I&&this.remove(I),this.recognizers.push(x),x.manager=this,this.touchAction.update(),x},remove:function(x){if(Zt(x,"remove",this))return this;if(x=this.get(x)){var I=this.recognizers,V=Fe(I,x);-1!==V&&(I.splice(V,1),this.touchAction.update())}return this},on:function(x,I){if(x!==Fn&&I!==Fn){var V=this.handlers;return vt(za(x),function(Q){V[Q]=V[Q]||[],V[Q].push(I)}),this}},off:function(x,I){if(x!==Fn){var V=this.handlers;return vt(za(x),function(Q){I?V[Q]&&V[Q].splice(Fe(V[Q],I),1):delete V[Q]}),this}},emit:function(x,I){this.options.domEvents&&function(x,I){var V=fi.createEvent("Event");V.initEvent(x,!0,!0),V.gesture=I,I.target.dispatchEvent(V)}(x,I);var V=this.handlers[x]&&this.handlers[x].slice();if(V&&V.length){I.type=x,I.preventDefault=function(){I.srcEvent.preventDefault()};for(var Q=0;Q<V.length;)V[Q](I),Q++}},destroy:function(){this.element&&Wi(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},Er(Oi,{INPUT_START:1,INPUT_MOVE:2,INPUT_END:4,INPUT_CANCEL:8,STATE_POSSIBLE:1,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:32,DIRECTION_NONE:1,DIRECTION_LEFT:2,DIRECTION_RIGHT:4,DIRECTION_UP:8,DIRECTION_DOWN:16,DIRECTION_HORIZONTAL:6,DIRECTION_VERTICAL:24,DIRECTION_ALL:30,Manager:Gl,Input:cr,TouchAction:Uc,TouchInput:Re,MouseInput:Ii,PointerEventInput:Wo,TouchMouseInput:Gu,SingleTouchInput:Qr,Recognizer:_n,AttrRecognizer:Ai,Tap:sn,Pan:Kr,Swipe:we,Pinch:si,Rotate:la,Press:zl,on:gs,off:$l,each:vt,merge:na,extend:kr,assign:Er,inherit:Rn,bindFn:Ll,prefixed:he}),(void 0!==Je?Je:"undefined"!=typeof self?self:{}).Hammer=Oi,(Xn=function(){return Oi}.call(pi,ne,pi,mo))!==Fn&&(mo.exports=Xn)}(window,document)},216:function(mo,pi){!function(ne){"use strict";function Je(a){var u,h,y,T;for(h=1,y=arguments.length;h<y;h++)for(u in T=arguments[h])a[u]=T[u];return a}var fi=Object.create||function(){function a(){}return function(u){return a.prototype=u,new a}}();function Ut(a,u){var h=Array.prototype.slice;if(a.bind)return a.bind.apply(a,h.call(arguments,1));var y=h.call(arguments,2);return function(){return a.apply(u,y.length?y.concat(h.call(arguments)):arguments)}}var Fn=0;function mt(a){return a._leaflet_id=a._leaflet_id||++Fn,a._leaflet_id}function Fl(a,u,h){var y,T,M,U;return U=function(){y=!1,T&&(M.apply(h,T),T=!1)},M=function(){y?T=arguments:(a.apply(h,arguments),setTimeout(U,u),y=!0)}}function Rl(a,u,h){var y=u[1],T=u[0],M=y-T;return a===y&&h?a:((a-T)%M+M)%M+T}function qt(){return!1}function gt(a,u){var h=Math.pow(10,void 0===u?6:u);return Math.round(a*h)/h}function ta(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")}function Tr(a){return ta(a).split(/\s+/)}function Zt(a,u){for(var h in Object.prototype.hasOwnProperty.call(a,"options")||(a.options=a.options?fi(a.options):{}),u)a.options[h]=u[h];return a.options}function vt(a,u,h){var y=[];for(var T in a)y.push(encodeURIComponent(h?T.toUpperCase():T)+"="+encodeURIComponent(a[T]));return(u&&-1!==u.indexOf("?")?"&":"?")+y.join("&")}var Oc=/\{ *([\w_-]+) *\}/g;function Er(a,u){return a.replace(Oc,function(h,y){var T=u[y];if(void 0===T)throw new Error("No value provided for variable "+h);return"function"==typeof T&&(T=T(u)),T})}var kr=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)};function na(a,u){for(var h=0;h<a.length;h++)if(a[h]===u)return h;return-1}var Rn="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function Ll(a){return window["webkit"+a]||window["moz"+a]||window["ms"+a]}var ja=0;function _t(a){var u=+new Date,h=Math.max(0,16-(u-ja));return ja=u+h,window.setTimeout(a,h)}var gs=window.requestAnimationFrame||Ll("RequestAnimationFrame")||_t,$l=window.cancelAnimationFrame||Ll("CancelAnimationFrame")||Ll("CancelRequestAnimationFrame")||function(a){window.clearTimeout(a)};function un(a,u,h){if(!h||gs!==_t)return gs.call(window,Ut(a,u));a.call(u)}function wn(a){a&&$l.call(window,a)}var za={extend:Je,create:fi,bind:Ut,lastId:Fn,stamp:mt,throttle:Fl,wrapNum:Rl,falseFn:qt,formatNum:gt,trim:ta,splitWords:Tr,setOptions:Zt,getParamString:vt,template:Er,isArray:kr,indexOf:na,emptyImageUrl:Rn,requestFn:gs,cancelFn:$l,requestAnimFrame:un,cancelAnimFrame:wn};function Fe(){}Fe.extend=function(a){var u=function(){this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},h=u.__super__=this.prototype,y=fi(h);for(var T in y.constructor=u,u.prototype=y,this)Object.prototype.hasOwnProperty.call(this,T)&&"prototype"!==T&&"__super__"!==T&&(u[T]=this[T]);return a.statics&&(Je(u,a.statics),delete a.statics),a.includes&&(function(a){if("undefined"!=typeof L&&L&&L.Mixin){a=kr(a)?a:[a];for(var u=0;u<a.length;u++)a[u]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",(new Error).stack)}}(a.includes),Je.apply(null,[y].concat(a.includes)),delete a.includes),y.options&&(a.options=Je(fi(y.options),a.options)),Je(y,a),y._initHooks=[],y.callInitHooks=function(){if(!this._initHooksCalled){h.callInitHooks&&h.callInitHooks.call(this),this._initHooksCalled=!0;for(var M=0,U=y._initHooks.length;M<U;M++)y._initHooks[M].call(this)}},u},Fe.include=function(a){return Je(this.prototype,a),this},Fe.mergeOptions=function(a){return Je(this.prototype.options,a),this},Fe.addInitHook=function(a){var u=Array.prototype.slice.call(arguments,1),h="function"==typeof a?a:function(){this[a].apply(this,u)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(h),this};var Ln={on:function(a,u,h){if("object"==typeof a)for(var y in a)this._on(y,a[y],u);else for(var T=0,M=(a=Tr(a)).length;T<M;T++)this._on(a[T],u,h);return this},off:function(a,u,h){if(a)if("object"==typeof a)for(var y in a)this._off(y,a[y],u);else for(var T=0,M=(a=Tr(a)).length;T<M;T++)this._off(a[T],u,h);else delete this._events;return this},_on:function(a,u,h){this._events=this._events||{};var y=this._events[a];y||(this._events[a]=y=[]),h===this&&(h=void 0);for(var T={fn:u,ctx:h},M=y,U=0,W=M.length;U<W;U++)if(M[U].fn===u&&M[U].ctx===h)return;M.push(T)},_off:function(a,u,h){var y,T,M;if(this._events&&(y=this._events[a])){if(!u){for(T=0,M=y.length;T<M;T++)y[T].fn=qt;return void delete this._events[a]}if(h===this&&(h=void 0),y)for(T=0,M=y.length;T<M;T++){var U=y[T];if(U.ctx===h&&U.fn===u)return U.fn=qt,this._firingCount&&(this._events[a]=y=y.slice()),void y.splice(T,1)}}},fire:function(a,u,h){if(!this.listens(a,h))return this;var y=Je({},u,{type:a,target:this,sourceTarget:u&&u.sourceTarget||this});if(this._events){var T=this._events[a];if(T){this._firingCount=this._firingCount+1||1;for(var M=0,U=T.length;M<U;M++){var W=T[M];W.fn.call(W.ctx||this,y)}this._firingCount--}}return h&&this._propagateEvent(y),this},listens:function(a,u){var h=this._events&&this._events[a];if(h&&h.length)return!0;if(u)for(var y in this._eventParents)if(this._eventParents[y].listens(a,u))return!0;return!1},once:function(a,u,h){if("object"==typeof a){for(var y in a)this.once(y,a[y],u);return this}var T=Ut(function(){this.off(a,u,h).off(a,T,h)},this);return this.on(a,u,h).on(a,T,h)},addEventParent:function(a){return this._eventParents=this._eventParents||{},this._eventParents[mt(a)]=a,this},removeEventParent:function(a){return this._eventParents&&delete this._eventParents[mt(a)],this},_propagateEvent:function(a){for(var u in this._eventParents)this._eventParents[u].fire(a.type,Je({layer:a.target,propagatedFrom:a.target},a),!0)}};Ln.addEventListener=Ln.on,Ln.removeEventListener=Ln.clearAllEventListeners=Ln.off,Ln.addOneTimeEventListener=Ln.once,Ln.fireEvent=Ln.fire,Ln.hasEventListeners=Ln.listens;var he=Fe.extend(Ln);function Qe(a,u,h){this.x=h?Math.round(a):a,this.y=h?Math.round(u):u}var Vu=Math.trunc||function(a){return a>0?Math.floor(a):Math.ceil(a)};function Dt(a,u,h){return a instanceof Qe?a:kr(a)?new Qe(a[0],a[1]):null==a?a:"object"==typeof a&&"x"in a&&"y"in a?new Qe(a.x,a.y):new Qe(a,u,h)}function dn(a,u){if(a)for(var h=u?[a,u]:a,y=0,T=h.length;y<T;y++)this.extend(h[y])}function sr(a,u){return!a||a instanceof dn?a:new dn(a,u)}function Sn(a,u){if(a)for(var h=u?[a,u]:a,y=0,T=h.length;y<T;y++)this.extend(h[y])}function ei(a,u){return a instanceof Sn?a:new Sn(a,u)}function Rt(a,u,h){if(isNaN(a)||isNaN(u))throw new Error("Invalid LatLng object: ("+a+", "+u+")");this.lat=+a,this.lng=+u,void 0!==h&&(this.alt=+h)}function gn(a,u,h){return a instanceof Rt?a:kr(a)&&"object"!=typeof a[0]?3===a.length?new Rt(a[0],a[1],a[2]):2===a.length?new Rt(a[0],a[1]):null:null==a?a:"object"==typeof a&&"lat"in a?new Rt(a.lat,"lng"in a?a.lng:a.lon,a.alt):void 0===u?null:new Rt(a,u,h)}Qe.prototype={clone:function(){return new Qe(this.x,this.y)},add:function(a){return this.clone()._add(Dt(a))},_add:function(a){return this.x+=a.x,this.y+=a.y,this},subtract:function(a){return this.clone()._subtract(Dt(a))},_subtract:function(a){return this.x-=a.x,this.y-=a.y,this},divideBy:function(a){return this.clone()._divideBy(a)},_divideBy:function(a){return this.x/=a,this.y/=a,this},multiplyBy:function(a){return this.clone()._multiplyBy(a)},_multiplyBy:function(a){return this.x*=a,this.y*=a,this},scaleBy:function(a){return new Qe(this.x*a.x,this.y*a.y)},unscaleBy:function(a){return new Qe(this.x/a.x,this.y/a.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=Vu(this.x),this.y=Vu(this.y),this},distanceTo:function(a){var u=(a=Dt(a)).x-this.x,h=a.y-this.y;return Math.sqrt(u*u+h*h)},equals:function(a){return(a=Dt(a)).x===this.x&&a.y===this.y},contains:function(a){return a=Dt(a),Math.abs(a.x)<=Math.abs(this.x)&&Math.abs(a.y)<=Math.abs(this.y)},toString:function(){return"Point("+gt(this.x)+", "+gt(this.y)+")"}},dn.prototype={extend:function(a){return a=Dt(a),this.min||this.max?(this.min.x=Math.min(a.x,this.min.x),this.max.x=Math.max(a.x,this.max.x),this.min.y=Math.min(a.y,this.min.y),this.max.y=Math.max(a.y,this.max.y)):(this.min=a.clone(),this.max=a.clone()),this},getCenter:function(a){return new Qe((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,a)},getBottomLeft:function(){return new Qe(this.min.x,this.max.y)},getTopRight:function(){return new Qe(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(a){var u,h;return(a="number"==typeof a[0]||a instanceof Qe?Dt(a):sr(a))instanceof dn?(u=a.min,h=a.max):u=h=a,u.x>=this.min.x&&h.x<=this.max.x&&u.y>=this.min.y&&h.y<=this.max.y},intersects:function(a){a=sr(a);var u=this.min,h=this.max,y=a.min,T=a.max;return T.x>=u.x&&y.x<=h.x&&T.y>=u.y&&y.y<=h.y},overlaps:function(a){a=sr(a);var u=this.min,h=this.max,y=a.min,T=a.max;return T.x>u.x&&y.x<h.x&&T.y>u.y&&y.y<h.y},isValid:function(){return!(!this.min||!this.max)}},Sn.prototype={extend:function(a){var y,T,u=this._southWest,h=this._northEast;if(a instanceof Rt)y=a,T=a;else{if(!(a instanceof Sn))return a?this.extend(gn(a)||ei(a)):this;if(T=a._northEast,!(y=a._southWest)||!T)return this}return u||h?(u.lat=Math.min(y.lat,u.lat),u.lng=Math.min(y.lng,u.lng),h.lat=Math.max(T.lat,h.lat),h.lng=Math.max(T.lng,h.lng)):(this._southWest=new Rt(y.lat,y.lng),this._northEast=new Rt(T.lat,T.lng)),this},pad:function(a){var u=this._southWest,h=this._northEast,y=Math.abs(u.lat-h.lat)*a,T=Math.abs(u.lng-h.lng)*a;return new Sn(new Rt(u.lat-y,u.lng-T),new Rt(h.lat+y,h.lng+T))},getCenter:function(){return new Rt((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Rt(this.getNorth(),this.getWest())},getSouthEast:function(){return new Rt(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(a){a="number"==typeof a[0]||a instanceof Rt||"lat"in a?gn(a):ei(a);var y,T,u=this._southWest,h=this._northEast;return a instanceof Sn?(y=a.getSouthWest(),T=a.getNorthEast()):y=T=a,y.lat>=u.lat&&T.lat<=h.lat&&y.lng>=u.lng&&T.lng<=h.lng},intersects:function(a){a=ei(a);var u=this._southWest,h=this._northEast,y=a.getSouthWest(),T=a.getNorthEast();return T.lat>=u.lat&&y.lat<=h.lat&&T.lng>=u.lng&&y.lng<=h.lng},overlaps:function(a){a=ei(a);var u=this._southWest,h=this._northEast,y=a.getSouthWest(),T=a.getNorthEast();return T.lat>u.lat&&y.lat<h.lat&&T.lng>u.lng&&y.lng<h.lng},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(a,u){return!!a&&(a=ei(a),this._southWest.equals(a.getSouthWest(),u)&&this._northEast.equals(a.getNorthEast(),u))},isValid:function(){return!(!this._southWest||!this._northEast)}},Rt.prototype={equals:function(a,u){return!!a&&(a=gn(a),Math.max(Math.abs(this.lat-a.lat),Math.abs(this.lng-a.lng))<=(void 0===u?1e-9:u))},toString:function(a){return"LatLng("+gt(this.lat,a)+", "+gt(this.lng,a)+")"},distanceTo:function(a){return go.distance(this,gn(a))},wrap:function(){return go.wrapLatLng(this)},toBounds:function(a){var u=180*a/40075017,h=u/Math.cos(Math.PI/180*this.lat);return ei([this.lat-u,this.lng-h],[this.lat+u,this.lng+h])},clone:function(){return new Rt(this.lat,this.lng,this.alt)}};var a,ar={latLngToPoint:function(a,u){var h=this.projection.project(a),y=this.scale(u);return this.transformation._transform(h,y)},pointToLatLng:function(a,u){var h=this.scale(u),y=this.transformation.untransform(a,h);return this.projection.unproject(y)},project:function(a){return this.projection.project(a)},unproject:function(a){return this.projection.unproject(a)},scale:function(a){return 256*Math.pow(2,a)},zoom:function(a){return Math.log(a/256)/Math.LN2},getProjectedBounds:function(a){if(this.infinite)return null;var u=this.projection.bounds,h=this.scale(a);return new dn(this.transformation.transform(u.min,h),this.transformation.transform(u.max,h))},infinite:!1,wrapLatLng:function(a){var u=this.wrapLng?Rl(a.lng,this.wrapLng,!0):a.lng;return new Rt(this.wrapLat?Rl(a.lat,this.wrapLat,!0):a.lat,u,a.alt)},wrapLatLngBounds:function(a){var u=a.getCenter(),h=this.wrapLatLng(u),y=u.lat-h.lat,T=u.lng-h.lng;if(0===y&&0===T)return a;var M=a.getSouthWest(),U=a.getNorthEast();return new Sn(new Rt(M.lat-y,M.lng-T),new Rt(U.lat-y,U.lng-T))}},go=Je({},ar,{wrapLng:[-180,180],R:6371e3,distance:function(a,u){var h=Math.PI/180,y=a.lat*h,T=u.lat*h,M=Math.sin((u.lat-a.lat)*h/2),U=Math.sin((u.lng-a.lng)*h/2),W=M*M+Math.cos(y)*Math.cos(T)*U*U,K=2*Math.atan2(Math.sqrt(W),Math.sqrt(1-W));return this.R*K}}),ti={R:6378137,MAX_LATITUDE:85.0511287798,project:function(a){var u=Math.PI/180,h=this.MAX_LATITUDE,y=Math.max(Math.min(h,a.lat),-h),T=Math.sin(y*u);return new Qe(this.R*a.lng*u,this.R*Math.log((1+T)/(1-T))/2)},unproject:function(a){var u=180/Math.PI;return new Rt((2*Math.atan(Math.exp(a.y/this.R))-Math.PI/2)*u,a.x*u/this.R)},bounds:(a=6378137*Math.PI,new dn([-a,-a],[a,a]))};function _o(a,u,h,y){if(kr(a))return this._a=a[0],this._b=a[1],this._c=a[2],void(this._d=a[3]);this._a=a,this._b=u,this._c=h,this._d=y}function Xt(a,u,h,y){return new _o(a,u,h,y)}_o.prototype={transform:function(a,u){return this._transform(a.clone(),u)},_transform:function(a,u){return a.x=(u=u||1)*(this._a*a.x+this._b),a.y=u*(this._c*a.y+this._d),a},untransform:function(a,u){return new Qe((a.x/(u=u||1)-this._b)/this._a,(a.y/u-this._d)/this._c)}};var oi=Je({},go,{code:"EPSG:3857",projection:ti,transformation:function(){var a=.5/(Math.PI*ti.R);return Xt(a,.5,-a,.5)}()}),Vl=Je({},oi,{code:"EPSG:900913"});function ia(a){return document.createElementNS("http://www.w3.org/2000/svg",a)}function ra(a,u){var y,T,M,U,W,K,h="";for(y=0,M=a.length;y<M;y++){for(T=0,U=(W=a[y]).length;T<U;T++)h+=(T?"L":"M")+(K=W[T]).x+" "+K.y;h+=u?Se?"z":"x":""}return h||"M0 0"}var hn=document.documentElement.style,lr="ActiveXObject"in window,xi=lr&&!document.addEventListener,Mi="msLaunchUri"in navigator&&!("documentMode"in document),Nc=Qr("webkit"),qr=Qr("android"),rn=Qr("android 2")||Qr("android 3"),cr=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Bu=qr&&Qr("Google")&&cr<537&&!("AudioNode"in window),Hu=!!window.opera,_s=!Mi&&Qr("chrome"),vs=Qr("gecko")&&!Nc&&!Hu&&!lr,zo=!_s&&Qr("safari"),Wa=Qr("phantom"),Fc="OTransition"in hn,Rc=0===navigator.platform.indexOf("Win"),qa=lr&&"transition"in hn,oa="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!rn,Bl="MozPerspective"in hn,Dr=!window.L_DISABLE_3D&&(qa||oa||Bl)&&!Fc&&!Wa,sa="undefined"!=typeof orientation||Qr("mobile"),Lc=sa&&Nc,jh=sa&&oa,Go=!window.PointerEvent&&window.MSPointerEvent,Ii=!(!window.PointerEvent&&!Go),ut=!window.L_NO_TOUCH&&(Ii||"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),Hl=sa&&Hu,rt=sa&&vs,xr=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Wo=function(){var a=!1;try{var u=Object.defineProperty({},"passive",{get:function(){a=!0}});window.addEventListener("testPassiveEventSupport",qt,u),window.removeEventListener("testPassiveEventSupport",qt,u)}catch(h){}return a}(),ot=!!document.createElement("canvas").getContext,Se=!(!document.createElementNS||!ia("svg").createSVGRect),Qa=!Se&&function(){try{var a=document.createElement("div");a.innerHTML='<v:shape adj="1"/>';var u=a.firstChild;return u.style.behavior="url(#default#VML)",u&&"object"==typeof u.adj}catch(h){return!1}}();function Qr(a){return navigator.userAgent.toLowerCase().indexOf(a)>=0}var ys={ie:lr,ielt9:xi,edge:Mi,webkit:Nc,android:qr,android23:rn,androidStock:Bu,opera:Hu,chrome:_s,gecko:vs,safari:zo,phantom:Wa,opera12:Fc,win:Rc,ie3d:qa,webkit3d:oa,gecko3d:Bl,any3d:Dr,mobile:sa,mobileWebkit:Lc,mobileWebkit3d:jh,msPointer:Go,pointer:Ii,touch:ut,mobileOpera:Hl,mobileGecko:rt,retina:xr,passiveEvents:Wo,canvas:ot,svg:Se,vml:Qa},ju=Go?"MSPointerDown":"pointerdown",Za=Go?"MSPointerMove":"pointermove",Re=Go?"MSPointerUp":"pointerup",ni=Go?"MSPointerCancel":"pointercancel",aa={},zu=!1;function Gu(a,u,h,y){return"touchstart"===u?function(a,u,h){var y=Ut(function(T){T.MSPOINTER_TYPE_TOUCH&&T.pointerType===T.MSPOINTER_TYPE_TOUCH&&Fi(T),ur(T,u)});a["_leaflet_touchstart"+h]=y,a.addEventListener(ju,y,!1),zu||(document.addEventListener(ju,wm,!0),document.addEventListener(Za,Wu,!0),document.addEventListener(Re,qu,!0),document.addEventListener(ni,qu,!0),zu=!0)}(a,h,y):"touchmove"===u?function(a,u,h){var y=function(T){T.pointerType===(T.MSPOINTER_TYPE_MOUSE||"mouse")&&0===T.buttons||ur(T,u)};a["_leaflet_touchmove"+h]=y,a.addEventListener(Za,y,!1)}(a,h,y):"touchend"===u&&function(a,u,h){var y=function(T){ur(T,u)};a["_leaflet_touchend"+h]=y,a.addEventListener(Re,y,!1),a.addEventListener(ni,y,!1)}(a,h,y),this}function wm(a){aa[a.pointerId]=a}function Wu(a){aa[a.pointerId]&&(aa[a.pointerId]=a)}function qu(a){delete aa[a.pointerId]}function ur(a,u){for(var h in a.touches=[],aa)a.touches.push(aa[h]);a.changedTouches=[a],u(a)}var vo=Go?"MSPointerDown":Ii?"pointerdown":"touchstart",bs=Go?"MSPointerUp":Ii?"pointerup":"touchend",Zr="_leaflet_";var hr,Cs,Gl,x,I,Zu=la(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),ii=la(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),jt="webkitTransition"===ii||"OTransition"===ii?ii+"End":"transitionend";function dr(a){return"string"==typeof a?document.getElementById(a):a}function yo(a,u){var h=a.style[u]||a.currentStyle&&a.currentStyle[u];if((!h||"auto"===h)&&document.defaultView){var y=document.defaultView.getComputedStyle(a,null);h=y?y[u]:null}return"auto"===h?null:h}function yt(a,u,h){var y=document.createElement(a);return y.className=u||"",h&&h.appendChild(y),y}function B(a){var u=a.parentNode;u&&u.removeChild(a)}function bo(a){for(;a.firstChild;)a.removeChild(a.firstChild)}function Te(a){var u=a.parentNode;u&&u.lastChild!==a&&u.appendChild(a)}function _n(a){var u=a.parentNode;u&&u.firstChild!==a&&u.insertBefore(a,u.firstChild)}function Ka(a,u){if(void 0!==a.classList)return a.classList.contains(u);var h=Kr(a);return h.length>0&&new RegExp("(^|\\s)"+u+"(\\s|$)").test(h)}function Xe(a,u){if(void 0!==a.classList)for(var h=Tr(u),y=0,T=h.length;y<T;y++)a.classList.add(h[y]);else if(!Ka(a,u)){var M=Kr(a);Ai(a,(M?M+" ":"")+u)}}function on(a,u){void 0!==a.classList?a.classList.remove(u):Ai(a,ta((" "+Kr(a)+" ").replace(" "+u+" "," ")))}function Ai(a,u){void 0===a.className.baseVal?a.className=u:a.className.baseVal=u}function Kr(a){return a.correspondingElement&&(a=a.correspondingElement),void 0===a.className.baseVal?a.className:a.className.baseVal}function si(a,u){"opacity"in a.style?a.style.opacity=u:"filter"in a.style&&function(a,u){var h=!1,y="DXImageTransform.Microsoft.Alpha";try{h=a.filters.item(y)}catch(T){if(1===u)return}u=Math.round(100*u),h?(h.Enabled=100!==u,h.Opacity=u):a.style.filter+=" progid:"+y+"(opacity="+u+")"}(a,u)}function la(a){for(var u=document.documentElement.style,h=0;h<a.length;h++)if(a[h]in u)return a[h];return!1}function we(a,u,h){var y=u||new Qe(0,0);a.style[Zu]=(qa?"translate("+y.x+"px,"+y.y+"px)":"translate3d("+y.x+"px,"+y.y+"px,0)")+(h?" scale("+h+")":"")}function sn(a,u){a._leaflet_pos=u,Dr?we(a,u):(a.style.left=u.x+"px",a.style.top=u.y+"px")}function Oi(a){return a._leaflet_pos||new Qe(0,0)}if("onselectstart"in document)hr=function(){Pe(window,"selectstart",Fi)},Cs=function(){dt(window,"selectstart",Fi)};else{var Wi=la(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);hr=function(){if(Wi){var a=document.documentElement.style;Gl=a[Wi],a[Wi]="none"}},Cs=function(){Wi&&(document.documentElement.style[Wi]=Gl,Gl=void 0)}}function Ni(){Pe(window,"dragstart",Fi)}function Ku(){dt(window,"dragstart",Fi)}function V(a){for(;-1===a.tabIndex;)a=a.parentNode;!a.style||(Q(),x=a,I=a.style.outline,a.style.outline="none",Pe(window,"keydown",Q))}function Q(){!x||(x.style.outline=I,x=void 0,I=void 0,dt(window,"keydown",Q))}function ee(a){do{a=a.parentNode}while(!(a.offsetWidth&&a.offsetHeight||a===document.body));return a}function me(a){var u=a.getBoundingClientRect();return{x:u.width/a.offsetWidth||1,y:u.height/a.offsetHeight||1,boundingClientRect:u}}var ve={TRANSFORM:Zu,TRANSITION:ii,TRANSITION_END:jt,get:dr,getStyle:yo,create:yt,remove:B,empty:bo,toFront:Te,toBack:_n,hasClass:Ka,addClass:Xe,removeClass:on,setClass:Ai,getClass:Kr,setOpacity:si,testProp:la,setTransform:we,setPosition:sn,getPosition:Oi,disableTextSelection:hr,enableTextSelection:Cs,disableImageDrag:Ni,enableImageDrag:Ku,preventOutline:V,restoreOutline:Q,getSizedParentNode:ee,getScale:me};function Pe(a,u,h,y){if("object"==typeof u)for(var T in u)ql(a,T,u[T],h);else for(var M=0,U=(u=Tr(u)).length;M<U;M++)ql(a,u[M],h,y);return this}var en="_leaflet_events";function dt(a,u,h,y){if("object"==typeof u)for(var T in u)Vc(a,T,u[T],h);else if(u)for(var M=0,U=(u=Tr(u)).length;M<U;M++)Vc(a,u[M],h,y);else{for(var W in a[en])Vc(a,W,a[en][W]);delete a[en]}return this}function bt(){if(Ii)return!(Mi||zo)}var Wl={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function ql(a,u,h,y){var T=u+mt(h)+(y?"_"+mt(y):"");if(a[en]&&a[en][T])return this;var M=function(W){return h.call(y||a,W||window.event)},U=M;Ii&&0===u.indexOf("touch")?Gu(a,u,M,T):ut&&"dblclick"===u&&!bt()?function(a,u,h){var y,T,M=!1;function W(J){if(Ii){if(!J.isPrimary||"mouse"===J.pointerType)return}else if(J.touches.length>1)return;var ge=Date.now(),De=ge-(y||ge);T=J.touches?J.touches[0]:J,M=De>0&&De<=250,y=ge}function K(J){if(M&&!T.cancelBubble){if(Ii){if("mouse"===J.pointerType)return;var De,Pt,ge={};for(Pt in T)ge[Pt]=(De=T[Pt])&&De.bind?De.bind(T):De;T=ge}T.type="dblclick",T.button=0,u(T),y=null}}a[Zr+vo+h]=W,a[Zr+bs+h]=K,a[Zr+"dblclick"+h]=u,a.addEventListener(vo,W,!!Wo&&{passive:!1}),a.addEventListener(bs,K,!!Wo&&{passive:!1}),a.addEventListener("dblclick",u,!1)}(a,M,T):"addEventListener"in a?"touchstart"===u||"touchmove"===u||"wheel"===u||"mousewheel"===u?a.addEventListener(Wl[u]||u,M,!!Wo&&{passive:!1}):"mouseenter"===u||"mouseleave"===u?a.addEventListener(Wl[u],M=function(W){W=W||window.event,Xu(a,W)&&U(W)},!1):a.addEventListener(u,U,!1):"attachEvent"in a&&a.attachEvent("on"+u,M),a[en]=a[en]||{},a[en][T]=M}function Vc(a,u,h,y){var T=u+mt(h)+(y?"_"+mt(y):""),M=a[en]&&a[en][T];if(!M)return this;Ii&&0===u.indexOf("touch")?function(a,u,h){var y=a["_leaflet_"+u+h];"touchstart"===u?a.removeEventListener(ju,y,!1):"touchmove"===u?a.removeEventListener(Za,y,!1):"touchend"===u&&(a.removeEventListener(Re,y,!1),a.removeEventListener(ni,y,!1))}(a,u,T):ut&&"dblclick"===u&&!bt()?function(a,u){var y=a[Zr+bs+u],T=a[Zr+"dblclick"+u];a.removeEventListener(vo,a[Zr+vo+u],!!Wo&&{passive:!1}),a.removeEventListener(bs,y,!!Wo&&{passive:!1}),a.removeEventListener("dblclick",T,!1)}(a,T):"removeEventListener"in a?a.removeEventListener(Wl[u]||u,M,!1):"detachEvent"in a&&a.detachEvent("on"+u,M),a[en][T]=null}function ca(a){return a.stopPropagation?a.stopPropagation():a.originalEvent?a.originalEvent._stopped=!0:a.cancelBubble=!0,et(a),this}function Gh(a){return ql(a,"wheel",ca),this}function Mr(a){return Pe(a,"mousedown touchstart dblclick",ca),ql(a,"click",Ju),this}function Fi(a){return a.preventDefault?a.preventDefault():a.returnValue=!1,this}function ws(a){return Fi(a),ca(a),this}function Y(a,u){if(!u)return new Qe(a.clientX,a.clientY);var h=me(u),y=h.boundingClientRect;return new Qe((a.clientX-y.left)/h.x-u.clientLeft,(a.clientY-y.top)/h.y-u.clientTop)}var ky=Rc&&_s?2*window.devicePixelRatio:vs?window.devicePixelRatio:1;function Wh(a){return Mi?a.wheelDeltaY/2:a.deltaY&&0===a.deltaMode?-a.deltaY/ky:a.deltaY&&1===a.deltaMode?20*-a.deltaY:a.deltaY&&2===a.deltaMode?60*-a.deltaY:a.deltaX||a.deltaZ?0:a.wheelDelta?(a.wheelDeltaY||a.wheelDelta)/2:a.detail&&Math.abs(a.detail)<32765?20*-a.detail:a.detail?a.detail/-32765*60:0}var Yu={};function Ju(a){Yu[a.type]=!0}function et(a){var u=Yu[a.type];return Yu[a.type]=!1,u}function Xu(a,u){var h=u.relatedTarget;if(!h)return!0;try{for(;h&&h!==a;)h=h.parentNode}catch(y){return!1}return h!==a}var Sm={on:Pe,off:dt,stopPropagation:ca,disableScrollPropagation:Gh,disableClickPropagation:Mr,preventDefault:Fi,stop:ws,getMousePosition:Y,getWheelDelta:Wh,fakeStop:Ju,skipped:et,isExternalTarget:Xu,addListener:Pe,removeListener:dt},te=he.extend({run:function(a,u,h,y){this.stop(),this._el=a,this._inProgress=!0,this._duration=h||.25,this._easeOutPower=1/Math.max(y||.5,.2),this._startPos=Oi(a),this._offset=u.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){!this._inProgress||(this._step(!0),this._complete())},_animate:function(){this._animId=un(this._animate,this),this._step()},_step:function(a){var u=+new Date-this._startTime,h=1e3*this._duration;u<h?this._runFrame(this._easeOut(u/h),a):(this._runFrame(1),this._complete())},_runFrame:function(a,u){var h=this._startPos.add(this._offset.multiplyBy(a));u&&h._round(),sn(this._el,h),this.fire("step")},_complete:function(){wn(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(a){return 1-Math.pow(1-a,this._easeOutPower)}}),Ve=he.extend({options:{crs:oi,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(a,u){u=Zt(this,u),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(a),this._initLayout(),this._onResize=Ut(this._onResize,this),this._initEvents(),u.maxBounds&&this.setMaxBounds(u.maxBounds),void 0!==u.zoom&&(this._zoom=this._limitZoom(u.zoom)),u.center&&void 0!==u.zoom&&this.setView(gn(u.center),u.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=ii&&Dr&&!Hl&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Pe(this._proxy,jt,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(a,u,h){return u=void 0===u?this._zoom:this._limitZoom(u),a=this._limitCenter(gn(a),u,this.options.maxBounds),h=h||{},this._stop(),this._loaded&&!h.reset&&!0!==h&&(void 0!==h.animate&&(h.zoom=Je({animate:h.animate},h.zoom),h.pan=Je({animate:h.animate,duration:h.duration},h.pan)),this._zoom!==u?this._tryAnimatedZoom&&this._tryAnimatedZoom(a,u,h.zoom):this._tryAnimatedPan(a,h.pan))?(clearTimeout(this._sizeTimer),this):(this._resetView(a,u),this)},setZoom:function(a,u){return this._loaded?this.setView(this.getCenter(),a,{zoom:u}):(this._zoom=a,this)},zoomIn:function(a,u){return this.setZoom(this._zoom+(a=a||(Dr?this.options.zoomDelta:1)),u)},zoomOut:function(a,u){return this.setZoom(this._zoom-(a=a||(Dr?this.options.zoomDelta:1)),u)},setZoomAround:function(a,u,h){var y=this.getZoomScale(u),T=this.getSize().divideBy(2),U=(a instanceof Qe?a:this.latLngToContainerPoint(a)).subtract(T).multiplyBy(1-1/y),W=this.containerPointToLatLng(T.add(U));return this.setView(W,u,{zoom:h})},_getBoundsCenterZoom:function(a,u){u=u||{},a=a.getBounds?a.getBounds():ei(a);var h=Dt(u.paddingTopLeft||u.padding||[0,0]),y=Dt(u.paddingBottomRight||u.padding||[0,0]),T=this.getBoundsZoom(a,!1,h.add(y));if((T="number"==typeof u.maxZoom?Math.min(u.maxZoom,T):T)===1/0)return{center:a.getCenter(),zoom:T};var M=y.subtract(h).divideBy(2),U=this.project(a.getSouthWest(),T),W=this.project(a.getNorthEast(),T);return{center:this.unproject(U.add(W).divideBy(2).add(M),T),zoom:T}},fitBounds:function(a,u){if(!(a=ei(a)).isValid())throw new Error("Bounds are not valid.");var h=this._getBoundsCenterZoom(a,u);return this.setView(h.center,h.zoom,u)},fitWorld:function(a){return this.fitBounds([[-90,-180],[90,180]],a)},panTo:function(a,u){return this.setView(a,this._zoom,{pan:u})},panBy:function(a,u){if(u=u||{},!(a=Dt(a).round()).x&&!a.y)return this.fire("moveend");if(!0!==u.animate&&!this.getSize().contains(a))return this._resetView(this.unproject(this.project(this.getCenter()).add(a)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new te,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),u.noMoveStart||this.fire("movestart"),!1!==u.animate){Xe(this._mapPane,"leaflet-pan-anim");var h=this._getMapPanePos().subtract(a).round();this._panAnim.run(this._mapPane,h,u.duration||.25,u.easeLinearity)}else this._rawPanBy(a),this.fire("move").fire("moveend");return this},flyTo:function(a,u,h){if(!1===(h=h||{}).animate||!Dr)return this.setView(a,u,h);this._stop();var y=this.project(this.getCenter()),T=this.project(a),M=this.getSize(),U=this._zoom;a=gn(a),u=void 0===u?U:u;var W=Math.max(M.x,M.y),K=W*this.getZoomScale(U,u),J=T.distanceTo(y)||1,ge=1.42,De=ge*ge;function Pt(Un){var cd=(K*K-W*W+(Un?-1:1)*De*De*J*J)/(2*(Un?K:W)*De*J),ap=Math.sqrt(cd*cd+1)-cd;return ap<1e-9?-18:Math.log(ap)}function Tn(Un){return(Math.exp(Un)-Math.exp(-Un))/2}function $i(Un){return(Math.exp(Un)+Math.exp(-Un))/2}var Pr=Pt(0);function Ry(Un){return W*($i(Pr)*function(Un){return Tn(Un)/$i(Un)}(Pr+ge*Un)-Tn(Pr))/De}var Ly=Date.now(),$m=(Pt(1)-Pr)/ge,sp=h.duration?1e3*h.duration:1e3*$m*.8;return this._moveStart(!0,h.noMoveStart),function ad(){var Un=(Date.now()-Ly)/sp,nc=function(Un){return 1-Math.pow(1-Un,1.5)}(Un)*$m;Un<=1?(this._flyToFrame=un(ad,this),this._move(this.unproject(y.add(T.subtract(y).multiplyBy(Ry(nc)/J)),U),this.getScaleZoom(W/function(Un){return W*($i(Pr)/$i(Pr+ge*Un))}(nc),U),{flyTo:!0})):this._move(a,u)._moveEnd(!0)}.call(this),this},flyToBounds:function(a,u){var h=this._getBoundsCenterZoom(a,u);return this.flyTo(h.center,h.zoom,u)},setMaxBounds:function(a){return(a=ei(a)).isValid()?(this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this.options.maxBounds=a,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this.off("moveend",this._panInsideMaxBounds))},setMinZoom:function(a){var u=this.options.minZoom;return this.options.minZoom=a,this._loaded&&u!==a&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(a):this},setMaxZoom:function(a){var u=this.options.maxZoom;return this.options.maxZoom=a,this._loaded&&u!==a&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(a):this},panInsideBounds:function(a,u){this._enforcingBounds=!0;var h=this.getCenter(),y=this._limitCenter(h,this._zoom,ei(a));return h.equals(y)||this.panTo(y,u),this._enforcingBounds=!1,this},panInside:function(a,u){var h=Dt((u=u||{}).paddingTopLeft||u.padding||[0,0]),y=Dt(u.paddingBottomRight||u.padding||[0,0]),T=this.getCenter(),M=this.project(T),U=this.project(a),W=this.getPixelBounds(),K=W.getSize().divideBy(2),J=sr([W.min.add(h),W.max.subtract(y)]);if(!J.contains(U)){this._enforcingBounds=!0;var ge=M.subtract(U),De=Dt(U.x+ge.x,U.y+ge.y);(U.x<J.min.x||U.x>J.max.x)&&(De.x=M.x-ge.x,ge.x>0?De.x+=K.x-h.x:De.x-=K.x-y.x),(U.y<J.min.y||U.y>J.max.y)&&(De.y=M.y-ge.y,ge.y>0?De.y+=K.y-h.y:De.y-=K.y-y.y),this.panTo(this.unproject(De),u),this._enforcingBounds=!1}return this},invalidateSize:function(a){if(!this._loaded)return this;a=Je({animate:!1,pan:!0},!0===a?{animate:!0}:a);var u=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var h=this.getSize(),y=u.divideBy(2).round(),T=h.divideBy(2).round(),M=y.subtract(T);return M.x||M.y?(a.animate&&a.pan?this.panBy(M):(a.pan&&this._rawPanBy(M),this.fire("move"),a.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(Ut(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:u,newSize:h})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(a){if(a=this._locateOptions=Je({timeout:1e4,watch:!1},a),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var u=Ut(this._handleGeolocationResponse,this),h=Ut(this._handleGeolocationError,this);return a.watch?this._locationWatchId=navigator.geolocation.watchPosition(u,h,a):navigator.geolocation.getCurrentPosition(u,h,a),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(a){var u=a.code,h=a.message||(1===u?"permission denied":2===u?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:u,message:"Geolocation error: "+h+"."})},_handleGeolocationResponse:function(a){var y=new Rt(a.coords.latitude,a.coords.longitude),T=y.toBounds(2*a.coords.accuracy),M=this._locateOptions;if(M.setView){var U=this.getBoundsZoom(T);this.setView(y,M.maxZoom?Math.min(U,M.maxZoom):U)}var W={latlng:y,bounds:T,timestamp:a.timestamp};for(var K in a.coords)"number"==typeof a.coords[K]&&(W[K]=a.coords[K]);this.fire("locationfound",W)},addHandler:function(a,u){if(!u)return this;var h=this[a]=new u(this);return this._handlers.push(h),this.options[a]&&h.enable(),this},remove:function(){if(this._initEvents(!0),this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch(u){this._container._leaflet_id=void 0,this._containerId=void 0}var a;for(a in void 0!==this._locationWatchId&&this.stopLocate(),this._stop(),B(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(wn(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload"),this._layers)this._layers[a].remove();for(a in this._panes)B(this._panes[a]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(a,u){var y=yt("div","leaflet-pane"+(a?" leaflet-"+a.replace("Pane","")+"-pane":""),u||this._mapPane);return a&&(this._panes[a]=y),y},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var a=this.getPixelBounds();return new Sn(this.unproject(a.getBottomLeft()),this.unproject(a.getTopRight()))},getMinZoom:function(){return void 0===this.options.minZoom?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return void 0===this.options.maxZoom?void 0===this._layersMaxZoom?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(a,u,h){a=ei(a),h=Dt(h||[0,0]);var y=this.getZoom()||0,T=this.getMinZoom(),M=this.getMaxZoom(),U=a.getNorthWest(),W=a.getSouthEast(),K=this.getSize().subtract(h),J=sr(this.project(W,y),this.project(U,y)).getSize(),ge=Dr?this.options.zoomSnap:1,De=K.x/J.x,Pt=K.y/J.y,Tn=u?Math.max(De,Pt):Math.min(De,Pt);return y=this.getScaleZoom(Tn,y),ge&&(y=Math.round(y/(ge/100))*(ge/100),y=u?Math.ceil(y/ge)*ge:Math.floor(y/ge)*ge),Math.max(T,Math.min(M,y))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new Qe(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(a,u){var h=this._getTopLeftPoint(a,u);return new dn(h,h.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(a){return this.options.crs.getProjectedBounds(void 0===a?this.getZoom():a)},getPane:function(a){return"string"==typeof a?this._panes[a]:a},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(a,u){var h=this.options.crs;return u=void 0===u?this._zoom:u,h.scale(a)/h.scale(u)},getScaleZoom:function(a,u){var h=this.options.crs,y=h.zoom(a*h.scale(u=void 0===u?this._zoom:u));return isNaN(y)?1/0:y},project:function(a,u){return u=void 0===u?this._zoom:u,this.options.crs.latLngToPoint(gn(a),u)},unproject:function(a,u){return u=void 0===u?this._zoom:u,this.options.crs.pointToLatLng(Dt(a),u)},layerPointToLatLng:function(a){var u=Dt(a).add(this.getPixelOrigin());return this.unproject(u)},latLngToLayerPoint:function(a){return this.project(gn(a))._round()._subtract(this.getPixelOrigin())},wrapLatLng:function(a){return this.options.crs.wrapLatLng(gn(a))},wrapLatLngBounds:function(a){return this.options.crs.wrapLatLngBounds(ei(a))},distance:function(a,u){return this.options.crs.distance(gn(a),gn(u))},containerPointToLayerPoint:function(a){return Dt(a).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(a){return Dt(a).add(this._getMapPanePos())},containerPointToLatLng:function(a){var u=this.containerPointToLayerPoint(Dt(a));return this.layerPointToLatLng(u)},latLngToContainerPoint:function(a){return this.layerPointToContainerPoint(this.latLngToLayerPoint(gn(a)))},mouseEventToContainerPoint:function(a){return Y(a,this._container)},mouseEventToLayerPoint:function(a){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(a))},mouseEventToLatLng:function(a){return this.layerPointToLatLng(this.mouseEventToLayerPoint(a))},_initContainer:function(a){var u=this._container=dr(a);if(!u)throw new Error("Map container not found.");if(u._leaflet_id)throw new Error("Map container is already initialized.");Pe(u,"scroll",this._onScroll,this),this._containerId=mt(u)},_initLayout:function(){var a=this._container;this._fadeAnimated=this.options.fadeAnimation&&Dr,Xe(a,"leaflet-container"+(ut?" leaflet-touch":"")+(xr?" leaflet-retina":"")+(xi?" leaflet-oldie":"")+(zo?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var u=yo(a,"position");"absolute"!==u&&"relative"!==u&&"fixed"!==u&&(a.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var a=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),sn(this._mapPane,new Qe(0,0)),this.createPane("tilePane"),this.createPane("shadowPane"),this.createPane("overlayPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Xe(a.markerPane,"leaflet-zoom-hide"),Xe(a.shadowPane,"leaflet-zoom-hide"))},_resetView:function(a,u){sn(this._mapPane,new Qe(0,0));var h=!this._loaded;this._loaded=!0,u=this._limitZoom(u),this.fire("viewprereset");var y=this._zoom!==u;this._moveStart(y,!1)._move(a,u)._moveEnd(y),this.fire("viewreset"),h&&this.fire("load")},_moveStart:function(a,u){return a&&this.fire("zoomstart"),u||this.fire("movestart"),this},_move:function(a,u,h){void 0===u&&(u=this._zoom);var y=this._zoom!==u;return this._zoom=u,this._lastCenter=a,this._pixelOrigin=this._getNewPixelOrigin(a),(y||h&&h.pinch)&&this.fire("zoom",h),this.fire("move",h)},_moveEnd:function(a){return a&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return wn(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(a){sn(this._mapPane,this._getMapPanePos().subtract(a))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(a){this._targets={},this._targets[mt(this._container)]=this;var u=a?dt:Pe;u(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&u(window,"resize",this._onResize,this),Dr&&this.options.transform3DLimit&&(a?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){wn(this._resizeRequest),this._resizeRequest=un(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var a=this._getMapPanePos();Math.max(Math.abs(a.x),Math.abs(a.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(a,u){for(var y,h=[],T="mouseout"===u||"mouseover"===u,M=a.target||a.srcElement,U=!1;M;){if((y=this._targets[mt(M)])&&("click"===u||"preclick"===u)&&!a._simulated&&this._draggableMoved(y)){U=!0;break}if(y&&y.listens(u,!0)&&(T&&!Xu(M,a)||(h.push(y),T))||M===this._container)break;M=M.parentNode}return!h.length&&!U&&!T&&Xu(M,a)&&(h=[this]),h},_handleDOMEvent:function(a){if(this._loaded&&!et(a)){var u=a.type;("mousedown"===u||"keypress"===u||"keyup"===u||"keydown"===u)&&V(a.target||a.srcElement),this._fireDOMEvent(a,u)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(a,u,h){if("click"===a.type){var y=Je({},a);y.type="preclick",this._fireDOMEvent(y,y.type,h)}if(!a._stopped&&(h=(h||[]).concat(this._findEventTargets(a,u))).length){var T=h[0];"contextmenu"===u&&T.listens(u,!0)&&Fi(a);var M={originalEvent:a};if("keypress"!==a.type&&"keydown"!==a.type&&"keyup"!==a.type){var U=T.getLatLng&&(!T._radius||T._radius<=10);M.containerPoint=U?this.latLngToContainerPoint(T.getLatLng()):this.mouseEventToContainerPoint(a),M.layerPoint=this.containerPointToLayerPoint(M.containerPoint),M.latlng=U?T.getLatLng():this.layerPointToLatLng(M.layerPoint)}for(var W=0;W<h.length;W++)if(h[W].fire(u,M,!0),M.originalEvent._stopped||!1===h[W].options.bubblingMouseEvents&&-1!==na(this._mouseEvents,u))return}},_draggableMoved:function(a){return(a=a.dragging&&a.dragging.enabled()?a:this).dragging&&a.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var a=0,u=this._handlers.length;a<u;a++)this._handlers[a].disable()},whenReady:function(a,u){return this._loaded?a.call(u||this,{target:this}):this.on("load",a,u),this},_getMapPanePos:function(){return Oi(this._mapPane)||new Qe(0,0)},_moved:function(){var a=this._getMapPanePos();return a&&!a.equals([0,0])},_getTopLeftPoint:function(a,u){return(a&&void 0!==u?this._getNewPixelOrigin(a,u):this.getPixelOrigin()).subtract(this._getMapPanePos())},_getNewPixelOrigin:function(a,u){var h=this.getSize()._divideBy(2);return this.project(a,u)._subtract(h)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(a,u,h){var y=this._getNewPixelOrigin(h,u);return this.project(a,u)._subtract(y)},_latLngBoundsToNewLayerBounds:function(a,u,h){var y=this._getNewPixelOrigin(h,u);return sr([this.project(a.getSouthWest(),u)._subtract(y),this.project(a.getNorthWest(),u)._subtract(y),this.project(a.getSouthEast(),u)._subtract(y),this.project(a.getNorthEast(),u)._subtract(y)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(a){return this.latLngToLayerPoint(a).subtract(this._getCenterLayerPoint())},_limitCenter:function(a,u,h){if(!h)return a;var y=this.project(a,u),T=this.getSize().divideBy(2),M=new dn(y.subtract(T),y.add(T)),U=this._getBoundsOffset(M,h,u);return U.round().equals([0,0])?a:this.unproject(y.add(U),u)},_limitOffset:function(a,u){if(!u)return a;var h=this.getPixelBounds(),y=new dn(h.min.add(a),h.max.add(a));return a.add(this._getBoundsOffset(y,u))},_getBoundsOffset:function(a,u,h){var y=sr(this.project(u.getNorthEast(),h),this.project(u.getSouthWest(),h)),T=y.min.subtract(a.min),M=y.max.subtract(a.max);return new Qe(this._rebound(T.x,-M.x),this._rebound(T.y,-M.y))},_rebound:function(a,u){return a+u>0?Math.round(a-u)/2:Math.max(0,Math.ceil(a))-Math.max(0,Math.floor(u))},_limitZoom:function(a){var u=this.getMinZoom(),h=this.getMaxZoom(),y=Dr?this.options.zoomSnap:1;return y&&(a=Math.round(a/y)*y),Math.max(u,Math.min(h,a))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){on(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(a,u){var h=this._getCenterOffset(a)._trunc();return!(!0!==(u&&u.animate)&&!this.getSize().contains(h)||(this.panBy(h,u),0))},_createAnimProxy:function(){var a=this._proxy=yt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(a),this.on("zoomanim",function(u){var h=Zu,y=this._proxy.style[h];we(this._proxy,this.project(u.center,u.zoom),this.getZoomScale(u.zoom,1)),y===this._proxy.style[h]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){B(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var a=this.getCenter(),u=this.getZoom();we(this._proxy,this.project(a,u),this.getZoomScale(u,1))},_catchTransitionEnd:function(a){this._animatingZoom&&a.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(a,u,h){if(this._animatingZoom)return!0;if(h=h||{},!this._zoomAnimated||!1===h.animate||this._nothingToAnimate()||Math.abs(u-this._zoom)>this.options.zoomAnimationThreshold)return!1;var y=this.getZoomScale(u),T=this._getCenterOffset(a)._divideBy(1-1/y);return!(!0!==h.animate&&!this.getSize().contains(T)||(un(function(){this._moveStart(!0,!1)._animateZoom(a,u,!0)},this),0))},_animateZoom:function(a,u,h,y){!this._mapPane||(h&&(this._animatingZoom=!0,this._animateToCenter=a,this._animateToZoom=u,Xe(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:a,zoom:u,noUpdate:y}),setTimeout(Ut(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){!this._animatingZoom||(this._mapPane&&on(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom),un(function(){this._moveEnd(!0)},this))}});var ai=Fe.extend({options:{position:"topright"},initialize:function(a){Zt(this,a)},getPosition:function(){return this.options.position},setPosition:function(a){var u=this._map;return u&&u.removeControl(this),this.options.position=a,u&&u.addControl(this),this},getContainer:function(){return this._container},addTo:function(a){this.remove(),this._map=a;var u=this._container=this.onAdd(a),h=this.getPosition(),y=a._controlCorners[h];return Xe(u,"leaflet-control"),-1!==h.indexOf("bottom")?y.insertBefore(u,y.firstChild):y.appendChild(u),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(B(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(a){this._map&&a&&a.screenX>0&&a.screenY>0&&this._map.getContainer().focus()}}),Co=function(a){return new ai(a)};Ve.include({addControl:function(a){return a.addTo(this),this},removeControl:function(a){return a.remove(),this},_initControlPos:function(){var a=this._controlCorners={},u="leaflet-",h=this._controlContainer=yt("div",u+"control-container",this._container);function y(T,M){a[T+M]=yt("div",u+T+" "+u+M,h)}y("top","left"),y("top","right"),y("bottom","left"),y("bottom","right")},_clearControlPos:function(){for(var a in this._controlCorners)B(this._controlCorners[a]);B(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Ir=ai.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(a,u,h,y){return h<y?-1:y<h?1:0}},initialize:function(a,u,h){for(var y in Zt(this,h),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,a)this._addLayer(a[y],y);for(y in u)this._addLayer(u[y],y,!0)},onAdd:function(a){this._initLayout(),this._update(),this._map=a,a.on("zoomend",this._checkDisabledLayers,this);for(var u=0;u<this._layers.length;u++)this._layers[u].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(a){return ai.prototype.addTo.call(this,a),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var a=0;a<this._layers.length;a++)this._layers[a].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(a,u){return this._addLayer(a,u),this._map?this._update():this},addOverlay:function(a,u){return this._addLayer(a,u,!0),this._map?this._update():this},removeLayer:function(a){a.off("add remove",this._onLayerChange,this);var u=this._getLayer(mt(a));return u&&this._layers.splice(this._layers.indexOf(u),1),this._map?this._update():this},expand:function(){Xe(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var a=this._map.getSize().y-(this._container.offsetTop+50);return a<this._section.clientHeight?(Xe(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=a+"px"):on(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return on(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var a="leaflet-control-layers",u=this._container=yt("div",a),h=this.options.collapsed;u.setAttribute("aria-haspopup",!0),Mr(u),Gh(u);var y=this._section=yt("section",a+"-list");h&&(this._map.on("click",this.collapse,this),qr||Pe(u,{mouseenter:this.expand,mouseleave:this.collapse},this));var T=this._layersLink=yt("a",a+"-toggle",u);T.href="#",T.title="Layers",ut?(Pe(T,"click",ws),Pe(T,"click",this.expand,this)):Pe(T,"focus",this.expand,this),h||this.expand(),this._baseLayersList=yt("div",a+"-base",y),this._separator=yt("div",a+"-separator",y),this._overlaysList=yt("div",a+"-overlays",y),u.appendChild(y)},_getLayer:function(a){for(var u=0;u<this._layers.length;u++)if(this._layers[u]&&mt(this._layers[u].layer)===a)return this._layers[u]},_addLayer:function(a,u,h){this._map&&a.on("add remove",this._onLayerChange,this),this._layers.push({layer:a,name:u,overlay:h}),this.options.sortLayers&&this._layers.sort(Ut(function(y,T){return this.options.sortFunction(y.layer,T.layer,y.name,T.name)},this)),this.options.autoZIndex&&a.setZIndex&&(this._lastZIndex++,a.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;bo(this._baseLayersList),bo(this._overlaysList),this._layerControlInputs=[];var a,u,h,y,T=0;for(h=0;h<this._layers.length;h++)this._addItem(y=this._layers[h]),u=u||y.overlay,a=a||!y.overlay,T+=y.overlay?0:1;return this.options.hideSingleBase&&(this._baseLayersList.style.display=(a=a&&T>1)?"":"none"),this._separator.style.display=u&&a?"":"none",this},_onLayerChange:function(a){this._handlingClick||this._update();var u=this._getLayer(mt(a.target)),h=u.overlay?"add"===a.type?"overlayadd":"overlayremove":"add"===a.type?"baselayerchange":null;h&&this._map.fire(h,u)},_createRadioElement:function(a,u){var h='<input type="radio" class="leaflet-control-layers-selector" name="'+a+'"'+(u?' checked="checked"':"")+"/>",y=document.createElement("div");return y.innerHTML=h,y.firstChild},_addItem:function(a){var y,u=document.createElement("label"),h=this._map.hasLayer(a.layer);a.overlay?((y=document.createElement("input")).type="checkbox",y.className="leaflet-control-layers-selector",y.defaultChecked=h):y=this._createRadioElement("leaflet-base-layers_"+mt(this),h),this._layerControlInputs.push(y),y.layerId=mt(a.layer),Pe(y,"click",this._onInputClick,this);var T=document.createElement("span");T.innerHTML=" "+a.name;var M=document.createElement("div");return u.appendChild(M),M.appendChild(y),M.appendChild(T),(a.overlay?this._overlaysList:this._baseLayersList).appendChild(u),this._checkDisabledLayers(),u},_onInputClick:function(){var u,h,a=this._layerControlInputs,y=[],T=[];this._handlingClick=!0;for(var M=a.length-1;M>=0;M--)h=this._getLayer((u=a[M]).layerId).layer,u.checked?y.push(h):u.checked||T.push(h);for(M=0;M<T.length;M++)this._map.hasLayer(T[M])&&this._map.removeLayer(T[M]);for(M=0;M<y.length;M++)this._map.hasLayer(y[M])||this._map.addLayer(y[M]);this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){for(var u,h,a=this._layerControlInputs,y=this._map.getZoom(),T=a.length-1;T>=0;T--)h=this._getLayer((u=a[T]).layerId).layer,u.disabled=void 0!==h.options.minZoom&&y<h.options.minZoom||void 0!==h.options.maxZoom&&y>h.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expand:function(){return this.expand()},_collapse:function(){return this.collapse()}}),pr=ai.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"&#x2212;",zoomOutTitle:"Zoom out"},onAdd:function(a){var u="leaflet-control-zoom",h=yt("div",u+" leaflet-bar"),y=this.options;return this._zoomInButton=this._createButton(y.zoomInText,y.zoomInTitle,u+"-in",h,this._zoomIn),this._zoomOutButton=this._createButton(y.zoomOutText,y.zoomOutTitle,u+"-out",h,this._zoomOut),this._updateDisabled(),a.on("zoomend zoomlevelschange",this._updateDisabled,this),h},onRemove:function(a){a.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(a){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(a.shiftKey?3:1))},_zoomOut:function(a){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(a.shiftKey?3:1))},_createButton:function(a,u,h,y,T){var M=yt("a",h,y);return M.innerHTML=a,M.href="#",M.title=u,M.setAttribute("role","button"),M.setAttribute("aria-label",u),Mr(M),Pe(M,"click",ws),Pe(M,"click",T,this),Pe(M,"click",this._refocusOnMap,this),M},_updateDisabled:function(){var a=this._map,u="leaflet-disabled";on(this._zoomInButton,u),on(this._zoomOutButton,u),(this._disabled||a._zoom===a.getMinZoom())&&Xe(this._zoomOutButton,u),(this._disabled||a._zoom===a.getMaxZoom())&&Xe(this._zoomInButton,u)}});Ve.mergeOptions({zoomControl:!0}),Ve.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new pr,this.addControl(this.zoomControl))});var wt=ai.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(a){var u="leaflet-control-scale",h=yt("div",u),y=this.options;return this._addScales(y,u+"-line",h),a.on(y.updateWhenIdle?"moveend":"move",this._update,this),a.whenReady(this._update,this),h},onRemove:function(a){a.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(a,u,h){a.metric&&(this._mScale=yt("div",u,h)),a.imperial&&(this._iScale=yt("div",u,h))},_update:function(){var a=this._map,u=a.getSize().y/2,h=a.distance(a.containerPointToLatLng([0,u]),a.containerPointToLatLng([this.options.maxWidth,u]));this._updateScales(h)},_updateScales:function(a){this.options.metric&&a&&this._updateMetric(a),this.options.imperial&&a&&this._updateImperial(a)},_updateMetric:function(a){var u=this._getRoundNum(a);this._updateScale(this._mScale,u<1e3?u+" m":u/1e3+" km",u/a)},_updateImperial:function(a){var h,y,T,u=3.2808399*a;u>5280?(y=this._getRoundNum(h=u/5280),this._updateScale(this._iScale,y+" mi",y/h)):(T=this._getRoundNum(u),this._updateScale(this._iScale,T+" ft",T/u))},_updateScale:function(a,u,h){a.style.width=Math.round(this.options.maxWidth*h)+"px",a.innerHTML=u},_getRoundNum:function(a){var u=Math.pow(10,(Math.floor(a)+"").length-1),h=a/u;return u*(h>=10?10:h>=5?5:h>=3?3:h>=2?2:1)}}),Qi=ai.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(a){Zt(this,a),this._attributions={}},onAdd:function(a){for(var u in a.attributionControl=this,this._container=yt("div","leaflet-control-attribution"),Mr(this._container),a._layers)a._layers[u].getAttribution&&this.addAttribution(a._layers[u].getAttribution());return this._update(),this._container},setPrefix:function(a){return this.options.prefix=a,this._update(),this},addAttribution:function(a){return a?(this._attributions[a]||(this._attributions[a]=0),this._attributions[a]++,this._update(),this):this},removeAttribution:function(a){return a?(this._attributions[a]&&(this._attributions[a]--,this._update()),this):this},_update:function(){if(this._map){var a=[];for(var u in this._attributions)this._attributions[u]&&a.push(u);var h=[];this.options.prefix&&h.push(this.options.prefix),a.length&&h.push(a.join(", ")),this._container.innerHTML=h.join(" | ")}}});Ve.mergeOptions({attributionControl:!0}),Ve.addInitHook(function(){this.options.attributionControl&&(new Qi).addTo(this)});ai.Layers=Ir,ai.Zoom=pr,ai.Scale=wt,ai.Attribution=Qi,Co.layers=function(a,u,h){return new Ir(a,u,h)},Co.zoom=function(a){return new pr(a)},Co.scale=function(a){return new wt(a)},Co.attribution=function(a){return new Qi(a)};var an=Fe.extend({initialize:function(a){this._map=a},enable:function(){return this._enabled||(this._enabled=!0,this.addHooks()),this},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});an.addTo=function(a,u){return a.addHandler(u,this),this};var el,Ja={Events:Ln},Mn=ut?"touchstart mousedown":"mousedown",Ql={mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},ua={mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"},Ge=he.extend({options:{clickTolerance:3},initialize:function(a,u,h,y){Zt(this,y),this._element=a,this._dragStartTarget=u||a,this._preventOutline=h},enable:function(){this._enabled||(Pe(this._dragStartTarget,Mn,this._onDown,this),this._enabled=!0)},disable:function(){!this._enabled||(Ge._dragging===this&&this.finishDrag(),dt(this._dragStartTarget,Mn,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(a){if(!a._simulated&&this._enabled&&(this._moved=!1,!Ka(this._element,"leaflet-zoom-anim")&&!(Ge._dragging||a.shiftKey||1!==a.which&&1!==a.button&&!a.touches)&&(Ge._dragging=this,this._preventOutline&&V(this._element),Ni(),hr(),!this._moving))){this.fire("down");var u=a.touches?a.touches[0]:a,h=ee(this._element);this._startPoint=new Qe(u.clientX,u.clientY),this._parentScale=me(h),Pe(document,ua[a.type],this._onMove,this),Pe(document,Ql[a.type],this._onUp,this)}},_onMove:function(a){if(!a._simulated&&this._enabled){if(a.touches&&a.touches.length>1)return void(this._moved=!0);var u=a.touches&&1===a.touches.length?a.touches[0]:a,h=new Qe(u.clientX,u.clientY)._subtract(this._startPoint);!h.x&&!h.y||Math.abs(h.x)+Math.abs(h.y)<this.options.clickTolerance||(h.x/=this._parentScale.x,h.y/=this._parentScale.y,Fi(a),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=Oi(this._element).subtract(h),Xe(document.body,"leaflet-dragging"),this._lastTarget=a.target||a.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Xe(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(h),this._moving=!0,wn(this._animRequest),this._lastEvent=a,this._animRequest=un(this._updatePosition,this,!0))}},_updatePosition:function(){var a={originalEvent:this._lastEvent};this.fire("predrag",a),sn(this._element,this._newPos),this.fire("drag",a)},_onUp:function(a){a._simulated||!this._enabled||this.finishDrag()},finishDrag:function(){for(var a in on(document.body,"leaflet-dragging"),this._lastTarget&&(on(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),ua)dt(document,ua[a],this._onMove,this),dt(document,Ql[a],this._onUp,this);Ku(),Cs(),this._moved&&this._moving&&(wn(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1,Ge._dragging=!1}});function Bc(a,u){if(!u||!a.length)return a.slice();var h=u*u;return function(a,u){var h=a.length,T=new(typeof Uint8Array!=void 0+""?Uint8Array:Array)(h);T[0]=T[h-1]=1,Ri(a,T,u,0,h-1);var M,U=[];for(M=0;M<h;M++)T[M]&&U.push(a[M]);return U}(a=function(a,u){for(var h=[a[0]],y=1,T=0,M=a.length;y<M;y++)xy(a[y],a[T])>u&&(h.push(a[y]),T=y);return T<M-1&&h.push(a[M-1]),h}(a,h),h)}function Xa(a,u,h){return Math.sqrt(da(a,u,h,!0))}function Ri(a,u,h,y,T){var U,W,K,M=0;for(W=y+1;W<=T-1;W++)(K=da(a[W],a[y],a[T],!0))>M&&(U=W,M=K);M>h&&(u[U]=1,Ri(a,u,h,y,U),Ri(a,u,h,U,T))}function Yr(a,u,h,y,T){var W,K,J,M=y?el:tl(a,h),U=tl(u,h);for(el=U;;){if(!(M|U))return[a,u];if(M&U)return!1;J=tl(K=Kt(a,u,W=M||U,h,T),h),W===M?(a=K,M=J):(u=K,U=J)}}function Kt(a,u,h,y,T){var J,ge,M=u.x-a.x,U=u.y-a.y,W=y.min,K=y.max;return 8&h?(J=a.x+M*(K.y-a.y)/U,ge=K.y):4&h?(J=a.x+M*(W.y-a.y)/U,ge=W.y):2&h?(J=K.x,ge=a.y+U*(K.x-a.x)/M):1&h&&(J=W.x,ge=a.y+U*(W.x-a.x)/M),new Qe(J,ge,T)}function tl(a,u){var h=0;return a.x<u.min.x?h|=1:a.x>u.max.x&&(h|=2),a.y<u.min.y?h|=4:a.y>u.max.y&&(h|=8),h}function xy(a,u){var h=u.x-a.x,y=u.y-a.y;return h*h+y*y}function da(a,u,h,y){var J,T=u.x,M=u.y,U=h.x-T,W=h.y-M,K=U*U+W*W;return K>0&&((J=((a.x-T)*U+(a.y-M)*W)/K)>1?(T=h.x,M=h.y):J>0&&(T+=U*J,M+=W*J)),U=a.x-T,W=a.y-M,y?U*U+W*W:new Qe(T,M)}function wo(a){return!kr(a[0])||"object"!=typeof a[0][0]&&void 0!==a[0][0]}function Kl(a){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),wo(a)}var ed={simplify:Bc,pointToSegmentDistance:Xa,closestPointOnSegment:function(a,u,h){return da(a,u,h)},clipSegment:Yr,_getEdgeIntersection:Kt,_getBitCode:tl,_sqClosestPointOnSegment:da,isFlat:wo,_flat:Kl};function ha(a,u,h){var y,M,U,W,K,J,ge,De,Pt,T=[1,4,2,8];for(M=0,ge=a.length;M<ge;M++)a[M]._code=tl(a[M],u);for(W=0;W<4;W++){for(De=T[W],y=[],M=0,U=(ge=a.length)-1;M<ge;U=M++)J=a[U],(K=a[M])._code&De?J._code&De||((Pt=Kt(J,K,De,u,h))._code=tl(Pt,u),y.push(Pt)):(J._code&De&&((Pt=Kt(J,K,De,u,h))._code=tl(Pt,u),y.push(Pt)),y.push(K));a=y}return a}var Li={clipPolygon:ha},Qh={project:function(a){return new Qe(a.lng,a.lat)},unproject:function(a){return new Rt(a.y,a.x)},bounds:new dn([-180,-90],[180,90])},Jr={R:6378137,R_MINOR:6356752.314245179,bounds:new dn([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(a){var u=Math.PI/180,h=this.R,y=a.lat*u,T=this.R_MINOR/h,M=Math.sqrt(1-T*T),U=M*Math.sin(y),W=Math.tan(Math.PI/4-y/2)/Math.pow((1-U)/(1+U),M/2);return y=-h*Math.log(Math.max(W,1e-10)),new Qe(a.lng*u*h,y)},unproject:function(a){for(var J,u=180/Math.PI,h=this.R,y=this.R_MINOR/h,T=Math.sqrt(1-y*y),M=Math.exp(-a.y/h),U=Math.PI/2-2*Math.atan(M),W=0,K=.1;W<15&&Math.abs(K)>1e-7;W++)J=T*Math.sin(U),J=Math.pow((1-J)/(1+J),T/2),U+=K=Math.PI/2-2*Math.atan(M*J)-U;return new Rt(U*u,a.x*u/h)}},So={LonLat:Qh,Mercator:Jr,SphericalMercator:ti},Zh=Je({},go,{code:"EPSG:3395",projection:Jr,transformation:function(){var a=.5/(Math.PI*Jr.R);return Xt(a,.5,-a,.5)}()}),jc=Je({},go,{code:"EPSG:4326",projection:Qh,transformation:Xt(1/180,1,-1/180,.5)}),td=Je({},ar,{projection:Qh,transformation:Xt(1,0,-1,0),scale:function(a){return Math.pow(2,a)},zoom:function(a){return Math.log(a)/Math.LN2},distance:function(a,u){var h=u.lng-a.lng,y=u.lat-a.lat;return Math.sqrt(h*h+y*y)},infinite:!0});ar.Earth=go,ar.EPSG3395=Zh,ar.EPSG3857=oi,ar.EPSG900913=Vl,ar.EPSG4326=jc,ar.Simple=td;var $n=he.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(a){return a.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(a){return a&&a.removeLayer(this),this},getPane:function(a){return this._map.getPane(a?this.options[a]||a:this.options.pane)},addInteractiveTarget:function(a){return this._map._targets[mt(a)]=this,this},removeInteractiveTarget:function(a){return delete this._map._targets[mt(a)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(a){var u=a.target;if(u.hasLayer(this)){if(this._map=u,this._zoomAnimated=u._zoomAnimated,this.getEvents){var h=this.getEvents();u.on(h,this),this.once("remove",function(){u.off(h,this)},this)}this.onAdd(u),this.getAttribution&&u.attributionControl&&u.attributionControl.addAttribution(this.getAttribution()),this.fire("add"),u.fire("layeradd",{layer:this})}}});Ve.include({addLayer:function(a){if(!a._layerAdd)throw new Error("The provided object is not a Layer.");var u=mt(a);return this._layers[u]||(this._layers[u]=a,a._mapToAdd=this,a.beforeAdd&&a.beforeAdd(this),this.whenReady(a._layerAdd,a)),this},removeLayer:function(a){var u=mt(a);return this._layers[u]?(this._loaded&&a.onRemove(this),a.getAttribution&&this.attributionControl&&this.attributionControl.removeAttribution(a.getAttribution()),delete this._layers[u],this._loaded&&(this.fire("layerremove",{layer:a}),a.fire("remove")),a._map=a._mapToAdd=null,this):this},hasLayer:function(a){return!!a&&mt(a)in this._layers},eachLayer:function(a,u){for(var h in this._layers)a.call(u,this._layers[h]);return this},_addLayers:function(a){for(var u=0,h=(a=a?kr(a)?a:[a]:[]).length;u<h;u++)this.addLayer(a[u])},_addZoomLimit:function(a){(isNaN(a.options.maxZoom)||!isNaN(a.options.minZoom))&&(this._zoomBoundLayers[mt(a)]=a,this._updateZoomLevels())},_removeZoomLimit:function(a){var u=mt(a);this._zoomBoundLayers[u]&&(delete this._zoomBoundLayers[u],this._updateZoomLevels())},_updateZoomLevels:function(){var a=1/0,u=-1/0,h=this._getZoomSpan();for(var y in this._zoomBoundLayers){var T=this._zoomBoundLayers[y].options;a=void 0===T.minZoom?a:Math.min(a,T.minZoom),u=void 0===T.maxZoom?u:Math.max(u,T.maxZoom)}this._layersMaxZoom=u===-1/0?void 0:u,this._layersMinZoom=a===1/0?void 0:a,h!==this._getZoomSpan()&&this.fire("zoomlevelschange"),void 0===this.options.maxZoom&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),void 0===this.options.minZoom&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Yl=$n.extend({initialize:function(a,u){var h,y;if(Zt(this,u),this._layers={},a)for(h=0,y=a.length;h<y;h++)this.addLayer(a[h])},addLayer:function(a){var u=this.getLayerId(a);return this._layers[u]=a,this._map&&this._map.addLayer(a),this},removeLayer:function(a){var u=a in this._layers?a:this.getLayerId(a);return this._map&&this._layers[u]&&this._map.removeLayer(this._layers[u]),delete this._layers[u],this},hasLayer:function(a){return!!a&&("number"==typeof a?a:this.getLayerId(a))in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(a){var h,y,u=Array.prototype.slice.call(arguments,1);for(h in this._layers)(y=this._layers[h])[a]&&y[a].apply(y,u);return this},onAdd:function(a){this.eachLayer(a.addLayer,a)},onRemove:function(a){this.eachLayer(a.removeLayer,a)},eachLayer:function(a,u){for(var h in this._layers)a.call(u,this._layers[h]);return this},getLayer:function(a){return this._layers[a]},getLayers:function(){var a=[];return this.eachLayer(a.push,a),a},setZIndex:function(a){return this.invoke("setZIndex",a)},getLayerId:function(a){return mt(a)}}),Jl=Yl.extend({addLayer:function(a){return this.hasLayer(a)?this:(a.addEventParent(this),Yl.prototype.addLayer.call(this,a),this.fire("layeradd",{layer:a}))},removeLayer:function(a){return this.hasLayer(a)?(a in this._layers&&(a=this._layers[a]),a.removeEventParent(this),Yl.prototype.removeLayer.call(this,a),this.fire("layerremove",{layer:a})):this},setStyle:function(a){return this.invoke("setStyle",a)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var a=new Sn;for(var u in this._layers){var h=this._layers[u];a.extend(h.getBounds?h.getBounds():h.getLatLng())}return a}}),zc=Fe.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0]},initialize:function(a){Zt(this,a)},createIcon:function(a){return this._createIcon("icon",a)},createShadow:function(a){return this._createIcon("shadow",a)},_createIcon:function(a,u){var h=this._getIconUrl(a);if(!h){if("icon"===a)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var y=this._createImg(h,u&&"IMG"===u.tagName?u:null);return this._setIconStyles(y,a),y},_setIconStyles:function(a,u){var h=this.options,y=h[u+"Size"];"number"==typeof y&&(y=[y,y]);var T=Dt(y),M=Dt("shadow"===u&&h.shadowAnchor||h.iconAnchor||T&&T.divideBy(2,!0));a.className="leaflet-marker-"+u+" "+(h.className||""),M&&(a.style.marginLeft=-M.x+"px",a.style.marginTop=-M.y+"px"),T&&(a.style.width=T.x+"px",a.style.height=T.y+"px")},_createImg:function(a,u){return(u=u||document.createElement("img")).src=a,u},_getIconUrl:function(a){return xr&&this.options[a+"RetinaUrl"]||this.options[a+"Url"]}});var nd=zc.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(a){return nd.imagePath||(nd.imagePath=this._detectIconPath()),(this.options.imagePath||nd.imagePath)+zc.prototype._getIconUrl.call(this,a)},_detectIconPath:function(){var a=yt("div","leaflet-default-icon-path",document.body),u=yo(a,"background-image")||yo(a,"backgroundImage");return document.body.removeChild(a),null===u||0!==u.indexOf("url")?"":u.replace(/^url\(["']?/,"").replace(/marker-icon\.png["']?\)$/,"")}}),Iy=an.extend({initialize:function(a){this._marker=a},addHooks:function(){var a=this._marker._icon;this._draggable||(this._draggable=new Ge(a,a,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Xe(a,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&on(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(a){var u=this._marker,h=u._map,y=this._marker.options.autoPanSpeed,T=this._marker.options.autoPanPadding,M=Oi(u._icon),U=h.getPixelBounds(),W=h.getPixelOrigin(),K=sr(U.min._subtract(W).add(T),U.max._subtract(W).subtract(T));if(!K.contains(M)){var J=Dt((Math.max(K.max.x,M.x)-K.max.x)/(U.max.x-K.max.x)-(Math.min(K.min.x,M.x)-K.min.x)/(U.min.x-K.min.x),(Math.max(K.max.y,M.y)-K.max.y)/(U.max.y-K.max.y)-(Math.min(K.min.y,M.y)-K.min.y)/(U.min.y-K.min.y)).multiplyBy(y);h.panBy(J,{animate:!1}),this._draggable._newPos._add(J),this._draggable._startPos._add(J),sn(u._icon,this._draggable._newPos),this._onDrag(a),this._panRequest=un(this._adjustPan.bind(this,a))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(a){this._marker.options.autoPan&&(wn(this._panRequest),this._panRequest=un(this._adjustPan.bind(this,a)))},_onDrag:function(a){var u=this._marker,h=u._shadow,y=Oi(u._icon),T=u._map.layerPointToLatLng(y);h&&sn(h,y),u._latlng=T,a.latlng=T,a.oldLatLng=this._oldLatLng,u.fire("move",a).fire("drag",a)},_onDragEnd:function(a){wn(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",a)}}),Kh=$n.extend({options:{icon:new nd,interactive:!0,keyboard:!0,title:"",alt:"",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(a,u){Zt(this,u),this._latlng=gn(a)},onAdd:function(a){this._zoomAnimated=this._zoomAnimated&&a.options.markerZoomAnimation,this._zoomAnimated&&a.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(a){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&a.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(a){var u=this._latlng;return this._latlng=gn(a),this.update(),this.fire("move",{oldLatLng:u,latlng:this._latlng})},setZIndexOffset:function(a){return this.options.zIndexOffset=a,this.update()},getIcon:function(){return this.options.icon},setIcon:function(a){return this.options.icon=a,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var a=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(a)}return this},_initIcon:function(){var a=this.options,u="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),h=a.icon.createIcon(this._icon),y=!1;h!==this._icon&&(this._icon&&this._removeIcon(),y=!0,a.title&&(h.title=a.title),"IMG"===h.tagName&&(h.alt=a.alt||"")),Xe(h,u),a.keyboard&&(h.tabIndex="0"),this._icon=h,a.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex});var T=a.icon.createShadow(this._shadow),M=!1;T!==this._shadow&&(this._removeShadow(),M=!0),T&&(Xe(T,u),T.alt=""),this._shadow=T,a.opacity<1&&this._updateOpacity(),y&&this.getPane().appendChild(this._icon),this._initInteraction(),T&&M&&this.getPane(a.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),B(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&B(this._shadow),this._shadow=null},_setPos:function(a){this._icon&&sn(this._icon,a),this._shadow&&sn(this._shadow,a),this._zIndex=a.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(a){this._icon&&(this._icon.style.zIndex=this._zIndex+a)},_animateZoom:function(a){var u=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center).round();this._setPos(u)},_initInteraction:function(){if(this.options.interactive&&(Xe(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Iy)){var a=this.options.draggable;this.dragging&&(a=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Iy(this),a&&this.dragging.enable()}},setOpacity:function(a){return this.options.opacity=a,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var a=this.options.opacity;this._icon&&si(this._icon,a),this._shadow&&si(this._shadow,a)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});var nl=$n.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(a){this._renderer=a.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(a){return Zt(this,a),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&a&&Object.prototype.hasOwnProperty.call(a,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+this._renderer.options.tolerance}}),Yh=nl.extend({options:{fill:!0,radius:10},initialize:function(a,u){Zt(this,u),this._latlng=gn(a),this._radius=this.options.radius},setLatLng:function(a){var u=this._latlng;return this._latlng=gn(a),this.redraw(),this.fire("move",{oldLatLng:u,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(a){return this.options.radius=this._radius=a,this.redraw()},getRadius:function(){return this._radius},setStyle:function(a){var u=a&&a.radius||this._radius;return nl.prototype.setStyle.call(this,a),this.setRadius(u),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var a=this._radius,u=this._radiusY||a,h=this._clickTolerance(),y=[a+h,u+h];this._pxBounds=new dn(this._point.subtract(y),this._point.add(y))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(a){return a.distanceTo(this._point)<=this._radius+this._clickTolerance()}});var Tm=Yh.extend({initialize:function(a,u,h){if("number"==typeof u&&(u=Je({},h,{radius:u})),Zt(this,u),this._latlng=gn(a),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(a){return this._mRadius=a,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var a=[this._radius,this._radiusY||this._radius];return new Sn(this._map.layerPointToLatLng(this._point.subtract(a)),this._map.layerPointToLatLng(this._point.add(a)))},setStyle:nl.prototype.setStyle,_project:function(){var a=this._latlng.lng,u=this._latlng.lat,h=this._map,y=h.options.crs;if(y.distance===go.distance){var T=Math.PI/180,M=this._mRadius/go.R/T,U=h.project([u+M,a]),W=h.project([u-M,a]),K=U.add(W).divideBy(2),J=h.unproject(K).lat,ge=Math.acos((Math.cos(M*T)-Math.sin(u*T)*Math.sin(J*T))/(Math.cos(u*T)*Math.cos(J*T)))/T;(isNaN(ge)||0===ge)&&(ge=M/Math.cos(Math.PI/180*u)),this._point=K.subtract(h.getPixelOrigin()),this._radius=isNaN(ge)?0:K.x-h.project([J,a-ge]).x,this._radiusY=K.y-U.y}else{var De=y.unproject(y.project(this._latlng).subtract([this._mRadius,0]));this._point=h.latLngToLayerPoint(this._latlng),this._radius=this._point.x-h.latLngToLayerPoint(De).x}this._updateBounds()}});var pa=nl.extend({options:{smoothFactor:1,noClip:!1},initialize:function(a,u){Zt(this,u),this._setLatLngs(a)},getLatLngs:function(){return this._latlngs},setLatLngs:function(a){return this._setLatLngs(a),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(a){for(var T,M,u=1/0,h=null,y=da,U=0,W=this._parts.length;U<W;U++)for(var K=this._parts[U],J=1,ge=K.length;J<ge;J++){var De=y(a,T=K[J-1],M=K[J],!0);De<u&&(u=De,h=y(a,T,M))}return h&&(h.distance=Math.sqrt(u)),h},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var a,u,h,y,T,M,U,W=this._rings[0],K=W.length;if(!K)return null;for(a=0,u=0;a<K-1;a++)u+=W[a].distanceTo(W[a+1])/2;if(0===u)return this._map.layerPointToLatLng(W[0]);for(a=0,y=0;a<K-1;a++)if((y+=h=(T=W[a]).distanceTo(M=W[a+1]))>u)return this._map.layerPointToLatLng([M.x-(U=(y-u)/h)*(M.x-T.x),M.y-U*(M.y-T.y)])},getBounds:function(){return this._bounds},addLatLng:function(a,u){return u=u||this._defaultShape(),a=gn(a),u.push(a),this._bounds.extend(a),this.redraw()},_setLatLngs:function(a){this._bounds=new Sn,this._latlngs=this._convertLatLngs(a)},_defaultShape:function(){return wo(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(a){for(var u=[],h=wo(a),y=0,T=a.length;y<T;y++)h?(u[y]=gn(a[y]),this._bounds.extend(u[y])):u[y]=this._convertLatLngs(a[y]);return u},_project:function(){var a=new dn;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,a),this._bounds.isValid()&&a.isValid()&&(this._rawPxBounds=a,this._updateBounds())},_updateBounds:function(){var a=this._clickTolerance(),u=new Qe(a,a);this._pxBounds=new dn([this._rawPxBounds.min.subtract(u),this._rawPxBounds.max.add(u)])},_projectLatlngs:function(a,u,h){var M,U,T=a.length;if(a[0]instanceof Rt){for(U=[],M=0;M<T;M++)U[M]=this._map.latLngToLayerPoint(a[M]),h.extend(U[M]);u.push(U)}else for(M=0;M<T;M++)this._projectLatlngs(a[M],u,h)},_clipPoints:function(){var a=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(a)){if(this.options.noClip)return void(this._parts=this._rings);var h,y,T,M,U,W,K,u=this._parts;for(h=0,T=0,M=this._rings.length;h<M;h++)for(y=0,U=(K=this._rings[h]).length;y<U-1;y++)(W=Yr(K[y],K[y+1],a,y,!0))&&(u[T]=u[T]||[],u[T].push(W[0]),(W[1]!==K[y+1]||y===U-2)&&(u[T].push(W[1]),T++))}},_simplifyPoints:function(){for(var a=this._parts,u=this.options.smoothFactor,h=0,y=a.length;h<y;h++)a[h]=Bc(a[h],u)},_update:function(){!this._map||(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(a,u){var h,y,T,M,U,W,K=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(a))return!1;for(h=0,M=this._parts.length;h<M;h++)for(y=0,T=(U=(W=this._parts[h]).length)-1;y<U;T=y++)if((u||0!==y)&&Xa(a,W[T],W[y])<=K)return!0;return!1}});pa._flat=Kl;var Gc=pa.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var a,u,h,y,T,M,U,W,J=this._rings[0],ge=J.length;if(!ge)return null;for(M=U=W=0,a=0,u=ge-1;a<ge;u=a++)U+=((h=J[a]).x+(y=J[u]).x)*(T=h.y*y.x-y.y*h.x),W+=(h.y+y.y)*T,M+=3*T;return this._map.layerPointToLatLng(0===M?J[0]:[U/M,W/M])},_convertLatLngs:function(a){var u=pa.prototype._convertLatLngs.call(this,a),h=u.length;return h>=2&&u[0]instanceof Rt&&u[0].equals(u[h-1])&&u.pop(),u},_setLatLngs:function(a){pa.prototype._setLatLngs.call(this,a),wo(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return wo(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var a=this._renderer._bounds,u=this.options.weight,h=new Qe(u,u);if(a=new dn(a.min.subtract(h),a.max.add(h)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(a)){if(this.options.noClip)return void(this._parts=this._rings);for(var M,y=0,T=this._rings.length;y<T;y++)(M=ha(this._rings[y],a,!0)).length&&this._parts.push(M)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(a){var h,y,T,M,U,W,K,J,u=!1;if(!this._pxBounds||!this._pxBounds.contains(a))return!1;for(M=0,K=this._parts.length;M<K;M++)for(U=0,W=(J=(h=this._parts[M]).length)-1;U<J;W=U++)(y=h[U]).y>a.y!=(T=h[W]).y>a.y&&a.x<(T.x-y.x)*(a.y-y.y)/(T.y-y.y)+y.x&&(u=!u);return u||pa.prototype._containsPoint.call(this,a,!0)}});var To=Jl.extend({initialize:function(a,u){Zt(this,u),this._layers={},a&&this.addData(a)},addData:function(a){var h,y,T,u=kr(a)?a:a.features;if(u){for(h=0,y=u.length;h<y;h++)((T=u[h]).geometries||T.geometry||T.features||T.coordinates)&&this.addData(T);return this}var M=this.options;if(M.filter&&!M.filter(a))return this;var U=km(a,M);return U?(U.feature=rd(a),U.defaultOptions=U.options,this.resetStyle(U),M.onEachFeature&&M.onEachFeature(a,U),this.addLayer(U)):this},resetStyle:function(a){return void 0===a?this.eachLayer(this.resetStyle,this):(a.options=Je({},a.defaultOptions),this._setLayerStyle(a,this.options.style),this)},setStyle:function(a){return this.eachLayer(function(u){this._setLayerStyle(u,a)},this)},_setLayerStyle:function(a,u){a.setStyle&&("function"==typeof u&&(u=u(a.feature)),a.setStyle(u))}});function km(a,u){var W,K,J,ge,h="Feature"===a.type?a.geometry:a,y=h?h.coordinates:null,T=[],M=u&&u.pointToLayer,U=u&&u.coordsToLatLng||Dm;if(!y&&!h)return null;switch(h.type){case"Point":return Py(M,a,W=U(y),u);case"MultiPoint":for(J=0,ge=y.length;J<ge;J++)W=U(y[J]),T.push(Py(M,a,W,u));return new Jl(T);case"LineString":case"MultiLineString":return K=qo(y,"LineString"===h.type?0:1,U),new pa(K,u);case"Polygon":case"MultiPolygon":return K=qo(y,"Polygon"===h.type?1:2,U),new Gc(K,u);case"GeometryCollection":for(J=0,ge=h.geometries.length;J<ge;J++){var De=km({geometry:h.geometries[J],type:"Feature",properties:a.properties},u);De&&T.push(De)}return new Jl(T);default:throw new Error("Invalid GeoJSON object.")}}function Py(a,u,h,y){return a?a(u,h):new Kh(h,y&&y.markersInheritOptions&&y)}function Dm(a){return new Rt(a[1],a[0],a[2])}function qo(a,u,h){for(var U,y=[],T=0,M=a.length;T<M;T++)U=u?qo(a[T],u-1,h):(h||Dm)(a[T]),y.push(U);return y}function id(a,u){return u="number"==typeof u?u:6,void 0!==a.alt?[gt(a.lng,u),gt(a.lat,u),gt(a.alt,u)]:[gt(a.lng,u),gt(a.lat,u)]}function St(a,u,h,y){for(var T=[],M=0,U=a.length;M<U;M++)T.push(u?St(a[M],u-1,h,y):id(a[M],y));return!u&&h&&T.push(T[0]),T}function il(a,u){return a.feature?Je({},a.feature,{geometry:u}):rd(u)}function rd(a){return"Feature"===a.type||"FeatureCollection"===a.type?a:{type:"Feature",properties:{},geometry:a}}var Jh={toGeoJSON:function(a){return il(this,{type:"Point",coordinates:id(this.getLatLng(),a)})}};function Xh(a,u){return new To(a,u)}Kh.include(Jh),Tm.include(Jh),Yh.include(Jh),pa.include({toGeoJSON:function(a){var u=!wo(this._latlngs);return il(this,{type:(u?"Multi":"")+"LineString",coordinates:St(this._latlngs,u?1:0,!1,a)})}}),Gc.include({toGeoJSON:function(a){var u=!wo(this._latlngs),h=u&&!wo(this._latlngs[0]),y=St(this._latlngs,h?2:u?1:0,!0,a);return u||(y=[y]),il(this,{type:(h?"Multi":"")+"Polygon",coordinates:y})}}),Yl.include({toMultiPoint:function(a){var u=[];return this.eachLayer(function(h){u.push(h.toGeoJSON(a).geometry.coordinates)}),il(this,{type:"MultiPoint",coordinates:u})},toGeoJSON:function(a){var u=this.feature&&this.feature.geometry&&this.feature.geometry.type;if("MultiPoint"===u)return this.toMultiPoint(a);var h="GeometryCollection"===u,y=[];return this.eachLayer(function(T){if(T.toGeoJSON){var M=T.toGeoJSON(a);if(h)y.push(M.geometry);else{var U=rd(M);"FeatureCollection"===U.type?y.push.apply(y,U.features):y.push(U)}}}),h?il(this,{geometries:y,type:"GeometryCollection"}):{type:"FeatureCollection",features:y}}});var xm=Xh,od=$n.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(a,u,h){this._url=a,this._bounds=ei(u),Zt(this,h)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Xe(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){B(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(a){return this.options.opacity=a,this._image&&this._updateOpacity(),this},setStyle:function(a){return a.opacity&&this.setOpacity(a.opacity),this},bringToFront:function(){return this._map&&Te(this._image),this},bringToBack:function(){return this._map&&_n(this._image),this},setUrl:function(a){return this._url=a,this._image&&(this._image.src=a),this},setBounds:function(a){return this._bounds=ei(a),this._map&&this._reset(),this},getEvents:function(){var a={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},setZIndex:function(a){return this.options.zIndex=a,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var a="IMG"===this._url.tagName,u=this._image=a?this._url:yt("img");Xe(u,"leaflet-image-layer"),this._zoomAnimated&&Xe(u,"leaflet-zoom-animated"),this.options.className&&Xe(u,this.options.className),u.onselectstart=qt,u.onmousemove=qt,u.onload=Ut(this.fire,this,"load"),u.onerror=Ut(this._overlayOnError,this,"error"),(this.options.crossOrigin||""===this.options.crossOrigin)&&(u.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),a?this._url=u.src:(u.src=this._url,u.alt=this.options.alt)},_animateZoom:function(a){var u=this._map.getZoomScale(a.zoom),h=this._map._latLngBoundsToNewLayerBounds(this._bounds,a.zoom,a.center).min;we(this._image,h,u)},_reset:function(){var a=this._image,u=new dn(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),h=u.getSize();sn(a,u.min),a.style.width=h.x+"px",a.style.height=h.y+"px"},_updateOpacity:function(){si(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&null!=this.options.zIndex&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var a=this.options.errorOverlayUrl;a&&this._url!==a&&(this._url=a,this._image.src=a)}}),Mm=od.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1},_initImage:function(){var a="VIDEO"===this._url.tagName,u=this._image=a?this._url:yt("video");if(Xe(u,"leaflet-image-layer"),this._zoomAnimated&&Xe(u,"leaflet-zoom-animated"),this.options.className&&Xe(u,this.options.className),u.onselectstart=qt,u.onmousemove=qt,u.onloadeddata=Ut(this.fire,this,"load"),a){for(var h=u.getElementsByTagName("source"),y=[],T=0;T<h.length;T++)y.push(h[T].src);this._url=h.length>0?y:[u.src]}else{kr(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(u.style,"objectFit")&&(u.style.objectFit="fill"),u.autoplay=!!this.options.autoplay,u.loop=!!this.options.loop,u.muted=!!this.options.muted;for(var M=0;M<this._url.length;M++){var U=yt("source");U.src=this._url[M],u.appendChild(U)}}}});var tp=od.extend({_initImage:function(){var a=this._image=this._url;Xe(a,"leaflet-image-layer"),this._zoomAnimated&&Xe(a,"leaflet-zoom-animated"),this.options.className&&Xe(a,this.options.className),a.onselectstart=qt,a.onmousemove=qt}});var Eo=$n.extend({options:{offset:[0,7],className:"",pane:"popupPane"},initialize:function(a,u){Zt(this,a),this._source=u},onAdd:function(a){this._zoomAnimated=a._zoomAnimated,this._container||this._initLayout(),a._fadeAnimated&&si(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),a._fadeAnimated&&si(this._container,1),this.bringToFront()},onRemove:function(a){a._fadeAnimated?(si(this._container,0),this._removeTimeout=setTimeout(Ut(B,void 0,this._container),200)):B(this._container)},getLatLng:function(){return this._latlng},setLatLng:function(a){return this._latlng=gn(a),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(a){return this._content=a,this.update(),this},getElement:function(){return this._container},update:function(){!this._map||(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var a={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Te(this._container),this},bringToBack:function(){return this._map&&_n(this._container),this},_prepareOpen:function(a,u,h){if(u instanceof $n||(h=u,u=a),u instanceof Jl)for(var y in a._layers){u=a._layers[y];break}if(!h)if(u.getCenter)h=u.getCenter();else{if(!u.getLatLng)throw new Error("Unable to get source layer LatLng.");h=u.getLatLng()}return this._source=u,this.update(),h},_updateContent:function(){if(this._content){var a=this._contentNode,u="function"==typeof this._content?this._content(this._source||this):this._content;if("string"==typeof u)a.innerHTML=u;else{for(;a.hasChildNodes();)a.removeChild(a.firstChild);a.appendChild(u)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var a=this._map.latLngToLayerPoint(this._latlng),u=Dt(this.options.offset),h=this._getAnchor();this._zoomAnimated?sn(this._container,a.add(h)):u=u.add(a).add(h);var y=this._containerBottom=-u.y,T=this._containerLeft=-Math.round(this._containerWidth/2)+u.x;this._container.style.bottom=y+"px",this._container.style.left=T+"px"}},_getAnchor:function(){return[0,0]}}),Xl=Eo.extend({options:{maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(a){return a.openPopup(this),this},onAdd:function(a){Eo.prototype.onAdd.call(this,a),a.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof nl||this._source.on("preclick",ca))},onRemove:function(a){Eo.prototype.onRemove.call(this,a),a.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof nl||this._source.off("preclick",ca))},getEvents:function(){var a=Eo.prototype.getEvents.call(this);return(void 0!==this.options.closeOnClick?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(a.preclick=this._close),this.options.keepInView&&(a.moveend=this._adjustPan),a},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var a="leaflet-popup",u=this._container=yt("div",a+" "+(this.options.className||"")+" leaflet-zoom-animated"),h=this._wrapper=yt("div",a+"-content-wrapper",u);if(this._contentNode=yt("div",a+"-content",h),Mr(u),Gh(this._contentNode),Pe(u,"contextmenu",ca),this._tipContainer=yt("div",a+"-tip-container",u),this._tip=yt("div",a+"-tip",this._tipContainer),this.options.closeButton){var y=this._closeButton=yt("a",a+"-close-button",u);y.href="#close",y.innerHTML="&#215;",Pe(y,"click",this._onCloseButtonClick,this)}},_updateLayout:function(){var a=this._contentNode,u=a.style;u.width="",u.whiteSpace="nowrap";var h=a.offsetWidth;h=Math.min(h,this.options.maxWidth),h=Math.max(h,this.options.minWidth),u.width=h+1+"px",u.whiteSpace="",u.height="";var T=this.options.maxHeight,M="leaflet-popup-scrolled";T&&a.offsetHeight>T?(u.height=T+"px",Xe(a,M)):on(a,M),this._containerWidth=this._container.offsetWidth},_animateZoom:function(a){var u=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center),h=this._getAnchor();sn(this._container,u.add(h))},_adjustPan:function(){if(this.options.autoPan){this._map._panAnim&&this._map._panAnim.stop();var a=this._map,u=parseInt(yo(this._container,"marginBottom"),10)||0,h=this._container.offsetHeight+u,y=this._containerWidth,T=new Qe(this._containerLeft,-h-this._containerBottom);T._add(Oi(this._container));var M=a.layerPointToContainerPoint(T),U=Dt(this.options.autoPanPadding),W=Dt(this.options.autoPanPaddingTopLeft||U),K=Dt(this.options.autoPanPaddingBottomRight||U),J=a.getSize(),ge=0,De=0;M.x+y+K.x>J.x&&(ge=M.x+y-J.x+K.x),M.x-ge-W.x<0&&(ge=M.x-W.x),M.y+h+K.y>J.y&&(De=M.y+h-J.y+K.y),M.y-De-W.y<0&&(De=M.y-W.y),(ge||De)&&a.fire("autopanstart").panBy([ge,De])}},_onCloseButtonClick:function(a){this._close(),ws(a)},_getAnchor:function(){return Dt(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}});Ve.mergeOptions({closePopupOnClick:!0}),Ve.include({openPopup:function(a,u,h){return a instanceof Xl||(a=new Xl(h).setContent(a)),u&&a.setLatLng(u),this.hasLayer(a)?this:(this._popup&&this._popup.options.autoClose&&this.closePopup(),this._popup=a,this.addLayer(a))},closePopup:function(a){return(!a||a===this._popup)&&(a=this._popup,this._popup=null),a&&this.removeLayer(a),this}}),$n.include({bindPopup:function(a,u){return a instanceof Xl?(Zt(a,u),this._popup=a,a._source=this):((!this._popup||u)&&(this._popup=new Xl(u,this)),this._popup.setContent(a)),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(a,u){return this._popup&&this._map&&(u=this._popup._prepareOpen(this,a,u),this._map.openPopup(this._popup,u)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(a){return this._popup&&(this._popup._map?this.closePopup():this.openPopup(a)),this},isPopupOpen:function(){return!!this._popup&&this._popup.isOpen()},setPopupContent:function(a){return this._popup&&this._popup.setContent(a),this},getPopup:function(){return this._popup},_openPopup:function(a){var u=a.layer||a.target;if(this._popup&&this._map){if(ws(a),u instanceof nl)return void this.openPopup(a.layer||a.target,a.latlng);this._map.hasLayer(this._popup)&&this._popup._source===u?this.closePopup():this.openPopup(u,a.latlng)}},_movePopup:function(a){this._popup.setLatLng(a.latlng)},_onKeyPress:function(a){13===a.originalEvent.keyCode&&this._openPopup(a)}});var Wc=Eo.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,interactive:!1,opacity:.9},onAdd:function(a){Eo.prototype.onAdd.call(this,a),this.setOpacity(this.options.opacity),a.fire("tooltipopen",{tooltip:this}),this._source&&this._source.fire("tooltipopen",{tooltip:this},!0)},onRemove:function(a){Eo.prototype.onRemove.call(this,a),a.fire("tooltipclose",{tooltip:this}),this._source&&this._source.fire("tooltipclose",{tooltip:this},!0)},getEvents:function(){var a=Eo.prototype.getEvents.call(this);return ut&&!this.options.permanent&&(a.preclick=this._close),a},_close:function(){this._map&&this._map.closeTooltip(this)},_initLayout:function(){this._contentNode=this._container=yt("div","leaflet-tooltip "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(a){var u,h,y=this._map,T=this._container,M=y.latLngToContainerPoint(y.getCenter()),U=y.layerPointToContainerPoint(a),W=this.options.direction,K=T.offsetWidth,J=T.offsetHeight,ge=Dt(this.options.offset),De=this._getAnchor();"top"===W?(u=K/2,h=J):"bottom"===W?(u=K/2,h=0):"center"===W?(u=K/2,h=J/2):"right"===W?(u=0,h=J/2):"left"===W?(u=K,h=J/2):U.x<M.x?(W="right",u=0,h=J/2):(W="left",u=K+2*(ge.x+De.x),h=J/2),a=a.subtract(Dt(u,h,!0)).add(ge).add(De),on(T,"leaflet-tooltip-right"),on(T,"leaflet-tooltip-left"),on(T,"leaflet-tooltip-top"),on(T,"leaflet-tooltip-bottom"),Xe(T,"leaflet-tooltip-"+W),sn(T,a)},_updatePosition:function(){var a=this._map.latLngToLayerPoint(this._latlng);this._setPosition(a)},setOpacity:function(a){this.options.opacity=a,this._container&&si(this._container,a)},_animateZoom:function(a){var u=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center);this._setPosition(u)},_getAnchor:function(){return Dt(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}});Ve.include({openTooltip:function(a,u,h){return a instanceof Wc||(a=new Wc(h).setContent(a)),u&&a.setLatLng(u),this.hasLayer(a)?this:this.addLayer(a)},closeTooltip:function(a){return a&&this.removeLayer(a),this}}),$n.include({bindTooltip:function(a,u){return a instanceof Wc?(Zt(a,u),this._tooltip=a,a._source=this):((!this._tooltip||u)&&(this._tooltip=new Wc(u,this)),this._tooltip.setContent(a)),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(a){if(a||!this._tooltipHandlersAdded){var u=a?"off":"on",h={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?h.add=this._openTooltip:(h.mouseover=this._openTooltip,h.mouseout=this.closeTooltip,this._tooltip.options.sticky&&(h.mousemove=this._moveTooltip),ut&&(h.click=this._openTooltip)),this[u](h),this._tooltipHandlersAdded=!a}},openTooltip:function(a,u){return this._tooltip&&this._map&&(u=this._tooltip._prepareOpen(this,a,u),this._map.openTooltip(this._tooltip,u),this._tooltip.options.interactive&&this._tooltip._container&&(Xe(this._tooltip._container,"leaflet-clickable"),this.addInteractiveTarget(this._tooltip._container))),this},closeTooltip:function(){return this._tooltip&&(this._tooltip._close(),this._tooltip.options.interactive&&this._tooltip._container&&(on(this._tooltip._container,"leaflet-clickable"),this.removeInteractiveTarget(this._tooltip._container))),this},toggleTooltip:function(a){return this._tooltip&&(this._tooltip._map?this.closeTooltip():this.openTooltip(a)),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(a){return this._tooltip&&this._tooltip.setContent(a),this},getTooltip:function(){return this._tooltip},_openTooltip:function(a){!this._tooltip||!this._map||this.openTooltip(a.layer||a.target,this._tooltip.options.sticky?a.latlng:void 0)},_moveTooltip:function(a){var h,y,u=a.latlng;this._tooltip.options.sticky&&a.originalEvent&&(h=this._map.mouseEventToContainerPoint(a.originalEvent),y=this._map.containerPointToLayerPoint(h),u=this._map.layerPointToLatLng(y)),this._tooltip.setLatLng(u)}});var Ay=zc.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(a){var u=a&&"DIV"===a.tagName?a:document.createElement("div"),h=this.options;if(h.html instanceof Element?(bo(u),u.appendChild(h.html)):u.innerHTML=!1!==h.html?h.html:"",h.bgPos){var y=Dt(h.bgPos);u.style.backgroundPosition=-y.x+"px "+-y.y+"px"}return this._setIconStyles(u,"icon"),u},createShadow:function(){return null}});zc.Default=nd;var qc=$n.extend({options:{tileSize:256,opacity:1,updateWhenIdle:sa,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(a){Zt(this,a)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView(),this._update()},beforeAdd:function(a){a._addZoomLimit(this)},onRemove:function(a){this._removeAllTiles(),B(this._container),a._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Te(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(_n(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(a){return this.options.opacity=a,this._updateOpacity(),this},setZIndex:function(a){return this.options.zIndex=a,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){return this._map&&(this._removeAllTiles(),this._update()),this},getEvents:function(){var a={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=Fl(this._onMoveEnd,this.options.updateInterval,this)),a.move=this._onMove),this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},createTile:function(){return document.createElement("div")},getTileSize:function(){var a=this.options.tileSize;return a instanceof Qe?a:new Qe(a,a)},_updateZIndex:function(){this._container&&null!=this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(a){for(var M,u=this.getPane().children,h=-a(-1/0,1/0),y=0,T=u.length;y<T;y++)M=u[y].style.zIndex,u[y]!==this._container&&M&&(h=a(h,+M));isFinite(h)&&(this.options.zIndex=h+a(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!xi){si(this._container,this.options.opacity);var a=+new Date,u=!1,h=!1;for(var y in this._tiles){var T=this._tiles[y];if(T.current&&T.loaded){var M=Math.min(1,(a-T.loaded)/200);si(T.el,M),M<1?u=!0:(T.active?h=!0:this._onOpaqueTile(T),T.active=!0)}}h&&!this._noPrune&&this._pruneTiles(),u&&(wn(this._fadeFrame),this._fadeFrame=un(this._updateOpacity,this))}},_onOpaqueTile:qt,_initContainer:function(){this._container||(this._container=yt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var a=this._tileZoom,u=this.options.maxZoom;if(void 0!==a){for(var h in this._levels)h=Number(h),this._levels[h].el.children.length||h===a?(this._levels[h].el.style.zIndex=u-Math.abs(a-h),this._onUpdateLevel(h)):(B(this._levels[h].el),this._removeTilesAtZoom(h),this._onRemoveLevel(h),delete this._levels[h]);var y=this._levels[a],T=this._map;return y||((y=this._levels[a]={}).el=yt("div","leaflet-tile-container leaflet-zoom-animated",this._container),y.el.style.zIndex=u,y.origin=T.project(T.unproject(T.getPixelOrigin()),a).round(),y.zoom=a,this._setZoomTransform(y,T.getCenter(),T.getZoom()),this._onCreateLevel(y)),this._level=y,y}},_onUpdateLevel:qt,_onRemoveLevel:qt,_onCreateLevel:qt,_pruneTiles:function(){if(this._map){var a,u,h=this._map.getZoom();if(h>this.options.maxZoom||h<this.options.minZoom)return void this._removeAllTiles();for(a in this._tiles)(u=this._tiles[a]).retain=u.current;for(a in this._tiles)if((u=this._tiles[a]).current&&!u.active){var y=u.coords;this._retainParent(y.x,y.y,y.z,y.z-5)||this._retainChildren(y.x,y.y,y.z,y.z+2)}for(a in this._tiles)this._tiles[a].retain||this._removeTile(a)}},_removeTilesAtZoom:function(a){for(var u in this._tiles)this._tiles[u].coords.z===a&&this._removeTile(u)},_removeAllTiles:function(){for(var a in this._tiles)this._removeTile(a)},_invalidateAll:function(){for(var a in this._levels)B(this._levels[a].el),this._onRemoveLevel(Number(a)),delete this._levels[a];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(a,u,h,y){var T=Math.floor(a/2),M=Math.floor(u/2),U=h-1,W=new Qe(+T,+M);W.z=+U;var K=this._tileCoordsToKey(W),J=this._tiles[K];return J&&J.active?(J.retain=!0,!0):(J&&J.loaded&&(J.retain=!0),U>y&&this._retainParent(T,M,U,y))},_retainChildren:function(a,u,h,y){for(var T=2*a;T<2*a+2;T++)for(var M=2*u;M<2*u+2;M++){var U=new Qe(T,M);U.z=h+1;var W=this._tileCoordsToKey(U),K=this._tiles[W];K&&K.active?K.retain=!0:(K&&K.loaded&&(K.retain=!0),h+1<y&&this._retainChildren(T,M,h+1,y))}},_resetView:function(a){var u=a&&(a.pinch||a.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),u,u)},_animateZoom:function(a){this._setView(a.center,a.zoom,!0,a.noUpdate)},_clampZoom:function(a){var u=this.options;return void 0!==u.minNativeZoom&&a<u.minNativeZoom?u.minNativeZoom:void 0!==u.maxNativeZoom&&u.maxNativeZoom<a?u.maxNativeZoom:a},_setView:function(a,u,h,y){var T=Math.round(u);T=void 0!==this.options.maxZoom&&T>this.options.maxZoom||void 0!==this.options.minZoom&&T<this.options.minZoom?void 0:this._clampZoom(T),(!y||this.options.updateWhenZooming&&T!==this._tileZoom)&&(this._tileZoom=T,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),void 0!==T&&this._update(a),h||this._pruneTiles(),this._noPrune=!!h),this._setZoomTransforms(a,u)},_setZoomTransforms:function(a,u){for(var h in this._levels)this._setZoomTransform(this._levels[h],a,u)},_setZoomTransform:function(a,u,h){var y=this._map.getZoomScale(h,a.zoom),T=a.origin.multiplyBy(y).subtract(this._map._getNewPixelOrigin(u,h)).round();Dr?we(a.el,T,y):sn(a.el,T)},_resetGrid:function(){var a=this._map,u=a.options.crs,h=this._tileSize=this.getTileSize(),y=this._tileZoom,T=this._map.getPixelWorldBounds(this._tileZoom);T&&(this._globalTileRange=this._pxBoundsToTileRange(T)),this._wrapX=u.wrapLng&&!this.options.noWrap&&[Math.floor(a.project([0,u.wrapLng[0]],y).x/h.x),Math.ceil(a.project([0,u.wrapLng[1]],y).x/h.y)],this._wrapY=u.wrapLat&&!this.options.noWrap&&[Math.floor(a.project([u.wrapLat[0],0],y).y/h.x),Math.ceil(a.project([u.wrapLat[1],0],y).y/h.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(a){var u=this._map,h=u._animatingZoom?Math.max(u._animateToZoom,u.getZoom()):u.getZoom(),y=u.getZoomScale(h,this._tileZoom),T=u.project(a,this._tileZoom).floor(),M=u.getSize().divideBy(2*y);return new dn(T.subtract(M),T.add(M))},_update:function(a){var u=this._map;if(u){var h=this._clampZoom(u.getZoom());if(void 0===a&&(a=u.getCenter()),void 0!==this._tileZoom){var y=this._getTiledPixelBounds(a),T=this._pxBoundsToTileRange(y),M=T.getCenter(),U=[],W=this.options.keepBuffer,K=new dn(T.getBottomLeft().subtract([W,-W]),T.getTopRight().add([W,-W]));if(!(isFinite(T.min.x)&&isFinite(T.min.y)&&isFinite(T.max.x)&&isFinite(T.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var J in this._tiles){var ge=this._tiles[J].coords;(ge.z!==this._tileZoom||!K.contains(new Qe(ge.x,ge.y)))&&(this._tiles[J].current=!1)}if(Math.abs(h-this._tileZoom)>1)return void this._setView(a,h);for(var De=T.min.y;De<=T.max.y;De++)for(var Pt=T.min.x;Pt<=T.max.x;Pt++){var Tn=new Qe(Pt,De);if(Tn.z=this._tileZoom,this._isValidTile(Tn)){var $i=this._tiles[this._tileCoordsToKey(Tn)];$i?$i.current=!0:U.push(Tn)}}if(U.sort(function(Pr,ko){return Pr.distanceTo(M)-ko.distanceTo(M)}),0!==U.length){this._loading||(this._loading=!0,this.fire("loading"));var Kc=document.createDocumentFragment();for(Pt=0;Pt<U.length;Pt++)this._addTile(U[Pt],Kc);this._level.el.appendChild(Kc)}}}},_isValidTile:function(a){var u=this._map.options.crs;if(!u.infinite){var h=this._globalTileRange;if(!u.wrapLng&&(a.x<h.min.x||a.x>h.max.x)||!u.wrapLat&&(a.y<h.min.y||a.y>h.max.y))return!1}if(!this.options.bounds)return!0;var y=this._tileCoordsToBounds(a);return ei(this.options.bounds).overlaps(y)},_keyToBounds:function(a){return this._tileCoordsToBounds(this._keyToTileCoords(a))},_tileCoordsToNwSe:function(a){var u=this._map,h=this.getTileSize(),y=a.scaleBy(h),T=y.add(h);return[u.unproject(y,a.z),u.unproject(T,a.z)]},_tileCoordsToBounds:function(a){var u=this._tileCoordsToNwSe(a),h=new Sn(u[0],u[1]);return this.options.noWrap||(h=this._map.wrapLatLngBounds(h)),h},_tileCoordsToKey:function(a){return a.x+":"+a.y+":"+a.z},_keyToTileCoords:function(a){var u=a.split(":"),h=new Qe(+u[0],+u[1]);return h.z=+u[2],h},_removeTile:function(a){var u=this._tiles[a];!u||(B(u.el),delete this._tiles[a],this.fire("tileunload",{tile:u.el,coords:this._keyToTileCoords(a)}))},_initTile:function(a){Xe(a,"leaflet-tile");var u=this.getTileSize();a.style.width=u.x+"px",a.style.height=u.y+"px",a.onselectstart=qt,a.onmousemove=qt,xi&&this.options.opacity<1&&si(a,this.options.opacity),qr&&!rn&&(a.style.WebkitBackfaceVisibility="hidden")},_addTile:function(a,u){var h=this._getTilePos(a),y=this._tileCoordsToKey(a),T=this.createTile(this._wrapCoords(a),Ut(this._tileReady,this,a));this._initTile(T),this.createTile.length<2&&un(Ut(this._tileReady,this,a,null,T)),sn(T,h),this._tiles[y]={el:T,coords:a,current:!0},u.appendChild(T),this.fire("tileloadstart",{tile:T,coords:a})},_tileReady:function(a,u,h){u&&this.fire("tileerror",{error:u,tile:h,coords:a});var y=this._tileCoordsToKey(a);(h=this._tiles[y])&&(h.loaded=+new Date,this._map._fadeAnimated?(si(h.el,0),wn(this._fadeFrame),this._fadeFrame=un(this._updateOpacity,this)):(h.active=!0,this._pruneTiles()),u||(Xe(h.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:h.el,coords:a})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),xi||!this._map._fadeAnimated?un(this._pruneTiles,this):setTimeout(Ut(this._pruneTiles,this),250)))},_getTilePos:function(a){return a.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(a){var u=new Qe(this._wrapX?Rl(a.x,this._wrapX):a.x,this._wrapY?Rl(a.y,this._wrapY):a.y);return u.z=a.z,u},_pxBoundsToTileRange:function(a){var u=this.getTileSize();return new dn(a.min.unscaleBy(u).floor(),a.max.unscaleBy(u).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var a in this._tiles)if(!this._tiles[a].loaded)return!1;return!0}});var ec=qc.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1},initialize:function(a,u){this._url=a,(u=Zt(this,u)).detectRetina&&xr&&u.maxZoom>0&&(u.tileSize=Math.floor(u.tileSize/2),u.zoomReverse?(u.zoomOffset--,u.minZoom++):(u.zoomOffset++,u.maxZoom--),u.minZoom=Math.max(0,u.minZoom)),"string"==typeof u.subdomains&&(u.subdomains=u.subdomains.split("")),qr||this.on("tileunload",this._onTileRemove)},setUrl:function(a,u){return this._url===a&&void 0===u&&(u=!0),this._url=a,u||this.redraw(),this},createTile:function(a,u){var h=document.createElement("img");return Pe(h,"load",Ut(this._tileOnLoad,this,u,h)),Pe(h,"error",Ut(this._tileOnError,this,u,h)),(this.options.crossOrigin||""===this.options.crossOrigin)&&(h.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),h.alt="",h.setAttribute("role","presentation"),h.src=this.getTileUrl(a),h},getTileUrl:function(a){var u={r:xr?"@2x":"",s:this._getSubdomain(a),x:a.x,y:a.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var h=this._globalTileRange.max.y-a.y;this.options.tms&&(u.y=h),u["-y"]=h}return Er(this._url,Je(u,this.options))},_tileOnLoad:function(a,u){xi?setTimeout(Ut(a,this,null,u),0):a(null,u)},_tileOnError:function(a,u,h){var y=this.options.errorTileUrl;y&&u.getAttribute("src")!==y&&(u.src=y),a(h,u)},_onTileRemove:function(a){a.tile.onload=null},_getZoomForUrl:function(){var a=this._tileZoom;return this.options.zoomReverse&&(a=this.options.maxZoom-a),a+this.options.zoomOffset},_getSubdomain:function(a){var u=Math.abs(a.x+a.y)%this.options.subdomains.length;return this.options.subdomains[u]},_abortLoading:function(){var a,u;for(a in this._tiles)this._tiles[a].coords.z!==this._tileZoom&&((u=this._tiles[a].el).onload=qt,u.onerror=qt,u.complete||(u.src=Rn,B(u),delete this._tiles[a]))},_removeTile:function(a){var u=this._tiles[a];if(u)return Bu||u.el.setAttribute("src",Rn),qc.prototype._removeTile.call(this,a)},_tileReady:function(a,u,h){if(this._map&&(!h||h.getAttribute("src")!==Rn))return qc.prototype._tileReady.call(this,a,u,h)}});function Oy(a,u){return new ec(a,u)}var Qc=ec.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(a,u){this._url=a;var h=Je({},this.defaultWmsParams);for(var y in u)y in this.options||(h[y]=u[y]);var T=(u=Zt(this,u)).detectRetina&&xr?2:1,M=this.getTileSize();h.width=M.x*T,h.height=M.y*T,this.wmsParams=h},onAdd:function(a){this._crs=this.options.crs||a.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version),this.wmsParams[this._wmsVersion>=1.3?"crs":"srs"]=this._crs.code,ec.prototype.onAdd.call(this,a)},getTileUrl:function(a){var u=this._tileCoordsToNwSe(a),h=this._crs,y=sr(h.project(u[0]),h.project(u[1])),T=y.min,M=y.max,U=(this._wmsVersion>=1.3&&this._crs===jc?[T.y,T.x,M.y,M.x]:[T.x,T.y,M.x,M.y]).join(","),W=ec.prototype.getTileUrl.call(this,a);return W+vt(this.wmsParams,W,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+U},setParams:function(a,u){return Je(this.wmsParams,a),u||this.redraw(),this}});ec.WMS=Qc,Oy.wms=function(a,u){return new Qc(a,u)};var Qo=$n.extend({options:{padding:.1,tolerance:0},initialize:function(a){Zt(this,a),mt(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&Xe(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var a={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(a.zoomanim=this._onAnimZoom),a},_onAnimZoom:function(a){this._updateTransform(a.center,a.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(a,u){var h=this._map.getZoomScale(u,this._zoom),y=Oi(this._container),T=this._map.getSize().multiplyBy(.5+this.options.padding),M=this._map.project(this._center,u),W=this._map.project(a,u).subtract(M),K=T.multiplyBy(-h).add(y).add(T).subtract(W);Dr?we(this._container,K,h):sn(this._container,K)},_reset:function(){for(var a in this._update(),this._updateTransform(this._center,this._zoom),this._layers)this._layers[a]._reset()},_onZoomEnd:function(){for(var a in this._layers)this._layers[a]._project()},_updatePaths:function(){for(var a in this._layers)this._layers[a]._update()},_update:function(){var a=this.options.padding,u=this._map.getSize(),h=this._map.containerPointToLayerPoint(u.multiplyBy(-a)).round();this._bounds=new dn(h,h.add(u.multiplyBy(1+2*a)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),sd=Qo.extend({getEvents:function(){var a=Qo.prototype.getEvents.call(this);return a.viewprereset=this._onViewPreReset,a},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Qo.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var a=this._container=document.createElement("canvas");Pe(a,"mousemove",this._onMouseMove,this),Pe(a,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Pe(a,"mouseout",this._handleMouseOut,this),this._ctx=a.getContext("2d")},_destroyContainer:function(){wn(this._redrawRequest),delete this._ctx,B(this._container),dt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){for(var u in this._redrawBounds=null,this._layers)this._layers[u]._update();this._redraw()}},_update:function(){if(!this._map._animatingZoom||!this._bounds){Qo.prototype._update.call(this);var a=this._bounds,u=this._container,h=a.getSize(),y=xr?2:1;sn(u,a.min),u.width=y*h.x,u.height=y*h.y,u.style.width=h.x+"px",u.style.height=h.y+"px",xr&&this._ctx.scale(2,2),this._ctx.translate(-a.min.x,-a.min.y),this.fire("update")}},_reset:function(){Qo.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(a){this._updateDashArray(a),this._layers[mt(a)]=a;var u=a._order={layer:a,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=u),this._drawLast=u,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(a){this._requestRedraw(a)},_removePath:function(a){var u=a._order,h=u.next,y=u.prev;h?h.prev=y:this._drawLast=y,y?y.next=h:this._drawFirst=h,delete a._order,delete this._layers[mt(a)],this._requestRedraw(a)},_updatePath:function(a){this._extendRedrawBounds(a),a._project(),a._update(),this._requestRedraw(a)},_updateStyle:function(a){this._updateDashArray(a),this._requestRedraw(a)},_updateDashArray:function(a){if("string"==typeof a.options.dashArray){var y,T,u=a.options.dashArray.split(/[, ]+/),h=[];for(T=0;T<u.length;T++){if(y=Number(u[T]),isNaN(y))return;h.push(y)}a.options._dashArray=h}else a.options._dashArray=a.options.dashArray},_requestRedraw:function(a){!this._map||(this._extendRedrawBounds(a),this._redrawRequest=this._redrawRequest||un(this._redraw,this))},_extendRedrawBounds:function(a){if(a._pxBounds){var u=(a.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new dn,this._redrawBounds.extend(a._pxBounds.min.subtract([u,u])),this._redrawBounds.extend(a._pxBounds.max.add([u,u]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var a=this._redrawBounds;if(a){var u=a.getSize();this._ctx.clearRect(a.min.x,a.min.y,u.x,u.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var a,u=this._redrawBounds;if(this._ctx.save(),u){var h=u.getSize();this._ctx.beginPath(),this._ctx.rect(u.min.x,u.min.y,h.x,h.y),this._ctx.clip()}this._drawing=!0;for(var y=this._drawFirst;y;y=y.next)a=y.layer,(!u||a._pxBounds&&a._pxBounds.intersects(u))&&a._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(a,u){if(this._drawing){var h,y,T,M,U=a._parts,W=U.length,K=this._ctx;if(W){for(K.beginPath(),h=0;h<W;h++){for(y=0,T=U[h].length;y<T;y++)K[y?"lineTo":"moveTo"]((M=U[h][y]).x,M.y);u&&K.closePath()}this._fillStroke(K,a)}}},_updateCircle:function(a){if(this._drawing&&!a._empty()){var u=a._point,h=this._ctx,y=Math.max(Math.round(a._radius),1),T=(Math.max(Math.round(a._radiusY),1)||y)/y;1!==T&&(h.save(),h.scale(1,T)),h.beginPath(),h.arc(u.x,u.y/T,y,0,2*Math.PI,!1),1!==T&&h.restore(),this._fillStroke(h,a)}},_fillStroke:function(a,u){var h=u.options;h.fill&&(a.globalAlpha=h.fillOpacity,a.fillStyle=h.fillColor||h.color,a.fill(h.fillRule||"evenodd")),h.stroke&&0!==h.weight&&(a.setLineDash&&a.setLineDash(u.options&&u.options._dashArray||[]),a.globalAlpha=h.opacity,a.lineWidth=h.weight,a.strokeStyle=h.color,a.lineCap=h.lineCap,a.lineJoin=h.lineJoin,a.stroke())},_onClick:function(a){for(var h,y,u=this._map.mouseEventToLayerPoint(a),T=this._drawFirst;T;T=T.next)(h=T.layer).options.interactive&&h._containsPoint(u)&&("click"!==a.type&&"preclick"===a.type||!this._map._draggableMoved(h))&&(y=h);y&&(Ju(a),this._fireEvent([y],a))},_onMouseMove:function(a){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var u=this._map.mouseEventToLayerPoint(a);this._handleMouseHover(a,u)}},_handleMouseOut:function(a){var u=this._hoveredLayer;u&&(on(this._container,"leaflet-interactive"),this._fireEvent([u],a,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(a,u){if(!this._mouseHoverThrottled){for(var h,y,T=this._drawFirst;T;T=T.next)(h=T.layer).options.interactive&&h._containsPoint(u)&&(y=h);y!==this._hoveredLayer&&(this._handleMouseOut(a),y&&(Xe(this._container,"leaflet-interactive"),this._fireEvent([y],a,"mouseover"),this._hoveredLayer=y)),this._hoveredLayer&&this._fireEvent([this._hoveredLayer],a),this._mouseHoverThrottled=!0,setTimeout(Ut(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(a,u,h){this._map._fireDOMEvent(u,h||u.type,a)},_bringToFront:function(a){var u=a._order;if(u){var h=u.next,y=u.prev;if(!h)return;h.prev=y,y?y.next=h:h&&(this._drawFirst=h),u.prev=this._drawLast,this._drawLast.next=u,u.next=null,this._drawLast=u,this._requestRedraw(a)}},_bringToBack:function(a){var u=a._order;if(u){var h=u.next,y=u.prev;if(!y)return;y.next=h,h?h.prev=y:y&&(this._drawLast=y),u.prev=null,u.next=this._drawFirst,this._drawFirst.prev=u,this._drawFirst=u,this._requestRedraw(a)}}});function rl(a){return ot?new sd(a):null}var mi=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(a){return document.createElement("<lvml:"+a+' class="lvml">')}}catch(a){return function(u){return document.createElement("<"+u+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}(),Am={_initContainer:function(){this._container=yt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Qo.prototype._update.call(this),this.fire("update"))},_initPath:function(a){var u=a._container=mi("shape");Xe(u,"leaflet-vml-shape "+(this.options.className||"")),u.coordsize="1 1",a._path=mi("path"),u.appendChild(a._path),this._updateStyle(a),this._layers[mt(a)]=a},_addPath:function(a){var u=a._container;this._container.appendChild(u),a.options.interactive&&a.addInteractiveTarget(u)},_removePath:function(a){var u=a._container;B(u),a.removeInteractiveTarget(u),delete this._layers[mt(a)]},_updateStyle:function(a){var u=a._stroke,h=a._fill,y=a.options,T=a._container;T.stroked=!!y.stroke,T.filled=!!y.fill,y.stroke?(u||(u=a._stroke=mi("stroke")),T.appendChild(u),u.weight=y.weight+"px",u.color=y.color,u.opacity=y.opacity,u.dashStyle=y.dashArray?kr(y.dashArray)?y.dashArray.join(" "):y.dashArray.replace(/( *, *)/g," "):"",u.endcap=y.lineCap.replace("butt","flat"),u.joinstyle=y.lineJoin):u&&(T.removeChild(u),a._stroke=null),y.fill?(h||(h=a._fill=mi("fill")),T.appendChild(h),h.color=y.fillColor||y.color,h.opacity=y.fillOpacity):h&&(T.removeChild(h),a._fill=null)},_updateCircle:function(a){var u=a._point.round(),h=Math.round(a._radius),y=Math.round(a._radiusY||h);this._setPath(a,a._empty()?"M0 0":"AL "+u.x+","+u.y+" "+h+","+y+" 0,23592600")},_setPath:function(a,u){a._path.v=u},_bringToFront:function(a){Te(a._container)},_bringToBack:function(a){_n(a._container)}},tc=Qa?mi:ia,Zc=Qo.extend({getEvents:function(){var a=Qo.prototype.getEvents.call(this);return a.zoomstart=this._onZoomStart,a},_initContainer:function(){this._container=tc("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=tc("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){B(this._container),dt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_onZoomStart:function(){this._update()},_update:function(){if(!this._map._animatingZoom||!this._bounds){Qo.prototype._update.call(this);var a=this._bounds,u=a.getSize(),h=this._container;(!this._svgSize||!this._svgSize.equals(u))&&(this._svgSize=u,h.setAttribute("width",u.x),h.setAttribute("height",u.y)),sn(h,a.min),h.setAttribute("viewBox",[a.min.x,a.min.y,u.x,u.y].join(" ")),this.fire("update")}},_initPath:function(a){var u=a._path=tc("path");a.options.className&&Xe(u,a.options.className),a.options.interactive&&Xe(u,"leaflet-interactive"),this._updateStyle(a),this._layers[mt(a)]=a},_addPath:function(a){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(a._path),a.addInteractiveTarget(a._path)},_removePath:function(a){B(a._path),a.removeInteractiveTarget(a._path),delete this._layers[mt(a)]},_updatePath:function(a){a._project(),a._update()},_updateStyle:function(a){var u=a._path,h=a.options;!u||(h.stroke?(u.setAttribute("stroke",h.color),u.setAttribute("stroke-opacity",h.opacity),u.setAttribute("stroke-width",h.weight),u.setAttribute("stroke-linecap",h.lineCap),u.setAttribute("stroke-linejoin",h.lineJoin),h.dashArray?u.setAttribute("stroke-dasharray",h.dashArray):u.removeAttribute("stroke-dasharray"),h.dashOffset?u.setAttribute("stroke-dashoffset",h.dashOffset):u.removeAttribute("stroke-dashoffset")):u.setAttribute("stroke","none"),h.fill?(u.setAttribute("fill",h.fillColor||h.color),u.setAttribute("fill-opacity",h.fillOpacity),u.setAttribute("fill-rule",h.fillRule||"evenodd")):u.setAttribute("fill","none"))},_updatePoly:function(a,u){this._setPath(a,ra(a._parts,u))},_updateCircle:function(a){var u=a._point,h=Math.max(Math.round(a._radius),1),T="a"+h+","+(Math.max(Math.round(a._radiusY),1)||h)+" 0 1,0 ",M=a._empty()?"M0 0":"M"+(u.x-h)+","+u.y+T+2*h+",0 "+T+2*-h+",0 ";this._setPath(a,M)},_setPath:function(a,u){a._path.setAttribute("d",u)},_bringToFront:function(a){Te(a._path)},_bringToBack:function(a){_n(a._path)}});function Ss(a){return Se||Qa?new Zc(a):null}Qa&&Zc.include(Am),Ve.include({getRenderer:function(a){var u=a.options.renderer||this._getPaneRenderer(a.options.pane)||this.options.renderer||this._renderer;return u||(u=this._renderer=this._createRenderer()),this.hasLayer(u)||this.addLayer(u),u},_getPaneRenderer:function(a){if("overlayPane"===a||void 0===a)return!1;var u=this._paneRenderers[a];return void 0===u&&(u=this._createRenderer({pane:a}),this._paneRenderers[a]=u),u},_createRenderer:function(a){return this.options.preferCanvas&&rl(a)||Ss(a)}});var ip=Gc.extend({initialize:function(a,u){Gc.prototype.initialize.call(this,this._boundsToLatLngs(a),u)},setBounds:function(a){return this.setLatLngs(this._boundsToLatLngs(a))},_boundsToLatLngs:function(a){return[(a=ei(a)).getSouthWest(),a.getNorthWest(),a.getNorthEast(),a.getSouthEast()]}});Zc.create=tc,Zc.pointsToPath=ra,To.geometryToLayer=km,To.coordsToLatLng=Dm,To.coordsToLatLngs=qo,To.latLngToCoords=id,To.latLngsToCoords=St,To.getFeature=il,To.asFeature=rd,Ve.mergeOptions({boxZoom:!0});var We=an.extend({initialize:function(a){this._map=a,this._container=a._container,this._pane=a._panes.overlayPane,this._resetStateTimeout=0,a.on("unload",this._destroy,this)},addHooks:function(){Pe(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){dt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){B(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){0!==this._resetStateTimeout&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(a){if(!a.shiftKey||1!==a.which&&1!==a.button)return!1;this._clearDeferredResetState(),this._resetState(),hr(),Ni(),this._startPoint=this._map.mouseEventToContainerPoint(a),Pe(document,{contextmenu:ws,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(a){this._moved||(this._moved=!0,this._box=yt("div","leaflet-zoom-box",this._container),Xe(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(a);var u=new dn(this._point,this._startPoint),h=u.getSize();sn(this._box,u.min),this._box.style.width=h.x+"px",this._box.style.height=h.y+"px"},_finish:function(){this._moved&&(B(this._box),on(this._container,"leaflet-crosshair")),Cs(),Ku(),dt(document,{contextmenu:ws,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(a){if((1===a.which||1===a.button)&&(this._finish(),this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(Ut(this._resetState,this),0);var u=new Sn(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(u).fire("boxzoomend",{boxZoomBounds:u})}},_onKeyDown:function(a){27===a.keyCode&&this._finish()}});Ve.addInitHook("addHandler","boxZoom",We),Ve.mergeOptions({doubleClickZoom:!0});var Ny=an.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(a){var u=this._map,h=u.getZoom(),y=u.options.zoomDelta,T=a.originalEvent.shiftKey?h-y:h+y;"center"===u.options.doubleClickZoom?u.setZoom(T):u.setZoomAround(a.containerPoint,T)}});Ve.addInitHook("addHandler","doubleClickZoom",Ny),Ve.mergeOptions({dragging:!0,inertia:!rn,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Om=an.extend({addHooks:function(){if(!this._draggable){var a=this._map;this._draggable=new Ge(a._mapPane,a._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),a.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),a.on("zoomend",this._onZoomEnd,this),a.whenReady(this._onZoomEnd,this))}Xe(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){on(this._map._container,"leaflet-grab"),on(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var a=this._map;if(a._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var u=ei(this._map.options.maxBounds);this._offsetLimit=sr(this._map.latLngToContainerPoint(u.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(u.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;a.fire("movestart").fire("dragstart"),a.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(a){if(this._map.options.inertia){var u=this._lastTime=+new Date,h=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(h),this._times.push(u),this._prunePositions(u)}this._map.fire("move",a).fire("drag",a)},_prunePositions:function(a){for(;this._positions.length>1&&a-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var a=this._map.getSize().divideBy(2),u=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=u.subtract(a).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(a,u){return a-(a-u)*this._viscosity},_onPreDragLimit:function(){if(this._viscosity&&this._offsetLimit){var a=this._draggable._newPos.subtract(this._draggable._startPos),u=this._offsetLimit;a.x<u.min.x&&(a.x=this._viscousLimit(a.x,u.min.x)),a.y<u.min.y&&(a.y=this._viscousLimit(a.y,u.min.y)),a.x>u.max.x&&(a.x=this._viscousLimit(a.x,u.max.x)),a.y>u.max.y&&(a.y=this._viscousLimit(a.y,u.max.y)),this._draggable._newPos=this._draggable._startPos.add(a)}},_onPreDragWrap:function(){var a=this._worldWidth,u=Math.round(a/2),h=this._initialWorldOffset,y=this._draggable._newPos.x,T=(y-u+h)%a+u-h,M=(y+u+h)%a-u-h,U=Math.abs(T+h)<Math.abs(M+h)?T:M;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=U},_onDragEnd:function(a){var u=this._map,h=u.options,y=!h.inertia||this._times.length<2;if(u.fire("dragend",a),y)u.fire("moveend");else{this._prunePositions(+new Date);var T=this._lastPos.subtract(this._positions[0]),U=h.easeLinearity,W=T.multiplyBy(U/((this._lastTime-this._times[0])/1e3)),K=W.distanceTo([0,0]),J=Math.min(h.inertiaMaxSpeed,K),ge=W.multiplyBy(J/K),De=J/(h.inertiaDeceleration*U),Pt=ge.multiplyBy(-De/2).round();Pt.x||Pt.y?(Pt=u._limitOffset(Pt,u.options.maxBounds),un(function(){u.panBy(Pt,{duration:De,easeLinearity:U,noMoveStart:!0,animate:!0})})):u.fire("moveend")}}});Ve.addInitHook("addHandler","dragging",Om),Ve.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Nm=an.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(a){this._map=a,this._setPanDelta(a.options.keyboardPanDelta),this._setZoomDelta(a.options.zoomDelta)},addHooks:function(){var a=this._map._container;a.tabIndex<=0&&(a.tabIndex="0"),Pe(a,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),dt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var a=document.body,u=document.documentElement,h=a.scrollTop||u.scrollTop,y=a.scrollLeft||u.scrollLeft;this._map._container.focus(),window.scrollTo(y,h)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(a){var y,T,u=this._panKeys={},h=this.keyCodes;for(y=0,T=h.left.length;y<T;y++)u[h.left[y]]=[-1*a,0];for(y=0,T=h.right.length;y<T;y++)u[h.right[y]]=[a,0];for(y=0,T=h.down.length;y<T;y++)u[h.down[y]]=[0,a];for(y=0,T=h.up.length;y<T;y++)u[h.up[y]]=[0,-1*a]},_setZoomDelta:function(a){var y,T,u=this._zoomKeys={},h=this.keyCodes;for(y=0,T=h.zoomIn.length;y<T;y++)u[h.zoomIn[y]]=a;for(y=0,T=h.zoomOut.length;y<T;y++)u[h.zoomOut[y]]=-a},_addHooks:function(){Pe(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){dt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(a){if(!(a.altKey||a.ctrlKey||a.metaKey)){var y,u=a.keyCode,h=this._map;if(u in this._panKeys)(!h._panAnim||!h._panAnim._inProgress)&&(y=this._panKeys[u],a.shiftKey&&(y=Dt(y).multiplyBy(3)),h.panBy(y),h.options.maxBounds&&h.panInsideBounds(h.options.maxBounds));else if(u in this._zoomKeys)h.setZoom(h.getZoom()+(a.shiftKey?3:1)*this._zoomKeys[u]);else{if(27!==u||!h._popup||!h._popup.options.closeOnEscapeKey)return;h.closePopup()}ws(a)}}});Ve.addInitHook("addHandler","keyboard",Nm),Ve.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Fm=an.extend({addHooks:function(){Pe(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){dt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(a){var u=Wh(a),h=this._map.options.wheelDebounceTime;this._delta+=u,this._lastMousePos=this._map.mouseEventToContainerPoint(a),this._startTime||(this._startTime=+new Date);var y=Math.max(h-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(Ut(this._performZoom,this),y),ws(a)},_performZoom:function(){var a=this._map,u=a.getZoom(),h=this._map.options.zoomSnap||0;a._stop();var T=4*Math.log(2/(1+Math.exp(-Math.abs(this._delta/(4*this._map.options.wheelPxPerZoomLevel)))))/Math.LN2,M=h?Math.ceil(T/h)*h:T,U=a._limitZoom(u+(this._delta>0?M:-M))-u;this._delta=0,this._startTime=null,U&&("center"===a.options.scrollWheelZoom?a.setZoom(u+U):a.setZoomAround(this._lastMousePos,u+U))}});Ve.addInitHook("addHandler","scrollWheelZoom",Fm),Ve.mergeOptions({tap:!0,tapTolerance:15});var op=an.extend({addHooks:function(){Pe(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){dt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(a){if(a.touches){if(Fi(a),this._fireClick=!0,a.touches.length>1)return this._fireClick=!1,void clearTimeout(this._holdTimeout);var u=a.touches[0],h=u.target;this._startPos=this._newPos=new Qe(u.clientX,u.clientY),h.tagName&&"a"===h.tagName.toLowerCase()&&Xe(h,"leaflet-active"),this._holdTimeout=setTimeout(Ut(function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",u))},this),1e3),this._simulateEvent("mousedown",u),Pe(document,{touchmove:this._onMove,touchend:this._onUp},this)}},_onUp:function(a){if(clearTimeout(this._holdTimeout),dt(document,{touchmove:this._onMove,touchend:this._onUp},this),this._fireClick&&a&&a.changedTouches){var u=a.changedTouches[0],h=u.target;h&&h.tagName&&"a"===h.tagName.toLowerCase()&&on(h,"leaflet-active"),this._simulateEvent("mouseup",u),this._isTapValid()&&this._simulateEvent("click",u)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(a){var u=a.touches[0];this._newPos=new Qe(u.clientX,u.clientY),this._simulateEvent("mousemove",u)},_simulateEvent:function(a,u){var h=document.createEvent("MouseEvents");h._simulated=!0,u.target._simulatedClick=!0,h.initMouseEvent(a,!0,!0,window,1,u.screenX,u.screenY,u.clientX,u.clientY,!1,!1,!1,!1,0,null),u.target.dispatchEvent(h)}});ut&&(!Ii||zo)&&Ve.addInitHook("addHandler","tap",op),Ve.mergeOptions({touchZoom:ut&&!rn,bounceAtZoomLimits:!0});var Rm=an.extend({addHooks:function(){Xe(this._map._container,"leaflet-touch-zoom"),Pe(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){on(this._map._container,"leaflet-touch-zoom"),dt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(a){var u=this._map;if(a.touches&&2===a.touches.length&&!u._animatingZoom&&!this._zooming){var h=u.mouseEventToContainerPoint(a.touches[0]),y=u.mouseEventToContainerPoint(a.touches[1]);this._centerPoint=u.getSize()._divideBy(2),this._startLatLng=u.containerPointToLatLng(this._centerPoint),"center"!==u.options.touchZoom&&(this._pinchStartLatLng=u.containerPointToLatLng(h.add(y)._divideBy(2))),this._startDist=h.distanceTo(y),this._startZoom=u.getZoom(),this._moved=!1,this._zooming=!0,u._stop(),Pe(document,"touchmove",this._onTouchMove,this),Pe(document,"touchend",this._onTouchEnd,this),Fi(a)}},_onTouchMove:function(a){if(a.touches&&2===a.touches.length&&this._zooming){var u=this._map,h=u.mouseEventToContainerPoint(a.touches[0]),y=u.mouseEventToContainerPoint(a.touches[1]),T=h.distanceTo(y)/this._startDist;if(this._zoom=u.getScaleZoom(T,this._startZoom),!u.options.bounceAtZoomLimits&&(this._zoom<u.getMinZoom()&&T<1||this._zoom>u.getMaxZoom()&&T>1)&&(this._zoom=u._limitZoom(this._zoom)),"center"===u.options.touchZoom){if(this._center=this._startLatLng,1===T)return}else{var M=h._add(y)._divideBy(2)._subtract(this._centerPoint);if(1===T&&0===M.x&&0===M.y)return;this._center=u.unproject(u.project(this._pinchStartLatLng,this._zoom).subtract(M),this._zoom)}this._moved||(u._moveStart(!0,!1),this._moved=!0),wn(this._animRequest);var U=Ut(u._move,u,this._center,this._zoom,{pinch:!0,round:!1});this._animRequest=un(U,this,!0),Fi(a)}},_onTouchEnd:function(){this._moved&&this._zooming?(this._zooming=!1,wn(this._animRequest),dt(document,"touchmove",this._onTouchMove,this),dt(document,"touchend",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))):this._zooming=!1}});Ve.addInitHook("addHandler","touchZoom",Rm),Ve.BoxZoom=We,Ve.DoubleClickZoom=Ny,Ve.Drag=Om,Ve.Keyboard=Nm,Ve.ScrollWheelZoom=Fm,Ve.Tap=op,Ve.TouchZoom=Rm,ne.version="1.7.1",ne.Control=ai,ne.control=Co,ne.Browser=ys,ne.Evented=he,ne.Mixin=Ja,ne.Util=za,ne.Class=Fe,ne.Handler=an,ne.extend=Je,ne.bind=Ut,ne.stamp=mt,ne.setOptions=Zt,ne.DomEvent=Sm,ne.DomUtil=ve,ne.PosAnimation=te,ne.Draggable=Ge,ne.LineUtil=ed,ne.PolyUtil=Li,ne.Point=Qe,ne.point=Dt,ne.Bounds=dn,ne.bounds=sr,ne.Transformation=_o,ne.transformation=Xt,ne.Projection=So,ne.LatLng=Rt,ne.latLng=gn,ne.LatLngBounds=Sn,ne.latLngBounds=ei,ne.CRS=ar,ne.GeoJSON=To,ne.geoJSON=Xh,ne.geoJson=xm,ne.Layer=$n,ne.LayerGroup=Yl,ne.layerGroup=function(a,u){return new Yl(a,u)},ne.FeatureGroup=Jl,ne.featureGroup=function(a,u){return new Jl(a,u)},ne.ImageOverlay=od,ne.imageOverlay=function(a,u,h){return new od(a,u,h)},ne.VideoOverlay=Mm,ne.videoOverlay=function(a,u,h){return new Mm(a,u,h)},ne.SVGOverlay=tp,ne.svgOverlay=function(a,u,h){return new tp(a,u,h)},ne.DivOverlay=Eo,ne.Popup=Xl,ne.popup=function(a,u){return new Xl(a,u)},ne.Tooltip=Wc,ne.tooltip=function(a,u){return new Wc(a,u)},ne.Icon=zc,ne.icon=function(a){return new zc(a)},ne.DivIcon=Ay,ne.divIcon=function(a){return new Ay(a)},ne.Marker=Kh,ne.marker=function(a,u){return new Kh(a,u)},ne.TileLayer=ec,ne.tileLayer=Oy,ne.GridLayer=qc,ne.gridLayer=function(a){return new qc(a)},ne.SVG=Zc,ne.svg=Ss,ne.Renderer=Qo,ne.Canvas=sd,ne.canvas=rl,ne.Path=nl,ne.CircleMarker=Yh,ne.circleMarker=function(a,u){return new Yh(a,u)},ne.Circle=Tm,ne.circle=function(a,u,h){return new Tm(a,u,h)},ne.Polyline=pa,ne.polyline=function(a,u){return new pa(a,u)},ne.Polygon=Gc,ne.polygon=function(a,u){return new Gc(a,u)},ne.Rectangle=ip,ne.rectangle=function(a,u){return new ip(a,u)},ne.Map=Ve,ne.map=function(a,u){return new Ve(a,u)};var Fy=window.L;ne.noConflict=function(){return window.L=Fy,this},window.L=ne}(pi)},753:(mo,pi,ne)=>{"use strict";function Xn(t){return"function"==typeof t}let Je=!1;const fi={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const n=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+n.stack)}else Je&&console.log("RxJS: Back to a better error behavior. Thank you. <3");Je=t},get useDeprecatedSynchronousErrorHandling(){return Je}};function Ut(t){setTimeout(()=>{throw t},0)}const Fn={closed:!0,next(t){},error(t){if(fi.useDeprecatedSynchronousErrorHandling)throw t;Ut(t)},complete(){}},mt=Array.isArray||(t=>t&&"number"==typeof t.length);function Fl(t){return null!==t&&"object"==typeof t}const qt=(()=>{function t(n){return Error.call(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map((e,i)=>`${i+1}) ${e.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n,this}return t.prototype=Object.create(Error.prototype),t})();class gt{constructor(n){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,n&&(this._ctorUnsubscribe=!0,this._unsubscribe=n)}unsubscribe(){let n;if(this.closed)return;let{_parentOrParents:e,_ctorUnsubscribe:i,_unsubscribe:r,_subscriptions:o}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,e instanceof gt)e.remove(this);else if(null!==e)for(let s=0;s<e.length;++s)e[s].remove(this);if(Xn(r)){i&&(this._unsubscribe=void 0);try{r.call(this)}catch(s){n=s instanceof qt?ta(s.errors):[s]}}if(mt(o)){let s=-1,l=o.length;for(;++s<l;){const c=o[s];if(Fl(c))try{c.unsubscribe()}catch(d){n=n||[],d instanceof qt?n=n.concat(ta(d.errors)):n.push(d)}}}if(n)throw new qt(n)}add(n){let e=n;if(!n)return gt.EMPTY;switch(typeof n){case"function":e=new gt(n);case"object":if(e===this||e.closed||"function"!=typeof e.unsubscribe)return e;if(this.closed)return e.unsubscribe(),e;if(!(e instanceof gt)){const o=e;e=new gt,e._subscriptions=[o]}break;default:throw new Error("unrecognized teardown "+n+" added to Subscription.")}let{_parentOrParents:i}=e;if(null===i)e._parentOrParents=this;else if(i instanceof gt){if(i===this)return e;e._parentOrParents=[i,this]}else{if(-1!==i.indexOf(this))return e;i.push(this)}const r=this._subscriptions;return null===r?this._subscriptions=[e]:r.push(e),e}remove(n){const e=this._subscriptions;if(e){const i=e.indexOf(n);-1!==i&&e.splice(i,1)}}}var t;function ta(t){return t.reduce((n,e)=>n.concat(e instanceof qt?e.errors:e),[])}gt.EMPTY=((t=new gt).closed=!0,t);const Tr="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random();class vt extends gt{constructor(n,e,i){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=Fn;break;case 1:if(!n){this.destination=Fn;break}if("object"==typeof n){n instanceof vt?(this.syncErrorThrowable=n.syncErrorThrowable,this.destination=n,n.add(this)):(this.syncErrorThrowable=!0,this.destination=new Oc(this,n));break}default:this.syncErrorThrowable=!0,this.destination=new Oc(this,n,e,i)}}[Tr](){return this}static create(n,e,i){const r=new vt(n,e,i);return r.syncErrorThrowable=!1,r}next(n){this.isStopped||this._next(n)}error(n){this.isStopped||(this.isStopped=!0,this._error(n))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(n){this.destination.next(n)}_error(n){this.destination.error(n),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:n}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=n,this}}class Oc extends vt{constructor(n,e,i,r){super(),this._parentSubscriber=n;let o,s=this;Xn(e)?o=e:e&&(o=e.next,i=e.error,r=e.complete,e!==Fn&&(s=Object.create(e),Xn(s.unsubscribe)&&this.add(s.unsubscribe.bind(s)),s.unsubscribe=this.unsubscribe.bind(this))),this._context=s,this._next=o,this._error=i,this._complete=r}next(n){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;fi.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,n)&&this.unsubscribe():this.__tryOrUnsub(this._next,n)}}error(n){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:i}=fi;if(this._error)i&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,n),this.unsubscribe()):(this.__tryOrUnsub(this._error,n),this.unsubscribe());else if(e.syncErrorThrowable)i?(e.syncErrorValue=n,e.syncErrorThrown=!0):Ut(n),this.unsubscribe();else{if(this.unsubscribe(),i)throw n;Ut(n)}}}complete(){if(!this.isStopped){const{_parentSubscriber:n}=this;if(this._complete){const e=()=>this._complete.call(this._context);fi.useDeprecatedSynchronousErrorHandling&&n.syncErrorThrowable?(this.__tryOrSetError(n,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(n,e){try{n.call(this._context,e)}catch(i){if(this.unsubscribe(),fi.useDeprecatedSynchronousErrorHandling)throw i;Ut(i)}}__tryOrSetError(n,e,i){if(!fi.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,i)}catch(r){return fi.useDeprecatedSynchronousErrorHandling?(n.syncErrorValue=r,n.syncErrorThrown=!0,!0):(Ut(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:n}=this;this._context=null,this._parentSubscriber=null,n.unsubscribe()}}const na="function"==typeof Symbol&&Symbol.observable||"@@observable";function Rn(t){return t}let _t=(()=>{class t{constructor(e){this._isScalar=!1,e&&(this._subscribe=e)}lift(e){const i=new t;return i.source=this,i.operator=e,i}subscribe(e,i,r){const{operator:o}=this,s=function(t,n,e){if(t){if(t instanceof vt)return t;if(t[Tr])return t[Tr]()}return t||n||e?new vt(t,n,e):new vt(Fn)}(e,i,r);if(s.add(o?o.call(s,this.source):this.source||fi.useDeprecatedSynchronousErrorHandling&&!s.syncErrorThrowable?this._subscribe(s):this._trySubscribe(s)),fi.useDeprecatedSynchronousErrorHandling&&s.syncErrorThrowable&&(s.syncErrorThrowable=!1,s.syncErrorThrown))throw s.syncErrorValue;return s}_trySubscribe(e){try{return this._subscribe(e)}catch(i){fi.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=i),function(t){for(;t;){const{closed:n,destination:e,isStopped:i}=t;if(n||i)return!1;t=e&&e instanceof vt?e:null}return!0}(e)?e.error(i):console.warn(i)}}forEach(e,i){return new(i=gs(i))((r,o)=>{let s;s=this.subscribe(l=>{try{e(l)}catch(c){o(c),s&&s.unsubscribe()}},o,r)})}_subscribe(e){const{source:i}=this;return i&&i.subscribe(e)}[na](){return this}pipe(...e){return 0===e.length?this:function(t){return 0===t.length?Rn:1===t.length?t[0]:function(e){return t.reduce((i,r)=>r(i),e)}}(e)(this)}toPromise(e){return new(e=gs(e))((i,r)=>{let o;this.subscribe(s=>o=s,s=>r(s),()=>i(o))})}}return t.create=n=>new t(n),t})();function gs(t){if(t||(t=fi.Promise||Promise),!t)throw new Error("no Promise impl found");return t}const un=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})();class wn extends gt{constructor(n,e){super(),this.subject=n,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const n=this.subject,e=n.observers;if(this.subject=null,!e||0===e.length||n.isStopped||n.closed)return;const i=e.indexOf(this.subscriber);-1!==i&&e.splice(i,1)}}class za extends vt{constructor(n){super(n),this.destination=n}}let Fe=(()=>{class t extends _t{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[Tr](){return new za(this)}lift(e){const i=new Ga(this,this);return i.operator=e,i}next(e){if(this.closed)throw new un;if(!this.isStopped){const{observers:i}=this,r=i.length,o=i.slice();for(let s=0;s<r;s++)o[s].next(e)}}error(e){if(this.closed)throw new un;this.hasError=!0,this.thrownError=e,this.isStopped=!0;const{observers:i}=this,r=i.length,o=i.slice();for(let s=0;s<r;s++)o[s].error(e);this.observers.length=0}complete(){if(this.closed)throw new un;this.isStopped=!0;const{observers:e}=this,i=e.length,r=e.slice();for(let o=0;o<i;o++)r[o].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(e){if(this.closed)throw new un;return super._trySubscribe(e)}_subscribe(e){if(this.closed)throw new un;return this.hasError?(e.error(this.thrownError),gt.EMPTY):this.isStopped?(e.complete(),gt.EMPTY):(this.observers.push(e),new wn(this,e))}asObservable(){const e=new _t;return e.source=this,e}}return t.create=(n,e)=>new Ga(n,e),t})();class Ga extends Fe{constructor(n,e){super(),this.destination=n,this.source=e}next(n){const{destination:e}=this;e&&e.next&&e.next(n)}error(n){const{destination:e}=this;e&&e.error&&this.destination.error(n)}complete(){const{destination:n}=this;n&&n.complete&&this.destination.complete()}_subscribe(n){const{source:e}=this;return e?this.source.subscribe(n):gt.EMPTY}}function Ln(t){return t&&"function"==typeof t.schedule}function he(t,n){return function(i){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return i.lift(new Qe(t,n))}}class Qe{constructor(n,e){this.project=n,this.thisArg=e}call(n,e){return e.subscribe(new Vu(n,this.project,this.thisArg))}}class Vu extends vt{constructor(n,e,i){super(n),this.project=e,this.count=0,this.thisArg=i||this}_next(n){let e;try{e=this.project.call(this.thisArg,n,this.count++)}catch(i){return void this.destination.error(i)}this.destination.next(e)}}const Dt=t=>n=>{for(let e=0,i=t.length;e<i&&!n.closed;e++)n.next(t[e]);n.complete()},Sn="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator",ar=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function go(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}const Ul=t=>{if(t&&"function"==typeof t[na])return(t=>n=>{const e=t[na]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(n)})(t);if(ar(t))return Dt(t);if(go(t))return(t=>n=>(t.then(e=>{n.closed||(n.next(e),n.complete())},e=>n.error(e)).then(null,Ut),n))(t);if(t&&"function"==typeof t[Sn])return(t=>n=>{const e=t[Sn]();for(;;){let i;try{i=e.next()}catch(r){return n.error(r),n}if(i.done){n.complete();break}if(n.next(i.value),n.closed)break}return"function"==typeof e.return&&n.add(()=>{e.return&&e.return()}),n})(t);{const e=`You provided ${Fl(t)?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(e)}};function Xt(t,n){return new _t(e=>{const i=new gt;let r=0;return i.add(n.schedule(function(){r!==t.length?(e.next(t[r++]),e.closed||i.add(this.schedule())):e.complete()})),i})}function hn(t,n){return n?function(t,n){if(null!=t){if(function(t){return t&&"function"==typeof t[na]}(t))return function(t,n){return new _t(e=>{const i=new gt;return i.add(n.schedule(()=>{const r=t[na]();i.add(r.subscribe({next(o){i.add(n.schedule(()=>e.next(o)))},error(o){i.add(n.schedule(()=>e.error(o)))},complete(){i.add(n.schedule(()=>e.complete()))}}))})),i})}(t,n);if(go(t))return function(t,n){return new _t(e=>{const i=new gt;return i.add(n.schedule(()=>t.then(r=>{i.add(n.schedule(()=>{e.next(r),i.add(n.schedule(()=>e.complete()))}))},r=>{i.add(n.schedule(()=>e.error(r)))}))),i})}(t,n);if(ar(t))return Xt(t,n);if(function(t){return t&&"function"==typeof t[Sn]}(t)||"string"==typeof t)return function(t,n){if(!t)throw new Error("Iterable cannot be null");return new _t(e=>{const i=new gt;let r;return i.add(()=>{r&&"function"==typeof r.return&&r.return()}),i.add(n.schedule(()=>{r=t[Sn](),i.add(n.schedule(function(){if(e.closed)return;let o,s;try{const l=r.next();o=l.value,s=l.done}catch(l){return void e.error(l)}s?e.complete():(e.next(o),this.schedule())}))})),i})}(t,n)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,n):t instanceof _t?t:new _t(Ul(t))}class lr extends vt{constructor(n){super(),this.parent=n}_next(n){this.parent.notifyNext(n)}_error(n){this.parent.notifyError(n),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class Mi extends vt{notifyNext(n){this.destination.next(n)}notifyError(n){this.destination.error(n)}notifyComplete(){this.destination.complete()}}function qr(t,n){if(n.closed)return;if(t instanceof _t)return t.subscribe(n);let e;try{e=Ul(t)(n)}catch(i){n.error(i)}return e}function rn(t,n,e=Number.POSITIVE_INFINITY){return"function"==typeof n?i=>i.pipe(rn((r,o)=>hn(t(r,o)).pipe(he((s,l)=>n(r,s,o,l))),e)):("number"==typeof n&&(e=n),i=>i.lift(new cr(t,e)))}class cr{constructor(n,e=Number.POSITIVE_INFINITY){this.project=n,this.concurrent=e}call(n,e){return e.subscribe(new Bu(n,this.project,this.concurrent))}}class Bu extends Mi{constructor(n,e,i=Number.POSITIVE_INFINITY){super(n),this.project=e,this.concurrent=i,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(n){this.active<this.concurrent?this._tryNext(n):this.buffer.push(n)}_tryNext(n){let e;const i=this.index++;try{e=this.project(n,i)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e)}_innerSub(n){const e=new lr(this),i=this.destination;i.add(e);const r=qr(n,e);r!==e&&i.add(r)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(n){this.destination.next(n)}notifyComplete(){const n=this.buffer;this.active--,n.length>0?this._next(n.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}function _s(t=Number.POSITIVE_INFINITY){return rn(Rn,t)}function vs(t,n){return n?Xt(t,n):new _t(Dt(t))}function zo(...t){let n=Number.POSITIVE_INFINITY,e=null,i=t[t.length-1];return Ln(i)?(e=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(n=t.pop())):"number"==typeof i&&(n=t.pop()),null===e&&1===t.length&&t[0]instanceof _t?t[0]:_s(n)(vs(t,e))}function Wa(){return function(n){return n.lift(new Fc(n))}}class Fc{constructor(n){this.connectable=n}call(n,e){const{connectable:i}=this;i._refCount++;const r=new Rc(n,i),o=e.subscribe(r);return r.closed||(r.connection=i.connect()),o}}class Rc extends vt{constructor(n,e){super(n),this.connectable=e}_unsubscribe(){const{connectable:n}=this;if(!n)return void(this.connection=null);this.connectable=null;const e=n._refCount;if(e<=0)return void(this.connection=null);if(n._refCount=e-1,e>1)return void(this.connection=null);const{connection:i}=this,r=n._connection;this.connection=null,r&&(!i||r===i)&&r.unsubscribe()}}class qa extends _t{constructor(n,e){super(),this.source=n,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(n){return this.getSubject().subscribe(n)}getSubject(){const n=this._subject;return(!n||n.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let n=this._connection;return n||(this._isComplete=!1,n=this._connection=new gt,n.add(this.source.subscribe(new Bl(this.getSubject(),this))),n.closed&&(this._connection=null,n=gt.EMPTY)),n}refCount(){return Wa()(this)}}const oa=(()=>{const t=qa.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class Bl extends za{constructor(n,e){super(n),this.connectable=e}_error(n){this._unsubscribe(),super._error(n)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const n=this.connectable;if(n){this.connectable=null;const e=n._connection;n._refCount=0,n._subject=null,n._connection=null,e&&e.unsubscribe()}}}function Lc(t,n){return function(i){let r;if(r="function"==typeof t?t:function(){return t},"function"==typeof n)return i.lift(new jh(r,n));const o=Object.create(i,oa);return o.source=i,o.subjectFactory=r,o}}class jh{constructor(n,e){this.subjectFactory=n,this.selector=e}call(n,e){const{selector:i}=this,r=this.subjectFactory(),o=i(r).subscribe(n);return o.add(e.subscribe(r)),o}}function Go(){return new Fe}function Ii(){return t=>Wa()(Lc(Go)(t))}function ut(t){for(let n in t)if(t[n]===ut)return n;throw Error("Could not find renamed property on target object.")}function Hl(t,n){for(const e in n)n.hasOwnProperty(e)&&!t.hasOwnProperty(e)&&(t[e]=n[e])}function rt(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(rt).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const n=t.toString();if(null==n)return""+n;const e=n.indexOf("\n");return-1===e?n:n.substring(0,e)}function xr(t,n){return null==t||""===t?null===n?"":n:null==n||""===n?t:t+" "+n}const Wo=ut({__forward_ref__:ut});function ot(t){return t.__forward_ref__=ot,t.toString=function(){return rt(this())},t}function Se(t){return Qa(t)?t():t}function Qa(t){return"function"==typeof t&&t.hasOwnProperty(Wo)&&t.__forward_ref__===ot}class ys extends Error{constructor(n,e){super(function(t,n){return`${t?`NG0${t}: `:""}${n}`}(n,e)),this.code=n}}function Re(t){return"string"==typeof t?t:null==t?"":String(t)}function ni(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():Re(t)}function jl(t,n){const e=n?` in ${n}`:"";throw new ys("201",`No provider for ${ni(t)} found${e}`)}function jt(t,n,e,i){throw new Error(`ASSERTION ERROR: ${t}`+(null==i?"":` [Expected=> ${e} ${i} ${n} <=Actual]`))}function B(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}const bo=B;function Te(t){return{providers:t.providers||[],imports:t.imports||[]}}function _n(t){return Ka(t,Kr)||Ka(t,zl)}function Ka(t,n){return t.hasOwnProperty(n)?t[n]:null}function Ai(t){return t&&(t.hasOwnProperty(si)||t.hasOwnProperty(la))?t[si]:null}const Kr=ut({\u0275prov:ut}),si=ut({\u0275inj:ut}),zl=ut({ngInjectableDef:ut}),la=ut({ngInjectorDef:ut});var we=(()=>((we=we||{})[we.Default=0]="Default",we[we.Host=1]="Host",we[we.Self=2]="Self",we[we.SkipSelf=4]="SkipSelf",we[we.Optional=8]="Optional",we))();let sn;function hr(t){const n=sn;return sn=t,n}function Cs(t,n,e){const i=_n(t);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:e&we.Optional?null:void 0!==n?n:void jl(rt(t),"Injector")}function Wi(t){return{toString:t}.toString()}var Ni=(()=>((Ni=Ni||{})[Ni.OnPush=0]="OnPush",Ni[Ni.Default=1]="Default",Ni))(),I=(()=>((I=I||{})[I.Emulated=0]="Emulated",I[I.None=2]="None",I[I.ShadowDom=3]="ShadowDom",I))();const V="undefined"!=typeof globalThis&&globalThis,Q="undefined"!=typeof window&&window,ee="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,ve=V||"undefined"!=typeof global&&global||Q||ee,dt={},bt=[],Wl=ut({\u0275cmp:ut}),ql=ut({\u0275dir:ut}),Vc=ut({\u0275pipe:ut}),ca=ut({\u0275mod:ut}),Gh=ut({\u0275loc:ut}),Mr=ut({\u0275fac:ut}),Fi=ut({__NG_ELEMENT_ID__:ut});let ws=0;function Y(t){return Wi(()=>{const e={},i={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===Ni.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||bt,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||I.Emulated,id:"c",styles:t.styles||bt,_:null,setInput:null,schemas:t.schemas||null,tView:null},r=t.directives,o=t.features,s=t.pipes;return i.id+=ws++,i.inputs=Sm(t.inputs,e),i.outputs=Sm(t.outputs),o&&o.forEach(l=>l(i)),i.directiveDefs=r?()=>("function"==typeof r?r():r).map(Wh):null,i.pipeDefs=s?()=>("function"==typeof s?s():s).map(Yu):null,i})}function Wh(t){return qi(t)||function(t){return t[ql]||null}(t)}function Yu(t){return function(t){return t[Vc]||null}(t)}const Ju={};function et(t){return Wi(()=>{const n={type:t.type,bootstrap:t.bootstrap||bt,declarations:t.declarations||bt,imports:t.imports||bt,exports:t.exports||bt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&(Ju[t.id]=t.type),n})}function Sm(t,n){if(null==t)return dt;const e={};for(const i in t)if(t.hasOwnProperty(i)){let r=t[i],o=r;Array.isArray(r)&&(o=r[1],r=r[0]),e[r]=i,n&&(n[r]=o)}return e}const te=Y;function Ve(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function qi(t){return t[Wl]||null}function Ir(t,n){const e=t[ca]||null;if(!e&&!0===n)throw new Error(`Type ${rt(t)} does not have '\u0275mod' property.`);return e}function Jr(t){return Array.isArray(t)&&"object"==typeof t[1]}function So(t){return Array.isArray(t)&&!0===t[1]}function Zh(t){return 0!=(8&t.flags)}function jc(t){return 2==(2&t.flags)}function td(t){return 1==(1&t.flags)}function $n(t){return null!==t.template}function Yl(t){return 0!=(512&t[2])}function qo(t,n){return t.hasOwnProperty(Mr)?t[Mr]:null}class id{constructor(n,e,i){this.previousValue=n,this.currentValue=e,this.firstChange=i}isFirstChange(){return this.firstChange}}function St(){return il}function il(t){return t.type.prototype.ngOnChanges&&(t.setInput=Jh),rd}function rd(){const t=xm(this),n=null==t?void 0:t.current;if(n){const e=t.previous;if(e===dt)t.previous=n;else for(let i in n)e[i]=n[i];t.current=null,this.ngOnChanges(n)}}function Jh(t,n,e,i){const r=xm(t)||function(t,n){return t[Xh]=n}(t,{previous:dt,current:null}),o=r.current||(r.current={}),s=r.previous,l=this.declaredInputs[e],c=s[l];o[l]=new id(c&&c.currentValue,n,s===dt),t[i]=n}St.ngInherit=!0;const Xh="__ngSimpleChanges__";function xm(t){return t[Xh]||null}let Eo;function np(){return void 0!==Eo?Eo:"undefined"!=typeof document?document:void 0}function In(t){return!!t.listen}const Pm={createRenderer:(t,n)=>np()};function Gn(t){for(;Array.isArray(t);)t=t[0];return t}function Qc(t,n){return Gn(n[t])}function eo(t,n){return Gn(n[t.index])}function sd(t,n){return t.data[n]}function rl(t,n){return t[n]}function mi(t,n){const e=n[t];return Jr(e)?e:e[0]}function Am(t){return 4==(4&t[2])}function tc(t){return 128==(128&t[2])}function Ss(t,n){return null==n?null:t[n]}function ip(t){t[18]=0}function rp(t,n){t[5]+=n;let e=t,i=t[3];for(;null!==i&&(1===n&&1===e[5]||-1===n&&0===e[5]);)i[5]+=n,e=i,i=i[3]}const We={lFrame:ap(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function op(){return We.bindingsEnabled}function a(){return We.lFrame.lView}function u(){return We.lFrame.tView}function h(t){return We.lFrame.contextLView=t,t[8]}function y(){let t=T();for(;null!==t&&64===t.type;)t=t.parent;return t}function T(){return We.lFrame.currentTNode}function M(){const t=We.lFrame,n=t.currentTNode;return t.isParent?n:n.parent}function U(t,n){const e=We.lFrame;e.currentTNode=t,e.isParent=n}function W(){return We.lFrame.isParent}function K(){We.lFrame.isParent=!1}function De(){return We.isInCheckNoChangesMode}function Pt(t){We.isInCheckNoChangesMode=t}function Tn(){const t=We.lFrame;let n=t.bindingRootIndex;return-1===n&&(n=t.bindingRootIndex=t.tView.bindingStartIndex),n}function $i(){return We.lFrame.bindingIndex}function Pr(){return We.lFrame.bindingIndex++}function ko(t){const n=We.lFrame,e=n.bindingIndex;return n.bindingIndex=n.bindingIndex+t,e}function Lm(t){We.lFrame.inI18n=t}function Ly(t,n){const e=We.lFrame;e.bindingIndex=e.bindingRootIndex=t,sp(n)}function sp(t){We.lFrame.currentDirectiveIndex=t}function Un(){return We.lFrame.currentQueryIndex}function nc(t){We.lFrame.currentQueryIndex=t}function $y(t){const n=t[1];return 2===n.type?n.declTNode:1===n.type?t[6]:null}function Um(t,n,e){if(e&we.SkipSelf){let r=n,o=t;for(;!(r=r.parent,null!==r||e&we.Host||(r=$y(o),null===r||(o=o[15],10&r.type))););if(null===r)return!1;n=r,t=o}const i=We.lFrame=cd();return i.currentTNode=n,i.lView=t,!0}function ld(t){const n=cd(),e=t[1];We.lFrame=n,n.currentTNode=e.firstChild,n.lView=t,n.tView=e,n.contextLView=t,n.bindingIndex=e.bindingStartIndex,n.inI18n=!1}function cd(){const t=We.lFrame,n=null===t?null:t.child;return null===n?ap(t):n}function ap(t){const n={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=n),n}function Vm(){const t=We.lFrame;return We.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const ZS=Vm;function Bm(){const t=Vm();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Ar(){return We.lFrame.selectedIndex}function ic(t){We.lFrame.selectedIndex=t}function Wn(){const t=We.lFrame;return sd(t.tView,t.selectedIndex)}function Hm(t,n){for(let e=n.directiveStart,i=n.directiveEnd;e<i;e++){const o=t.data[e].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:l,ngAfterViewInit:c,ngAfterViewChecked:d,ngOnDestroy:m}=o;s&&(t.contentHooks||(t.contentHooks=[])).push(-e,s),l&&((t.contentHooks||(t.contentHooks=[])).push(e,l),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(e,l)),c&&(t.viewHooks||(t.viewHooks=[])).push(-e,c),d&&((t.viewHooks||(t.viewHooks=[])).push(e,d),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(e,d)),null!=m&&(t.destroyHooks||(t.destroyHooks=[])).push(e,m)}}function jm(t,n,e){KS(t,n,3,e)}function zm(t,n,e,i){(3&t[2])===e&&KS(t,n,e,i)}function Uy(t,n){let e=t[2];(3&e)===n&&(e&=2047,e+=1,t[2]=e)}function KS(t,n,e,i){const o=null!=i?i:-1,s=n.length-1;let l=0;for(let c=void 0!==i?65535&t[18]:0;c<s;c++)if("number"==typeof n[c+1]){if(l=n[c],null!=i&&l>=i)break}else n[c]<0&&(t[18]+=65536),(l<o||-1==o)&&(LL(t,e,n,c),t[18]=(4294901760&t[18])+c+2),c++}function LL(t,n,e,i){const r=e[i]<0,o=e[i+1],l=t[r?-e[i]:e[i]];if(r){if(t[2]>>11<t[18]>>16&&(3&t[2])===n){t[2]+=2048;try{o.call(l)}finally{}}}else try{o.call(l)}finally{}}class lp{constructor(n,e,i){this.factory=n,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=i}}function Gm(t,n,e){const i=In(t);let r=0;for(;r<e.length;){const o=e[r];if("number"==typeof o){if(0!==o)break;r++;const s=e[r++],l=e[r++],c=e[r++];i?t.setAttribute(n,l,c,s):n.setAttributeNS(s,l,c)}else{const s=o,l=e[++r];By(s)?i&&t.setProperty(n,s,l):i?t.setAttribute(n,s,l):n.setAttribute(s,l),r++}}return r}function YS(t){return 3===t||4===t||6===t}function By(t){return 64===t.charCodeAt(0)}function Wm(t,n){if(null!==n&&0!==n.length)if(null===t||0===t.length)t=n.slice();else{let e=-1;for(let i=0;i<n.length;i++){const r=n[i];"number"==typeof r?e=r:0===e||JS(t,e,r,null,-1===e||2===e?n[++i]:null)}}return t}function JS(t,n,e,i,r){let o=0,s=t.length;if(-1===n)s=-1;else for(;o<t.length;){const l=t[o++];if("number"==typeof l){if(l===n){s=-1;break}if(l>n){s=o-1;break}}}for(;o<t.length;){const l=t[o];if("number"==typeof l)break;if(l===e){if(null===i)return void(null!==r&&(t[o+1]=r));if(i===t[o+1])return void(t[o+2]=r)}o++,null!==i&&o++,null!==r&&o++}-1!==s&&(t.splice(s,0,n),o=s+1),t.splice(o++,0,e),null!==i&&t.splice(o++,0,i),null!==r&&t.splice(o++,0,r)}function XS(t){return-1!==t}function ud(t){return 32767&t}function dd(t,n){let e=function(t){return t>>16}(t),i=n;for(;e>0;)i=i[15],e--;return i}let Hy=!0;function qm(t){const n=Hy;return Hy=t,n}let jL=0;function up(t,n){const e=zy(t,n);if(-1!==e)return e;const i=n[1];i.firstCreatePass&&(t.injectorIndex=n.length,jy(i.data,t),jy(n,null),jy(i.blueprint,null));const r=Qm(t,n),o=t.injectorIndex;if(XS(r)){const s=ud(r),l=dd(r,n),c=l[1].data;for(let d=0;d<8;d++)n[o+d]=l[s+d]|c[s+d]}return n[o+8]=r,o}function jy(t,n){t.push(0,0,0,0,0,0,0,0,n)}function zy(t,n){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===n[t.injectorIndex+8]?-1:t.injectorIndex}function Qm(t,n){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let e=0,i=null,r=n;for(;null!==r;){const o=r[1],s=o.type;if(i=2===s?o.declTNode:1===s?r[6]:null,null===i)return-1;if(e++,r=r[15],-1!==i.injectorIndex)return i.injectorIndex|e<<16}return-1}function Zm(t,n,e){!function(t,n,e){let i;"string"==typeof e?i=e.charCodeAt(0)||0:e.hasOwnProperty(Fi)&&(i=e[Fi]),null==i&&(i=e[Fi]=jL++);const r=255&i;n.data[t+(r>>5)]|=1<<r}(t,n,e)}function nT(t,n,e){if(e&we.Optional)return t;jl(n,"NodeInjector")}function iT(t,n,e,i){if(e&we.Optional&&void 0===i&&(i=null),0==(e&(we.Self|we.Host))){const r=t[9],o=hr(void 0);try{return r?r.get(n,i,e&we.Optional):Cs(n,i,e&we.Optional)}finally{hr(o)}}return nT(i,n,e)}function rT(t,n,e,i=we.Default,r){if(null!==t){const o=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const n=t.hasOwnProperty(Fi)?t[Fi]:void 0;return"number"==typeof n?n>=0?255&n:WL:n}(e);if("function"==typeof o){if(!Um(n,t,i))return i&we.Host?nT(r,e,i):iT(n,e,i,r);try{const s=o(i);if(null!=s||i&we.Optional)return s;jl(e)}finally{ZS()}}else if("number"==typeof o){let s=null,l=zy(t,n),c=-1,d=i&we.Host?n[16][6]:null;for((-1===l||i&we.SkipSelf)&&(c=-1===l?Qm(t,n):n[l+8],-1!==c&&aT(i,!1)?(s=n[1],l=ud(c),n=dd(c,n)):l=-1);-1!==l;){const m=n[1];if(sT(o,l,m.data)){const _=qL(l,n,e,s,i,d);if(_!==oT)return _}c=n[l+8],-1!==c&&aT(i,n[1].data[l+8]===d)&&sT(o,l,n)?(s=m,l=ud(c),n=dd(c,n)):l=-1}}}return iT(n,e,i,r)}const oT={};function WL(){return new hd(y(),a())}function qL(t,n,e,i,r,o){const s=n[1],l=s.data[t+8],m=Km(l,s,e,null==i?jc(l)&&Hy:i!=s&&0!=(3&l.type),r&we.Host&&o===l);return null!==m?dp(n,s,m,l):oT}function Km(t,n,e,i,r){const o=t.providerIndexes,s=n.data,l=1048575&o,c=t.directiveStart,m=o>>20,w=r?l+m:t.directiveEnd;for(let E=i?l:l+m;E<w;E++){const D=s[E];if(E<c&&e===D||E>=c&&D.type===e)return E}if(r){const E=s[c];if(E&&$n(E)&&E.type===e)return c}return null}function dp(t,n,e,i){let r=t[e];const o=n.data;if(function(t){return t instanceof lp}(r)){const s=r;s.resolving&&function(t,n){throw new ys("200",`Circular dependency in DI detected for ${t}`)}(ni(o[e]));const l=qm(s.canSeeViewProviders);s.resolving=!0;const c=s.injectImpl?hr(s.injectImpl):null;Um(t,i,we.Default);try{r=t[e]=s.factory(void 0,o,t,i),n.firstCreatePass&&e>=i.directiveStart&&function(t,n,e){const{ngOnChanges:i,ngOnInit:r,ngDoCheck:o}=n.type.prototype;if(i){const s=il(n);(e.preOrderHooks||(e.preOrderHooks=[])).push(t,s),(e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(t,s)}r&&(e.preOrderHooks||(e.preOrderHooks=[])).push(0-t,r),o&&((e.preOrderHooks||(e.preOrderHooks=[])).push(t,o),(e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(t,o))}(e,o[e],n)}finally{null!==c&&hr(c),qm(l),s.resolving=!1,ZS()}}return r}function sT(t,n,e){return!!(e[n+(t>>5)]&1<<t)}function aT(t,n){return!(t&we.Self||t&we.Host&&n)}class hd{constructor(n,e){this._tNode=n,this._lView=e}get(n,e,i){return rT(this._tNode,this._lView,n,i,e)}}function tn(t){return Wi(()=>{const n=t.prototype.constructor,e=n[Mr]||Gy(n),i=Object.prototype;let r=Object.getPrototypeOf(t.prototype).constructor;for(;r&&r!==i;){const o=r[Mr]||Gy(r);if(o&&o!==e)return o;r=Object.getPrototypeOf(r)}return o=>new o})}function Gy(t){return Qa(t)?()=>{const n=Gy(Se(t));return n&&n()}:qo(t)}function fa(t){return function(t,n){if("class"===n)return t.classes;if("style"===n)return t.styles;const e=t.attrs;if(e){const i=e.length;let r=0;for(;r<i;){const o=e[r];if(YS(o))break;if(0===o)r+=2;else if("number"==typeof o)for(r++;r<i&&"string"==typeof e[r];)r++;else{if(o===n)return e[r+1];r+=2}}}return null}(y(),t)}const fd="__parameters__",md="__prop__metadata__";function Wy(t){return function(...e){if(t){const i=t(...e);for(const r in i)this[r]=i[r]}}}function Yc(t,n,e){return Wi(()=>{const i=Wy(n);function r(...o){if(this instanceof r)return i.apply(this,o),this;const s=new r(...o);return l.annotation=s,l;function l(c,d,m){const _=c.hasOwnProperty(fd)?c[fd]:Object.defineProperty(c,fd,{value:[]})[fd];for(;_.length<=m;)_.push(null);return(_[m]=_[m]||[]).push(s),c}}return e&&(r.prototype=Object.create(e.prototype)),r.prototype.ngMetadataName=t,r.annotationCls=r,r})}function ZL(t,n,e,i){return Wi(()=>{const r=Wy(n);function o(...s){if(this instanceof o)return r.apply(this,s),this;const l=new o(...s);return function(d,m){const _=d.constructor,w=_.hasOwnProperty(md)?_[md]:Object.defineProperty(_,md,{value:{}})[md];w[m]=w.hasOwnProperty(m)&&w[m]||[],w[m].unshift(l),i&&i(d,m,...s)}}return e&&(o.prototype=Object.create(e.prototype)),o.prototype.ngMetadataName=t,o.annotationCls=o,o})}class tt{constructor(n,e){this._desc=n,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=B({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return`InjectionToken ${this._desc}`}}const qy=new tt("AnalyzeForEntryComponents"),Ym=Function;function Zo(t,n){void 0===n&&(n=t);for(let e=0;e<t.length;e++){let i=t[e];Array.isArray(i)?(n===t&&(n=t.slice(0,e)),Zo(i,n)):n!==t&&n.push(i)}return n}function ma(t,n){t.forEach(e=>Array.isArray(e)?ma(e,n):n(e))}function Xm(t,n,e){n>=t.length?t.push(e):t.splice(n,0,e)}function Jc(t,n){return n>=t.length-1?t.pop():t.splice(n,1)[0]}function oc(t,n){const e=[];for(let i=0;i<t;i++)e.push(n);return e}function Do(t,n,e){let i=gd(t,n);return i>=0?t[1|i]=e:(i=~i,function(t,n,e,i){let r=t.length;if(r==n)t.push(e,i);else if(1===r)t.push(i,t[0]),t[0]=e;else{for(r--,t.push(t[r-1],t[r]);r>n;)t[r]=t[r-2],r--;t[n]=e,t[n+1]=i}}(t,i,n,e)),i}function Qy(t,n){const e=gd(t,n);if(e>=0)return t[1|e]}function gd(t,n){return function(t,n,e){let i=0,r=t.length>>e;for(;r!==i;){const o=i+(r-i>>1),s=t[o<<e];if(n===s)return o<<e;s>n?r=o:i=o+1}return~(r<<e)}(t,n,1)}const mp={},Ky="__NG_DI_FLAG__",_d="ngTempTokenPath",a3=/\n/gm,Yy="__source",Jy=ut({provide:String,useValue:ut});let gp;function vd(t){const n=gp;return gp=t,n}function c3(t,n=we.Default){if(void 0===gp)throw new Error("inject() must be called from an injection context");return null===gp?Cs(t,void 0,n):gp.get(t,n&we.Optional?null:void 0,n)}function P(t,n=we.Default){return(sn||c3)(Se(t),n)}const Xy=P;function Xc(t){const n=[];for(let e=0;e<t.length;e++){const i=Se(t[e]);if(Array.isArray(i)){if(0===i.length)throw new Error("Arguments array must have arguments.");let r,o=we.Default;for(let s=0;s<i.length;s++){const l=i[s],c=u3(l);"number"==typeof c?-1===c?r=l.token:o|=c:r=l}n.push(P(r,o))}else n.push(P(i))}return n}function _p(t,n){return t[Ky]=n,t.prototype[Ky]=n,t}function u3(t){return t[Ky]}function pT(t,n,e,i){const r=t[_d];throw n[Yy]&&r.unshift(n[Yy]),t.message=function(t,n,e,i=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let r=rt(n);if(Array.isArray(n))r=n.map(rt).join(" -> ");else if("object"==typeof n){let o=[];for(let s in n)if(n.hasOwnProperty(s)){let l=n[s];o.push(s+":"+("string"==typeof l?JSON.stringify(l):rt(l)))}r=`{${o.join(", ")}}`}return`${e}${i?"("+i+")":""}[${r}]: ${t.replace(a3,"\n  ")}`}("\n"+t.message,r,e,i),t.ngTokenPath=r,t[_d]=null,t}const sc=_p(Yc("Inject",t=>({token:t})),-1),fr=_p(Yc("Optional"),8),ac=_p(Yc("SkipSelf"),4);let ig,rg;function bd(t){var n;return(null===(n=function(){if(void 0===ig&&(ig=null,ve.trustedTypes))try{ig=ve.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(t){}return ig}())||void 0===n?void 0:n.createHTML(t))||t}function vT(t){var n;return(null===(n=function(){if(void 0===rg&&(rg=null,ve.trustedTypes))try{rg=ve.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(t){}return rg}())||void 0===n?void 0:n.createHTML(t))||t}class eu{constructor(n){this.changingThisBreaksApplicationSecurity=n}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class C3 extends eu{getTypeName(){return"HTML"}}class w3 extends eu{getTypeName(){return"Style"}}class S3 extends eu{getTypeName(){return"Script"}}class T3 extends eu{getTypeName(){return"URL"}}class E3 extends eu{getTypeName(){return"ResourceURL"}}function xo(t){return t instanceof eu?t.changingThisBreaksApplicationSecurity:t}function ga(t,n){const e=CT(t);if(null!=e&&e!==n){if("ResourceURL"===e&&"URL"===n)return!0;throw new Error(`Required a safe ${n}, got a ${e} (see https://g.co/ng/security#xss)`)}return e===n}function CT(t){return t instanceof eu&&t.getTypeName()||null}function wT(t){const n=new A3(t);return function(){try{return!!(new window.DOMParser).parseFromString(bd(""),"text/html")}catch(t){return!1}}()?new P3(n):n}class P3{constructor(n){this.inertDocumentHelper=n}getInertBodyElement(n){n="<body><remove></remove>"+n;try{const e=(new window.DOMParser).parseFromString(bd(n),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(n):(e.removeChild(e.firstChild),e)}catch(e){return null}}}class A3{constructor(n){if(this.defaultDoc=n,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const e=this.inertDocument.createElement("html");this.inertDocument.appendChild(e);const i=this.inertDocument.createElement("body");e.appendChild(i)}}getInertBodyElement(n){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=bd(n),e;const i=this.inertDocument.createElement("body");return i.innerHTML=bd(n),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(i),i}stripCustomNsAttrs(n){const e=n.attributes;for(let r=e.length-1;0<r;r--){const s=e.item(r).name;("xmlns:ns1"===s||0===s.indexOf("ns1:"))&&n.removeAttribute(s)}let i=n.firstChild;for(;i;)i.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(i),i=i.nextSibling}}const N3=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,F3=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function yp(t){return(t=String(t)).match(N3)||t.match(F3)?t:"unsafe:"+t}function ST(t){return(t=String(t)).split(",").map(n=>yp(n.trim())).join(", ")}function _a(t){const n={};for(const e of t.split(","))n[e]=!0;return n}function bp(...t){const n={};for(const e of t)for(const i in e)e.hasOwnProperty(i)&&(n[i]=!0);return n}const TT=_a("area,br,col,hr,img,wbr"),ET=_a("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),kT=_a("rp,rt"),ib=bp(TT,bp(ET,_a("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),bp(kT,_a("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),bp(kT,ET)),rb=_a("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),ob=_a("srcset"),DT=bp(rb,ob,_a("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),_a("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),R3=_a("script,style,template");class L3{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(n){let e=n.firstChild,i=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?i=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,i&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let r=this.checkClobberedElement(e,e.nextSibling);if(r){e=r;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(n){const e=n.nodeName.toLowerCase();if(!ib.hasOwnProperty(e))return this.sanitizedSomething=!0,!R3.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const i=n.attributes;for(let r=0;r<i.length;r++){const o=i.item(r),s=o.name,l=s.toLowerCase();if(!DT.hasOwnProperty(l)){this.sanitizedSomething=!0;continue}let c=o.value;rb[l]&&(c=yp(c)),ob[l]&&(c=ST(c)),this.buf.push(" ",s,'="',xT(c),'"')}return this.buf.push(">"),!0}endElement(n){const e=n.nodeName.toLowerCase();ib.hasOwnProperty(e)&&!TT.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(n){this.buf.push(xT(n))}checkClobberedElement(n,e){if(e&&(n.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${n.outerHTML}`);return e}}const $3=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,U3=/([^\#-~ |!])/g;function xT(t){return t.replace(/&/g,"&amp;").replace($3,function(n){return"&#"+(1024*(n.charCodeAt(0)-55296)+(n.charCodeAt(1)-56320)+65536)+";"}).replace(U3,function(n){return"&#"+n.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let og;function MT(t,n){let e=null;try{og=og||wT(t);let i=n?String(n):"";e=og.getInertBodyElement(i);let r=5,o=i;do{if(0===r)throw new Error("Failed to sanitize html because the input is unstable");r--,i=o,o=e.innerHTML,e=og.getInertBodyElement(i)}while(i!==o);return bd((new L3).sanitizeChildren(sb(e)||e))}finally{if(e){const i=sb(e)||e;for(;i.firstChild;)i.removeChild(i.firstChild)}}}function sb(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var pn=(()=>((pn=pn||{})[pn.NONE=0]="NONE",pn[pn.HTML=1]="HTML",pn[pn.STYLE=2]="STYLE",pn[pn.SCRIPT=3]="SCRIPT",pn[pn.URL=4]="URL",pn[pn.RESOURCE_URL=5]="RESOURCE_URL",pn))();function Or(t){const n=Cp();return n?vT(n.sanitize(pn.HTML,t)||""):ga(t,"HTML")?vT(xo(t)):MT(np(),Re(t))}function li(t){const n=Cp();return n?n.sanitize(pn.URL,t)||"":ga(t,"URL")?xo(t):yp(Re(t))}function Cp(){const t=a();return t&&t[12]}const AT="__ngContext__";function mr(t,n){t[AT]=n}function lb(t){const n=function(t){return t[AT]||null}(t);return n?Array.isArray(n)?n:n.lView:null}function sg(t){return t.ngOriginalError}function n$(t,...n){t.error(...n)}class tu{constructor(){this._console=console}handleError(n){const e=this._findOriginalError(n),i=this._findContext(n),r=function(t){return t&&t.ngErrorLogger||n$}(n);r(this._console,"ERROR",n),e&&r(this._console,"ORIGINAL ERROR",e),i&&r(this._console,"ERROR CONTEXT",i)}_findContext(n){return n?function(t){return t.ngDebugContext}(n)||this._findContext(sg(n)):null}_findOriginalError(n){let e=n&&sg(n);for(;e&&sg(e);)e=sg(e);return e||null}}const o$=/^>|^->|<!--|-->|--!>|<!-$/g,s$=/(<|>)/;const BT=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(ve))();function HT(t){return t.ownerDocument.defaultView}function jT(t){return t.ownerDocument}function va(t){return t instanceof Function?t():t}var Mo=(()=>((Mo=Mo||{})[Mo.Important=1]="Important",Mo[Mo.DashCase=2]="DashCase",Mo))();let ub;function db(t,n){return ub(t,n)}function Sp(t){const n=t[3];return So(n)?n[3]:n}function hb(t){return QT(t[13])}function pb(t){return QT(t[4])}function QT(t){for(;null!==t&&!So(t);)t=t[4];return t}function wd(t,n,e,i,r){if(null!=i){let o,s=!1;So(i)?o=i:Jr(i)&&(s=!0,i=i[0]);const l=Gn(i);0===t&&null!==e?null==r?eE(n,e,l):nu(n,e,l,r||null,!0):1===t&&null!==e?nu(n,e,l,r||null,!0):2===t?aE(n,l,s):3===t&&n.destroyNode(l),null!=o&&function(t,n,e,i,r){const o=e[7];o!==Gn(e)&&wd(n,t,i,o,r);for(let l=10;l<e.length;l++){const c=e[l];Tp(c[1],c,t,n,i,o)}}(n,t,o,e,r)}}function fb(t,n){return In(t)?t.createText(n):t.createTextNode(n)}function ZT(t,n,e){In(t)?t.setValue(n,e):n.textContent=e}function h$(t,n){return t.createComment(function(t){return t.replace(o$,n=>n.replace(s$,"\u200b$1\u200b"))}(n))}function mb(t,n,e){return In(t)?t.createElement(n,e):null===e?t.createElement(n):t.createElementNS(e,n)}function KT(t,n){const e=t[9],i=e.indexOf(n),r=n[3];1024&n[2]&&(n[2]&=-1025,rp(r,-1)),e.splice(i,1)}function gb(t,n){if(t.length<=10)return;const e=10+n,i=t[e];if(i){const r=i[17];null!==r&&r!==t&&KT(r,i),n>0&&(t[e-1][4]=i[4]);const o=Jc(t,10+n);!function(t,n){Tp(t,n,n[11],2,null,null),n[0]=null,n[6]=null}(i[1],i);const s=o[19];null!==s&&s.detachView(o[1]),i[3]=null,i[4]=null,i[2]&=-129}return i}function YT(t,n){if(!(256&n[2])){const e=n[11];In(e)&&e.destroyNode&&Tp(t,n,e,3,null,null),function(t){let n=t[13];if(!n)return _b(t[1],t);for(;n;){let e=null;if(Jr(n))e=n[13];else{const i=n[10];i&&(e=i)}if(!e){for(;n&&!n[4]&&n!==t;)Jr(n)&&_b(n[1],n),n=n[3];null===n&&(n=t),Jr(n)&&_b(n[1],n),e=n&&n[4]}n=e}}(n)}}function _b(t,n){if(!(256&n[2])){n[2]&=-129,n[2]|=256,function(t,n){let e;if(null!=t&&null!=(e=t.destroyHooks))for(let i=0;i<e.length;i+=2){const r=n[e[i]];if(!(r instanceof lp)){const o=e[i+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){const l=r[o[s]],c=o[s+1];try{c.call(l)}finally{}}else try{o.call(r)}finally{}}}}(t,n),function(t,n){const e=t.cleanup,i=n[7];let r=-1;if(null!==e)for(let o=0;o<e.length-1;o+=2)if("string"==typeof e[o]){const s=e[o+1],l="function"==typeof s?s(n):Gn(n[s]),c=i[r=e[o+2]],d=e[o+3];"boolean"==typeof d?l.removeEventListener(e[o],c,d):d>=0?i[r=d]():i[r=-d].unsubscribe(),o+=2}else{const s=i[r=e[o+1]];e[o].call(s)}if(null!==i){for(let o=r+1;o<i.length;o++)i[o]();n[7]=null}}(t,n),1===n[1].type&&In(n[11])&&n[11].destroy();const e=n[17];if(null!==e&&So(n[3])){e!==n[3]&&KT(e,n);const i=n[19];null!==i&&i.detachView(t)}}}function JT(t,n,e){return XT(t,n.parent,e)}function XT(t,n,e){let i=n;for(;null!==i&&40&i.type;)i=(n=i).parent;if(null===i)return e[0];if(2&i.flags){const r=t.data[i.directiveStart].encapsulation;if(r===I.None||r===I.Emulated)return null}return eo(i,e)}function nu(t,n,e,i,r){In(t)?t.insertBefore(n,e,i,r):n.insertBefore(e,i,r)}function eE(t,n,e){In(t)?t.appendChild(n,e):n.appendChild(e)}function tE(t,n,e,i,r){null!==i?nu(t,n,e,i,r):eE(t,n,e)}function lg(t,n){return In(t)?t.parentNode(n):n.parentNode}function nE(t,n,e){return rE(t,n,e)}function iE(t,n,e){return 40&t.type?eo(t,e):null}let vb,rE=iE;function oE(t,n){rE=t,vb=n}function cg(t,n,e,i){const r=JT(t,i,n),o=n[11],l=nE(i.parent||n[6],i,n);if(null!=r)if(Array.isArray(e))for(let c=0;c<e.length;c++)tE(o,r,e[c],l,!1);else tE(o,r,e,l,!1);void 0!==vb&&vb(o,i,n,e,r)}function ug(t,n){if(null!==n){const e=n.type;if(3&e)return eo(n,t);if(4&e)return yb(-1,t[n.index]);if(8&e){const i=n.child;if(null!==i)return ug(t,i);{const r=t[n.index];return So(r)?yb(-1,r):Gn(r)}}if(32&e)return db(n,t)()||Gn(t[n.index]);{const i=sE(t,n);return null!==i?Array.isArray(i)?i[0]:ug(Sp(t[16]),i):ug(t,n.next)}}return null}function sE(t,n){return null!==n?t[16][6].projection[n.projection]:null}function yb(t,n){const e=10+t+1;if(e<n.length){const i=n[e],r=i[1].firstChild;if(null!==r)return ug(i,r)}return n[7]}function aE(t,n,e){const i=lg(t,n);i&&function(t,n,e,i){In(t)?t.removeChild(n,e,i):n.removeChild(e)}(t,i,n,e)}function bb(t,n,e,i,r,o,s){for(;null!=e;){const l=i[e.index],c=e.type;if(s&&0===n&&(l&&mr(Gn(l),i),e.flags|=4),64!=(64&e.flags))if(8&c)bb(t,n,e.child,i,r,o,!1),wd(n,t,r,l,o);else if(32&c){const d=db(e,i);let m;for(;m=d();)wd(n,t,r,m,o);wd(n,t,r,l,o)}else 16&c?lE(t,n,i,e,r,o):wd(n,t,r,l,o);e=s?e.projectionNext:e.next}}function Tp(t,n,e,i,r,o){bb(e,i,t.firstChild,n,r,o,!1)}function lE(t,n,e,i,r,o){const s=e[16],c=s[6].projection[i.projection];if(Array.isArray(c))for(let d=0;d<c.length;d++)wd(n,t,r,c[d],o);else bb(t,n,c,s[3],r,o,!0)}function cE(t,n,e){In(t)?t.setAttribute(n,"style",e):n.style.cssText=e}function Cb(t,n,e){In(t)?""===e?t.removeAttribute(n,"class"):t.setAttribute(n,"class",e):n.className=e}function uE(t,n,e){let i=t.length;for(;;){const r=t.indexOf(n,e);if(-1===r)return r;if(0===r||t.charCodeAt(r-1)<=32){const o=n.length;if(r+o===i||t.charCodeAt(r+o)<=32)return r}e=r+1}}const dE="ng-template";function k$(t,n,e){let i=0;for(;i<t.length;){let r=t[i++];if(e&&"class"===r){if(r=t[i],-1!==uE(r.toLowerCase(),n,0))return!0}else if(1===r){for(;i<t.length&&"string"==typeof(r=t[i++]);)if(r.toLowerCase()===n)return!0;return!1}}return!1}function hE(t){return 4===t.type&&t.value!==dE}function D$(t,n,e){return n===(4!==t.type||e?t.value:dE)}function x$(t,n,e){let i=4;const r=t.attrs||[],o=function(t){for(let n=0;n<t.length;n++)if(YS(t[n]))return n;return t.length}(r);let s=!1;for(let l=0;l<n.length;l++){const c=n[l];if("number"!=typeof c){if(!s)if(4&i){if(i=2|1&i,""!==c&&!D$(t,c,e)||""===c&&1===n.length){if(Ts(i))return!1;s=!0}}else{const d=8&i?c:n[++l];if(8&i&&null!==t.attrs){if(!k$(t.attrs,d,e)){if(Ts(i))return!1;s=!0}continue}const _=M$(8&i?"class":c,r,hE(t),e);if(-1===_){if(Ts(i))return!1;s=!0;continue}if(""!==d){let w;w=_>o?"":r[_+1].toLowerCase();const E=8&i?w:null;if(E&&-1!==uE(E,d,0)||2&i&&d!==w){if(Ts(i))return!1;s=!0}}}}else{if(!s&&!Ts(i)&&!Ts(c))return!1;if(s&&Ts(c))continue;s=!1,i=c|1&i}}return Ts(i)||s}function Ts(t){return 0==(1&t)}function M$(t,n,e,i){if(null===n)return-1;let r=0;if(i||!e){let o=!1;for(;r<n.length;){const s=n[r];if(s===t)return r;if(3===s||6===s)o=!0;else{if(1===s||2===s){let l=n[++r];for(;"string"==typeof l;)l=n[++r];continue}if(4===s)break;if(0===s){r+=4;continue}}r+=o?1:2}return-1}return function(t,n){let e=t.indexOf(4);if(e>-1)for(e++;e<t.length;){const i=t[e];if("number"==typeof i)return-1;if(i===n)return e;e++}return-1}(n,t)}function pE(t,n,e=!1){for(let i=0;i<n.length;i++)if(x$(t,n[i],e))return!0;return!1}function O$(t,n){e:for(let e=0;e<n.length;e++){const i=n[e];if(t.length===i.length){for(let r=0;r<t.length;r++)if(t[r]!==i[r])continue e;return!0}}return!1}function fE(t,n){return t?":not("+n.trim()+")":n}function N$(t){let n=t[0],e=1,i=2,r="",o=!1;for(;e<t.length;){let s=t[e];if("string"==typeof s)if(2&i){const l=t[++e];r+="["+s+(l.length>0?'="'+l+'"':"")+"]"}else 8&i?r+="."+s:4&i&&(r+=" "+s);else""!==r&&!Ts(s)&&(n+=fE(o,r),r=""),i=s,o=o||!Ts(i);e++}return""!==r&&(n+=fE(o,r)),n}const st={};function g(t){mE(u(),a(),Ar()+t,De())}function mE(t,n,e,i){if(!i)if(3==(3&n[2])){const o=t.preOrderCheckHooks;null!==o&&jm(n,o,e)}else{const o=t.preOrderHooks;null!==o&&zm(n,o,0,e)}ic(e)}function dg(t,n){return t<<17|n<<2}function Es(t){return t>>17&32767}function wb(t){return 2|t}function ol(t){return(131068&t)>>2}function Sb(t,n){return-131069&t|n<<2}function Tb(t){return 1|t}function EE(t,n){const e=t.contentQueries;if(null!==e)for(let i=0;i<e.length;i+=2){const r=e[i],o=e[i+1];if(-1!==o){const s=t.data[o];nc(r),s.contentQueries(2,n[o],o)}}}function Ep(t,n,e,i,r,o,s,l,c,d){const m=n.blueprint.slice();return m[0]=r,m[2]=140|i,ip(m),m[3]=m[15]=t,m[8]=e,m[10]=s||t&&t[10],m[11]=l||t&&t[11],m[12]=c||t&&t[12]||null,m[9]=d||t&&t[9]||null,m[6]=o,m[16]=2==n.type?t[16]:m,m}function Sd(t,n,e,i,r){let o=t.data[n];if(null===o)o=Pb(t,n,e,i,r),We.lFrame.inI18n&&(o.flags|=64);else if(64&o.type){o.type=e,o.value=i,o.attrs=r;const s=M();o.injectorIndex=null===s?-1:s.injectorIndex}return U(o,!0),o}function Pb(t,n,e,i,r){const o=T(),s=W(),c=t.data[n]=function(t,n,e,i,r,o){return{type:e,index:i,insertBeforeIndex:null,injectorIndex:n?n.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:r,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:n,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,e,n,i,r);return null===t.firstChild&&(t.firstChild=c),null!==o&&(s?null==o.child&&null!==c.parent&&(o.child=c):null===o.next&&(o.next=c)),c}function Td(t,n,e,i){if(0===e)return-1;const r=n.length;for(let o=0;o<e;o++)n.push(i),t.blueprint.push(i),t.data.push(null);return r}function kp(t,n,e){ld(n);try{const i=t.viewQuery;null!==i&&Vb(1,i,e);const r=t.template;null!==r&&kE(t,n,r,1,e),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&EE(t,n),t.staticViewQueries&&Vb(2,t.viewQuery,e);const o=t.components;null!==o&&function(t,n){for(let e=0;e<n.length;e++)p4(t,n[e])}(n,o)}catch(i){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),i}finally{n[2]&=-5,Bm()}}function Ed(t,n,e,i){const r=n[2];if(256==(256&r))return;ld(n);const o=De();try{ip(n),function(t){We.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==e&&kE(t,n,e,2,i);const s=3==(3&r);if(!o)if(s){const d=t.preOrderCheckHooks;null!==d&&jm(n,d,null)}else{const d=t.preOrderHooks;null!==d&&zm(n,d,0,null),Uy(n,0)}if(function(t){for(let n=hb(t);null!==n;n=pb(n)){if(!n[2])continue;const e=n[9];for(let i=0;i<e.length;i++){const r=e[i],o=r[3];0==(1024&r[2])&&rp(o,1),r[2]|=1024}}}(n),function(t){for(let n=hb(t);null!==n;n=pb(n))for(let e=10;e<n.length;e++){const i=n[e],r=i[1];tc(i)&&Ed(r,i,r.template,i[8])}}(n),null!==t.contentQueries&&EE(t,n),!o)if(s){const d=t.contentCheckHooks;null!==d&&jm(n,d)}else{const d=t.contentHooks;null!==d&&zm(n,d,1),Uy(n,1)}!function(t,n){const e=t.hostBindingOpCodes;if(null!==e)try{for(let i=0;i<e.length;i++){const r=e[i];if(r<0)ic(~r);else{const o=r,s=e[++i],l=e[++i];Ly(s,o),l(2,n[o])}}}finally{ic(-1)}}(t,n);const l=t.components;null!==l&&function(t,n){for(let e=0;e<n.length;e++)h4(t,n[e])}(n,l);const c=t.viewQuery;if(null!==c&&Vb(2,c,i),!o)if(s){const d=t.viewCheckHooks;null!==d&&jm(n,d)}else{const d=t.viewHooks;null!==d&&zm(n,d,2),Uy(n,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),o||(n[2]&=-73),1024&n[2]&&(n[2]&=-1025,rp(n[3],-1))}finally{Bm()}}function q$(t,n,e,i){const r=n[10],o=!De(),s=Am(n);try{o&&!s&&r.begin&&r.begin(),s&&kp(t,n,i),Ed(t,n,e,i)}finally{o&&!s&&r.end&&r.end()}}function kE(t,n,e,i,r){const o=Ar(),s=2&i;try{ic(-1),s&&n.length>20&&mE(t,n,20,De()),e(i,r)}finally{ic(o)}}function DE(t,n,e){if(Zh(n)){const r=n.directiveEnd;for(let o=n.directiveStart;o<r;o++){const s=t.data[o];s.contentQueries&&s.contentQueries(1,e[o],o)}}}function Ab(t,n,e){!op()||(function(t,n,e,i){const r=e.directiveStart,o=e.directiveEnd;t.firstCreatePass||up(e,n),mr(i,n);const s=e.initialInputs;for(let l=r;l<o;l++){const c=t.data[l],d=$n(c);d&&a4(n,e,c);const m=dp(n,t,l,e);mr(m,n),null!==s&&l4(0,l-r,m,c,0,s),d&&(mi(e.index,n)[8]=m)}}(t,n,e,eo(e,n)),128==(128&e.flags)&&function(t,n,e){const i=e.directiveStart,r=e.directiveEnd,s=e.index,l=We.lFrame.currentDirectiveIndex;try{ic(s);for(let c=i;c<r;c++){const d=t.data[c],m=n[c];sp(c),(null!==d.hostBindings||0!==d.hostVars||null!==d.hostAttrs)&&FE(d,m)}}finally{ic(-1),sp(l)}}(t,n,e))}function Ob(t,n,e=eo){const i=n.localNames;if(null!==i){let r=n.index+1;for(let o=0;o<i.length;o+=2){const s=i[o+1],l=-1===s?e(n,t):t[s];t[r++]=l}}}function xE(t){const n=t.tView;return null===n||n.incompleteFirstPass?t.tView=fg(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):n}function fg(t,n,e,i,r,o,s,l,c,d){const m=20+i,_=m+r,w=function(t,n){const e=[];for(let i=0;i<n;i++)e.push(i<t?null:st);return e}(m,_),E="function"==typeof d?d():d;return w[1]={type:t,blueprint:w,template:e,queries:null,viewQuery:l,declTNode:n,data:w.slice().fill(null,m),bindingStartIndex:m,expandoStartIndex:_,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:c,consts:E,incompleteFirstPass:!1}}function PE(t,n,e,i){const r=BE(n);null===e?r.push(i):(r.push(e),t.firstCreatePass&&HE(t).push(i,r.length-1))}function AE(t,n,e){for(let i in t)if(t.hasOwnProperty(i)){const r=t[i];(e=null===e?{}:e).hasOwnProperty(i)?e[i].push(n,r):e[i]=[n,r]}return e}function Io(t,n,e,i,r,o,s,l){const c=eo(n,e);let m,d=n.inputs;!l&&null!=d&&(m=d[i])?(GE(t,e,m,i,r),jc(n)&&function(t,n){const e=mi(n,t);16&e[2]||(e[2]|=64)}(e,n.index)):3&n.type&&(i=function(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(i),r=null!=s?s(r,n.value||"",i):r,In(o)?o.setProperty(c,i,r):By(i)||(c.setProperty?c.setProperty(i,r):c[i]=r))}function Nb(t,n,e,i){let r=!1;if(op()){const o=function(t,n,e){const i=t.directiveRegistry;let r=null;if(i)for(let o=0;o<i.length;o++){const s=i[o];pE(e,s.selectors,!1)&&(r||(r=[]),Zm(up(e,n),t,s.type),$n(s)?(RE(t,e),r.unshift(s)):r.push(s))}return r}(t,n,e),s=null===i?null:{"":-1};if(null!==o){r=!0,LE(e,t.data.length,o.length);for(let m=0;m<o.length;m++){const _=o[m];_.providersResolver&&_.providersResolver(_)}let l=!1,c=!1,d=Td(t,n,o.length,null);for(let m=0;m<o.length;m++){const _=o[m];e.mergedAttrs=Wm(e.mergedAttrs,_.hostAttrs),$E(t,e,n,d,_),s4(d,_,s),null!==_.contentQueries&&(e.flags|=8),(null!==_.hostBindings||null!==_.hostAttrs||0!==_.hostVars)&&(e.flags|=128);const w=_.type.prototype;!l&&(w.ngOnChanges||w.ngOnInit||w.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(e.index),l=!0),!c&&(w.ngOnChanges||w.ngDoCheck)&&((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(e.index),c=!0),d++}!function(t,n){const i=n.directiveEnd,r=t.data,o=n.attrs,s=[];let l=null,c=null;for(let d=n.directiveStart;d<i;d++){const m=r[d],_=m.inputs,w=null===o||hE(n)?null:c4(_,o);s.push(w),l=AE(_,d,l),c=AE(m.outputs,d,c)}null!==l&&(l.hasOwnProperty("class")&&(n.flags|=16),l.hasOwnProperty("style")&&(n.flags|=32)),n.initialInputs=s,n.inputs=l,n.outputs=c}(t,e)}s&&function(t,n,e){if(n){const i=t.localNames=[];for(let r=0;r<n.length;r+=2){const o=e[n[r+1]];if(null==o)throw new ys("301",`Export of name '${n[r+1]}' not found!`);i.push(n[r],o)}}}(e,i,s)}return e.mergedAttrs=Wm(e.mergedAttrs,e.attrs),r}function NE(t,n,e,i,r,o){const s=o.hostBindings;if(s){let l=t.hostBindingOpCodes;null===l&&(l=t.hostBindingOpCodes=[]);const c=~n.index;(function(t){let n=t.length;for(;n>0;){const e=t[--n];if("number"==typeof e&&e<0)return e}return 0})(l)!=c&&l.push(c),l.push(i,r,s)}}function FE(t,n){null!==t.hostBindings&&t.hostBindings(1,n)}function RE(t,n){n.flags|=2,(t.components||(t.components=[])).push(n.index)}function s4(t,n,e){if(e){if(n.exportAs)for(let i=0;i<n.exportAs.length;i++)e[n.exportAs[i]]=t;$n(n)&&(e[""]=t)}}function LE(t,n,e){t.flags|=1,t.directiveStart=n,t.directiveEnd=n+e,t.providerIndexes=n}function $E(t,n,e,i,r){t.data[i]=r;const o=r.factory||(r.factory=qo(r.type)),s=new lp(o,$n(r),null);t.blueprint[i]=s,e[i]=s,NE(t,n,0,i,Td(t,e,r.hostVars,st),r)}function a4(t,n,e){const i=eo(n,t),r=xE(e),o=t[10],s=mg(t,Ep(t,r,null,e.onPush?64:16,i,n,o,o.createRenderer(i,e),null,null));t[n.index]=s}function Fb(t,n,e,i,r,o,s){if(null==o)In(t)?t.removeAttribute(n,r,e):n.removeAttribute(r);else{const l=null==s?Re(o):s(o,i||"",r);In(t)?t.setAttribute(n,r,l,e):e?n.setAttributeNS(e,r,l):n.setAttribute(r,l)}}function l4(t,n,e,i,r,o){const s=o[n];if(null!==s){const l=i.setInput;for(let c=0;c<s.length;){const d=s[c++],m=s[c++],_=s[c++];null!==l?i.setInput(e,_,d,m):e[m]=_}}}function c4(t,n){let e=null,i=0;for(;i<n.length;){const r=n[i];if(0!==r)if(5!==r){if("number"==typeof r)break;t.hasOwnProperty(r)&&(null===e&&(e=[]),e.push(r,t[r],n[i+1])),i+=2}else i+=2;else i+=4}return e}function UE(t,n,e,i){return new Array(t,!0,!1,n,null,0,i,e,null,null)}function h4(t,n){const e=mi(n,t);if(tc(e)){const i=e[1];80&e[2]?Ed(i,e,i.template,e[8]):e[5]>0&&Rb(e)}}function Rb(t){for(let i=hb(t);null!==i;i=pb(i))for(let r=10;r<i.length;r++){const o=i[r];if(1024&o[2]){const s=o[1];Ed(s,o,s.template,o[8])}else o[5]>0&&Rb(o)}const e=t[1].components;if(null!==e)for(let i=0;i<e.length;i++){const r=mi(e[i],t);tc(r)&&r[5]>0&&Rb(r)}}function p4(t,n){const e=mi(n,t),i=e[1];(function(t,n){for(let e=n.length;e<t.blueprint.length;e++)n.push(t.blueprint[e])})(i,e),kp(i,e,e[8])}function mg(t,n){return t[13]?t[14][4]=n:t[13]=n,t[14]=n,n}function Lb(t){for(;t;){t[2]|=64;const n=Sp(t);if(Yl(t)&&!n)return t;t=n}return null}function Ub(t,n,e){const i=n[10];i.begin&&i.begin();try{Ed(t,n,t.template,e)}catch(r){throw zE(n,r),r}finally{i.end&&i.end()}}function VE(t){!function(t){for(let n=0;n<t.components.length;n++){const e=t.components[n],i=lb(e),r=i[1];q$(r,i,r.template,e)}}(t[8])}function Vb(t,n,e){nc(0),n(t,e)}const v4=(()=>Promise.resolve(null))();function BE(t){return t[7]||(t[7]=[])}function HE(t){return t.cleanup||(t.cleanup=[])}function zE(t,n){const e=t[9],i=e?e.get(tu,null):null;i&&i.handleError(n)}function GE(t,n,e,i,r){for(let o=0;o<e.length;){const s=e[o++],l=e[o++],c=n[s],d=t.data[s];null!==d.setInput?d.setInput(c,r,i,l):c[l]=r}}function al(t,n,e){const i=Qc(n,t);ZT(t[11],i,e)}function gg(t,n,e){let i=e?t.styles:null,r=e?t.classes:null,o=0;if(null!==n)for(let s=0;s<n.length;s++){const l=n[s];"number"==typeof l?o=l:1==o?r=xr(r,l):2==o&&(i=xr(i,l+": "+n[++s]+";"))}e?t.styles=i:t.stylesWithoutHost=i,e?t.classes=r:t.classesWithoutHost=r}const ll=new tt("INJECTOR",-1);class WE{get(n,e=mp){if(e===mp){const i=new Error(`NullInjectorError: No provider for ${rt(n)}!`);throw i.name="NullInjectorError",i}return e}}const Dp=new tt("Set Injector scope."),xp={},C4={};let Bb;function qE(){return void 0===Bb&&(Bb=new WE),Bb}function QE(t,n=null,e=null,i){return new S4(t,e,n||qE(),i)}class S4{constructor(n,e,i,r=null){this.parent=i,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const o=[];e&&ma(e,l=>this.processProvider(l,n,e)),ma([n],l=>this.processInjectorType(l,[],o)),this.records.set(ll,kd(void 0,this));const s=this.records.get(Dp);this.scope=null!=s?s.value:null,this.source=r||("object"==typeof n?null:rt(n))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(n=>n.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(n,e=mp,i=we.Default){this.assertNotDestroyed();const r=vd(this),o=hr(void 0);try{if(!(i&we.SkipSelf)){let l=this.records.get(n);if(void 0===l){const c=function(t){return"function"==typeof t||"object"==typeof t&&t instanceof tt}(n)&&_n(n);l=c&&this.injectableDefInScope(c)?kd(Hb(n),xp):null,this.records.set(n,l)}if(null!=l)return this.hydrate(n,l)}return(i&we.Self?qE():this.parent).get(n,e=i&we.Optional&&e===mp?null:e)}catch(s){if("NullInjectorError"===s.name){if((s[_d]=s[_d]||[]).unshift(rt(n)),r)throw s;return pT(s,n,"R3InjectorError",this.source)}throw s}finally{hr(o),vd(r)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(n=>this.get(n))}toString(){const n=[];return this.records.forEach((i,r)=>n.push(rt(r))),`R3Injector[${n.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(n,e,i){if(!(n=Se(n)))return!1;let r=Ai(n);const o=null==r&&n.ngModule||void 0,s=void 0===o?n:o,l=-1!==i.indexOf(s);if(void 0!==o&&(r=Ai(o)),null==r)return!1;if(null!=r.imports&&!l){let m;i.push(s);try{ma(r.imports,_=>{this.processInjectorType(_,e,i)&&(void 0===m&&(m=[]),m.push(_))})}finally{}if(void 0!==m)for(let _=0;_<m.length;_++){const{ngModule:w,providers:E}=m[_];ma(E,D=>this.processProvider(D,w,E||bt))}}this.injectorDefTypes.add(s);const c=qo(s)||(()=>new s);this.records.set(s,kd(c,xp));const d=r.providers;if(null!=d&&!l){const m=n;ma(d,_=>this.processProvider(_,m,d))}return void 0!==o&&void 0!==n.providers}processProvider(n,e,i){let r=Dd(n=Se(n))?n:Se(n&&n.provide);const o=function(t,n,e){return KE(t)?kd(void 0,t.useValue):kd(ZE(t),xp)}(n);if(Dd(n)||!0!==n.multi)this.records.get(r);else{let s=this.records.get(r);s||(s=kd(void 0,xp,!0),s.factory=()=>Xc(s.multi),this.records.set(r,s)),r=n,s.multi.push(n)}this.records.set(r,o)}hydrate(n,e){return e.value===xp&&(e.value=C4,e.value=e.factory()),"object"==typeof e.value&&e.value&&function(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(e.value)&&this.onDestroy.add(e.value),e.value}injectableDefInScope(n){if(!n.providedIn)return!1;const e=Se(n.providedIn);return"string"==typeof e?"any"===e||e===this.scope:this.injectorDefTypes.has(e)}}function Hb(t){const n=_n(t),e=null!==n?n.factory:qo(t);if(null!==e)return e;if(t instanceof tt)throw new Error(`Token ${rt(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const n=t.length;if(n>0){const i=oc(n,"?");throw new Error(`Can't resolve all parameters for ${rt(t)}: (${i.join(", ")}).`)}const e=function(t){const n=t&&(t[Kr]||t[zl]);if(n){const e=function(t){if(t.hasOwnProperty("name"))return t.name;const n=(""+t).match(/^function\s*([^\s(]+)/);return null===n?"":n[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${e}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${e}" class.`),n}return null}(t);return null!==e?()=>e.factory(t):()=>new t}(t);throw new Error("unreachable")}function ZE(t,n,e){let i;if(Dd(t)){const r=Se(t);return qo(r)||Hb(r)}if(KE(t))i=()=>Se(t.useValue);else if(function(t){return!(!t||!t.useFactory)}(t))i=()=>t.useFactory(...Xc(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))i=()=>P(Se(t.useExisting));else{const r=Se(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return qo(r)||Hb(r);i=()=>new r(...Xc(t.deps))}return i}function kd(t,n,e=!1){return{factory:t,value:n,multi:e?[]:void 0}}function KE(t){return null!==t&&"object"==typeof t&&Jy in t}function Dd(t){return"function"==typeof t}const YE=function(t,n,e){return function(t,n=null,e=null,i){const r=QE(t,n,e,i);return r._resolveInjectorDefTypes(),r}({name:e},n,t,e)};let Mt=(()=>{class t{static create(e,i){return Array.isArray(e)?YE(e,i,""):YE(e.providers,e.parent,e.name||"")}}return t.THROW_IF_NOT_FOUND=mp,t.NULL=new WE,t.\u0275prov=B({token:t,providedIn:"any",factory:()=>P(ll)}),t.__NG_ELEMENT_ID__=-1,t})();function z4(t,n){Hm(lb(t)[1],y())}function oe(t){let n=function(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),e=!0;const i=[t];for(;n;){let r;if($n(t))r=n.\u0275cmp||n.\u0275dir;else{if(n.\u0275cmp)throw new Error("Directives cannot inherit Components");r=n.\u0275dir}if(r){if(e){i.push(r);const s=t;s.inputs=Qb(t.inputs),s.declaredInputs=Qb(t.declaredInputs),s.outputs=Qb(t.outputs);const l=r.hostBindings;l&&Q4(t,l);const c=r.viewQuery,d=r.contentQueries;if(c&&W4(t,c),d&&q4(t,d),Hl(t.inputs,r.inputs),Hl(t.declaredInputs,r.declaredInputs),Hl(t.outputs,r.outputs),$n(r)&&r.data.animation){const m=t.data;m.animation=(m.animation||[]).concat(r.data.animation)}}const o=r.features;if(o)for(let s=0;s<o.length;s++){const l=o[s];l&&l.ngInherit&&l(t),l===oe&&(e=!1)}}n=Object.getPrototypeOf(n)}!function(t){let n=0,e=null;for(let i=t.length-1;i>=0;i--){const r=t[i];r.hostVars=n+=r.hostVars,r.hostAttrs=Wm(r.hostAttrs,e=Wm(e,r.hostAttrs))}}(i)}function Qb(t){return t===dt?{}:t===bt?[]:t}function W4(t,n){const e=t.viewQuery;t.viewQuery=e?(i,r)=>{n(i,r),e(i,r)}:n}function q4(t,n){const e=t.contentQueries;t.contentQueries=e?(i,r,o)=>{n(i,r,o),e(i,r,o)}:n}function Q4(t,n){const e=t.hostBindings;t.hostBindings=e?(i,r)=>{n(i,r),e(i,r)}:n}let _g=null;function xd(){if(!_g){const t=ve.Symbol;if(t&&t.iterator)_g=t.iterator;else{const n=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<n.length;++e){const i=n[e];"entries"!==i&&"size"!==i&&Map.prototype[i]===Map.prototype.entries&&(_g=i)}}}return _g}class Ds{constructor(n){this.wrapped=n}static wrap(n){return new Ds(n)}static unwrap(n){return Ds.isWrapped(n)?n.wrapped:n}static isWrapped(n){return n instanceof Ds}}function Ip(t){return!!Zb(t)&&(Array.isArray(t)||!(t instanceof Map)&&xd()in t)}function Zb(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function ba(t,n,e){return t[n]=e}function gr(t,n,e){return!Object.is(t[n],e)&&(t[n]=e,!0)}function iu(t,n,e,i){const r=gr(t,n,e);return gr(t,n+1,i)||r}function Yo(t,n,e,i,r,o){const s=iu(t,n,e,i);return iu(t,n+2,r,o)||s}function Ct(t,n,e,i){const r=a();return gr(r,Pr(),n)&&(u(),function(t,n,e,i,r,o){const s=eo(t,n);Fb(n[11],s,o,t.value,e,i,r)}(Wn(),r,t,n,e,i)),Ct}function Id(t,n,e,i){return gr(t,Pr(),e)?n+Re(e)+i:st}function Pd(t,n,e,i,r,o){const l=iu(t,$i(),e,r);return ko(2),l?n+Re(e)+i+Re(r)+o:st}function S(t,n,e,i,r,o,s,l){const c=a(),d=u(),m=t+20,_=d.firstCreatePass?function(t,n,e,i,r,o,s,l,c){const d=n.consts,m=Sd(n,t,4,s||null,Ss(d,l));Nb(n,e,m,Ss(d,c)),Hm(n,m);const _=m.tViews=fg(2,m,i,r,o,n.directiveRegistry,n.pipeRegistry,null,n.schemas,d);return null!==n.queries&&(n.queries.template(n,m),_.queries=n.queries.embeddedTView(m)),m}(m,d,c,n,e,i,r,o,s):d.data[m];U(_,!1);const w=c[11].createComment("");cg(d,c,w,_),mr(w,c),mg(c,c[m]=UE(w,c,w,_)),td(_)&&Ab(d,c,_),null!=s&&Ob(c,_,l)}function ie(t){return rl(We.lFrame.contextLView,20+t)}function C(t,n=we.Default){const e=a();return null===e?P(t,n):rT(y(),e,Se(t),n)}function Ud(){throw new Error("invalid")}function v(t,n,e){const i=a();return gr(i,Pr(),n)&&Io(u(),Wn(),i,t,n,i[11],e,!1),v}function e1(t,n,e,i,r){const s=r?"class":"style";GE(t,e,n.inputs[s],s,i)}function p(t,n,e,i){const r=a(),o=u(),s=20+t,l=r[11],c=r[s]=mb(l,n,We.lFrame.currentNamespace),d=o.firstCreatePass?function(t,n,e,i,r,o,s){const l=n.consts,d=Sd(n,t,2,r,Ss(l,o));return Nb(n,e,d,Ss(l,s)),null!==d.attrs&&gg(d,d.attrs,!1),null!==d.mergedAttrs&&gg(d,d.mergedAttrs,!0),null!==n.queries&&n.queries.elementStart(n,d),d}(s,o,r,0,n,e,i):o.data[s];U(d,!0);const m=d.mergedAttrs;null!==m&&Gm(l,c,m);const _=d.classes;null!==_&&Cb(l,c,_);const w=d.styles;null!==w&&cE(l,c,w),64!=(64&d.flags)&&cg(o,r,c,d),0===We.lFrame.elementDepthCount&&mr(c,r),We.lFrame.elementDepthCount++,td(d)&&(Ab(o,r,d),DE(o,d,r)),null!==i&&Ob(r,d)}function f(){let t=y();W()?K():(t=t.parent,U(t,!1));const n=t;We.lFrame.elementDepthCount--;const e=u();e.firstCreatePass&&(Hm(e,t),Zh(t)&&e.queries.elementEnd(t)),null!=n.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(n)&&e1(e,n,a(),n.classesWithoutHost,!0),null!=n.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(n)&&e1(e,n,a(),n.stylesWithoutHost,!1)}function O(t,n,e,i){p(t,n,e,i),f()}function Vt(t,n,e){const i=a(),r=u(),o=t+20,s=r.firstCreatePass?function(t,n,e,i,r){const o=n.consts,s=Ss(o,i),l=Sd(n,t,8,"ng-container",s);return null!==s&&gg(l,s,!0),Nb(n,e,l,Ss(o,r)),null!==n.queries&&n.queries.elementStart(n,l),l}(o,r,i,n,e):r.data[o];U(s,!0);const l=i[o]=i[11].createComment("");cg(r,i,l,s),mr(l,i),td(s)&&(Ab(r,i,s),DE(r,s,i)),null!=e&&Ob(i,s)}function Bt(){let t=y();const n=u();W()?K():(t=t.parent,U(t,!1)),n.firstCreatePass&&(Hm(n,t),Zh(t)&&n.queries.elementEnd(t))}function Zi(t,n,e){Vt(t,n,e),Bt()}function G(){return a()}function Ap(t){return!!t&&"function"==typeof t.then}function Fk(t){return!!t&&"function"==typeof t.subscribe}const bg=Fk;function A(t,n,e,i){const r=a(),o=u(),s=y();return function(t,n,e,i,r,o,s,l){const c=td(i),m=t.firstCreatePass&&HE(t),_=n[8],w=BE(n);let E=!0;if(3&i.type||l){const F=eo(i,n),j=l?l(F):F,H=w.length,X=l?de=>l(Gn(de[i.index])):i.index;if(In(e)){let de=null;if(!l&&c&&(de=function(t,n,e,i){const r=t.cleanup;if(null!=r)for(let o=0;o<r.length-1;o+=2){const s=r[o];if(s===e&&r[o+1]===i){const l=n[7],c=r[o+2];return l.length>c?l[c]:null}"string"==typeof s&&(o+=2)}return null}(t,n,r,i.index)),null!==de)(de.__ngLastListenerFn__||de).__ngNextListenerFn__=o,de.__ngLastListenerFn__=o,E=!1;else{o=t1(i,n,_,o,!1);const Be=e.listen(j,r,o);w.push(o,Be),m&&m.push(r,X,H,H+1)}}else o=t1(i,n,_,o,!0),j.addEventListener(r,o,s),w.push(o),m&&m.push(r,X,H,s)}else o=t1(i,n,_,o,!1);const D=i.outputs;let N;if(E&&null!==D&&(N=D[r])){const F=N.length;if(F)for(let j=0;j<F;j+=2){const Gt=n[N[j]][N[j+1]].subscribe(o),Jt=w.length;w.push(o,Gt),m&&m.push(r,i.index,Jt,-(Jt+1))}}}(o,r,r[11],s,t,n,!!e,i),A}function $k(t,n,e,i){try{return!1!==e(i)}catch(r){return zE(t,r),!1}}function t1(t,n,e,i,r){return function o(s){if(s===Function)return i;const l=2&t.flags?mi(t.index,n):n;0==(32&n[2])&&Lb(l);let c=$k(n,0,i,s),d=o.__ngNextListenerFn__;for(;d;)c=$k(n,0,d,s)&&c,d=d.__ngNextListenerFn__;return r&&!1===c&&(s.preventDefault(),s.returnValue=!1),c}}function b(t=1){return function(t){return(We.lFrame.contextLView=function(t,n){for(;t>0;)n=n[15],t--;return n}(t,We.lFrame.contextLView))[8]}(t)}function DU(t,n){let e=null;const i=function(t){const n=t.attrs;if(null!=n){const e=n.indexOf(5);if(0==(1&e))return n[e+1]}return null}(t);for(let r=0;r<n.length;r++){const o=n[r];if("*"!==o){if(null===i?pE(t,o,!0):O$(i,o))return r}else e=r}return e}function Ca(t){const n=a()[16][6];if(!n.projection){const i=n.projection=oc(t?t.length:1,null),r=i.slice();let o=n.child;for(;null!==o;){const s=t?DU(o,t):0;null!==s&&(r[s]?r[s].projectionNext=o:i[s]=o,r[s]=o),o=o.next}}}function wa(t,n=0,e){const i=a(),r=u(),o=Sd(r,20+t,16,null,e||null);null===o.projection&&(o.projection=n),K(),64!=(64&o.flags)&&function(t,n,e){lE(n[11],0,n,e,JT(t,e,n),nE(e.parent||n[6],e,n))}(r,i,o)}function xe(t,n,e){return Po(t,"",n,"",e),xe}function Po(t,n,e,i,r){const o=a(),s=Id(o,n,e,i);return s!==st&&Io(u(),Wn(),o,t,s,o[11],r,!1),Po}function Cg(t,n,e,i,r,o,s){const l=a(),c=Pd(l,n,e,i,r,o);return c!==st&&Io(u(),Wn(),l,t,c,l[11],s,!1),Cg}function n1(t,n,e,i,r,o,s,l,c,d,m){const _=a(),w=function(t,n,e,i,r,o,s,l,c,d){const _=Yo(t,$i(),e,r,s,c);return ko(4),_?n+Re(e)+i+Re(r)+o+Re(s)+l+Re(c)+d:st}(_,n,e,i,r,o,s,l,c,d);return w!==st&&Io(u(),Wn(),_,t,w,_[11],m,!1),n1}function Gk(t,n,e,i,r){const o=t[e+1],s=null===n;let l=i?Es(o):ol(o),c=!1;for(;0!==l&&(!1===c||s);){const m=t[l+1];IU(t[l],n)&&(c=!0,t[l+1]=i?Tb(m):wb(m)),l=i?Es(m):ol(m)}c&&(t[e+1]=i?wb(o):Tb(o))}function IU(t,n){return null===t||null==n||(Array.isArray(t)?t[1]:t)===n||!(!Array.isArray(t)||"string"!=typeof n)&&gd(t,n)>=0}const _i={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Wk(t){return t.substring(_i.key,_i.keyEnd)}function qk(t,n){const e=_i.textEnd;return e===n?-1:(n=_i.keyEnd=function(t,n,e){for(;n<e&&t.charCodeAt(n)>32;)n++;return n}(t,_i.key=n,e),Vd(t,n,e))}function Vd(t,n,e){for(;n<e&&t.charCodeAt(n)<=32;)n++;return n}function to(t,n,e){return xs(t,n,e,!1),to}function Oe(t,n){return xs(t,n,null,!0),Oe}function Ao(t){Ms(Do,Ta,t,!0)}function Ta(t,n){for(let e=function(t){return function(t){_i.key=0,_i.keyEnd=0,_i.value=0,_i.valueEnd=0,_i.textEnd=t.length}(t),qk(t,Vd(t,0,_i.textEnd))}(n);e>=0;e=qk(n,e))Do(t,Wk(n),!0)}function xs(t,n,e,i){const r=a(),o=u(),s=ko(2);o.firstUpdatePass&&Xk(o,t,s,i),n!==st&&gr(r,s,n)&&tD(o,o.data[Ar()],r,r[11],t,r[s+1]=function(t,n){return null==t||("string"==typeof n?t+=n:"object"==typeof t&&(t=rt(xo(t)))),t}(n,e),i,s)}function Ms(t,n,e,i){const r=u(),o=ko(2);r.firstUpdatePass&&Xk(r,null,o,i);const s=a();if(e!==st&&gr(s,o,e)){const l=r.data[Ar()];if(iD(l,i)&&!Jk(r,o)){let c=i?l.classesWithoutHost:l.stylesWithoutHost;null!==c&&(e=xr(c,e||"")),e1(r,l,s,e,i)}else!function(t,n,e,i,r,o,s,l){r===st&&(r=bt);let c=0,d=0,m=0<r.length?r[0]:null,_=0<o.length?o[0]:null;for(;null!==m||null!==_;){const w=c<r.length?r[c+1]:void 0,E=d<o.length?o[d+1]:void 0;let N,D=null;m===_?(c+=2,d+=2,w!==E&&(D=_,N=E)):null===_||null!==m&&m<_?(c+=2,D=m):(d+=2,D=_,N=E),null!==D&&tD(t,n,e,i,D,N,s,l),m=c<r.length?r[c]:null,_=d<o.length?o[d]:null}}(r,l,s,s[11],s[o+1],s[o+1]=function(t,n,e){if(null==e||""===e)return bt;const i=[],r=xo(e);if(Array.isArray(r))for(let o=0;o<r.length;o++)t(i,r[o],!0);else if("object"==typeof r)for(const o in r)r.hasOwnProperty(o)&&t(i,o,r[o]);else"string"==typeof r&&n(i,r);return i}(t,n,e),i,o)}}function Jk(t,n){return n>=t.expandoStartIndex}function Xk(t,n,e,i){const r=t.data;if(null===r[e+1]){const o=r[Ar()],s=Jk(t,e);iD(o,i)&&null===n&&!s&&(n=!1),n=function(t,n,e,i){const r=function(t){const n=We.lFrame.currentDirectiveIndex;return-1===n?null:t[n]}(t);let o=i?n.residualClasses:n.residualStyles;if(null===r)0===(i?n.classBindings:n.styleBindings)&&(e=Op(e=r1(null,t,n,e,i),n.attrs,i),o=null);else{const s=n.directiveStylingLast;if(-1===s||t[s]!==r)if(e=r1(r,t,n,e,i),null===o){let c=function(t,n,e){const i=e?n.classBindings:n.styleBindings;if(0!==ol(i))return t[Es(i)]}(t,n,i);void 0!==c&&Array.isArray(c)&&(c=r1(null,t,n,c[1],i),c=Op(c,n.attrs,i),function(t,n,e,i){t[Es(e?n.classBindings:n.styleBindings)]=i}(t,n,i,c))}else o=function(t,n,e){let i;const r=n.directiveEnd;for(let o=1+n.directiveStylingLast;o<r;o++)i=Op(i,t[o].hostAttrs,e);return Op(i,n.attrs,e)}(t,n,i)}return void 0!==o&&(i?n.residualClasses=o:n.residualStyles=o),e}(r,o,n,i),function(t,n,e,i,r,o){let s=o?n.classBindings:n.styleBindings,l=Es(s),c=ol(s);t[i]=e;let m,d=!1;if(Array.isArray(e)){const _=e;m=_[1],(null===m||gd(_,m)>0)&&(d=!0)}else m=e;if(r)if(0!==c){const w=Es(t[l+1]);t[i+1]=dg(w,l),0!==w&&(t[w+1]=Sb(t[w+1],i)),t[l+1]=function(t,n){return 131071&t|n<<17}(t[l+1],i)}else t[i+1]=dg(l,0),0!==l&&(t[l+1]=Sb(t[l+1],i)),l=i;else t[i+1]=dg(c,0),0===l?l=i:t[c+1]=Sb(t[c+1],i),c=i;d&&(t[i+1]=wb(t[i+1])),Gk(t,m,i,!0),Gk(t,m,i,!1),function(t,n,e,i,r){const o=r?t.residualClasses:t.residualStyles;null!=o&&"string"==typeof n&&gd(o,n)>=0&&(e[i+1]=Tb(e[i+1]))}(n,m,t,i,o),s=dg(l,c),o?n.classBindings=s:n.styleBindings=s}(r,o,n,e,s,i)}}function r1(t,n,e,i,r){let o=null;const s=e.directiveEnd;let l=e.directiveStylingLast;for(-1===l?l=e.directiveStart:l++;l<s&&(o=n[l],i=Op(i,o.hostAttrs,r),o!==t);)l++;return null!==t&&(e.directiveStylingLast=l),i}function Op(t,n,e){const i=e?1:2;let r=-1;if(null!==n)for(let o=0;o<n.length;o++){const s=n[o];"number"==typeof s?r=s:r===i&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),Do(t,s,!!e||n[++o]))}return void 0===t?null:t}function tD(t,n,e,i,r,o,s,l){if(!(3&n.type))return;const c=t.data,d=c[l+1];wg(function(t){return 1==(1&t)}(d)?nD(c,n,e,r,ol(d),s):void 0)||(wg(o)||function(t){return 2==(2&t)}(d)&&(o=nD(c,null,e,r,l,s)),function(t,n,e,i,r){const o=In(t);if(n)r?o?t.addClass(e,i):e.classList.add(i):o?t.removeClass(e,i):e.classList.remove(i);else{let s=-1===i.indexOf("-")?void 0:Mo.DashCase;if(null==r)o?t.removeStyle(e,i,s):e.style.removeProperty(i);else{const l="string"==typeof r&&r.endsWith("!important");l&&(r=r.slice(0,-10),s|=Mo.Important),o?t.setStyle(e,i,r,s):e.style.setProperty(i,r,l?"important":"")}}}(i,s,Qc(Ar(),e),r,o))}function nD(t,n,e,i,r,o){const s=null===n;let l;for(;r>0;){const c=t[r],d=Array.isArray(c),m=d?c[1]:c,_=null===m;let w=e[r+1];w===st&&(w=_?bt:void 0);let E=_?Qy(w,i):m===i?w:void 0;if(d&&!wg(E)&&(E=Qy(c,i)),wg(E)&&(l=E,s))return l;const D=t[r+1];r=s?Es(D):ol(D)}if(null!==n){let c=o?n.residualClasses:n.residualStyles;null!=c&&(l=Qy(c,i))}return l}function wg(t){return void 0!==t}function iD(t,n){return 0!=(t.flags&(n?16:32))}function k(t,n=""){const e=a(),i=u(),r=t+20,o=i.firstCreatePass?Sd(i,r,1,n,null):i.data[r],s=e[r]=fb(e[11],n);cg(i,e,s,o),U(o,!1)}function Le(t){return Z("",t,""),Le}function Z(t,n,e){const i=a(),r=Id(i,t,n,e);return r!==st&&al(i,Ar(),r),Z}function uc(t,n,e,i,r){const o=a(),s=Pd(o,t,n,e,i,r);return s!==st&&al(o,Ar(),s),uc}function Is(t,n,e){Ms(Do,Ta,Id(a(),t,n,e),!0)}function no(t,n,e){const i=a();return gr(i,Pr(),n)&&Io(u(),Wn(),i,t,n,i[11],e,!0),no}const ru=void 0;var lV=["en",[["a","p"],["AM","PM"],ru],[["AM","PM"],ru,ru],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ru,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ru,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ru,"{1} 'at' {0}",ru],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){const n=Math.floor(Math.abs(t)),e=t.toString().replace(/^[^.]*\.?/,"").length;return 1===n&&0===e?1:5}];let Bd={};function Fr(t){const n=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let e=SD(n);if(e)return e;const i=n.split("-")[0];if(e=SD(i),e)return e;if("en"===i)return lV;throw new Error(`Missing locale data for the locale "${t}".`)}function wD(t){return Fr(t)[_e.PluralCase]}function SD(t){return t in Bd||(Bd[t]=ve.ng&&ve.ng.common&&ve.ng.common.locales&&ve.ng.common.locales[t]),Bd[t]}var _e=(()=>((_e=_e||{})[_e.LocaleId=0]="LocaleId",_e[_e.DayPeriodsFormat=1]="DayPeriodsFormat",_e[_e.DayPeriodsStandalone=2]="DayPeriodsStandalone",_e[_e.DaysFormat=3]="DaysFormat",_e[_e.DaysStandalone=4]="DaysStandalone",_e[_e.MonthsFormat=5]="MonthsFormat",_e[_e.MonthsStandalone=6]="MonthsStandalone",_e[_e.Eras=7]="Eras",_e[_e.FirstDayOfWeek=8]="FirstDayOfWeek",_e[_e.WeekendRange=9]="WeekendRange",_e[_e.DateFormat=10]="DateFormat",_e[_e.TimeFormat=11]="TimeFormat",_e[_e.DateTimeFormat=12]="DateTimeFormat",_e[_e.NumberSymbols=13]="NumberSymbols",_e[_e.NumberFormats=14]="NumberFormats",_e[_e.CurrencyCode=15]="CurrencyCode",_e[_e.CurrencySymbol=16]="CurrencySymbol",_e[_e.CurrencyName=17]="CurrencyName",_e[_e.Currencies=18]="Currencies",_e[_e.Directionality=19]="Directionality",_e[_e.PluralCase=20]="PluralCase",_e[_e.ExtraData=21]="ExtraData",_e))();const uV=["zero","one","two","few","many"],Sg="en-US",Tg={marker:"element"},Eg={marker:"ICU"};var qn=(()=>((qn=qn||{})[qn.SHIFT=2]="SHIFT",qn[qn.APPEND_EAGERLY=1]="APPEND_EAGERLY",qn[qn.COMMENT=2]="COMMENT",qn))();let TD=Sg;function o1(t){(function(t,n){null==t&&jt(n,t,null,"!=")})(t,"Expected localeId to be defined"),"string"==typeof t&&(TD=t.toLowerCase().replace(/_/g,"-"))}function ED(t,n,e){const i=n.insertBeforeIndex,r=Array.isArray(i)?i[0]:i;return null===r?iE(t,0,e):Gn(e[r])}function kD(t,n,e,i,r){const o=n.insertBeforeIndex;if(Array.isArray(o)){let s=i,l=null;if(3&n.type||(l=s,s=r),null!==s&&0==(2&n.flags))for(let c=1;c<o.length;c++)nu(t,s,e[o[c]],l,!1)}}function DD(t,n){if(t.push(n),t.length>1)for(let e=t.length-2;e>=0;e--){const i=t[e];xD(i)||fV(i,n)&&null===mV(i)&&gV(i,n.index)}}function xD(t){return!(64&t.type)}function fV(t,n){return xD(n)||t.index>n.index}function mV(t){const n=t.insertBeforeIndex;return Array.isArray(n)?n[0]:n}function gV(t,n){const e=t.insertBeforeIndex;Array.isArray(e)?e[0]=n:(oE(ED,kD),t.insertBeforeIndex=n)}function Np(t,n){const e=t.data[n];return null===e||"string"==typeof e?null:e.hasOwnProperty("currentCaseLViewIndex")?e:e.value}function yV(t,n,e){const i=Pb(t,e,64,null,null);return DD(n,i),i}function kg(t,n){const e=n[t.currentCaseLViewIndex];return null===e?e:e<0?~e:e}function MD(t){return t>>>17}function ID(t){return(131070&t)>>>1}let Fp=0,Rp=0;function AD(t,n,e,i){const r=e[11];let s,o=null;for(let l=0;l<n.length;l++){const c=n[l];if("string"==typeof c){const d=n[++l];null===e[d]&&(e[d]=fb(r,c))}else if("number"==typeof c)switch(1&c){case 0:const d=MD(c);let m,_;if(null===o&&(o=d,s=lg(r,i)),d===o?(m=i,_=s):(m=null,_=Gn(e[d])),null!==_){const N=ID(c);nu(r,_,e[N],m,!1);const j=Np(t,N);if(null!==j&&"object"==typeof j){const H=kg(j,e);null!==H&&AD(t,j.create[H],e,e[j.anchorIdx])}}break;case 1:const E=n[++l],D=n[++l];Fb(r,Qc(c>>>1,e),null,null,E,D,null);break;default:throw new Error(`Unable to determine the type of mutate operation for "${c}"`)}else switch(c){case Eg:const d=n[++l],m=n[++l];null===e[m]&&mr(e[m]=h$(r,d),e);break;case Tg:const _=n[++l],w=n[++l];null===e[w]&&mr(e[w]=mb(r,_,null),e)}}}function OD(t,n,e,i,r){for(let o=0;o<e.length;o++){const s=e[o],l=e[++o];if(s&r){let c="";for(let d=o+1;d<=o+l;d++){const m=e[d];if("string"==typeof m)c+=m;else if("number"==typeof m)if(m<0)c+=Re(n[i-m]);else{const _=m>>>2;switch(3&m){case 1:const w=e[++d],E=e[++d],D=t.data[_];"string"==typeof D?Fb(n[11],n[_],null,D,w,c,E):Io(t,D,n,w,c,n[11],E,!1);break;case 0:const N=n[_];null!==N&&ZT(n[11],N,c);break;case 2:TV(t,Np(t,_),n,c);break;case 3:ND(t,Np(t,_),i,n)}}}}else{const c=e[o+1];if(c>0&&3==(3&c)){const m=Np(t,c>>>2);n[m.currentCaseLViewIndex]<0&&ND(t,m,i,n)}}o+=l}}function ND(t,n,e,i){let r=i[n.currentCaseLViewIndex];if(null!==r){let o=Fp;r<0&&(r=i[n.currentCaseLViewIndex]=~r,o=-1),OD(t,i,n.update[r],e,o)}}function TV(t,n,e,i){const r=function(t,n){let e=t.cases.indexOf(n);if(-1===e)switch(t.type){case 1:{const i=function(t,n){const e=wD(n)(parseInt(t,10)),i=uV[e];return void 0!==i?i:"other"}(n,TD);e=t.cases.indexOf(i),-1===e&&"other"!==i&&(e=t.cases.indexOf("other"));break}case 0:e=t.cases.indexOf("other")}return-1===e?null:e}(n,i);if(kg(n,e)!==r&&(FD(t,n,e),e[n.currentCaseLViewIndex]=null===r?null:~r,null!==r)){const s=e[n.anchorIdx];s&&AD(t,n.create[r],e,s)}}function FD(t,n,e){let i=kg(n,e);if(null!==i){const r=n.remove[i];for(let o=0;o<r.length;o++){const s=r[o];if(s>0){const l=Qc(s,e);null!==l&&aE(e[11],l)}else FD(t,Np(t,~s),e)}}}function kV(){const t=[];let e,i,n=-1;function o(l,c){n=0;const d=kg(l,c);i=null!==d?l.remove[d]:bt}function s(){if(n<i.length){const l=i[n++];return l>0?e[l]:(t.push(n,i),o(e[1].data[~l],e),s())}return 0===t.length?null:(i=t.pop(),n=t.pop(),s())}return function(l,c){for(e=c;t.length;)t.pop();return o(l.value,c),s}}const Dg=/\ufffd(\d+):?\d*\ufffd/gi,xV=/\ufffd(\d+)\ufffd/,LD=/^\s*(\ufffd\d+:?\d*\ufffd)\s*,\s*(select|plural)\s*,/,MV=/\ufffd\/?\*(\d+:\d+)\ufffd/gi,IV=/\ufffd(\/?[#*]\d+):?\d*\ufffd/gi,PV=/\uE500/g;function $D(t,n,e,i,r,o,s){const l=Td(t,i,1,null);let c=l<<qn.SHIFT,d=M();n===d&&(d=null),null===d&&(c|=qn.APPEND_EAGERLY),s&&(c|=qn.COMMENT,function(t){void 0===ub&&(ub=t())}(kV)),r.push(c,null===o?"":o);const m=Pb(t,l,s?32:1,null===o?"":o,null);DD(e,m);const _=m.index;return U(m,!1),null!==d&&n!==d&&function(t,n){let e=t.insertBeforeIndex;null===e?(oE(ED,kD),e=t.insertBeforeIndex=[null,n]):(function(t,n,e){t!=n&&jt(e,t,n,"==")}(Array.isArray(e),!0,"Expecting array here"),e.push(n))}(d,_),m}function NV(t,n,e,i,r,o,s){const l=s.match(Dg),c=$D(t,n,e,o,i,l?null:s,!1);l&&Hd(r,s,c.index,null,0,null)}function Hd(t,n,e,i,r,o){const s=t.length,l=s+1;t.push(null,null);const c=s+2,d=n.split(Dg);let m=0;for(let _=0;_<d.length;_++){const w=d[_];if(1&_){const E=r+parseInt(w,10);t.push(-1-E),m|=UD(E)}else""!==w&&t.push(w)}return t.push(e<<2|(i?1:0)),i&&t.push(i,o),t[s]=m,t[l]=t.length-c,m}function UD(t){return 1<<Math.min(t,31)}function VD(t){let n,o,e="",i=0,r=!1;for(;null!==(n=MV.exec(t));)r?n[0]===`\ufffd/*${o}\ufffd`&&(i=n.index,r=!1):(e+=t.substring(i,n.index+n[0].length),o=n[1],r=!0);return e+=t.substr(i),e}function BD(t,n,e,i,r,o){let s=0;const l={type:r.type,currentCaseLViewIndex:Td(t,n,1,null),anchorIdx:o,cases:[],create:[],remove:[],update:[]};(function(t,n,e){t.push(UD(n.mainBinding),2,-1-n.mainBinding,e<<2|2)})(e,r,o),function(t,n,e){const i=t.data[n];null===i?t.data[n]=e:i.value=e}(t,o,l);const c=r.values;for(let d=0;d<c.length;d++){const m=c[d],_=[];for(let w=0;w<m.length;w++){const E=m[w];if("string"!=typeof E){const D=_.push(E)-1;m[w]=`\x3c!--\ufffd${D}\ufffd--\x3e`}}s=VV(t,l,n,e,i,r.cases[d],m.join(""),_)|s}s&&function(t,n,e){t.push(n,1,e<<2|3)}(e,s,o)}function UV(t){const n=[],e=[];let i=1,r=0;const o=s1(t=t.replace(LD,function(s,l,c){return i="select"===c?0:1,r=parseInt(l.substr(1),10),""}));for(let s=0;s<o.length;){let l=o[s++].trim();1===i&&(l=l.replace(/\s*(?:=)?(\w+)\s*/,"$1")),l.length&&n.push(l);const c=s1(o[s++]);n.length>e.length&&e.push(c)}return{type:i,mainBinding:r,cases:n,values:e}}function s1(t){if(!t)return[];let n=0;const e=[],i=[],r=/[{}]/g;let o;for(r.lastIndex=0;o=r.exec(t);){const l=o.index;if("}"==o[0]){if(e.pop(),0==e.length){const c=t.substring(n,l);LD.test(c)?i.push(UV(c)):i.push(c),n=l+1}}else{if(0==e.length){const c=t.substring(n,l);i.push(c),n=l+1}e.push("{")}}const s=t.substring(n);return i.push(s),i}function VV(t,n,e,i,r,o,s,l){const c=[],d=[],m=[];n.cases.push(o),n.create.push(c),n.remove.push(d),n.update.push(m);const w=wT(np()).getInertBodyElement(s),E=sb(w)||w;return E?HD(t,n,e,i,c,d,m,E,r,l,0):0}function HD(t,n,e,i,r,o,s,l,c,d,m){let _=0,w=l.firstChild;for(;w;){const E=Td(t,e,1,null);switch(w.nodeType){case Node.ELEMENT_NODE:const D=w,N=D.tagName.toLowerCase();if(ib.hasOwnProperty(N)){a1(r,Tg,N,c,E),t.data[E]=N;const X=D.attributes;for(let de=0;de<X.length;de++){const Be=X.item(de),Gt=Be.name.toLowerCase();Be.value.match(Dg)?DT.hasOwnProperty(Gt)&&Hd(s,Be.value,E,Be.name,0,rb[Gt]?yp:ob[Gt]?ST:null):zV(r,E,Be)}_=HD(t,n,e,i,r,o,s,w,E,d,m+1)|_,jD(o,E,m)}break;case Node.TEXT_NODE:const F=w.textContent||"",j=F.match(Dg);a1(r,null,j?"":F,c,E),jD(o,E,m),j&&(_=Hd(s,F,E,null,0,null)|_);break;case Node.COMMENT_NODE:const H=xV.exec(w.textContent||"");if(H){const de=d[parseInt(H[1],10)];a1(r,Eg,"",c,E),BD(t,e,i,c,de,E),BV(o,E,m)}}w=w.nextSibling}return _}function jD(t,n,e){0===e&&t.push(n)}function BV(t,n,e){0===e&&(t.push(~n),t.push(n))}function a1(t,n,e,i,r){null!==n&&t.push(n),t.push(e,r,function(t,n,e){return 0|n<<17|e<<1}(0,i,r))}function zV(t,n,e){t.push(n<<1|1,e.name,e.value)}function GD(t,n,e=-1){const i=u(),r=a(),o=20+t,s=Ss(i.consts,n),l=M();i.firstCreatePass&&function(t,n,e,i,r,o){const s=M(),l=[],c=[],d=[[]],m=function(t){return t.replace(PV," ")}(r=function(t,n){if(function(t){return-1===t}(n))return VD(t);{const e=t.indexOf(`:${n}\ufffd`)+2+n.toString().length,i=t.search(new RegExp(`\ufffd\\/\\*\\d+:${n}\ufffd`));return VD(t.substring(e,i))}}(r,o)).split(IV);for(let _=0;_<m.length;_++){let w=m[_];if(0==(1&_)){const E=s1(w);for(let D=0;D<E.length;D++){let N=E[D];if(0==(1&D)){const F=N;""!==F&&NV(t,s,d[0],l,c,e,F)}else{const F=N;if("object"!=typeof F)throw new Error(`Unable to parse ICU expression in "${r}" message.`);BD(t,e,c,n,F,$D(t,s,d[0],e,l,"",!0).index)}}}else{const E=47===w.charCodeAt(0),N=(w.charCodeAt(E?1:0),20+Number.parseInt(w.substring(E?2:1)));if(E)d.shift(),U(M(),!1);else{const F=yV(t,d[0],N);d.unshift([]),U(F,!0)}}}t.data[i]={create:l,update:c}}(i,null===l?0:l.index,r,o,s,e);const c=i.data[o],m=XT(i,l===r[6]?null:l,r);(function(t,n,e,i){const r=t[11];for(let o=0;o<n.length;o++){const s=n[o++],l=n[o],c=(s&qn.COMMENT)===qn.COMMENT,d=(s&qn.APPEND_EAGERLY)===qn.APPEND_EAGERLY,m=s>>>qn.SHIFT;let _=t[m];null===_&&(_=t[m]=c?r.createComment(l):fb(r,l)),d&&null!==e&&nu(r,e,_,i,!1)}})(r,c.create,m,l&&8&l.type?r[l.index]:null),Lm(!0)}function Ki(t,n,e){GD(t,n,e),Lm(!1)}function jd(t){return function(t){t&&(Fp|=1<<Math.min(Rp,31)),Rp++}(gr(a(),Pr(),t)),jd}function l1(t,n,e,i,r){if(t=Se(t),Array.isArray(t))for(let o=0;o<t.length;o++)l1(t[o],n,e,i,r);else{const o=u(),s=a();let l=Dd(t)?t:Se(t.provide),c=ZE(t);const d=y(),m=1048575&d.providerIndexes,_=d.directiveStart,w=d.providerIndexes>>20;if(Dd(t)||!t.multi){const E=new lp(c,r,C),D=u1(l,n,r?m:m+w,_);-1===D?(Zm(up(d,s),o,l),c1(o,t,n.length),n.push(l),d.directiveStart++,d.directiveEnd++,r&&(d.providerIndexes+=1048576),e.push(E),s.push(E)):(e[D]=E,s[D]=E)}else{const E=u1(l,n,m+w,_),D=u1(l,n,m,m+w),N=E>=0&&e[E],F=D>=0&&e[D];if(r&&!F||!r&&!N){Zm(up(d,s),o,l);const j=function(t,n,e,i,r){const o=new lp(t,e,C);return o.multi=[],o.index=n,o.componentProviders=0,qD(o,r,i&&!e),o}(r?i5:n5,e.length,r,i,c);!r&&F&&(e[D].providerFactory=j),c1(o,t,n.length,0),n.push(l),d.directiveStart++,d.directiveEnd++,r&&(d.providerIndexes+=1048576),e.push(j),s.push(j)}else c1(o,t,E>-1?E:D,qD(e[r?D:E],c,!r&&i));!r&&i&&F&&e[D].componentProviders++}}}function c1(t,n,e,i){const r=Dd(n);if(r||function(t){return!!t.useClass}(n)){const s=(n.useClass||n).prototype.ngOnDestroy;if(s){const l=t.destroyHooks||(t.destroyHooks=[]);if(!r&&n.multi){const c=l.indexOf(e);-1===c?l.push(e,[i,s]):l[c+1].push(i,s)}else l.push(e,s)}}}function qD(t,n,e){return e&&t.componentProviders++,t.multi.push(n)-1}function u1(t,n,e,i){for(let r=e;r<i;r++)if(n[r]===t)return r;return-1}function n5(t,n,e,i){return d1(this.multi,[])}function i5(t,n,e,i){const r=this.multi;let o;if(this.providerFactory){const s=this.providerFactory.componentProviders,l=dp(e,e[1],this.providerFactory.index,i);o=l.slice(0,s),d1(r,o);for(let c=s;c<l.length;c++)o.push(l[c])}else o=[],d1(r,o);return o}function d1(t,n){for(let e=0;e<t.length;e++)n.push((0,t[e])());return n}function At(t,n=[]){return e=>{e.providersResolver=(i,r)=>function(t,n,e){const i=u();if(i.firstCreatePass){const r=$n(t);l1(e,i.data,i.blueprint,r,!0),l1(n,i.data,i.blueprint,r,!1)}}(i,r?r(t):t,n)}}class QD{}const KD="ngComponent";class s5{resolveComponentFactory(n){throw function(t){const n=Error(`No component factory found for ${rt(t)}. Did you add it to @NgModule.entryComponents?`);return n[KD]=t,n}(n)}}let _r=(()=>{class t{}return t.NULL=new s5,t})();function xg(...t){}function zd(t,n){return new Ye(eo(t,n))}const c5=function(){return zd(y(),a())};let Ye=(()=>{class t{constructor(e){this.nativeElement=e}}return t.__NG_ELEMENT_ID__=c5,t})();function YD(t){return t instanceof Ye?t.nativeElement:t}class ul{}let vi=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>d5(),t})();const d5=function(){const t=a(),e=mi(y().index,t);return function(t){return t[11]}(Jr(e)?e:t)};let p1=(()=>{class t{}return t.\u0275prov=B({token:t,providedIn:"root",factory:()=>null}),t})();class Up{constructor(n){this.full=n,this.major=n.split(".")[0],this.minor=n.split(".")[1],this.patch=n.split(".").slice(2).join(".")}}const JD=new Up("12.2.13");class XD{constructor(){}supports(n){return Ip(n)}create(n){return new m5(n)}}const f5=(t,n)=>n;class m5{constructor(n){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=n||f5}forEachItem(n){let e;for(e=this._itHead;null!==e;e=e._next)n(e)}forEachOperation(n){let e=this._itHead,i=this._removalsHead,r=0,o=null;for(;e||i;){const s=!i||e&&e.currentIndex<tx(i,r,o)?e:i,l=tx(s,r,o),c=s.currentIndex;if(s===i)r--,i=i._nextRemoved;else if(e=e._next,null==s.previousIndex)r++;else{o||(o=[]);const d=l-r,m=c-r;if(d!=m){for(let w=0;w<d;w++){const E=w<o.length?o[w]:o[w]=0,D=E+w;m<=D&&D<d&&(o[w]=E+1)}o[s.previousIndex]=m-d}}l!==c&&n(s,l,c)}}forEachPreviousItem(n){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)n(e)}forEachAddedItem(n){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)n(e)}forEachMovedItem(n){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)n(e)}forEachRemovedItem(n){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)n(e)}forEachIdentityChange(n){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)n(e)}diff(n){if(null==n&&(n=[]),!Ip(n))throw new Error(`Error trying to diff '${rt(n)}'. Only arrays and iterables are allowed`);return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let r,o,s,e=this._itHead,i=!1;if(Array.isArray(n)){this.length=n.length;for(let l=0;l<this.length;l++)o=n[l],s=this._trackByFn(l,o),null!==e&&Object.is(e.trackById,s)?(i&&(e=this._verifyReinsertion(e,o,s,l)),Object.is(e.item,o)||this._addIdentityChange(e,o)):(e=this._mismatch(e,o,s,l),i=!0),e=e._next}else r=0,function(t,n){if(Array.isArray(t))for(let e=0;e<t.length;e++)n(t[e]);else{const e=t[xd()]();let i;for(;!(i=e.next()).done;)n(i.value)}}(n,l=>{s=this._trackByFn(r,l),null!==e&&Object.is(e.trackById,s)?(i&&(e=this._verifyReinsertion(e,l,s,r)),Object.is(e.item,l)||this._addIdentityChange(e,l)):(e=this._mismatch(e,l,s,r),i=!0),e=e._next,r++}),this.length=r;return this._truncate(e),this.collection=n,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let n;for(n=this._previousItHead=this._itHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._additionsHead;null!==n;n=n._nextAdded)n.previousIndex=n.currentIndex;for(this._additionsHead=this._additionsTail=null,n=this._movesHead;null!==n;n=n._nextMoved)n.previousIndex=n.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(n,e,i,r){let o;return null===n?o=this._itTail:(o=n._prev,this._remove(n)),null!==(n=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null))?(Object.is(n.item,e)||this._addIdentityChange(n,e),this._reinsertAfter(n,o,r)):null!==(n=null===this._linkedRecords?null:this._linkedRecords.get(i,r))?(Object.is(n.item,e)||this._addIdentityChange(n,e),this._moveAfter(n,o,r)):n=this._addAfter(new g5(e,i),o,r),n}_verifyReinsertion(n,e,i,r){let o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null);return null!==o?n=this._reinsertAfter(o,n._prev,r):n.currentIndex!=r&&(n.currentIndex=r,this._addToMoves(n,r)),n}_truncate(n){for(;null!==n;){const e=n._next;this._addToRemovals(this._unlink(n)),n=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(n,e,i){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(n);const r=n._prevRemoved,o=n._nextRemoved;return null===r?this._removalsHead=o:r._nextRemoved=o,null===o?this._removalsTail=r:o._prevRemoved=r,this._insertAfter(n,e,i),this._addToMoves(n,i),n}_moveAfter(n,e,i){return this._unlink(n),this._insertAfter(n,e,i),this._addToMoves(n,i),n}_addAfter(n,e,i){return this._insertAfter(n,e,i),this._additionsTail=null===this._additionsTail?this._additionsHead=n:this._additionsTail._nextAdded=n,n}_insertAfter(n,e,i){const r=null===e?this._itHead:e._next;return n._next=r,n._prev=e,null===r?this._itTail=n:r._prev=n,null===e?this._itHead=n:e._next=n,null===this._linkedRecords&&(this._linkedRecords=new ex),this._linkedRecords.put(n),n.currentIndex=i,n}_remove(n){return this._addToRemovals(this._unlink(n))}_unlink(n){null!==this._linkedRecords&&this._linkedRecords.remove(n);const e=n._prev,i=n._next;return null===e?this._itHead=i:e._next=i,null===i?this._itTail=e:i._prev=e,n}_addToMoves(n,e){return n.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=n:this._movesTail._nextMoved=n),n}_addToRemovals(n){return null===this._unlinkedRecords&&(this._unlinkedRecords=new ex),this._unlinkedRecords.put(n),n.currentIndex=null,n._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=n,n._prevRemoved=null):(n._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=n),n}_addIdentityChange(n,e){return n.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=n:this._identityChangesTail._nextIdentityChange=n,n}}class g5{constructor(n,e){this.item=n,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class _5{constructor(){this._head=null,this._tail=null}add(n){null===this._head?(this._head=this._tail=n,n._nextDup=null,n._prevDup=null):(this._tail._nextDup=n,n._prevDup=this._tail,n._nextDup=null,this._tail=n)}get(n,e){let i;for(i=this._head;null!==i;i=i._nextDup)if((null===e||e<=i.currentIndex)&&Object.is(i.trackById,n))return i;return null}remove(n){const e=n._prevDup,i=n._nextDup;return null===e?this._head=i:e._nextDup=i,null===i?this._tail=e:i._prevDup=e,null===this._head}}class ex{constructor(){this.map=new Map}put(n){const e=n.trackById;let i=this.map.get(e);i||(i=new _5,this.map.set(e,i)),i.add(n)}get(n,e){const r=this.map.get(n);return r?r.get(n,e):null}remove(n){const e=n.trackById;return this.map.get(e).remove(n)&&this.map.delete(e),n}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function tx(t,n,e){const i=t.previousIndex;if(null===i)return i;let r=0;return e&&i<e.length&&(r=e[i]),i+n+r}class nx{constructor(){}supports(n){return n instanceof Map||Zb(n)}create(){return new v5}}class v5{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(n){let e;for(e=this._mapHead;null!==e;e=e._next)n(e)}forEachPreviousItem(n){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)n(e)}forEachChangedItem(n){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)n(e)}forEachAddedItem(n){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)n(e)}forEachRemovedItem(n){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)n(e)}diff(n){if(n){if(!(n instanceof Map||Zb(n)))throw new Error(`Error trying to diff '${rt(n)}'. Only maps and objects are allowed`)}else n=new Map;return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(n,(i,r)=>{if(e&&e.key===r)this._maybeAddToChanges(e,i),this._appendAfter=e,e=e._next;else{const o=this._getOrCreateRecordForKey(r,i);e=this._insertBeforeOrAppend(e,o)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let i=e;null!==i;i=i._nextRemoved)i===this._mapHead&&(this._mapHead=null),this._records.delete(i.key),i._nextRemoved=i._next,i.previousValue=i.currentValue,i.currentValue=null,i._prev=null,i._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(n,e){if(n){const i=n._prev;return e._next=n,e._prev=i,n._prev=e,i&&(i._next=e),n===this._mapHead&&(this._mapHead=e),this._appendAfter=n,n}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(n,e){if(this._records.has(n)){const r=this._records.get(n);this._maybeAddToChanges(r,e);const o=r._prev,s=r._next;return o&&(o._next=s),s&&(s._prev=o),r._next=null,r._prev=null,r}const i=new y5(n);return this._records.set(n,i),i.currentValue=e,this._addToAdditions(i),i}_reset(){if(this.isDirty){let n;for(this._previousMapHead=this._mapHead,n=this._previousMapHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._changesHead;null!==n;n=n._nextChanged)n.previousValue=n.currentValue;for(n=this._additionsHead;null!=n;n=n._nextAdded)n.previousValue=n.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(n,e){Object.is(e,n.currentValue)||(n.previousValue=n.currentValue,n.currentValue=e,this._addToChanges(n))}_addToAdditions(n){null===this._additionsHead?this._additionsHead=this._additionsTail=n:(this._additionsTail._nextAdded=n,this._additionsTail=n)}_addToChanges(n){null===this._changesHead?this._changesHead=this._changesTail=n:(this._changesTail._nextChanged=n,this._changesTail=n)}_forEach(n,e){n instanceof Map?n.forEach(e):Object.keys(n).forEach(i=>e(n[i],i))}}class y5{constructor(n){this.key=n,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function ix(){return new Vp([new XD])}let Vp=(()=>{class t{constructor(e){this.factories=e}static create(e,i){if(null!=i){const r=i.factories.slice();e=e.concat(r)}return new t(e)}static extend(e){return{provide:t,useFactory:i=>t.create(e,i||ix()),deps:[[t,new ac,new fr]]}}find(e){const i=this.factories.find(r=>r.supports(e));if(null!=i)return i;throw new Error(`Cannot find a differ supporting object '${e}' of type '${function(t){return t.name||typeof t}(e)}'`)}}return t.\u0275prov=B({token:t,providedIn:"root",factory:ix}),t})();function rx(){return new Gd([new nx])}let Gd=(()=>{class t{constructor(e){this.factories=e}static create(e,i){if(i){const r=i.factories.slice();e=e.concat(r)}return new t(e)}static extend(e){return{provide:t,useFactory:i=>t.create(e,i||rx()),deps:[[t,new ac,new fr]]}}find(e){const i=this.factories.find(r=>r.supports(e));if(i)return i;throw new Error(`Cannot find a differ supporting object '${e}'`)}}return t.\u0275prov=B({token:t,providedIn:"root",factory:rx}),t})();function Mg(t,n,e,i,r=!1){for(;null!==e;){const o=n[e.index];if(null!==o&&i.push(Gn(o)),So(o))for(let l=10;l<o.length;l++){const c=o[l],d=c[1].firstChild;null!==d&&Mg(c[1],c,d,i)}const s=e.type;if(8&s)Mg(t,n,e.child,i);else if(32&s){const l=db(e,n);let c;for(;c=l();)i.push(c)}else if(16&s){const l=sE(n,e);if(Array.isArray(l))i.push(...l);else{const c=Sp(n[16]);Mg(c[1],c,l,i,!0)}}e=r?e.projectionNext:e.next}return i}class Bp{constructor(n,e){this._lView=n,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const n=this._lView,e=n[1];return Mg(e,n,e.firstChild,[])}get context(){return this._lView[8]}set context(n){this._lView[8]=n}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const n=this._lView[3];if(So(n)){const e=n[8],i=e?e.indexOf(this):-1;i>-1&&(gb(n,i),Jc(e,i))}this._attachedToViewContainer=!1}YT(this._lView[1],this._lView)}onDestroy(n){PE(this._lView[1],this._lView,null,n)}markForCheck(){Lb(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Ub(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,n,e){Pt(!0);try{Ub(t,n,e)}finally{Pt(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function(t,n){Tp(t,n,n[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(n){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=n}}class C5 extends Bp{constructor(n){super(n),this._view=n}detectChanges(){VE(this._view)}checkNoChanges(){!function(t){Pt(!0);try{VE(t)}finally{Pt(!1)}}(this._view)}get context(){return null}}const S5=function(t){return function(t,n,e){if(jc(t)&&!e){const i=mi(t.index,n);return new Bp(i,i)}return 47&t.type?new Bp(n[16],n):null}(y(),a(),16==(16&t))};let ci=(()=>{class t{}return t.__NG_ELEMENT_ID__=S5,t})();const k5=[new nx],x5=new Vp([new XD]),M5=new Gd(k5),P5=function(){return Ig(y(),a())};let fn=(()=>{class t{}return t.__NG_ELEMENT_ID__=P5,t})();const A5=fn,O5=class extends A5{constructor(n,e,i){super(),this._declarationLView=n,this._declarationTContainer=e,this.elementRef=i}createEmbeddedView(n){const e=this._declarationTContainer.tViews,i=Ep(this._declarationLView,e,n,16,null,e.declTNode,null,null,null,null);i[17]=this._declarationLView[this._declarationTContainer.index];const o=this._declarationLView[19];return null!==o&&(i[19]=o.createEmbeddedView(e)),kp(e,i,n),new Bp(i)}};function Ig(t,n){return 4&t.type?new O5(n,t,zd(t,n)):null}class Ea{}class ox{}const R5=function(){return lx(y(),a())};let Yi=(()=>{class t{}return t.__NG_ELEMENT_ID__=R5,t})();const $5=Yi,sx=class extends $5{constructor(n,e,i){super(),this._lContainer=n,this._hostTNode=e,this._hostLView=i}get element(){return zd(this._hostTNode,this._hostLView)}get injector(){return new hd(this._hostTNode,this._hostLView)}get parentInjector(){const n=Qm(this._hostTNode,this._hostLView);if(XS(n)){const e=dd(n,this._hostLView),i=ud(n);return new hd(e[1].data[i+8],e)}return new hd(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(n){const e=ax(this._lContainer);return null!==e&&e[n]||null}get length(){return this._lContainer.length-10}createEmbeddedView(n,e,i){const r=n.createEmbeddedView(e||{});return this.insert(r,i),r}createComponent(n,e,i,r,o){const s=i||this.parentInjector;if(!o&&null==n.ngModule&&s){const c=s.get(Ea,null);c&&(o=c)}const l=n.create(s,r,void 0,o);return this.insert(l.hostView,e),l}insert(n,e){const i=n._lView,r=i[1];if(function(t){return So(t[3])}(i)){const m=this.indexOf(n);if(-1!==m)this.detach(m);else{const _=i[3],w=new sx(_,_[6],_[3]);w.detach(w.indexOf(n))}}const o=this._adjustIndex(e),s=this._lContainer;!function(t,n,e,i){const r=10+i,o=e.length;i>0&&(e[r-1][4]=n),i<o-10?(n[4]=e[r],Xm(e,10+i,n)):(e.push(n),n[4]=null),n[3]=e;const s=n[17];null!==s&&e!==s&&function(t,n){const e=t[9];n[16]!==n[3][3][16]&&(t[2]=!0),null===e?t[9]=[n]:e.push(n)}(s,n);const l=n[19];null!==l&&l.insertView(t),n[2]|=128}(r,i,s,o);const l=yb(o,s),c=i[11],d=lg(c,s[7]);return null!==d&&function(t,n,e,i,r,o){i[0]=r,i[6]=n,Tp(t,i,e,1,r,o)}(r,s[6],c,i,d,l),n.attachToViewContainerRef(),Xm(f1(s),o,n),n}move(n,e){return this.insert(n,e)}indexOf(n){const e=ax(this._lContainer);return null!==e?e.indexOf(n):-1}remove(n){const e=this._adjustIndex(n,-1),i=gb(this._lContainer,e);i&&(Jc(f1(this._lContainer),e),YT(i[1],i))}detach(n){const e=this._adjustIndex(n,-1),i=gb(this._lContainer,e);return i&&null!=Jc(f1(this._lContainer),e)?new Bp(i):null}_adjustIndex(n,e=0){return null==n?this.length+e:n}};function ax(t){return t[8]}function f1(t){return t[8]||(t[8]=[])}function lx(t,n){let e;const i=n[t.index];if(So(i))e=i;else{let r;if(8&t.type)r=Gn(i);else{const o=n[11];r=o.createComment("");const s=eo(t,n);nu(o,lg(o,s),r,function(t,n){return In(t)?t.nextSibling(n):n.nextSibling}(o,s),!1)}n[t.index]=e=UE(i,n,r,t),mg(n,e)}return new sx(e,t,n)}const Zd={};class xx extends _r{constructor(n){super(),this.ngModule=n}resolveComponentFactory(n){const e=qi(n);return new Ix(e,this.ngModule)}}function Mx(t){const n=[];for(let e in t)t.hasOwnProperty(e)&&n.push({propName:t[e],templateName:e});return n}const NB=new tt("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>BT});class Ix extends QD{constructor(n,e){super(),this.componentDef=n,this.ngModule=e,this.componentType=n.type,this.selector=function(t){return t.map(N$).join(",")}(n.selectors),this.ngContentSelectors=n.ngContentSelectors?n.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return Mx(this.componentDef.inputs)}get outputs(){return Mx(this.componentDef.outputs)}create(n,e,i,r){const o=(r=r||this.ngModule)?function(t,n){return{get:(e,i,r)=>{const o=t.get(e,Zd,r);return o!==Zd||i===Zd?o:n.get(e,i,r)}}}(n,r.injector):n,s=o.get(ul,Pm),l=o.get(p1,null),c=s.createRenderer(null,this.componentDef),d=this.componentDef.selectors[0][0]||"div",m=i?function(t,n,e){if(In(t))return t.selectRootElement(n,e===I.ShadowDom);let i="string"==typeof n?t.querySelector(n):n;return i.textContent="",i}(c,i,this.componentDef.encapsulation):mb(s.createRenderer(null,this.componentDef),d,function(t){const n=t.toLowerCase();return"svg"===n?"http://www.w3.org/2000/svg":"math"===n?"http://www.w3.org/1998/MathML/":null}(d)),_=this.componentDef.onPush?576:528,w=function(t,n){return{components:[],scheduler:t||BT,clean:v4,playerHandler:n||null,flags:0}}(),E=fg(0,null,null,1,0,null,null,null,null,null),D=Ep(null,E,w,_,null,null,s,c,l,o);let N,F;ld(D);try{const j=function(t,n,e,i,r,o){const s=e[1];e[20]=t;const c=Sd(s,20,2,"#host",null),d=c.mergedAttrs=n.hostAttrs;null!==d&&(gg(c,d,!0),null!==t&&(Gm(r,t,d),null!==c.classes&&Cb(r,t,c.classes),null!==c.styles&&cE(r,t,c.styles)));const m=i.createRenderer(t,n),_=Ep(e,xE(n),null,n.onPush?64:16,e[20],c,i,m,o||null,null);return s.firstCreatePass&&(Zm(up(c,e),s,n.type),RE(s,c),LE(c,e.length,1)),mg(e,_),e[20]=_}(m,this.componentDef,D,s,c);if(m)if(i)Gm(c,m,["ng-version",JD.full]);else{const{attrs:H,classes:X}=function(t){const n=[],e=[];let i=1,r=2;for(;i<t.length;){let o=t[i];if("string"==typeof o)2===r?""!==o&&n.push(o,t[++i]):8===r&&e.push(o);else{if(!Ts(r))break;r=o}i++}return{attrs:n,classes:e}}(this.componentDef.selectors[0]);H&&Gm(c,m,H),X&&X.length>0&&Cb(c,m,X.join(" "))}if(F=sd(E,20),void 0!==e){const H=F.projection=[];for(let X=0;X<this.ngContentSelectors.length;X++){const de=e[X];H.push(null!=de?Array.from(de):null)}}N=function(t,n,e,i,r){const o=e[1],s=function(t,n,e){const i=y();t.firstCreatePass&&(e.providersResolver&&e.providersResolver(e),$E(t,i,n,Td(t,n,1,null),e));const r=dp(n,t,i.directiveStart,i);mr(r,n);const o=eo(i,n);return o&&mr(o,n),r}(o,e,n);if(i.components.push(s),t[8]=s,r&&r.forEach(c=>c(s,n)),n.contentQueries){const c=y();n.contentQueries(1,s,c.directiveStart)}const l=y();return!o.firstCreatePass||null===n.hostBindings&&null===n.hostAttrs||(ic(l.index),NE(e[1],l,0,l.directiveStart,l.directiveEnd,n),FE(n,s)),s}(j,this.componentDef,D,w,[z4]),kp(E,D,null)}finally{Bm()}return new LB(this.componentType,N,zd(F,D),D,F)}}class LB extends class{}{constructor(n,e,i,r,o){super(),this.location=i,this._rootLView=r,this._tNode=o,this.instance=e,this.hostView=this.changeDetectorRef=new C5(r),this.componentType=n}get injector(){return new hd(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(n){this.hostView.onDestroy(n)}}const Kd=new Map;class VB extends Ea{constructor(n,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new xx(this);const i=Ir(n),r=function(t){return t[Gh]||null}(n);r&&o1(r),this._bootstrapComponents=va(i.bootstrap),this._r3Injector=QE(n,e,[{provide:Ea,useValue:this},{provide:_r,useValue:this.componentFactoryResolver}],rt(n)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(n)}get(n,e=Mt.THROW_IF_NOT_FOUND,i=we.Default){return n===Mt||n===Ea||n===ll?this:this._r3Injector.get(n,e,i)}destroy(){const n=this._r3Injector;!n.destroyed&&n.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(n){this.destroyCbs.push(n)}}class D1 extends ox{constructor(n){super(),this.moduleType=n,null!==Ir(n)&&function(t){const n=new Set;!function e(i){const r=Ir(i,!0),o=r.id;null!==o&&(function(t,n,e){if(n&&n!==e)throw new Error(`Duplicate module registered for ${t} - ${rt(n)} vs ${rt(n.name)}`)}(o,Kd.get(o),i),Kd.set(o,i));const s=va(r.imports);for(const l of s)n.has(l)||(n.add(l),e(l))}(t)}(n)}create(n){return new VB(this.moduleType,n)}}function ht(t,n,e,i){return Ox(a(),Tn(),t,n,e,i)}function Bn(t,n,e,i,r){return Nx(a(),Tn(),t,n,e,i,r)}function au(t,n,e,i,r,o){return function(t,n,e,i,r,o,s,l){const c=n+e;return function(t,n,e,i,r){const o=iu(t,n,e,i);return gr(t,n+2,r)||o}(t,c,r,o,s)?ba(t,c+3,l?i.call(l,r,o,s):i(r,o,s)):Zp(t,c+3)}(a(),Tn(),t,n,e,i,r,o)}function x1(t,n,e,i,r,o,s){return function(t,n,e,i,r,o,s,l,c){const d=n+e;return Yo(t,d,r,o,s,l)?ba(t,d+4,c?i.call(c,r,o,s,l):i(r,o,s,l)):Zp(t,d+4)}(a(),Tn(),t,n,e,i,r,o,s)}function M1(t,n,e,i,r,o,s,l,c){const d=Tn()+t,m=a(),_=Yo(m,d,e,i,r,o);return iu(m,d+4,s,l)||_?ba(m,d+6,c?n.call(c,e,i,r,o,s,l):n(e,i,r,o,s,l)):function(t,n){return t[n]}(m,d+6)}function Zp(t,n){const e=t[n];return e===st?void 0:e}function Ox(t,n,e,i,r,o){const s=n+e;return gr(t,s,r)?ba(t,s+1,o?i.call(o,r):i(r)):Zp(t,s+1)}function Nx(t,n,e,i,r,o,s){const l=n+e;return iu(t,l,r,o)?ba(t,l+2,s?i.call(s,r,o):i(r,o)):Zp(t,l+2)}function Lt(t,n){const e=u();let i;const r=t+20;e.firstCreatePass?(i=function(t,n){if(n)for(let e=n.length-1;e>=0;e--){const i=n[e];if(t===i.name)return i}throw new ys("302",`The pipe '${t}' could not be found!`)}(n,e.pipeRegistry),e.data[r]=i,i.onDestroy&&(e.destroyHooks||(e.destroyHooks=[])).push(r,i.onDestroy)):i=e.data[r];const o=i.factory||(i.factory=qo(i.type)),s=hr(C);try{const l=qm(!1),c=o();return qm(l),function(t,n,e,i){e>=t.data.length&&(t.data[e]=null,t.blueprint[e]=null),n[e]=i}(e,a(),r,c),c}finally{hr(s)}}function yn(t,n,e){const i=t+20,r=a(),o=rl(r,i);return Yp(r,Kp(r,i)?Ox(r,Tn(),n,o.transform,e,o):o.transform(e))}function ka(t,n,e,i){const r=t+20,o=a(),s=rl(o,r);return Yp(o,Kp(o,r)?Nx(o,Tn(),n,s.transform,e,i,s):s.transform(e,i))}function Kp(t,n){return t[1].data[n].pure}function Yp(t,n){return Ds.isWrapped(n)&&(n=Ds.unwrap(n),t[$i()]=st),n}function I1(t){return n=>{setTimeout(t,void 0,n)}}const q=class extends Fe{constructor(n=!1){super(),this.__isAsync=n}emit(n){super.next(n)}subscribe(n,e,i){var r,o,s;let l=n,c=e||(()=>null),d=i;if(n&&"object"==typeof n){const _=n;l=null===(r=_.next)||void 0===r?void 0:r.bind(_),c=null===(o=_.error)||void 0===o?void 0:o.bind(_),d=null===(s=_.complete)||void 0===s?void 0:s.bind(_)}this.__isAsync&&(c=I1(c),l&&(l=I1(l)),d&&(d=I1(d)));const m=super.subscribe({next:l,error:c,complete:d});return n instanceof gt&&n.add(m),m}};function YB(){return this._results[xd()]()}class Fg{constructor(n=!1){this._emitDistinctChangesOnly=n,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=xd(),i=Fg.prototype;i[e]||(i[e]=YB)}get changes(){return this._changes||(this._changes=new q)}get(n){return this._results[n]}map(n){return this._results.map(n)}filter(n){return this._results.filter(n)}find(n){return this._results.find(n)}reduce(n,e){return this._results.reduce(n,e)}forEach(n){this._results.forEach(n)}some(n){return this._results.some(n)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(n,e){const i=this;i.dirty=!1;const r=Zo(n);(this._changesDetected=!function(t,n,e){if(t.length!==n.length)return!1;for(let i=0;i<t.length;i++){let r=t[i],o=n[i];if(e&&(r=e(r),o=e(o)),o!==r)return!1}return!0}(i._results,r,e))&&(i._results=r,i.length=r.length,i.last=r[this.length-1],i.first=r[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;class P1{constructor(n){this.queryList=n,this.matches=null}clone(){return new P1(this.queryList)}setDirty(){this.queryList.setDirty()}}class A1{constructor(n=[]){this.queries=n}createEmbeddedView(n){const e=n.queries;if(null!==e){const i=null!==n.contentQueries?n.contentQueries[0]:e.length,r=[];for(let o=0;o<i;o++){const s=e.getByIndex(o);r.push(this.queries[s.indexInDeclarationView].clone())}return new A1(r)}return null}insertView(n){this.dirtyQueriesWithMatches(n)}detachView(n){this.dirtyQueriesWithMatches(n)}dirtyQueriesWithMatches(n){for(let e=0;e<this.queries.length;e++)null!==Hx(n,e).matches&&this.queries[e].setDirty()}}class $x{constructor(n,e,i=null){this.predicate=n,this.flags=e,this.read=i}}class O1{constructor(n=[]){this.queries=n}elementStart(n,e){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(n,e)}elementEnd(n){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(n)}embeddedTView(n){let e=null;for(let i=0;i<this.length;i++){const r=null!==e?e.length:0,o=this.getByIndex(i).embeddedTView(n,r);o&&(o.indexInDeclarationView=i,null!==e?e.push(o):e=[o])}return null!==e?new O1(e):null}template(n,e){for(let i=0;i<this.queries.length;i++)this.queries[i].template(n,e)}getByIndex(n){return this.queries[n]}get length(){return this.queries.length}track(n){this.queries.push(n)}}class N1{constructor(n,e=-1){this.metadata=n,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(n,e){this.isApplyingToNode(e)&&this.matchTNode(n,e)}elementEnd(n){this._declarationNodeIndex===n.index&&(this._appliesToNextNode=!1)}template(n,e){this.elementStart(n,e)}embeddedTView(n,e){return this.isApplyingToNode(n)?(this.crossesNgTemplate=!0,this.addMatch(-n.index,e),new N1(this.metadata)):null}isApplyingToNode(n){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let i=n.parent;for(;null!==i&&8&i.type&&i.index!==e;)i=i.parent;return e===(null!==i?i.index:-1)}return this._appliesToNextNode}matchTNode(n,e){const i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){const o=i[r];this.matchTNodeWithReadOption(n,e,e8(e,o)),this.matchTNodeWithReadOption(n,e,Km(e,n,o,!1,!1))}else i===fn?4&e.type&&this.matchTNodeWithReadOption(n,e,-1):this.matchTNodeWithReadOption(n,e,Km(e,n,i,!1,!1))}matchTNodeWithReadOption(n,e,i){if(null!==i){const r=this.metadata.read;if(null!==r)if(r===Ye||r===Yi||r===fn&&4&e.type)this.addMatch(e.index,-2);else{const o=Km(e,n,r,!1,!1);null!==o&&this.addMatch(e.index,o)}else this.addMatch(e.index,i)}}addMatch(n,e){null===this.matches?this.matches=[n,e]:this.matches.push(n,e)}}function e8(t,n){const e=t.localNames;if(null!==e)for(let i=0;i<e.length;i+=2)if(e[i]===n)return e[i+1];return null}function n8(t,n,e,i){return-1===e?function(t,n){return 11&t.type?zd(t,n):4&t.type?Ig(t,n):null}(n,t):-2===e?function(t,n,e){return e===Ye?zd(n,t):e===fn?Ig(n,t):e===Yi?lx(n,t):void 0}(t,n,i):dp(t,t[1],e,n)}function Ux(t,n,e,i){const r=n[19].queries[i];if(null===r.matches){const o=t.data,s=e.matches,l=[];for(let c=0;c<s.length;c+=2){const d=s[c];l.push(d<0?null:n8(n,o[d],s[c+1],e.metadata.read))}r.matches=l}return r.matches}function F1(t,n,e,i){const r=t.queries.getByIndex(e),o=r.matches;if(null!==o){const s=Ux(t,n,r,e);for(let l=0;l<o.length;l+=2){const c=o[l];if(c>0)i.push(s[l/2]);else{const d=o[l+1],m=n[-c];for(let _=10;_<m.length;_++){const w=m[_];w[17]===w[3]&&F1(w[1],w,d,i)}if(null!==m[9]){const _=m[9];for(let w=0;w<_.length;w++){const E=_[w];F1(E[1],E,d,i)}}}}}return i}function ye(t){const n=a(),e=u(),i=Un();nc(i+1);const r=Hx(e,i);if(t.dirty&&Am(n)===(2==(2&r.metadata.flags))){if(null===r.matches)t.reset([]);else{const o=r.crossesNgTemplate?F1(e,n,i,[]):Ux(e,n,r,i);t.reset(o,YD),t.notifyOnChanges()}return!0}return!1}function pt(t,n,e){const i=u();i.firstCreatePass&&(Bx(i,new $x(t,n,e),-1),2==(2&n)&&(i.staticViewQueries=!0)),Vx(i,a(),n)}function En(t,n,e,i){const r=u();if(r.firstCreatePass){const o=y();Bx(r,new $x(n,e,i),o.index),function(t,n){const e=t.contentQueries||(t.contentQueries=[]);n!==(e.length?e[e.length-1]:-1)&&e.push(t.queries.length-1,n)}(r,t),2==(2&e)&&(r.staticContentQueries=!0)}Vx(r,a(),e)}function be(){return function(t,n){return t[19].queries[n].queryList}(a(),Un())}function Vx(t,n,e){const i=new Fg(4==(4&e));PE(t,n,i,i.destroy),null===n[19]&&(n[19]=new A1),n[19].queries.push(new P1(i))}function Bx(t,n,e){null===t.queries&&(t.queries=new O1),t.queries.track(new N1(n,e))}function Hx(t,n){return t.queries.getByIndex(n)}function se(t,n){return Ig(t,n)}const hc=ZL("Input",t=>({bindingPropertyName:t})),Jd=new tt("Application Initializer");let Xd=(()=>{class t{constructor(e){this.appInits=e,this.resolve=xg,this.reject=xg,this.initialized=!1,this.done=!1,this.donePromise=new Promise((i,r)=>{this.resolve=i,this.reject=r})}runInitializers(){if(this.initialized)return;const e=[],i=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let r=0;r<this.appInits.length;r++){const o=this.appInits[r]();if(Ap(o))e.push(o);else if(bg(o)){const s=new Promise((l,c)=>{o.subscribe({complete:l,error:c})});e.push(s)}}Promise.all(e).then(()=>{i()}).catch(r=>{this.reject(r)}),0===e.length&&i(),this.initialized=!0}}return t.\u0275fac=function(e){return new(e||t)(P(Jd,8))},t.\u0275prov=B({token:t,factory:t.\u0275fac}),t})();const Xp=new tt("AppId"),A8={provide:Xp,useFactory:function(){return`${B1()}${B1()}${B1()}`},deps:[]};function B1(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const sM=new tt("Platform Initializer"),Os=new tt("Platform ID"),aM=new tt("appBootstrapListener");let $g=(()=>{class t{log(e){console.log(e)}warn(e){console.warn(e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=B({token:t,factory:t.\u0275fac}),t})();const es=new tt("LocaleId"),lM=new tt("DefaultCurrencyCode");class N8{constructor(n,e){this.ngModuleFactory=n,this.componentFactories=e}}const H1=function(t){return new D1(t)},F8=H1,R8=function(t){return Promise.resolve(H1(t))},cM=function(t){const n=H1(t),i=va(Ir(t).declarations).reduce((r,o)=>{const s=qi(o);return s&&r.push(new Ix(s)),r},[]);return new N8(n,i)},L8=cM,$8=function(t){return Promise.resolve(cM(t))};let lu=(()=>{class t{constructor(){this.compileModuleSync=F8,this.compileModuleAsync=R8,this.compileModuleAndAllComponentsSync=L8,this.compileModuleAndAllComponentsAsync=$8}clearCache(){}clearCacheFor(e){}getModuleId(e){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=B({token:t,factory:t.\u0275fac}),t})();const B8=(()=>Promise.resolve(0))();function j1(t){"undefined"==typeof Zone?B8.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class it{constructor({enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new q(!1),this.onMicrotaskEmpty=new q(!1),this.onStable=new q(!1),this.onError=new q(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!i&&e,r.shouldCoalesceRunChangeDetection=i,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function(){let t=ve.requestAnimationFrame,n=ve.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&n){const e=t[Zone.__symbol__("OriginalDelegate")];e&&(t=e);const i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:n}}().nativeRequestAnimationFrame,function(t){const n=()=>{!function(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(ve,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,G1(t),t.isCheckStableRunning=!0,z1(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),G1(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(e,i,r,o,s,l)=>{try{return uM(t),e.invokeTask(r,o,s,l)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||t.shouldCoalesceRunChangeDetection)&&n(),dM(t)}},onInvoke:(e,i,r,o,s,l,c)=>{try{return uM(t),e.invoke(r,o,s,l,c)}finally{t.shouldCoalesceRunChangeDetection&&n(),dM(t)}},onHasTask:(e,i,r,o)=>{e.hasTask(r,o),i===r&&("microTask"==o.change?(t._hasPendingMicrotasks=o.microTask,G1(t),z1(t)):"macroTask"==o.change&&(t.hasPendingMacrotasks=o.macroTask))},onHandleError:(e,i,r,o)=>(e.handleError(r,o),t.runOutsideAngular(()=>t.onError.emit(o)),!1)})}(r)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!it.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(it.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(n,e,i){return this._inner.run(n,e,i)}runTask(n,e,i,r){const o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+r,n,j8,xg,xg);try{return o.runTask(s,e,i)}finally{o.cancelTask(s)}}runGuarded(n,e,i){return this._inner.runGuarded(n,e,i)}runOutsideAngular(n){return this._outer.run(n)}}const j8={};function z1(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function G1(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function uM(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function dM(t){t._nesting--,z1(t)}class W8{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new q,this.onMicrotaskEmpty=new q,this.onStable=new q,this.onError=new q}run(n,e,i){return n.apply(e,i)}runGuarded(n,e,i){return n.apply(e,i)}runOutsideAngular(n){return n()}runTask(n,e,i,r){return n.apply(e,i)}}let W1=(()=>{class t{constructor(e){this._ngZone=e,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),e.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{it.assertNotInAngularZone(),j1(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())j1(()=>{for(;0!==this._callbacks.length;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(this._didWork)}this._didWork=!1});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>!i.updateCb||!i.updateCb(e)||(clearTimeout(i.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,i,r){let o=-1;i&&i>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==o),e(this._didWork,this.getPendingTasks())},i)),this._callbacks.push({doneCb:e,timeoutId:o,updateCb:r})}whenStable(e,i,r){if(r&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(e,i,r),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(e,i,r){return[]}}return t.\u0275fac=function(e){return new(e||t)(P(it))},t.\u0275prov=B({token:t,factory:t.\u0275fac}),t})(),hM=(()=>{class t{constructor(){this._applications=new Map,q1.addToWindow(this)}registerApplication(e,i){this._applications.set(e,i)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,i=!0){return q1.findTestabilityInTree(this,e,i)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=B({token:t,factory:t.\u0275fac}),t})();class q8{addToWindow(n){}findTestabilityInTree(n,e,i){return null}}let q1=new q8,pM=!0,fM=!1;let Ns;const gM=new tt("AllowMultipleToken");class Q1{constructor(n,e){this.name=n,this.token=e}}function _M(t,n,e=[]){const i=`Platform: ${n}`,r=new tt(i);return(o=[])=>{let s=vM();if(!s||s.injector.get(gM,!1))if(t)t(e.concat(o).concat({provide:r,useValue:!0}));else{const l=e.concat(o).concat({provide:r,useValue:!0},{provide:Dp,useValue:"platform"});!function(t){if(Ns&&!Ns.destroyed&&!Ns.injector.get(gM,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Ns=t.get(yM);const n=t.get(sM,null);n&&n.forEach(e=>e())}(Mt.create({providers:l,name:i}))}return function(t){const n=vM();if(!n)throw new Error("No platform exists!");if(!n.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return n}(r)}}function vM(){return Ns&&!Ns.destroyed?Ns:null}let yM=(()=>{class t{constructor(e){this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(e,i){const l=function(t,n){let e;return e="noop"===t?new W8:("zone.js"===t?void 0:t)||new it({enableLongStackTrace:(fM=!0,pM),shouldCoalesceEventChangeDetection:!!(null==n?void 0:n.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==n?void 0:n.ngZoneRunCoalescing)}),e}(i?i.ngZone:void 0,{ngZoneEventCoalescing:i&&i.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:i&&i.ngZoneRunCoalescing||!1}),c=[{provide:it,useValue:l}];return l.run(()=>{const d=Mt.create({providers:c,parent:this.injector,name:e.moduleType.name}),m=e.create(d),_=m.injector.get(tu,null);if(!_)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return l.runOutsideAngular(()=>{const w=l.onError.subscribe({next:E=>{_.handleError(E)}});m.onDestroy(()=>{Z1(this._modules,m),w.unsubscribe()})}),function(t,n,e){try{const i=e();return Ap(i)?i.catch(r=>{throw n.runOutsideAngular(()=>t.handleError(r)),r}):i}catch(i){throw n.runOutsideAngular(()=>t.handleError(i)),i}}(_,l,()=>{const w=m.injector.get(Xd);return w.runInitializers(),w.donePromise.then(()=>(o1(m.injector.get(es,Sg)||Sg),this._moduleDoBootstrap(m),m))})})}bootstrapModule(e,i=[]){const r=bM({},i);return function(t,n,e){const i=new D1(e);return Promise.resolve(i)}(0,0,e).then(o=>this.bootstrapModuleFactory(o,r))}_moduleDoBootstrap(e){const i=e.injector.get(ts);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(r=>i.bootstrap(r));else{if(!e.instance.ngDoBootstrap)throw new Error(`The module ${rt(e.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);e.instance.ngDoBootstrap(i)}this._modules.push(e)}onDestroy(e){this._destroyListeners.push(e)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(e=>e.destroy()),this._destroyListeners.forEach(e=>e()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)(P(Mt))},t.\u0275prov=B({token:t,factory:t.\u0275fac}),t})();function bM(t,n){return Array.isArray(n)?n.reduce(bM,t):Object.assign(Object.assign({},t),n)}let ts=(()=>{class t{constructor(e,i,r,o,s){this._zone=e,this._injector=i,this._exceptionHandler=r,this._componentFactoryResolver=o,this._initStatus=s,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const l=new _t(d=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{d.next(this._stable),d.complete()})}),c=new _t(d=>{let m;this._zone.runOutsideAngular(()=>{m=this._zone.onStable.subscribe(()=>{it.assertNotInAngularZone(),j1(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,d.next(!0))})})});const _=this._zone.onUnstable.subscribe(()=>{it.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{d.next(!1)}))});return()=>{m.unsubscribe(),_.unsubscribe()}});this.isStable=zo(l,c.pipe(Ii()))}bootstrap(e,i){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let r;r=e instanceof QD?e:this._componentFactoryResolver.resolveComponentFactory(e),this.componentTypes.push(r.componentType);const o=function(t){return t.isBoundToModule}(r)?void 0:this._injector.get(Ea),l=r.create(Mt.NULL,[],i||r.selector,o),c=l.location.nativeElement,d=l.injector.get(W1,null),m=d&&l.injector.get(hM);return d&&m&&m.registerApplication(c,d),l.onDestroy(()=>{this.detachView(l.hostView),Z1(this.components,l),m&&m.unregisterApplication(c)}),this._loadComponent(l),l}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let e of this._views)e.detectChanges()}catch(e){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(e))}finally{this._runningTick=!1}}attachView(e){const i=e;this._views.push(i),i.attachToAppRef(this)}detachView(e){const i=e;Z1(this._views,i),i.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(aM,[]).concat(this._bootstrapListeners).forEach(r=>r(e))}ngOnDestroy(){this._views.slice().forEach(e=>e.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return t.\u0275fac=function(e){return new(e||t)(P(it),P(Mt),P(tu),P(_r),P(Xd))},t.\u0275prov=B({token:t,factory:t.\u0275fac}),t})();function Z1(t,n){const e=t.indexOf(n);e>-1&&t.splice(e,1)}class Vg{}class lH{}const cH={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let uH=(()=>{class t{constructor(e,i){this._compiler=e,this._config=i||cH}load(e){return this.loadAndCompile(e)}loadAndCompile(e){let[i,r]=e.split("#");return void 0===r&&(r="default"),ne(255)(i).then(o=>o[r]).then(o=>TM(o,i,r)).then(o=>this._compiler.compileModuleAsync(o))}loadFactory(e){let[i,r]=e.split("#"),o="NgFactory";return void 0===r&&(r="default",o=""),ne(255)(this._config.factoryPathPrefix+i+this._config.factoryPathSuffix).then(s=>s[r+o]).then(s=>TM(s,i,r))}}return t.\u0275fac=function(e){return new(e||t)(P(lu),P(lH,8))},t.\u0275prov=B({token:t,factory:t.\u0275fac}),t})();function TM(t,n,e){if(!t)throw new Error(`Cannot find '${e}' in '${n}'`);return t}const bH=_M(null,"core",[{provide:Os,useValue:"unknown"},{provide:yM,deps:[Mt]},{provide:hM,deps:[]},{provide:$g,deps:[]}]),EH=[{provide:ts,useClass:ts,deps:[it,Mt,tu,_r,Xd]},{provide:NB,deps:[it],useFactory:function(t){let n=[];return t.onStable.subscribe(()=>{for(;n.length;)n.pop()()}),function(e){n.push(e)}}},{provide:Xd,useClass:Xd,deps:[[new fr,Jd]]},{provide:lu,useClass:lu,deps:[]},A8,{provide:Vp,useFactory:function(){return x5},deps:[]},{provide:Gd,useFactory:function(){return M5},deps:[]},{provide:es,useFactory:function(t){return o1(t=t||"undefined"!=typeof $localize&&$localize.locale||Sg),t},deps:[[new sc(es),new fr,new ac]]},{provide:lM,useValue:"USD"}];let DH=(()=>{class t{constructor(e){}}return t.\u0275fac=function(e){return new(e||t)(P(ts))},t.\u0275mod=et({type:t}),t.\u0275inj=Te({providers:EH}),t})(),Kg=null;function Da(){return Kg}const Ot=new tt("DocumentToken");let du=(()=>{class t{historyGo(e){throw new Error("Not implemented")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=B({factory:k6,token:t,providedIn:"platform"}),t})();function k6(){return P(QM)}const D6=new tt("Location Initialized");let QM=(()=>{class t extends du{constructor(e){super(),this._doc=e,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Da().getBaseHref(this._doc)}onPopState(e){const i=Da().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",e,!1),()=>i.removeEventListener("popstate",e)}onHashChange(e){const i=Da().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",e,!1),()=>i.removeEventListener("hashchange",e)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(e){this.location.pathname=e}pushState(e,i,r){ZM()?this._history.pushState(e,i,r):this.location.hash=r}replaceState(e,i,r){ZM()?this._history.replaceState(e,i,r):this.location.hash=r}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}}return t.\u0275fac=function(e){return new(e||t)(P(Ot))},t.\u0275prov=B({factory:x6,token:t,providedIn:"platform"}),t})();function ZM(){return!!window.history.pushState}function x6(){return new QM(P(Ot))}function uC(t,n){if(0==t.length)return n;if(0==n.length)return t;let e=0;return t.endsWith("/")&&e++,n.startsWith("/")&&e++,2==e?t+n.substring(1):1==e?t+n:t+"/"+n}function KM(t){const n=t.match(/#|\?|$/),e=n&&n.index||t.length;return t.slice(0,e-("/"===t[e-1]?1:0))+t.slice(e)}function hl(t){return t&&"?"!==t[0]?"?"+t:t}let nh=(()=>{class t{historyGo(e){throw new Error("Not implemented")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=B({factory:M6,token:t,providedIn:"root"}),t})();function M6(t){const n=P(Ot).location;return new YM(P(du),n&&n.origin||"")}const dC=new tt("appBaseHref");let YM=(()=>{class t extends nh{constructor(e,i){if(super(),this._platformLocation=e,this._removeListenerFns=[],null==i&&(i=this._platformLocation.getBaseHrefFromDOM()),null==i)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=i}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return uC(this._baseHref,e)}path(e=!1){const i=this._platformLocation.pathname+hl(this._platformLocation.search),r=this._platformLocation.hash;return r&&e?`${i}${r}`:i}pushState(e,i,r,o){const s=this.prepareExternalUrl(r+hl(o));this._platformLocation.pushState(e,i,s)}replaceState(e,i,r,o){const s=this.prepareExternalUrl(r+hl(o));this._platformLocation.replaceState(e,i,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(e=0){var i,r;null===(r=(i=this._platformLocation).historyGo)||void 0===r||r.call(i,e)}}return t.\u0275fac=function(e){return new(e||t)(P(du),P(dC,8))},t.\u0275prov=B({token:t,factory:t.\u0275fac}),t})(),I6=(()=>{class t extends nh{constructor(e,i){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(e){const i=uC(this._baseHref,e);return i.length>0?"#"+i:i}pushState(e,i,r,o){let s=this.prepareExternalUrl(r+hl(o));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.pushState(e,i,s)}replaceState(e,i,r,o){let s=this.prepareExternalUrl(r+hl(o));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(e,i,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(e=0){var i,r;null===(r=(i=this._platformLocation).historyGo)||void 0===r||r.call(i,e)}}return t.\u0275fac=function(e){return new(e||t)(P(du),P(dC,8))},t.\u0275prov=B({token:t,factory:t.\u0275fac}),t})(),of=(()=>{class t{constructor(e,i){this._subject=new q,this._urlChangeListeners=[],this._platformStrategy=e;const r=this._platformStrategy.getBaseHref();this._platformLocation=i,this._baseHref=KM(JM(r)),this._platformStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}path(e=!1){return this.normalize(this._platformStrategy.path(e))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(e,i=""){return this.path()==this.normalize(e+hl(i))}normalize(e){return t.stripTrailingSlash(function(t,n){return t&&n.startsWith(t)?n.substring(t.length):n}(this._baseHref,JM(e)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._platformStrategy.prepareExternalUrl(e)}go(e,i="",r=null){this._platformStrategy.pushState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+hl(i)),r)}replaceState(e,i="",r=null){this._platformStrategy.replaceState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+hl(i)),r)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(e=0){var i,r;null===(r=(i=this._platformStrategy).historyGo)||void 0===r||r.call(i,e)}onUrlChange(e){this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}))}_notifyUrlChangeListeners(e="",i){this._urlChangeListeners.forEach(r=>r(e,i))}subscribe(e,i,r){return this._subject.subscribe({next:e,error:i,complete:r})}}return t.\u0275fac=function(e){return new(e||t)(P(nh),P(du))},t.normalizeQueryParams=hl,t.joinWithSlash=uC,t.stripTrailingSlash=KM,t.\u0275prov=B({factory:P6,token:t,providedIn:"root"}),t})();function P6(){return new of(P(nh),P(du))}function JM(t){return t.replace(/\/index.html$/,"")}var io=(()=>((io=io||{})[io.Decimal=0]="Decimal",io[io.Percent=1]="Percent",io[io.Currency=2]="Currency",io[io.Scientific=3]="Scientific",io))(),ui=(()=>((ui=ui||{})[ui.Zero=0]="Zero",ui[ui.One=1]="One",ui[ui.Two=2]="Two",ui[ui.Few=3]="Few",ui[ui.Many=4]="Many",ui[ui.Other=5]="Other",ui))(),kn=(()=>((kn=kn||{})[kn.Format=0]="Format",kn[kn.Standalone=1]="Standalone",kn))(),ft=(()=>((ft=ft||{})[ft.Narrow=0]="Narrow",ft[ft.Abbreviated=1]="Abbreviated",ft[ft.Wide=2]="Wide",ft[ft.Short=3]="Short",ft))(),Hn=(()=>((Hn=Hn||{})[Hn.Short=0]="Short",Hn[Hn.Medium=1]="Medium",Hn[Hn.Long=2]="Long",Hn[Hn.Full=3]="Full",Hn))(),He=(()=>((He=He||{})[He.Decimal=0]="Decimal",He[He.Group=1]="Group",He[He.List=2]="List",He[He.PercentSign=3]="PercentSign",He[He.PlusSign=4]="PlusSign",He[He.MinusSign=5]="MinusSign",He[He.Exponential=6]="Exponential",He[He.SuperscriptingExponent=7]="SuperscriptingExponent",He[He.PerMille=8]="PerMille",He[He.Infinity=9]="Infinity",He[He.NaN=10]="NaN",He[He.TimeSeparator=11]="TimeSeparator",He[He.CurrencyDecimal=12]="CurrencyDecimal",He[He.CurrencyGroup=13]="CurrencyGroup",He))();function tI(t,n,e){const i=Fr(t),o=is([i[_e.DaysFormat],i[_e.DaysStandalone]],n);return is(o,e)}function hC(t,n,e){const i=Fr(t),o=is([i[_e.MonthsFormat],i[_e.MonthsStandalone]],n);return is(o,e)}function Yg(t,n){return is(Fr(t)[_e.DateFormat],n)}function Jg(t,n){return is(Fr(t)[_e.TimeFormat],n)}function Xg(t,n){return is(Fr(t)[_e.DateTimeFormat],n)}function ns(t,n){const e=Fr(t),i=e[_e.NumberSymbols][n];if(void 0===i){if(n===He.CurrencyDecimal)return e[_e.NumberSymbols][He.Decimal];if(n===He.CurrencyGroup)return e[_e.NumberSymbols][He.Group]}return i}const R6=wD;function nI(t){if(!t[_e.ExtraData])throw new Error(`Missing extra locale data for the locale "${t[_e.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function is(t,n){for(let e=n;e>-1;e--)if(void 0!==t[e])return t[e];throw new Error("Locale data API: locale data undefined")}function fC(t){const[n,e]=t.split(":");return{hours:+n,minutes:+e}}const H6=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,sf={},j6=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var yi=(()=>((yi=yi||{})[yi.Short=0]="Short",yi[yi.ShortGMT=1]="ShortGMT",yi[yi.Long=2]="Long",yi[yi.Extended=3]="Extended",yi))(),qe=(()=>((qe=qe||{})[qe.FullYear=0]="FullYear",qe[qe.Month=1]="Month",qe[qe.Date=2]="Date",qe[qe.Hours=3]="Hours",qe[qe.Minutes=4]="Minutes",qe[qe.Seconds=5]="Seconds",qe[qe.FractionalSeconds=6]="FractionalSeconds",qe[qe.Day=7]="Day",qe))(),Tt=(()=>((Tt=Tt||{})[Tt.DayPeriods=0]="DayPeriods",Tt[Tt.Days=1]="Days",Tt[Tt.Months=2]="Months",Tt[Tt.Eras=3]="Eras",Tt))();function iI(t,n,e,i){let r=function(t){if(sI(t))return t;if("number"==typeof t&&!isNaN(t))return new Date(t);if("string"==typeof t){if(t=t.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(t)){const[r,o=1,s=1]=t.split("-").map(l=>+l);return e_(r,o-1,s)}const e=parseFloat(t);if(!isNaN(t-e))return new Date(e);let i;if(i=t.match(H6))return function(t){const n=new Date(0);let e=0,i=0;const r=t[8]?n.setUTCFullYear:n.setFullYear,o=t[8]?n.setUTCHours:n.setHours;t[9]&&(e=Number(t[9]+t[10]),i=Number(t[9]+t[11])),r.call(n,Number(t[1]),Number(t[2])-1,Number(t[3]));const s=Number(t[4]||0)-e,l=Number(t[5]||0)-i,c=Number(t[6]||0),d=Math.floor(1e3*parseFloat("0."+(t[7]||0)));return o.call(n,s,l,c,d),n}(i)}const n=new Date(t);if(!sI(n))throw new Error(`Unable to convert "${t}" into a date`);return n}(t);n=pl(e,n)||n;let l,s=[];for(;n;){if(l=j6.exec(n),!l){s.push(n);break}{s=s.concat(l.slice(1));const m=s.pop();if(!m)break;n=m}}let c=r.getTimezoneOffset();i&&(c=oI(i,c),r=function(t,n,e){const r=t.getTimezoneOffset();return function(t,n){return(t=new Date(t.getTime())).setMinutes(t.getMinutes()+n),t}(t,-1*(oI(n,r)-r))}(r,i));let d="";return s.forEach(m=>{const _=function(t){if(gC[t])return gC[t];let n;switch(t){case"G":case"GG":case"GGG":n=bn(Tt.Eras,ft.Abbreviated);break;case"GGGG":n=bn(Tt.Eras,ft.Wide);break;case"GGGGG":n=bn(Tt.Eras,ft.Narrow);break;case"y":n=di(qe.FullYear,1,0,!1,!0);break;case"yy":n=di(qe.FullYear,2,0,!0,!0);break;case"yyy":n=di(qe.FullYear,3,0,!1,!0);break;case"yyyy":n=di(qe.FullYear,4,0,!1,!0);break;case"Y":n=r_(1);break;case"YY":n=r_(2,!0);break;case"YYY":n=r_(3);break;case"YYYY":n=r_(4);break;case"M":case"L":n=di(qe.Month,1,1);break;case"MM":case"LL":n=di(qe.Month,2,1);break;case"MMM":n=bn(Tt.Months,ft.Abbreviated);break;case"MMMM":n=bn(Tt.Months,ft.Wide);break;case"MMMMM":n=bn(Tt.Months,ft.Narrow);break;case"LLL":n=bn(Tt.Months,ft.Abbreviated,kn.Standalone);break;case"LLLL":n=bn(Tt.Months,ft.Wide,kn.Standalone);break;case"LLLLL":n=bn(Tt.Months,ft.Narrow,kn.Standalone);break;case"w":n=mC(1);break;case"ww":n=mC(2);break;case"W":n=mC(1,!0);break;case"d":n=di(qe.Date,1);break;case"dd":n=di(qe.Date,2);break;case"c":case"cc":n=di(qe.Day,1);break;case"ccc":n=bn(Tt.Days,ft.Abbreviated,kn.Standalone);break;case"cccc":n=bn(Tt.Days,ft.Wide,kn.Standalone);break;case"ccccc":n=bn(Tt.Days,ft.Narrow,kn.Standalone);break;case"cccccc":n=bn(Tt.Days,ft.Short,kn.Standalone);break;case"E":case"EE":case"EEE":n=bn(Tt.Days,ft.Abbreviated);break;case"EEEE":n=bn(Tt.Days,ft.Wide);break;case"EEEEE":n=bn(Tt.Days,ft.Narrow);break;case"EEEEEE":n=bn(Tt.Days,ft.Short);break;case"a":case"aa":case"aaa":n=bn(Tt.DayPeriods,ft.Abbreviated);break;case"aaaa":n=bn(Tt.DayPeriods,ft.Wide);break;case"aaaaa":n=bn(Tt.DayPeriods,ft.Narrow);break;case"b":case"bb":case"bbb":n=bn(Tt.DayPeriods,ft.Abbreviated,kn.Standalone,!0);break;case"bbbb":n=bn(Tt.DayPeriods,ft.Wide,kn.Standalone,!0);break;case"bbbbb":n=bn(Tt.DayPeriods,ft.Narrow,kn.Standalone,!0);break;case"B":case"BB":case"BBB":n=bn(Tt.DayPeriods,ft.Abbreviated,kn.Format,!0);break;case"BBBB":n=bn(Tt.DayPeriods,ft.Wide,kn.Format,!0);break;case"BBBBB":n=bn(Tt.DayPeriods,ft.Narrow,kn.Format,!0);break;case"h":n=di(qe.Hours,1,-12);break;case"hh":n=di(qe.Hours,2,-12);break;case"H":n=di(qe.Hours,1);break;case"HH":n=di(qe.Hours,2);break;case"m":n=di(qe.Minutes,1);break;case"mm":n=di(qe.Minutes,2);break;case"s":n=di(qe.Seconds,1);break;case"ss":n=di(qe.Seconds,2);break;case"S":n=di(qe.FractionalSeconds,1);break;case"SS":n=di(qe.FractionalSeconds,2);break;case"SSS":n=di(qe.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":n=n_(yi.Short);break;case"ZZZZZ":n=n_(yi.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":n=n_(yi.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":n=n_(yi.Long);break;default:return null}return gC[t]=n,n}(m);d+=_?_(r,e,c):"''"===m?"'":m.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),d}function e_(t,n,e){const i=new Date(0);return i.setFullYear(t,n,e),i.setHours(0,0,0),i}function pl(t,n){const e=function(t){return Fr(t)[_e.LocaleId]}(t);if(sf[e]=sf[e]||{},sf[e][n])return sf[e][n];let i="";switch(n){case"shortDate":i=Yg(t,Hn.Short);break;case"mediumDate":i=Yg(t,Hn.Medium);break;case"longDate":i=Yg(t,Hn.Long);break;case"fullDate":i=Yg(t,Hn.Full);break;case"shortTime":i=Jg(t,Hn.Short);break;case"mediumTime":i=Jg(t,Hn.Medium);break;case"longTime":i=Jg(t,Hn.Long);break;case"fullTime":i=Jg(t,Hn.Full);break;case"short":const r=pl(t,"shortTime"),o=pl(t,"shortDate");i=t_(Xg(t,Hn.Short),[r,o]);break;case"medium":const s=pl(t,"mediumTime"),l=pl(t,"mediumDate");i=t_(Xg(t,Hn.Medium),[s,l]);break;case"long":const c=pl(t,"longTime"),d=pl(t,"longDate");i=t_(Xg(t,Hn.Long),[c,d]);break;case"full":const m=pl(t,"fullTime"),_=pl(t,"fullDate");i=t_(Xg(t,Hn.Full),[m,_])}return i&&(sf[e][n]=i),i}function t_(t,n){return n&&(t=t.replace(/\{([^}]+)}/g,function(e,i){return null!=n&&i in n?n[i]:e})),t}function Ls(t,n,e="-",i,r){let o="";(t<0||r&&t<=0)&&(r?t=1-t:(t=-t,o=e));let s=String(t);for(;s.length<n;)s="0"+s;return i&&(s=s.substr(s.length-n)),o+s}function di(t,n,e=0,i=!1,r=!1){return function(o,s){let l=function(t,n){switch(t){case qe.FullYear:return n.getFullYear();case qe.Month:return n.getMonth();case qe.Date:return n.getDate();case qe.Hours:return n.getHours();case qe.Minutes:return n.getMinutes();case qe.Seconds:return n.getSeconds();case qe.FractionalSeconds:return n.getMilliseconds();case qe.Day:return n.getDay();default:throw new Error(`Unknown DateType value "${t}".`)}}(t,o);if((e>0||l>-e)&&(l+=e),t===qe.Hours)0===l&&-12===e&&(l=12);else if(t===qe.FractionalSeconds)return function(t,n){return Ls(t,3).substr(0,n)}(l,n);const c=ns(s,He.MinusSign);return Ls(l,n,c,i,r)}}function bn(t,n,e=kn.Format,i=!1){return function(r,o){return function(t,n,e,i,r,o){switch(e){case Tt.Months:return hC(n,r,i)[t.getMonth()];case Tt.Days:return tI(n,r,i)[t.getDay()];case Tt.DayPeriods:const s=t.getHours(),l=t.getMinutes();if(o){const d=function(t){const n=Fr(t);return nI(n),(n[_e.ExtraData][2]||[]).map(i=>"string"==typeof i?fC(i):[fC(i[0]),fC(i[1])])}(n),m=function(t,n,e){const i=Fr(t);nI(i);const o=is([i[_e.ExtraData][0],i[_e.ExtraData][1]],n)||[];return is(o,e)||[]}(n,r,i),_=d.findIndex(w=>{if(Array.isArray(w)){const[E,D]=w,N=s>=E.hours&&l>=E.minutes,F=s<D.hours||s===D.hours&&l<D.minutes;if(E.hours<D.hours){if(N&&F)return!0}else if(N||F)return!0}else if(w.hours===s&&w.minutes===l)return!0;return!1});if(-1!==_)return m[_]}return function(t,n,e){const i=Fr(t),o=is([i[_e.DayPeriodsFormat],i[_e.DayPeriodsStandalone]],n);return is(o,e)}(n,r,i)[s<12?0:1];case Tt.Eras:return function(t,n){return is(Fr(t)[_e.Eras],n)}(n,i)[t.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${e}`)}}(r,o,t,n,e,i)}}function n_(t){return function(n,e,i){const r=-1*i,o=ns(e,He.MinusSign),s=r>0?Math.floor(r/60):Math.ceil(r/60);switch(t){case yi.Short:return(r>=0?"+":"")+Ls(s,2,o)+Ls(Math.abs(r%60),2,o);case yi.ShortGMT:return"GMT"+(r>=0?"+":"")+Ls(s,1,o);case yi.Long:return"GMT"+(r>=0?"+":"")+Ls(s,2,o)+":"+Ls(Math.abs(r%60),2,o);case yi.Extended:return 0===i?"Z":(r>=0?"+":"")+Ls(s,2,o)+":"+Ls(Math.abs(r%60),2,o);default:throw new Error(`Unknown zone width "${t}"`)}}}function rI(t){return e_(t.getFullYear(),t.getMonth(),t.getDate()+(4-t.getDay()))}function mC(t,n=!1){return function(e,i){let r;if(n){const o=new Date(e.getFullYear(),e.getMonth(),1).getDay()-1,s=e.getDate();r=1+Math.floor((s+o)/7)}else{const o=rI(e),s=function(t){const n=e_(t,0,1).getDay();return e_(t,0,1+(n<=4?4:11)-n)}(o.getFullYear()),l=o.getTime()-s.getTime();r=1+Math.round(l/6048e5)}return Ls(r,t,ns(i,He.MinusSign))}}function r_(t,n=!1){return function(e,i){return Ls(rI(e).getFullYear(),t,ns(i,He.MinusSign),n)}}const gC={};function oI(t,n){t=t.replace(/:/g,"");const e=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return isNaN(e)?n:e}function sI(t){return t instanceof Date&&!isNaN(t.valueOf())}const ej=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function bC(t){const n=parseInt(t);if(isNaN(n))throw new Error("Invalid integer literal when parsing "+t);return n}class s_{}let uj=(()=>{class t extends s_{constructor(e){super(),this.locale=e}getPluralCategory(e,i){switch(R6(i||this.locale)(e)){case ui.Zero:return"zero";case ui.One:return"one";case ui.Two:return"two";case ui.Few:return"few";case ui.Many:return"many";default:return"other"}}}return t.\u0275fac=function(e){return new(e||t)(P(es))},t.\u0275prov=B({token:t,factory:t.\u0275fac}),t})();function uI(t,n){n=encodeURIComponent(n);for(const e of t.split(";")){const i=e.indexOf("="),[r,o]=-1==i?[e,""]:[e.slice(0,i),e.slice(i+1)];if(r.trim()===n)return decodeURIComponent(o)}return null}let Yt=(()=>{class t{constructor(e,i,r,o){this._iterableDiffers=e,this._keyValueDiffers=i,this._ngEl=r,this._renderer=o,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(e){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof e?e.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(e){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof e?e.split(/\s+/):e,this._rawClass&&(Ip(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const e=this._iterableDiffer.diff(this._rawClass);e&&this._applyIterableChanges(e)}else if(this._keyValueDiffer){const e=this._keyValueDiffer.diff(this._rawClass);e&&this._applyKeyValueChanges(e)}}_applyKeyValueChanges(e){e.forEachAddedItem(i=>this._toggleClass(i.key,i.currentValue)),e.forEachChangedItem(i=>this._toggleClass(i.key,i.currentValue)),e.forEachRemovedItem(i=>{i.previousValue&&this._toggleClass(i.key,!1)})}_applyIterableChanges(e){e.forEachAddedItem(i=>{if("string"!=typeof i.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${rt(i.item)}`);this._toggleClass(i.item,!0)}),e.forEachRemovedItem(i=>this._toggleClass(i.item,!1))}_applyClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(i=>this._toggleClass(i,!0)):Object.keys(e).forEach(i=>this._toggleClass(i,!!e[i])))}_removeClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(i=>this._toggleClass(i,!1)):Object.keys(e).forEach(i=>this._toggleClass(i,!1)))}_toggleClass(e,i){(e=e.trim())&&e.split(/\s+/g).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}}return t.\u0275fac=function(e){return new(e||t)(C(Vp),C(Gd),C(Ye),C(vi))},t.\u0275dir=te({type:t,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),t})();class hj{constructor(n,e,i,r){this.$implicit=n,this.ngForOf=e,this.index=i,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let je=(()=>{class t{constructor(e,i,r){this._viewContainer=e,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;if(!this._differ&&e)try{this._differ=this._differs.find(e).create(this.ngForTrackBy)}catch(i){throw new Error(`Cannot find a differ supporting object '${e}' of type '${function(t){return t.name||typeof t}(e)}'. NgFor only supports binding to Iterables such as Arrays.`)}}if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const i=[];e.forEachOperation((r,o,s)=>{if(null==r.previousIndex){const l=this._viewContainer.createEmbeddedView(this._template,new hj(null,this._ngForOf,-1,-1),null===s?void 0:s),c=new dI(r,l);i.push(c)}else if(null==s)this._viewContainer.remove(null===o?void 0:o);else if(null!==o){const l=this._viewContainer.get(o);this._viewContainer.move(l,s);const c=new dI(r,l);i.push(c)}});for(let r=0;r<i.length;r++)this._perViewChange(i[r].view,i[r].record);for(let r=0,o=this._viewContainer.length;r<o;r++){const s=this._viewContainer.get(r);s.context.index=r,s.context.count=o,s.context.ngForOf=this._ngForOf}e.forEachIdentityChange(r=>{this._viewContainer.get(r.currentIndex).context.$implicit=r.item})}_perViewChange(e,i){e.context.$implicit=i.item}static ngTemplateContextGuard(e,i){return!0}}return t.\u0275fac=function(e){return new(e||t)(C(Yi),C(fn),C(Vp))},t.\u0275dir=te({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),t})();class dI{constructor(n,e){this.record=n,this.view=e}}let le=(()=>{class t{constructor(e,i){this._viewContainer=e,this._context=new fj,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){hI("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){hI("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,i){return!0}}return t.\u0275fac=function(e){return new(e||t)(C(Yi),C(fn))},t.\u0275dir=te({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),t})();class fj{constructor(){this.$implicit=null,this.ngIf=null}}function hI(t,n){if(n&&!n.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${rt(n)}'.`)}class CC{constructor(n,e){this._viewContainerRef=n,this._templateRef=e,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(n){n&&!this._created?this.create():!n&&this._created&&this.destroy()}}let ih=(()=>{class t{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(e){this._ngSwitch=e,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(e){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(e)}_matchCase(e){const i=e==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||i,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),i}_updateDefaultCases(e){if(this._defaultViews&&e!==this._defaultUsed){this._defaultUsed=e;for(let i=0;i<this._defaultViews.length;i++)this._defaultViews[i].enforceState(e)}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=te({type:t,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}}),t})(),a_=(()=>{class t{constructor(e,i,r){this.ngSwitch=r,r._addCase(),this._view=new CC(e,i)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return t.\u0275fac=function(e){return new(e||t)(C(Yi),C(fn),C(ih,9))},t.\u0275dir=te({type:t,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}}),t})(),pI=(()=>{class t{constructor(e,i,r){r._addDefault(new CC(e,i))}}return t.\u0275fac=function(e){return new(e||t)(C(Yi),C(fn),C(ih,9))},t.\u0275dir=te({type:t,selectors:[["","ngSwitchDefault",""]]}),t})(),mI=(()=>{class t{constructor(e,i,r){this._ngEl=e,this._differs=i,this._renderer=r,this._ngStyle=null,this._differ=null}set ngStyle(e){this._ngStyle=e,!this._differ&&e&&(this._differ=this._differs.find(e).create())}ngDoCheck(){if(this._differ){const e=this._differ.diff(this._ngStyle);e&&this._applyChanges(e)}}_setStyle(e,i){const[r,o]=e.split(".");null!=(i=null!=i&&o?`${i}${o}`:i)?this._renderer.setStyle(this._ngEl.nativeElement,r,i):this._renderer.removeStyle(this._ngEl.nativeElement,r)}_applyChanges(e){e.forEachRemovedItem(i=>this._setStyle(i.key,null)),e.forEachAddedItem(i=>this._setStyle(i.key,i.currentValue)),e.forEachChangedItem(i=>this._setStyle(i.key,i.currentValue))}}return t.\u0275fac=function(e){return new(e||t)(C(Ye),C(Gd),C(vi))},t.\u0275dir=te({type:t,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}}),t})(),ro=(()=>{class t{constructor(e){this._viewContainerRef=e,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null}ngOnChanges(e){if(e.ngTemplateOutlet){const i=this._viewContainerRef;this._viewRef&&i.remove(i.indexOf(this._viewRef)),this._viewRef=this.ngTemplateOutlet?i.createEmbeddedView(this.ngTemplateOutlet,this.ngTemplateOutletContext):null}else this._viewRef&&e.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return t.\u0275fac=function(e){return new(e||t)(C(Yi))},t.\u0275dir=te({type:t,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet"},features:[St]}),t})();function $s(t,n){return Error(`InvalidPipeArgument: '${n}' for pipe '${rt(t)}'`)}class gj{createSubscription(n,e){return n.subscribe({next:e,error:i=>{throw i}})}dispose(n){n.unsubscribe()}onDestroy(n){n.unsubscribe()}}class _j{createSubscription(n,e){return n.then(e,i=>{throw i})}dispose(n){}onDestroy(n){}}const vj=new _j,yj=new gj;let fc=(()=>{class t{constructor(e){this._ref=e,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(e){return this._obj?e!==this._obj?(this._dispose(),this.transform(e)):this._latestValue:(e&&this._subscribe(e),this._latestValue)}_subscribe(e){this._obj=e,this._strategy=this._selectStrategy(e),this._subscription=this._strategy.createSubscription(e,i=>this._updateLatestValue(e,i))}_selectStrategy(e){if(Ap(e))return vj;if(Fk(e))return yj;throw $s(t,e)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(e,i){e===this._obj&&(this._latestValue=i,this._ref.markForCheck())}}return t.\u0275fac=function(e){return new(e||t)(C(ci,16))},t.\u0275pipe=Ve({name:"async",type:t,pure:!1}),t})();const Cj=/(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])\S*/g;let lf=(()=>{class t{transform(e){if(null==e)return null;if("string"!=typeof e)throw $s(t,e);return e.replace(Cj,i=>i[0].toUpperCase()+i.substr(1).toLowerCase())}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=Ve({name:"titlecase",type:t,pure:!0}),t})(),l_=(()=>{class t{constructor(e){this.locale=e}transform(e,i="mediumDate",r,o){if(null==e||""===e||e!=e)return null;try{return iI(e,i,o||this.locale,r)}catch(s){throw $s(t,s.message)}}}return t.\u0275fac=function(e){return new(e||t)(C(es,16))},t.\u0275pipe=Ve({name:"date",type:t,pure:!0}),t})(),c_=(()=>{class t{constructor(e){this.differs=e,this.keyValues=[],this.compareFn=gI}transform(e,i=gI){if(!e||!(e instanceof Map)&&"object"!=typeof e)return null;this.differ||(this.differ=this.differs.find(e).create());const r=this.differ.diff(e),o=i!==this.compareFn;return r&&(this.keyValues=[],r.forEachItem(s=>{this.keyValues.push(function(t,n){return{key:t,value:n}}(s.key,s.currentValue))})),(r||o)&&(this.keyValues.sort(i),this.compareFn=i),this.keyValues}}return t.\u0275fac=function(e){return new(e||t)(C(Gd,16))},t.\u0275pipe=Ve({name:"keyvalue",type:t,pure:!1}),t})();function gI(t,n){const e=t.key,i=n.key;if(e===i)return 0;if(void 0===e)return 1;if(void 0===i)return-1;if(null===e)return 1;if(null===i)return-1;if("string"==typeof e&&"string"==typeof i)return e<i?-1:1;if("number"==typeof e&&"number"==typeof i)return e-i;if("boolean"==typeof e&&"boolean"==typeof i)return e<i?-1:1;const r=String(e),o=String(i);return r==o?0:r<o?-1:1}let _I=(()=>{class t{constructor(e){this._locale=e}transform(e,i,r){if(!function(t){return!(null==t||""===t||t!=t)}(e))return null;r=r||this._locale;try{return function(t,n,e){return function(t,n,e,i,r,o,s=!1){let l="",c=!1;if(isFinite(t)){let d=function(t){let i,r,o,s,l,n=Math.abs(t)+"",e=0;for((r=n.indexOf("."))>-1&&(n=n.replace(".","")),(o=n.search(/e/i))>0?(r<0&&(r=o),r+=+n.slice(o+1),n=n.substring(0,o)):r<0&&(r=n.length),o=0;"0"===n.charAt(o);o++);if(o===(l=n.length))i=[0],r=1;else{for(l--;"0"===n.charAt(l);)l--;for(r-=o,i=[],s=0;o<=l;o++,s++)i[s]=Number(n.charAt(o))}return r>22&&(i=i.splice(0,21),e=r-1,r=1),{digits:i,exponent:e,integerLen:r}}(t);s&&(d=function(t){if(0===t.digits[0])return t;const n=t.digits.length-t.integerLen;return t.exponent?t.exponent+=2:(0===n?t.digits.push(0,0):1===n&&t.digits.push(0),t.integerLen+=2),t}(d));let m=n.minInt,_=n.minFrac,w=n.maxFrac;if(o){const H=o.match(ej);if(null===H)throw new Error(`${o} is not a valid digit info`);const X=H[1],de=H[3],Be=H[5];null!=X&&(m=bC(X)),null!=de&&(_=bC(de)),null!=Be?w=bC(Be):null!=de&&_>w&&(w=_)}!function(t,n,e){if(n>e)throw new Error(`The minimum number of digits after fraction (${n}) is higher than the maximum (${e}).`);let i=t.digits,r=i.length-t.integerLen;const o=Math.min(Math.max(n,r),e);let s=o+t.integerLen,l=i[s];if(s>0){i.splice(Math.max(t.integerLen,s));for(let _=s;_<i.length;_++)i[_]=0}else{r=Math.max(0,r),t.integerLen=1,i.length=Math.max(1,s=o+1),i[0]=0;for(let _=1;_<s;_++)i[_]=0}if(l>=5)if(s-1<0){for(let _=0;_>s;_--)i.unshift(0),t.integerLen++;i.unshift(1),t.integerLen++}else i[s-1]++;for(;r<Math.max(0,o);r++)i.push(0);let c=0!==o;const d=n+t.integerLen,m=i.reduceRight(function(_,w,E,D){return D[E]=(w+=_)<10?w:w-10,c&&(0===D[E]&&E>=d?D.pop():c=!1),w>=10?1:0},0);m&&(i.unshift(m),t.integerLen++)}(d,_,w);let E=d.digits,D=d.integerLen;const N=d.exponent;let F=[];for(c=E.every(H=>!H);D<m;D++)E.unshift(0);for(;D<0;D++)E.unshift(0);D>0?F=E.splice(D,E.length):(F=E,E=[0]);const j=[];for(E.length>=n.lgSize&&j.unshift(E.splice(-n.lgSize,E.length).join(""));E.length>n.gSize;)j.unshift(E.splice(-n.gSize,E.length).join(""));E.length&&j.unshift(E.join("")),l=j.join(ns(e,i)),F.length&&(l+=ns(e,r)+F.join("")),N&&(l+=ns(e,He.Exponential)+"+"+N)}else l=ns(e,He.Infinity);return l=t<0&&!c?n.negPre+l+n.negSuf:n.posPre+l+n.posSuf,l}(t,function(t,n="-"){const e={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},i=t.split(";"),r=i[0],o=i[1],s=-1!==r.indexOf(".")?r.split("."):[r.substring(0,r.lastIndexOf("0")+1),r.substring(r.lastIndexOf("0")+1)],l=s[0],c=s[1]||"";e.posPre=l.substr(0,l.indexOf("#"));for(let m=0;m<c.length;m++){const _=c.charAt(m);"0"===_?e.minFrac=e.maxFrac=m+1:"#"===_?e.maxFrac=m+1:e.posSuf+=_}const d=l.split(",");if(e.gSize=d[1]?d[1].length:0,e.lgSize=d[2]||d[1]?(d[2]||d[1]).length:0,o){const m=r.length-e.posPre.length-e.posSuf.length,_=o.indexOf("#");e.negPre=o.substr(0,_).replace(/'/g,""),e.negSuf=o.substr(_+m).replace(/'/g,"")}else e.negPre=n+e.posPre,e.negSuf=e.posSuf;return e}(function(t,n){return Fr(t)[_e.NumberFormats][n]}(n,io.Decimal),ns(n,He.MinusSign)),n,He.Group,He.Decimal,e)}(function(t){if("string"==typeof t&&!isNaN(Number(t)-parseFloat(t)))return Number(t);if("number"!=typeof t)throw new Error(`${t} is not a number`);return t}(e),r,i)}catch(o){throw $s(t,o.message)}}}return t.\u0275fac=function(e){return new(e||t)(C(es,16))},t.\u0275pipe=Ve({name:"number",type:t,pure:!0}),t})();let bi=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=et({type:t}),t.\u0275inj=Te({providers:[{provide:s_,useClass:uj}]}),t})();const yI="browser";function cf(t){return t===yI}let bI=(()=>{class t{}return t.\u0275prov=B({token:t,providedIn:"root",factory:()=>new Oj(P(Ot),window)}),t})();class Oj{constructor(n,e){this.document=n,this.window=e,this.offset=()=>[0,0]}setOffset(n){this.offset=Array.isArray(n)?()=>n:n}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(n){this.supportsScrolling()&&this.window.scrollTo(n[0],n[1])}scrollToAnchor(n){if(!this.supportsScrolling())return;const e=function(t,n){const e=t.getElementById(n)||t.getElementsByName(n)[0];if(e)return e;if("function"==typeof t.createTreeWalker&&t.body&&(t.body.createShadowRoot||t.body.attachShadow)){const i=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let r=i.currentNode;for(;r;){const o=r.shadowRoot;if(o){const s=o.getElementById(n)||o.querySelector(`[name="${n}"]`);if(s)return s}r=i.nextNode()}}return null}(this.document,n);e&&(this.scrollToElement(e),this.attemptFocus(e))}setHistoryScrollRestoration(n){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=n)}}scrollToElement(n){const e=n.getBoundingClientRect(),i=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(i-o[0],r-o[1])}attemptFocus(n){return n.focus(),this.document.activeElement===n}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const n=CI(this.window.history)||CI(Object.getPrototypeOf(this.window.history));return!(!n||!n.writable&&!n.set)}catch(n){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(n){return!1}}}function CI(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class wI{}class TC extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function(t){Kg||(Kg=t)}(new TC)}onAndCancel(n,e,i){return n.addEventListener(e,i,!1),()=>{n.removeEventListener(e,i,!1)}}dispatchEvent(n,e){n.dispatchEvent(e)}remove(n){n.parentNode&&n.parentNode.removeChild(n)}createElement(n,e){return(e=e||this.getDefaultDocument()).createElement(n)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(n){return n.nodeType===Node.ELEMENT_NODE}isShadowRoot(n){return n instanceof DocumentFragment}getGlobalEventTarget(n,e){return"window"===e?window:"document"===e?n:"body"===e?n.body:null}getBaseHref(n){const e=(uf=uf||document.querySelector("base"),uf?uf.getAttribute("href"):null);return null==e?null:function(t){u_=u_||document.createElement("a"),u_.setAttribute("href",t);const n=u_.pathname;return"/"===n.charAt(0)?n:`/${n}`}(e)}resetBaseElement(){uf=null}getUserAgent(){return window.navigator.userAgent}getCookie(n){return uI(document.cookie,n)}}let u_,uf=null;const SI=new tt("TRANSITION_ID"),Uj=[{provide:Jd,useFactory:function(t,n,e){return()=>{e.get(Xd).donePromise.then(()=>{const i=Da(),r=n.querySelectorAll(`style[ng-transition="${t}"]`);for(let o=0;o<r.length;o++)i.remove(r[o])})}},deps:[SI,Ot,Mt],multi:!0}];class EC{static init(){!function(t){q1=t}(new EC)}addToWindow(n){ve.getAngularTestability=(i,r=!0)=>{const o=n.findTestabilityInTree(i,r);if(null==o)throw new Error("Could not find testability for element.");return o},ve.getAllAngularTestabilities=()=>n.getAllTestabilities(),ve.getAllAngularRootElements=()=>n.getAllRootElements(),ve.frameworkStabilizers||(ve.frameworkStabilizers=[]),ve.frameworkStabilizers.push(i=>{const r=ve.getAllAngularTestabilities();let o=r.length,s=!1;const l=function(c){s=s||c,o--,0==o&&i(s)};r.forEach(function(c){c.whenStable(l)})})}findTestabilityInTree(n,e,i){if(null==e)return null;const r=n.getTestability(e);return null!=r?r:i?Da().isShadowRoot(e)?this.findTestabilityInTree(n,e.host,!0):this.findTestabilityInTree(n,e.parentElement,!0):null}}let Vj=(()=>{class t{build(){return new XMLHttpRequest}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=B({token:t,factory:t.\u0275fac}),t})();const df=new tt("EventManagerPlugins");let h_=(()=>{class t{constructor(e,i){this._zone=i,this._eventNameToPlugin=new Map,e.forEach(r=>r.manager=this),this._plugins=e.slice().reverse()}addEventListener(e,i,r){return this._findPluginFor(i).addEventListener(e,i,r)}addGlobalEventListener(e,i,r){return this._findPluginFor(i).addGlobalEventListener(e,i,r)}getZone(){return this._zone}_findPluginFor(e){const i=this._eventNameToPlugin.get(e);if(i)return i;const r=this._plugins;for(let o=0;o<r.length;o++){const s=r[o];if(s.supports(e))return this._eventNameToPlugin.set(e,s),s}throw new Error(`No event manager plugin found for event ${e}`)}}return t.\u0275fac=function(e){return new(e||t)(P(df),P(it))},t.\u0275prov=B({token:t,factory:t.\u0275fac}),t})();class kC{constructor(n){this._doc=n}addGlobalEventListener(n,e,i){const r=Da().getGlobalEventTarget(this._doc,n);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,i)}}let EI=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(e){const i=new Set;e.forEach(r=>{this._stylesSet.has(r)||(this._stylesSet.add(r),i.add(r))}),this.onStylesAdded(i)}onStylesAdded(e){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=B({token:t,factory:t.\u0275fac}),t})(),hf=(()=>{class t extends EI{constructor(e){super(),this._doc=e,this._hostNodes=new Map,this._hostNodes.set(e.head,[])}_addStylesToHost(e,i,r){e.forEach(o=>{const s=this._doc.createElement("style");s.textContent=o,r.push(i.appendChild(s))})}addHost(e){const i=[];this._addStylesToHost(this._stylesSet,e,i),this._hostNodes.set(e,i)}removeHost(e){const i=this._hostNodes.get(e);i&&i.forEach(kI),this._hostNodes.delete(e)}onStylesAdded(e){this._hostNodes.forEach((i,r)=>{this._addStylesToHost(e,r,i)})}ngOnDestroy(){this._hostNodes.forEach(e=>e.forEach(kI))}}return t.\u0275fac=function(e){return new(e||t)(P(Ot))},t.\u0275prov=B({token:t,factory:t.\u0275fac}),t})();function kI(t){Da().remove(t)}const DC={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},xC=/%COMP%/g;function p_(t,n,e){for(let i=0;i<n.length;i++){let r=n[i];Array.isArray(r)?p_(t,r,e):(r=r.replace(xC,t),e.push(r))}return e}function MI(t){return n=>{if("__ngUnwrap__"===n)return t;!1===t(n)&&(n.preventDefault(),n.returnValue=!1)}}let f_=(()=>{class t{constructor(e,i,r){this.eventManager=e,this.sharedStylesHost=i,this.appId=r,this.rendererByCompId=new Map,this.defaultRenderer=new MC(e)}createRenderer(e,i){if(!e||!i)return this.defaultRenderer;switch(i.encapsulation){case I.Emulated:{let r=this.rendererByCompId.get(i.id);return r||(r=new t7(this.eventManager,this.sharedStylesHost,i,this.appId),this.rendererByCompId.set(i.id,r)),r.applyToHost(e),r}case 1:case I.ShadowDom:return new n7(this.eventManager,this.sharedStylesHost,e,i);default:if(!this.rendererByCompId.has(i.id)){const r=p_(i.id,i.styles,[]);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(i.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(P(h_),P(hf),P(Xp))},t.\u0275prov=B({token:t,factory:t.\u0275fac}),t})();class MC{constructor(n){this.eventManager=n,this.data=Object.create(null)}destroy(){}createElement(n,e){return e?document.createElementNS(DC[e]||e,n):document.createElement(n)}createComment(n){return document.createComment(n)}createText(n){return document.createTextNode(n)}appendChild(n,e){n.appendChild(e)}insertBefore(n,e,i){n&&n.insertBefore(e,i)}removeChild(n,e){n&&n.removeChild(e)}selectRootElement(n,e){let i="string"==typeof n?document.querySelector(n):n;if(!i)throw new Error(`The selector "${n}" did not match any elements`);return e||(i.textContent=""),i}parentNode(n){return n.parentNode}nextSibling(n){return n.nextSibling}setAttribute(n,e,i,r){if(r){e=r+":"+e;const o=DC[r];o?n.setAttributeNS(o,e,i):n.setAttribute(e,i)}else n.setAttribute(e,i)}removeAttribute(n,e,i){if(i){const r=DC[i];r?n.removeAttributeNS(r,e):n.removeAttribute(`${i}:${e}`)}else n.removeAttribute(e)}addClass(n,e){n.classList.add(e)}removeClass(n,e){n.classList.remove(e)}setStyle(n,e,i,r){r&(Mo.DashCase|Mo.Important)?n.style.setProperty(e,i,r&Mo.Important?"important":""):n.style[e]=i}removeStyle(n,e,i){i&Mo.DashCase?n.style.removeProperty(e):n.style[e]=""}setProperty(n,e,i){n[e]=i}setValue(n,e){n.nodeValue=e}listen(n,e,i){return"string"==typeof n?this.eventManager.addGlobalEventListener(n,e,MI(i)):this.eventManager.addEventListener(n,e,MI(i))}}class t7 extends MC{constructor(n,e,i,r){super(n),this.component=i;const o=p_(r+"-"+i.id,i.styles,[]);e.addStyles(o),this.contentAttr=function(t){return"_ngcontent-%COMP%".replace(xC,t)}(r+"-"+i.id),this.hostAttr=function(t){return"_nghost-%COMP%".replace(xC,t)}(r+"-"+i.id)}applyToHost(n){super.setAttribute(n,this.hostAttr,"")}createElement(n,e){const i=super.createElement(n,e);return super.setAttribute(i,this.contentAttr,""),i}}class n7 extends MC{constructor(n,e,i,r){super(n),this.sharedStylesHost=e,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const o=p_(r.id,r.styles,[]);for(let s=0;s<o.length;s++){const l=document.createElement("style");l.textContent=o[s],this.shadowRoot.appendChild(l)}}nodeOrShadowRoot(n){return n===this.hostEl?this.shadowRoot:n}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(n,e){return super.appendChild(this.nodeOrShadowRoot(n),e)}insertBefore(n,e,i){return super.insertBefore(this.nodeOrShadowRoot(n),e,i)}removeChild(n,e){return super.removeChild(this.nodeOrShadowRoot(n),e)}parentNode(n){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(n)))}}let i7=(()=>{class t extends kC{constructor(e){super(e)}supports(e){return!0}addEventListener(e,i,r){return e.addEventListener(i,r,!1),()=>this.removeEventListener(e,i,r)}removeEventListener(e,i,r){return e.removeEventListener(i,r)}}return t.\u0275fac=function(e){return new(e||t)(P(Ot))},t.\u0275prov=B({token:t,factory:t.\u0275fac}),t})();const r7={pan:!0,panstart:!0,panmove:!0,panend:!0,pancancel:!0,panleft:!0,panright:!0,panup:!0,pandown:!0,pinch:!0,pinchstart:!0,pinchmove:!0,pinchend:!0,pinchcancel:!0,pinchin:!0,pinchout:!0,press:!0,pressup:!0,rotate:!0,rotatestart:!0,rotatemove:!0,rotateend:!0,rotatecancel:!0,swipe:!0,swipeleft:!0,swiperight:!0,swipeup:!0,swipedown:!0,tap:!0,doubletap:!0},m_=new tt("HammerGestureConfig"),PI=new tt("HammerLoader");let AI=(()=>{class t{constructor(){this.events=[],this.overrides={}}buildHammer(e){const i=new Hammer(e,this.options);i.get("pinch").set({enable:!0}),i.get("rotate").set({enable:!0});for(const r in this.overrides)i.get(r).set(this.overrides[r]);return i}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=B({token:t,factory:t.\u0275fac}),t})();const a7=[{provide:df,useClass:(()=>{class t extends kC{constructor(e,i,r,o){super(e),this._config=i,this.console=r,this.loader=o,this._loaderPromise=null}supports(e){return!(!r7.hasOwnProperty(e.toLowerCase())&&!this.isCustomEvent(e)||!window.Hammer&&!this.loader)}addEventListener(e,i,r){const o=this.manager.getZone();if(i=i.toLowerCase(),!window.Hammer&&this.loader){this._loaderPromise=this._loaderPromise||this.loader();let s=!1,l=()=>{s=!0};return this._loaderPromise.then(()=>{window.Hammer?s||(l=this.addEventListener(e,i,r)):l=()=>{}}).catch(()=>{l=()=>{}}),()=>{l()}}return o.runOutsideAngular(()=>{const s=this._config.buildHammer(e),l=function(c){o.runGuarded(function(){r(c)})};return s.on(i,l),()=>{s.off(i,l),"function"==typeof s.destroy&&s.destroy()}})}isCustomEvent(e){return this._config.events.indexOf(e)>-1}}return t.\u0275fac=function(e){return new(e||t)(P(Ot),P(m_),P($g),P(PI,8))},t.\u0275prov=B({token:t,factory:t.\u0275fac}),t})(),multi:!0,deps:[Ot,m_,$g,[new fr,PI]]},{provide:m_,useClass:AI,deps:[]}];let c7=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=et({type:t}),t.\u0275inj=Te({providers:a7}),t})();const OI=["alt","control","meta","shift"],d7={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},NI={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},h7={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let p7=(()=>{class t extends kC{constructor(e){super(e)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,i,r){const o=t.parseEventName(i),s=t.eventCallback(o.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Da().onAndCancel(e,o.domEventName,s))}static parseEventName(e){const i=e.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const o=t._normalizeKey(i.pop());let s="";if(OI.forEach(c=>{const d=i.indexOf(c);d>-1&&(i.splice(d,1),s+=c+".")}),s+=o,0!=i.length||0===o.length)return null;const l={};return l.domEventName=r,l.fullKey=s,l}static getEventFullKey(e){let i="",r=function(t){let n=t.key;if(null==n){if(n=t.keyIdentifier,null==n)return"Unidentified";n.startsWith("U+")&&(n=String.fromCharCode(parseInt(n.substring(2),16)),3===t.location&&NI.hasOwnProperty(n)&&(n=NI[n]))}return d7[n]||n}(e);return r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),OI.forEach(o=>{o!=r&&h7[o](e)&&(i+=o+".")}),i+=r,i}static eventCallback(e,i,r){return o=>{t.getEventFullKey(o)===e&&r.runGuarded(()=>i(o))}}static _normalizeKey(e){switch(e){case"esc":return"escape";default:return e}}}return t.\u0275fac=function(e){return new(e||t)(P(Ot))},t.\u0275prov=B({token:t,factory:t.\u0275fac}),t})(),pf=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=B({factory:function(){return P(IC)},token:t,providedIn:"root"}),t})(),IC=(()=>{class t extends pf{constructor(e){super(),this._doc=e}sanitize(e,i){if(null==i)return null;switch(e){case pn.NONE:return i;case pn.HTML:return ga(i,"HTML")?xo(i):MT(this._doc,String(i)).toString();case pn.STYLE:return ga(i,"Style")?xo(i):i;case pn.SCRIPT:if(ga(i,"Script"))return xo(i);throw new Error("unsafe value used in a script context");case pn.URL:return CT(i),ga(i,"URL")?xo(i):yp(String(i));case pn.RESOURCE_URL:if(ga(i,"ResourceURL"))return xo(i);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${e} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(e){return function(t){return new C3(t)}(e)}bypassSecurityTrustStyle(e){return function(t){return new w3(t)}(e)}bypassSecurityTrustScript(e){return function(t){return new S3(t)}(e)}bypassSecurityTrustUrl(e){return function(t){return new T3(t)}(e)}bypassSecurityTrustResourceUrl(e){return function(t){return new E3(t)}(e)}}return t.\u0275fac=function(e){return new(e||t)(P(Ot))},t.\u0275prov=B({factory:function(){return function(t){return new IC(t.get(Ot))}(P(ll))},token:t,providedIn:"root"}),t})();const C7=_M(bH,"browser",[{provide:Os,useValue:yI},{provide:sM,useValue:function(){TC.makeCurrent(),EC.init()},multi:!0},{provide:Ot,useFactory:function(){return function(t){Eo=t}(document),document},deps:[]}]),w7=[[],{provide:Dp,useValue:"root"},{provide:tu,useFactory:function(){return new tu},deps:[]},{provide:df,useClass:i7,multi:!0,deps:[Ot,it,Os]},{provide:df,useClass:p7,multi:!0,deps:[Ot]},[],{provide:f_,useClass:f_,deps:[h_,hf,Xp]},{provide:ul,useExisting:f_},{provide:EI,useExisting:hf},{provide:hf,useClass:hf,deps:[Ot]},{provide:W1,useClass:W1,deps:[it]},{provide:h_,useClass:h_,deps:[df,it]},{provide:wI,useClass:Vj,deps:[]},[]];let PC=(()=>{class t{constructor(e){if(e)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:t,providers:[{provide:Xp,useValue:e.appId},{provide:SI,useExisting:Xp},Uj]}}}return t.\u0275fac=function(e){return new(e||t)(P(t,12))},t.\u0275mod=et({type:t}),t.\u0275inj=Te({providers:w7,imports:[bi,DH]}),t})();function T7(){return new FI(P(Ot))}let FI=(()=>{class t{constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}}return t.\u0275fac=function(e){return new(e||t)(P(Ot))},t.\u0275prov=B({factory:T7,token:t,providedIn:"root"}),t})();"undefined"!=typeof window&&window;class LI{}const fl="*";function P7(t,n){return{type:7,name:t,definitions:n,options:{}}}function $I(t,n=null){return{type:4,styles:n,timings:t}}function UI(t,n=null){return{type:2,steps:t,options:n}}function ff(t){return{type:6,styles:t,offset:null}}function VI(t,n,e=null){return{type:1,expr:t,animation:n,options:e}}function BI(t){Promise.resolve(null).then(t)}class rh{constructor(n=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=n+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(n=>n()),this._onDoneFns=[])}onStart(n){this._onStartFns.push(n)}onDone(n){this._onDoneFns.push(n)}onDestroy(n){this._onDestroyFns.push(n)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){BI(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(n=>n()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(n=>n()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(n){this._position=this.totalTime?n*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(n){const e="start"==n?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}}class HI{constructor(n){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=n;let e=0,i=0,r=0;const o=this.players.length;0==o?BI(()=>this._onFinish()):this.players.forEach(s=>{s.onDone(()=>{++e==o&&this._onFinish()}),s.onDestroy(()=>{++i==o&&this._onDestroy()}),s.onStart(()=>{++r==o&&this._onStart()})}),this.totalTime=this.players.reduce((s,l)=>Math.max(s,l.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(n=>n()),this._onDoneFns=[])}init(){this.players.forEach(n=>n.init())}onStart(n){this._onStartFns.push(n)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(n=>n()),this._onStartFns=[])}onDone(n){this._onDoneFns.push(n)}onDestroy(n){this._onDestroyFns.push(n)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(n=>n.play())}pause(){this.players.forEach(n=>n.pause())}restart(){this.players.forEach(n=>n.restart())}finish(){this._onFinish(),this.players.forEach(n=>n.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(n=>n.destroy()),this._onDestroyFns.forEach(n=>n()),this._onDestroyFns=[])}reset(){this.players.forEach(n=>n.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(n){const e=n*this.totalTime;this.players.forEach(i=>{const r=i.totalTime?Math.min(1,e/i.totalTime):1;i.setPosition(r)})}getPosition(){const n=this.players.reduce((e,i)=>null===e||i.totalTime>e.totalTime?i:e,null);return null!=n?n.getPosition():0}beforeDestroy(){this.players.forEach(n=>{n.beforeDestroy&&n.beforeDestroy()})}triggerCallback(n){const e="start"==n?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}}function jI(){return"undefined"!=typeof window&&void 0!==window.document}function NC(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function gc(t){switch(t.length){case 0:return new rh;case 1:return t[0];default:return new HI(t)}}function zI(t,n,e,i,r={},o={}){const s=[],l=[];let c=-1,d=null;if(i.forEach(m=>{const _=m.offset,w=_==c,E=w&&d||{};Object.keys(m).forEach(D=>{let N=D,F=m[D];if("offset"!==D)switch(N=n.normalizePropertyName(N,s),F){case"!":F=r[D];break;case fl:F=o[D];break;default:F=n.normalizeStyleValue(D,N,F,s)}E[N]=F}),w||l.push(E),d=E,c=_}),s.length){const m="\n - ";throw new Error(`Unable to animate due to the following errors:${m}${s.join(m)}`)}return l}function FC(t,n,e,i){switch(n){case"start":t.onStart(()=>i(e&&RC(e,"start",t)));break;case"done":t.onDone(()=>i(e&&RC(e,"done",t)));break;case"destroy":t.onDestroy(()=>i(e&&RC(e,"destroy",t)))}}function RC(t,n,e){const i=e.totalTime,o=LC(t.element,t.triggerName,t.fromState,t.toState,n||t.phaseName,null==i?t.totalTime:i,!!e.disabled),s=t._data;return null!=s&&(o._data=s),o}function LC(t,n,e,i,r="",o=0,s){return{element:t,triggerName:n,fromState:e,toState:i,phaseName:r,totalTime:o,disabled:!!s}}function Oo(t,n,e){let i;return t instanceof Map?(i=t.get(n),i||t.set(n,i=e)):(i=t[n],i||(i=t[n]=e)),i}function GI(t){const n=t.indexOf(":");return[t.substring(1,n),t.substr(n+1)]}let $C=(t,n)=>!1,UC=(t,n)=>!1,WI=(t,n,e)=>[];const qI=NC();(qI||"undefined"!=typeof Element)&&($C=jI()?(t,n)=>{for(;n&&n!==document.documentElement;){if(n===t)return!0;n=n.parentNode||n.host}return!1}:(t,n)=>t.contains(n),UC=(()=>{if(qI||Element.prototype.matches)return(t,n)=>t.matches(n);{const t=Element.prototype,n=t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector;return n?(e,i)=>n.apply(e,[i]):UC}})(),WI=(t,n,e)=>{let i=[];if(e){const r=t.querySelectorAll(n);for(let o=0;o<r.length;o++)i.push(r[o])}else{const r=t.querySelector(n);r&&i.push(r)}return i});let hu=null,QI=!1;function VC(t){hu||(hu=("undefined"!=typeof document?document.body:null)||{},QI=!!hu.style&&"WebkitAppearance"in hu.style);let n=!0;return hu.style&&!function(t){return"ebkit"==t.substring(1,6)}(t)&&(n=t in hu.style,!n&&QI&&(n="Webkit"+t.charAt(0).toUpperCase()+t.substr(1)in hu.style)),n}const BC=UC,HC=$C,jC=WI;function ZI(t){const n={};return Object.keys(t).forEach(e=>{const i=e.replace(/([a-z])([A-Z])/g,"$1-$2");n[i]=t[e]}),n}let KI=(()=>{class t{validateStyleProperty(e){return VC(e)}matchesElement(e,i){return BC(e,i)}containsElement(e,i){return HC(e,i)}query(e,i,r){return jC(e,i,r)}computeStyle(e,i,r){return r||""}animate(e,i,r,o,s,l=[],c){return new rh(r,o)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=B({token:t,factory:t.\u0275fac}),t})(),zC=(()=>{class t{}return t.NOOP=new KI,t})();const GC="ng-enter",g_="ng-leave",__="ng-trigger",v_=".ng-trigger",JI="ng-animating",WC=".ng-animating";function pu(t){if("number"==typeof t)return t;const n=t.match(/^(-?[\.\d]+)(m?s)/);return!n||n.length<2?0:qC(parseFloat(n[1]),n[2])}function qC(t,n){switch(n){case"s":return 1e3*t;default:return t}}function y_(t,n,e){return t.hasOwnProperty("duration")?t:function(t,n,e){let r,o=0,s="";if("string"==typeof t){const l=t.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===l)return n.push(`The provided timing value "${t}" is invalid.`),{duration:0,delay:0,easing:""};r=qC(parseFloat(l[1]),l[2]);const c=l[3];null!=c&&(o=qC(parseFloat(c),l[4]));const d=l[5];d&&(s=d)}else r=t;if(!e){let l=!1,c=n.length;r<0&&(n.push("Duration values below 0 are not allowed for this animation step."),l=!0),o<0&&(n.push("Delay values below 0 are not allowed for this animation step."),l=!0),l&&n.splice(c,0,`The provided timing value "${t}" is invalid.`)}return{duration:r,delay:o,easing:s}}(t,n,e)}function oh(t,n={}){return Object.keys(t).forEach(e=>{n[e]=t[e]}),n}function _c(t,n,e={}){if(n)for(let i in t)e[i]=t[i];else oh(t,e);return e}function eP(t,n,e){return e?n+":"+e+";":""}function tP(t){let n="";for(let e=0;e<t.style.length;e++){const i=t.style.item(e);n+=eP(0,i,t.style.getPropertyValue(i))}for(const e in t.style)t.style.hasOwnProperty(e)&&!e.startsWith("_")&&(n+=eP(0,U7(e),t.style[e]));t.setAttribute("style",n)}function xa(t,n,e){t.style&&(Object.keys(n).forEach(i=>{const r=ZC(i);e&&!e.hasOwnProperty(i)&&(e[i]=t.style[r]),t.style[r]=n[i]}),NC()&&tP(t))}function fu(t,n){t.style&&(Object.keys(n).forEach(e=>{const i=ZC(e);t.style[i]=""}),NC()&&tP(t))}function mf(t){return Array.isArray(t)?1==t.length?t[0]:UI(t):t}const QC=new RegExp("{{\\s*(.+?)\\s*}}","g");function nP(t){let n=[];if("string"==typeof t){let e;for(;e=QC.exec(t);)n.push(e[1]);QC.lastIndex=0}return n}function b_(t,n,e){const i=t.toString(),r=i.replace(QC,(o,s)=>{let l=n[s];return n.hasOwnProperty(s)||(e.push(`Please provide a value for the animation param ${s}`),l=""),l.toString()});return r==i?t:r}function C_(t){const n=[];let e=t.next();for(;!e.done;)n.push(e.value),e=t.next();return n}const $7=/-+([a-z0-9])/g;function ZC(t){return t.replace($7,(...n)=>n[1].toUpperCase())}function U7(t){return t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function iP(t,n){return 0===t||0===n}function rP(t,n,e){const i=Object.keys(e);if(i.length&&n.length){let o=n[0],s=[];if(i.forEach(l=>{o.hasOwnProperty(l)||s.push(l),o[l]=e[l]}),s.length)for(var r=1;r<n.length;r++){let l=n[r];s.forEach(function(c){l[c]=KC(t,c)})}}return n}function No(t,n,e){switch(n.type){case 7:return t.visitTrigger(n,e);case 0:return t.visitState(n,e);case 1:return t.visitTransition(n,e);case 2:return t.visitSequence(n,e);case 3:return t.visitGroup(n,e);case 4:return t.visitAnimate(n,e);case 5:return t.visitKeyframes(n,e);case 6:return t.visitStyle(n,e);case 8:return t.visitReference(n,e);case 9:return t.visitAnimateChild(n,e);case 10:return t.visitAnimateRef(n,e);case 11:return t.visitQuery(n,e);case 12:return t.visitStagger(n,e);default:throw new Error(`Unable to resolve animation metadata node #${n.type}`)}}function KC(t,n){return window.getComputedStyle(t)[n]}function V7(t,n){const e=[];return"string"==typeof t?t.split(/\s*,\s*/).forEach(i=>function(t,n,e){if(":"==t[0]){const c=function(t,n){switch(t){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,i)=>parseFloat(i)>parseFloat(e);case":decrement":return(e,i)=>parseFloat(i)<parseFloat(e);default:return n.push(`The transition alias value "${t}" is not supported`),"* => *"}}(t,e);if("function"==typeof c)return void n.push(c);t=c}const i=t.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return e.push(`The provided transition expression "${t}" is not supported`),n;const r=i[1],o=i[2],s=i[3];n.push(oP(r,s));"<"==o[0]&&!("*"==r&&"*"==s)&&n.push(oP(s,r))}(i,e,n)):e.push(t),e}const S_=new Set(["true","1"]),T_=new Set(["false","0"]);function oP(t,n){const e=S_.has(t)||T_.has(t),i=S_.has(n)||T_.has(n);return(r,o)=>{let s="*"==t||t==r,l="*"==n||n==o;return!s&&e&&"boolean"==typeof r&&(s=r?S_.has(t):T_.has(t)),!l&&i&&"boolean"==typeof o&&(l=o?S_.has(n):T_.has(n)),s&&l}}const j7=new RegExp("s*:selfs*,?","g");function YC(t,n,e){return new z7(t).build(n,e)}class z7{constructor(n){this._driver=n}build(n,e){const i=new q7(e);return this._resetContextStyleTimingState(i),No(this,mf(n),i)}_resetContextStyleTimingState(n){n.currentQuerySelector="",n.collectedStyles={},n.collectedStyles[""]={},n.currentTime=0}visitTrigger(n,e){let i=e.queryCount=0,r=e.depCount=0;const o=[],s=[];return"@"==n.name.charAt(0)&&e.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),n.definitions.forEach(l=>{if(this._resetContextStyleTimingState(e),0==l.type){const c=l,d=c.name;d.toString().split(/\s*,\s*/).forEach(m=>{c.name=m,o.push(this.visitState(c,e))}),c.name=d}else if(1==l.type){const c=this.visitTransition(l,e);i+=c.queryCount,r+=c.depCount,s.push(c)}else e.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:n.name,states:o,transitions:s,queryCount:i,depCount:r,options:null}}visitState(n,e){const i=this.visitStyle(n.styles,e),r=n.options&&n.options.params||null;if(i.containsDynamicStyles){const o=new Set,s=r||{};if(i.styles.forEach(l=>{if(E_(l)){const c=l;Object.keys(c).forEach(d=>{nP(c[d]).forEach(m=>{s.hasOwnProperty(m)||o.add(m)})})}}),o.size){const l=C_(o.values());e.errors.push(`state("${n.name}", ...) must define default values for all the following style substitutions: ${l.join(", ")}`)}}return{type:0,name:n.name,style:i,options:r?{params:r}:null}}visitTransition(n,e){e.queryCount=0,e.depCount=0;const i=No(this,mf(n.animation),e);return{type:1,matchers:V7(n.expr,e.errors),animation:i,queryCount:e.queryCount,depCount:e.depCount,options:mu(n.options)}}visitSequence(n,e){return{type:2,steps:n.steps.map(i=>No(this,i,e)),options:mu(n.options)}}visitGroup(n,e){const i=e.currentTime;let r=0;const o=n.steps.map(s=>{e.currentTime=i;const l=No(this,s,e);return r=Math.max(r,e.currentTime),l});return e.currentTime=r,{type:3,steps:o,options:mu(n.options)}}visitAnimate(n,e){const i=function(t,n){let e=null;if(t.hasOwnProperty("duration"))e=t;else if("number"==typeof t)return JC(y_(t,n).duration,0,"");const i=t;if(i.split(/\s+/).some(o=>"{"==o.charAt(0)&&"{"==o.charAt(1))){const o=JC(0,0,"");return o.dynamic=!0,o.strValue=i,o}return e=e||y_(i,n),JC(e.duration,e.delay,e.easing)}(n.timings,e.errors);e.currentAnimateTimings=i;let r,o=n.styles?n.styles:ff({});if(5==o.type)r=this.visitKeyframes(o,e);else{let s=n.styles,l=!1;if(!s){l=!0;const d={};i.easing&&(d.easing=i.easing),s=ff(d)}e.currentTime+=i.duration+i.delay;const c=this.visitStyle(s,e);c.isEmptyStep=l,r=c}return e.currentAnimateTimings=null,{type:4,timings:i,style:r,options:null}}visitStyle(n,e){const i=this._makeStyleAst(n,e);return this._validateStyleAst(i,e),i}_makeStyleAst(n,e){const i=[];Array.isArray(n.styles)?n.styles.forEach(s=>{"string"==typeof s?s==fl?i.push(s):e.errors.push(`The provided style string value ${s} is not allowed.`):i.push(s)}):i.push(n.styles);let r=!1,o=null;return i.forEach(s=>{if(E_(s)){const l=s,c=l.easing;if(c&&(o=c,delete l.easing),!r)for(let d in l)if(l[d].toString().indexOf("{{")>=0){r=!0;break}}}),{type:6,styles:i,easing:o,offset:n.offset,containsDynamicStyles:r,options:null}}_validateStyleAst(n,e){const i=e.currentAnimateTimings;let r=e.currentTime,o=e.currentTime;i&&o>0&&(o-=i.duration+i.delay),n.styles.forEach(s=>{"string"!=typeof s&&Object.keys(s).forEach(l=>{if(!this._driver.validateStyleProperty(l))return void e.errors.push(`The provided animation property "${l}" is not a supported CSS property for animations`);const c=e.collectedStyles[e.currentQuerySelector],d=c[l];let m=!0;d&&(o!=r&&o>=d.startTime&&r<=d.endTime&&(e.errors.push(`The CSS property "${l}" that exists between the times of "${d.startTime}ms" and "${d.endTime}ms" is also being animated in a parallel animation between the times of "${o}ms" and "${r}ms"`),m=!1),o=d.startTime),m&&(c[l]={startTime:o,endTime:r}),e.options&&function(t,n,e){const i=n.params||{},r=nP(t);r.length&&r.forEach(o=>{i.hasOwnProperty(o)||e.push(`Unable to resolve the local animation param ${o} in the given list of values`)})}(s[l],e.options,e.errors)})})}visitKeyframes(n,e){const i={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push("keyframes() must be placed inside of a call to animate()"),i;let o=0;const s=[];let l=!1,c=!1,d=0;const m=n.steps.map(j=>{const H=this._makeStyleAst(j,e);let X=null!=H.offset?H.offset:function(t){if("string"==typeof t)return null;let n=null;if(Array.isArray(t))t.forEach(e=>{if(E_(e)&&e.hasOwnProperty("offset")){const i=e;n=parseFloat(i.offset),delete i.offset}});else if(E_(t)&&t.hasOwnProperty("offset")){const e=t;n=parseFloat(e.offset),delete e.offset}return n}(H.styles),de=0;return null!=X&&(o++,de=H.offset=X),c=c||de<0||de>1,l=l||de<d,d=de,s.push(de),H});c&&e.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),l&&e.errors.push("Please ensure that all keyframe offsets are in order");const _=n.steps.length;let w=0;o>0&&o<_?e.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==o&&(w=1/(_-1));const E=_-1,D=e.currentTime,N=e.currentAnimateTimings,F=N.duration;return m.forEach((j,H)=>{const X=w>0?H==E?1:w*H:s[H],de=X*F;e.currentTime=D+N.delay+de,N.duration=de,this._validateStyleAst(j,e),j.offset=X,i.styles.push(j)}),i}visitReference(n,e){return{type:8,animation:No(this,mf(n.animation),e),options:mu(n.options)}}visitAnimateChild(n,e){return e.depCount++,{type:9,options:mu(n.options)}}visitAnimateRef(n,e){return{type:10,animation:this.visitReference(n.animation,e),options:mu(n.options)}}visitQuery(n,e){const i=e.currentQuerySelector,r=n.options||{};e.queryCount++,e.currentQuery=n;const[o,s]=function(t){const n=!!t.split(/\s*,\s*/).find(e=>":self"==e);return n&&(t=t.replace(j7,"")),[t=t.replace(/@\*/g,v_).replace(/@\w+/g,e=>v_+"-"+e.substr(1)).replace(/:animating/g,WC),n]}(n.selector);e.currentQuerySelector=i.length?i+" "+o:o,Oo(e.collectedStyles,e.currentQuerySelector,{});const l=No(this,mf(n.animation),e);return e.currentQuery=null,e.currentQuerySelector=i,{type:11,selector:o,limit:r.limit||0,optional:!!r.optional,includeSelf:s,animation:l,originalSelector:n.selector,options:mu(n.options)}}visitStagger(n,e){e.currentQuery||e.errors.push("stagger() can only be used inside of query()");const i="full"===n.timings?{duration:0,delay:0,easing:"full"}:y_(n.timings,e.errors,!0);return{type:12,animation:No(this,mf(n.animation),e),timings:i,options:null}}}class q7{constructor(n){this.errors=n,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function E_(t){return!Array.isArray(t)&&"object"==typeof t}function mu(t){return t?(t=oh(t)).params&&(t.params=function(t){return t?oh(t):null}(t.params)):t={},t}function JC(t,n,e){return{duration:t,delay:n,easing:e}}function XC(t,n,e,i,r,o,s=null,l=!1){return{type:1,element:t,keyframes:n,preStyleProps:e,postStyleProps:i,duration:r,delay:o,totalTime:r+o,easing:s,subTimeline:l}}class k_{constructor(){this._map=new Map}consume(n){let e=this._map.get(n);return e?this._map.delete(n):e=[],e}append(n,e){let i=this._map.get(n);i||this._map.set(n,i=[]),i.push(...e)}has(n){return this._map.has(n)}clear(){this._map.clear()}}const J7=new RegExp(":enter","g"),ez=new RegExp(":leave","g");function e0(t,n,e,i,r,o={},s={},l,c,d=[]){return(new tz).buildKeyframes(t,n,e,i,r,o,s,l,c,d)}class tz{buildKeyframes(n,e,i,r,o,s,l,c,d,m=[]){d=d||new k_;const _=new t0(n,e,d,r,o,m,[]);_.options=c,_.currentTimeline.setStyles([s],null,_.errors,c),No(this,i,_);const w=_.timelines.filter(E=>E.containsAnimation());if(w.length&&Object.keys(l).length){const E=w[w.length-1];E.allowOnlyTimelineStyles()||E.setStyles([l],null,_.errors,c)}return w.length?w.map(E=>E.buildKeyframes()):[XC(e,[],[],[],0,0,"",!1)]}visitTrigger(n,e){}visitState(n,e){}visitTransition(n,e){}visitAnimateChild(n,e){const i=e.subInstructions.consume(e.element);if(i){const r=e.createSubContext(n.options),o=e.currentTimeline.currentTime,s=this._visitSubInstructions(i,r,r.options);o!=s&&e.transformIntoNewTimeline(s)}e.previousNode=n}visitAnimateRef(n,e){const i=e.createSubContext(n.options);i.transformIntoNewTimeline(),this.visitReference(n.animation,i),e.transformIntoNewTimeline(i.currentTimeline.currentTime),e.previousNode=n}_visitSubInstructions(n,e,i){let o=e.currentTimeline.currentTime;const s=null!=i.duration?pu(i.duration):null,l=null!=i.delay?pu(i.delay):null;return 0!==s&&n.forEach(c=>{const d=e.appendInstructionToTimeline(c,s,l);o=Math.max(o,d.duration+d.delay)}),o}visitReference(n,e){e.updateOptions(n.options,!0),No(this,n.animation,e),e.previousNode=n}visitSequence(n,e){const i=e.subContextCount;let r=e;const o=n.options;if(o&&(o.params||o.delay)&&(r=e.createSubContext(o),r.transformIntoNewTimeline(),null!=o.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=D_);const s=pu(o.delay);r.delayNextStep(s)}n.steps.length&&(n.steps.forEach(s=>No(this,s,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),e.previousNode=n}visitGroup(n,e){const i=[];let r=e.currentTimeline.currentTime;const o=n.options&&n.options.delay?pu(n.options.delay):0;n.steps.forEach(s=>{const l=e.createSubContext(n.options);o&&l.delayNextStep(o),No(this,s,l),r=Math.max(r,l.currentTimeline.currentTime),i.push(l.currentTimeline)}),i.forEach(s=>e.currentTimeline.mergeTimelineCollectedStyles(s)),e.transformIntoNewTimeline(r),e.previousNode=n}_visitTiming(n,e){if(n.dynamic){const i=n.strValue;return y_(e.params?b_(i,e.params,e.errors):i,e.errors)}return{duration:n.duration,delay:n.delay,easing:n.easing}}visitAnimate(n,e){const i=e.currentAnimateTimings=this._visitTiming(n.timings,e),r=e.currentTimeline;i.delay&&(e.incrementTime(i.delay),r.snapshotCurrentStyles());const o=n.style;5==o.type?this.visitKeyframes(o,e):(e.incrementTime(i.duration),this.visitStyle(o,e),r.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=n}visitStyle(n,e){const i=e.currentTimeline,r=e.currentAnimateTimings;!r&&i.getCurrentStyleProperties().length&&i.forwardFrame();const o=r&&r.easing||n.easing;n.isEmptyStep?i.applyEmptyStep(o):i.setStyles(n.styles,o,e.errors,e.options),e.previousNode=n}visitKeyframes(n,e){const i=e.currentAnimateTimings,r=e.currentTimeline.duration,o=i.duration,l=e.createSubContext().currentTimeline;l.easing=i.easing,n.styles.forEach(c=>{l.forwardTime((c.offset||0)*o),l.setStyles(c.styles,c.easing,e.errors,e.options),l.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(l),e.transformIntoNewTimeline(r+o),e.previousNode=n}visitQuery(n,e){const i=e.currentTimeline.currentTime,r=n.options||{},o=r.delay?pu(r.delay):0;o&&(6===e.previousNode.type||0==i&&e.currentTimeline.getCurrentStyleProperties().length)&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=D_);let s=i;const l=e.invokeQuery(n.selector,n.originalSelector,n.limit,n.includeSelf,!!r.optional,e.errors);e.currentQueryTotal=l.length;let c=null;l.forEach((d,m)=>{e.currentQueryIndex=m;const _=e.createSubContext(n.options,d);o&&_.delayNextStep(o),d===e.element&&(c=_.currentTimeline),No(this,n.animation,_),_.currentTimeline.applyStylesToKeyframe(),s=Math.max(s,_.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(s),c&&(e.currentTimeline.mergeTimelineCollectedStyles(c),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=n}visitStagger(n,e){const i=e.parentContext,r=e.currentTimeline,o=n.timings,s=Math.abs(o.duration),l=s*(e.currentQueryTotal-1);let c=s*e.currentQueryIndex;switch(o.duration<0?"reverse":o.easing){case"reverse":c=l-c;break;case"full":c=i.currentStaggerTime}const m=e.currentTimeline;c&&m.delayNextStep(c);const _=m.currentTime;No(this,n.animation,e),e.previousNode=n,i.currentStaggerTime=r.currentTime-_+(r.startTime-i.currentTimeline.startTime)}}const D_={};class t0{constructor(n,e,i,r,o,s,l,c){this._driver=n,this.element=e,this.subInstructions=i,this._enterClassName=r,this._leaveClassName=o,this.errors=s,this.timelines=l,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=D_,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=c||new x_(this._driver,e,0),l.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(n,e){if(!n)return;const i=n;let r=this.options;null!=i.duration&&(r.duration=pu(i.duration)),null!=i.delay&&(r.delay=pu(i.delay));const o=i.params;if(o){let s=r.params;s||(s=this.options.params={}),Object.keys(o).forEach(l=>{(!e||!s.hasOwnProperty(l))&&(s[l]=b_(o[l],s,this.errors))})}}_copyOptions(){const n={};if(this.options){const e=this.options.params;if(e){const i=n.params={};Object.keys(e).forEach(r=>{i[r]=e[r]})}}return n}createSubContext(n=null,e,i){const r=e||this.element,o=new t0(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return o.previousNode=this.previousNode,o.currentAnimateTimings=this.currentAnimateTimings,o.options=this._copyOptions(),o.updateOptions(n),o.currentQueryIndex=this.currentQueryIndex,o.currentQueryTotal=this.currentQueryTotal,o.parentContext=this,this.subContextCount++,o}transformIntoNewTimeline(n){return this.previousNode=D_,this.currentTimeline=this.currentTimeline.fork(this.element,n),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(n,e,i){const r={duration:null!=e?e:n.duration,delay:this.currentTimeline.currentTime+(null!=i?i:0)+n.delay,easing:""},o=new nz(this._driver,n.element,n.keyframes,n.preStyleProps,n.postStyleProps,r,n.stretchStartingKeyframe);return this.timelines.push(o),r}incrementTime(n){this.currentTimeline.forwardTime(this.currentTimeline.duration+n)}delayNextStep(n){n>0&&this.currentTimeline.delayNextStep(n)}invokeQuery(n,e,i,r,o,s){let l=[];if(r&&l.push(this.element),n.length>0){n=(n=n.replace(J7,"."+this._enterClassName)).replace(ez,"."+this._leaveClassName);let d=this._driver.query(this.element,n,1!=i);0!==i&&(d=i<0?d.slice(d.length+i,d.length):d.slice(0,i)),l.push(...d)}return!o&&0==l.length&&s.push(`\`query("${e}")\` returned zero elements. (Use \`query("${e}", { optional: true })\` if you wish to allow this.)`),l}}class x_{constructor(n,e,i,r){this._driver=n,this.element=e,this.startTime=i,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(n){const e=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||e?(this.forwardTime(this.currentTime+n),e&&this.snapshotCurrentStyles()):this.startTime+=n}fork(n,e){return this.applyStylesToKeyframe(),new x_(this._driver,n,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(n){this.applyStylesToKeyframe(),this.duration=n,this._loadKeyframe()}_updateStyle(n,e){this._localTimelineStyles[n]=e,this._globalTimelineStyles[n]=e,this._styleSummary[n]={time:this.currentTime,value:e}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(n){n&&(this._previousKeyframe.easing=n),Object.keys(this._globalTimelineStyles).forEach(e=>{this._backFill[e]=this._globalTimelineStyles[e]||fl,this._currentKeyframe[e]=fl}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(n,e,i,r){e&&(this._previousKeyframe.easing=e);const o=r&&r.params||{},s=function(t,n){const e={};let i;return t.forEach(r=>{"*"===r?(i=i||Object.keys(n),i.forEach(o=>{e[o]=fl})):_c(r,!1,e)}),e}(n,this._globalTimelineStyles);Object.keys(s).forEach(l=>{const c=b_(s[l],o,i);this._pendingStyles[l]=c,this._localTimelineStyles.hasOwnProperty(l)||(this._backFill[l]=this._globalTimelineStyles.hasOwnProperty(l)?this._globalTimelineStyles[l]:fl),this._updateStyle(l,c)})}applyStylesToKeyframe(){const n=this._pendingStyles,e=Object.keys(n);0!=e.length&&(this._pendingStyles={},e.forEach(i=>{this._currentKeyframe[i]=n[i]}),Object.keys(this._localTimelineStyles).forEach(i=>{this._currentKeyframe.hasOwnProperty(i)||(this._currentKeyframe[i]=this._localTimelineStyles[i])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(n=>{const e=this._localTimelineStyles[n];this._pendingStyles[n]=e,this._updateStyle(n,e)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const n=[];for(let e in this._currentKeyframe)n.push(e);return n}mergeTimelineCollectedStyles(n){Object.keys(n._styleSummary).forEach(e=>{const i=this._styleSummary[e],r=n._styleSummary[e];(!i||r.time>i.time)&&this._updateStyle(e,r.value)})}buildKeyframes(){this.applyStylesToKeyframe();const n=new Set,e=new Set,i=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((l,c)=>{const d=_c(l,!0);Object.keys(d).forEach(m=>{const _=d[m];"!"==_?n.add(m):_==fl&&e.add(m)}),i||(d.offset=c/this.duration),r.push(d)});const o=n.size?C_(n.values()):[],s=e.size?C_(e.values()):[];if(i){const l=r[0],c=oh(l);l.offset=0,c.offset=1,r=[l,c]}return XC(this.element,r,o,s,this.duration,this.startTime,this.easing,!1)}}class nz extends x_{constructor(n,e,i,r,o,s,l=!1){super(n,e,s.delay),this.keyframes=i,this.preStyleProps=r,this.postStyleProps=o,this._stretchStartingKeyframe=l,this.timings={duration:s.duration,delay:s.delay,easing:s.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let n=this.keyframes,{delay:e,duration:i,easing:r}=this.timings;if(this._stretchStartingKeyframe&&e){const o=[],s=i+e,l=e/s,c=_c(n[0],!1);c.offset=0,o.push(c);const d=_c(n[0],!1);d.offset=lP(l),o.push(d);const m=n.length-1;for(let _=1;_<=m;_++){let w=_c(n[_],!1);w.offset=lP((e+w.offset*i)/s),o.push(w)}i=s,e=0,r="",n=o}return XC(this.element,n,this.preStyleProps,this.postStyleProps,i,e,r,!0)}}function lP(t,n=3){const e=Math.pow(10,n-1);return Math.round(t*e)/e}class n0{}class rz extends n0{normalizePropertyName(n,e){return ZC(n)}normalizeStyleValue(n,e,i,r){let o="";const s=i.toString().trim();if(oz[e]&&0!==i&&"0"!==i)if("number"==typeof i)o="px";else{const l=i.match(/^[+-]?[\d\.]+([a-z]*)$/);l&&0==l[1].length&&r.push(`Please provide a CSS unit value for ${n}:${i}`)}return s+o}}const oz=(()=>function(t){const n={};return t.forEach(e=>n[e]=!0),n}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function cP(t,n,e,i,r,o,s,l,c,d,m,_,w){return{type:0,element:t,triggerName:n,isRemovalTransition:r,fromState:e,fromStyles:o,toState:i,toStyles:s,timelines:l,queriedElements:c,preStyleProps:d,postStyleProps:m,totalTime:_,errors:w}}const r0={};class uP{constructor(n,e,i){this._triggerName=n,this.ast=e,this._stateStyles=i}match(n,e,i,r){return function(t,n,e,i,r){return t.some(o=>o(n,e,i,r))}(this.ast.matchers,n,e,i,r)}buildStyles(n,e,i){const r=this._stateStyles["*"],o=this._stateStyles[n],s=r?r.buildStyles(e,i):{};return o?o.buildStyles(e,i):s}build(n,e,i,r,o,s,l,c,d,m){const _=[],w=this.ast.options&&this.ast.options.params||r0,D=this.buildStyles(i,l&&l.params||r0,_),N=c&&c.params||r0,F=this.buildStyles(r,N,_),j=new Set,H=new Map,X=new Map,de="void"===r,Be={params:Object.assign(Object.assign({},w),N)},Gt=m?[]:e0(n,e,this.ast.animation,o,s,D,F,Be,d,_);let Jt=0;if(Gt.forEach(wr=>{Jt=Math.max(wr.duration+wr.delay,Jt)}),_.length)return cP(e,this._triggerName,i,r,de,D,F,[],[],H,X,Jt,_);Gt.forEach(wr=>{const Sr=wr.element,Ol=Oo(H,Sr,{});wr.preStyleProps.forEach(ea=>Ol[ea]=!0);const Nl=Oo(X,Sr,{});wr.postStyleProps.forEach(ea=>Nl[ea]=!0),Sr!==e&&j.add(Sr)});const Nn=C_(j.values());return cP(e,this._triggerName,i,r,de,D,F,Gt,Nn,H,X,Jt)}}class lz{constructor(n,e,i){this.styles=n,this.defaultParams=e,this.normalizer=i}buildStyles(n,e){const i={},r=oh(this.defaultParams);return Object.keys(n).forEach(o=>{const s=n[o];null!=s&&(r[o]=s)}),this.styles.styles.forEach(o=>{if("string"!=typeof o){const s=o;Object.keys(s).forEach(l=>{let c=s[l];c.length>1&&(c=b_(c,r,e));const d=this.normalizer.normalizePropertyName(l,e);c=this.normalizer.normalizeStyleValue(l,d,c,e),i[d]=c})}}),i}}class uz{constructor(n,e,i){this.name=n,this.ast=e,this._normalizer=i,this.transitionFactories=[],this.states={},e.states.forEach(r=>{this.states[r.name]=new lz(r.style,r.options&&r.options.params||{},i)}),dP(this.states,"true","1"),dP(this.states,"false","0"),e.transitions.forEach(r=>{this.transitionFactories.push(new uP(n,r,this.states))}),this.fallbackTransition=function(t,n,e){return new uP(t,{type:1,animation:{type:2,steps:[],options:null},matchers:[(s,l)=>!0],options:null,queryCount:0,depCount:0},n)}(n,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(n,e,i,r){return this.transitionFactories.find(s=>s.match(n,e,i,r))||null}matchStyles(n,e,i){return this.fallbackTransition.buildStyles(n,e,i)}}function dP(t,n,e){t.hasOwnProperty(n)?t.hasOwnProperty(e)||(t[e]=t[n]):t.hasOwnProperty(e)&&(t[n]=t[e])}const hz=new k_;class pz{constructor(n,e,i){this.bodyNode=n,this._driver=e,this._normalizer=i,this._animations={},this._playersById={},this.players=[]}register(n,e){const i=[],r=YC(this._driver,e,i);if(i.length)throw new Error(`Unable to build the animation due to the following errors: ${i.join("\n")}`);this._animations[n]=r}_buildPlayer(n,e,i){const r=n.element,o=zI(0,this._normalizer,0,n.keyframes,e,i);return this._driver.animate(r,o,n.duration,n.delay,n.easing,[],!0)}create(n,e,i={}){const r=[],o=this._animations[n];let s;const l=new Map;if(o?(s=e0(this._driver,e,o,GC,g_,{},{},i,hz,r),s.forEach(m=>{const _=Oo(l,m.element,{});m.postStyleProps.forEach(w=>_[w]=null)})):(r.push("The requested animation doesn't exist or has already been destroyed"),s=[]),r.length)throw new Error(`Unable to create the animation due to the following errors: ${r.join("\n")}`);l.forEach((m,_)=>{Object.keys(m).forEach(w=>{m[w]=this._driver.computeStyle(_,w,fl)})});const d=gc(s.map(m=>{const _=l.get(m.element);return this._buildPlayer(m,{},_)}));return this._playersById[n]=d,d.onDestroy(()=>this.destroy(n)),this.players.push(d),d}destroy(n){const e=this._getPlayer(n);e.destroy(),delete this._playersById[n];const i=this.players.indexOf(e);i>=0&&this.players.splice(i,1)}_getPlayer(n){const e=this._playersById[n];if(!e)throw new Error(`Unable to find the timeline player referenced by ${n}`);return e}listen(n,e,i,r){const o=LC(e,"","","");return FC(this._getPlayer(n),i,o,r),()=>{}}command(n,e,i,r){if("register"==i)return void this.register(n,r[0]);if("create"==i)return void this.create(n,e,r[0]||{});const o=this._getPlayer(n);switch(i){case"play":o.play();break;case"pause":o.pause();break;case"reset":o.reset();break;case"restart":o.restart();break;case"finish":o.finish();break;case"init":o.init();break;case"setPosition":o.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(n)}}}const hP="ng-animate-queued",pP="ng-animate-disabled",fP=".ng-animate-disabled",_z=[],mP={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},vz={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},rs="__ng_removed";class o0{constructor(n,e=""){this.namespaceId=e;const i=n&&n.hasOwnProperty("value");if(this.value=function(t){return null!=t?t:null}(i?n.value:n),i){const o=oh(n);delete o.value,this.options=o}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(n){const e=n.params;if(e){const i=this.options.params;Object.keys(e).forEach(r=>{null==i[r]&&(i[r]=e[r])})}}}const gf="void",s0=new o0(gf);class yz{constructor(n,e,i){this.id=n,this.hostElement=e,this._engine=i,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+n,os(e,this._hostClassName)}listen(n,e,i,r){if(!this._triggers.hasOwnProperty(e))throw new Error(`Unable to listen on the animation trigger event "${i}" because the animation trigger "${e}" doesn't exist!`);if(null==i||0==i.length)throw new Error(`Unable to listen on the animation trigger "${e}" because the provided event is undefined!`);if(!function(t){return"start"==t||"done"==t}(i))throw new Error(`The provided animation trigger event "${i}" for the animation trigger "${e}" is not supported!`);const o=Oo(this._elementListeners,n,[]),s={name:e,phase:i,callback:r};o.push(s);const l=Oo(this._engine.statesByElement,n,{});return l.hasOwnProperty(e)||(os(n,__),os(n,__+"-"+e),l[e]=s0),()=>{this._engine.afterFlush(()=>{const c=o.indexOf(s);c>=0&&o.splice(c,1),this._triggers[e]||delete l[e]})}}register(n,e){return!this._triggers[n]&&(this._triggers[n]=e,!0)}_getTrigger(n){const e=this._triggers[n];if(!e)throw new Error(`The provided animation trigger "${n}" has not been registered!`);return e}trigger(n,e,i,r=!0){const o=this._getTrigger(e),s=new a0(this.id,e,n);let l=this._engine.statesByElement.get(n);l||(os(n,__),os(n,__+"-"+e),this._engine.statesByElement.set(n,l={}));let c=l[e];const d=new o0(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&c&&d.absorbOptions(c.options),l[e]=d,c||(c=s0),d.value!==gf&&c.value===d.value){if(!function(t,n){const e=Object.keys(t),i=Object.keys(n);if(e.length!=i.length)return!1;for(let r=0;r<e.length;r++){const o=e[r];if(!n.hasOwnProperty(o)||t[o]!==n[o])return!1}return!0}(c.params,d.params)){const N=[],F=o.matchStyles(c.value,c.params,N),j=o.matchStyles(d.value,d.params,N);N.length?this._engine.reportError(N):this._engine.afterFlush(()=>{fu(n,F),xa(n,j)})}return}const w=Oo(this._engine.playersByElement,n,[]);w.forEach(N=>{N.namespaceId==this.id&&N.triggerName==e&&N.queued&&N.destroy()});let E=o.matchTransition(c.value,d.value,n,d.params),D=!1;if(!E){if(!r)return;E=o.fallbackTransition,D=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:n,triggerName:e,transition:E,fromState:c,toState:d,player:s,isFallbackTransition:D}),D||(os(n,hP),s.onStart(()=>{sh(n,hP)})),s.onDone(()=>{let N=this.players.indexOf(s);N>=0&&this.players.splice(N,1);const F=this._engine.playersByElement.get(n);if(F){let j=F.indexOf(s);j>=0&&F.splice(j,1)}}),this.players.push(s),w.push(s),s}deregister(n){delete this._triggers[n],this._engine.statesByElement.forEach((e,i)=>{delete e[n]}),this._elementListeners.forEach((e,i)=>{this._elementListeners.set(i,e.filter(r=>r.name!=n))})}clearElementCache(n){this._engine.statesByElement.delete(n),this._elementListeners.delete(n);const e=this._engine.playersByElement.get(n);e&&(e.forEach(i=>i.destroy()),this._engine.playersByElement.delete(n))}_signalRemovalForInnerTriggers(n,e){const i=this._engine.driver.query(n,v_,!0);i.forEach(r=>{if(r[rs])return;const o=this._engine.fetchNamespacesByElement(r);o.size?o.forEach(s=>s.triggerLeaveAnimation(r,e,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(n,e,i,r){const o=this._engine.statesByElement.get(n);if(o){const s=[];if(Object.keys(o).forEach(l=>{if(this._triggers[l]){const c=this.trigger(n,l,gf,r);c&&s.push(c)}}),s.length)return this._engine.markElementAsRemoved(this.id,n,!0,e),i&&gc(s).onDone(()=>this._engine.processLeaveNode(n)),!0}return!1}prepareLeaveAnimationListeners(n){const e=this._elementListeners.get(n),i=this._engine.statesByElement.get(n);if(e&&i){const r=new Set;e.forEach(o=>{const s=o.name;if(r.has(s))return;r.add(s);const c=this._triggers[s].fallbackTransition,d=i[s]||s0,m=new o0(gf),_=new a0(this.id,s,n);this._engine.totalQueuedPlayers++,this._queue.push({element:n,triggerName:s,transition:c,fromState:d,toState:m,player:_,isFallbackTransition:!0})})}}removeNode(n,e){const i=this._engine;if(n.childElementCount&&this._signalRemovalForInnerTriggers(n,e),this.triggerLeaveAnimation(n,e,!0))return;let r=!1;if(i.totalAnimations){const o=i.players.length?i.playersByQueriedElement.get(n):[];if(o&&o.length)r=!0;else{let s=n;for(;s=s.parentNode;)if(i.statesByElement.get(s)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(n),r)i.markElementAsRemoved(this.id,n,!1,e);else{const o=n[rs];(!o||o===mP)&&(i.afterFlush(()=>this.clearElementCache(n)),i.destroyInnerAnimations(n),i._onRemovalComplete(n,e))}}insertNode(n,e){os(n,this._hostClassName)}drainQueuedTransitions(n){const e=[];return this._queue.forEach(i=>{const r=i.player;if(r.destroyed)return;const o=i.element,s=this._elementListeners.get(o);s&&s.forEach(l=>{if(l.name==i.triggerName){const c=LC(o,i.triggerName,i.fromState.value,i.toState.value);c._data=n,FC(i.player,l.phase,c,l.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):e.push(i)}),this._queue=[],e.sort((i,r)=>{const o=i.transition.ast.depCount,s=r.transition.ast.depCount;return 0==o||0==s?o-s:this._engine.driver.containsElement(i.element,r.element)?1:-1})}destroy(n){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,n)}elementContainsData(n){let e=!1;return this._elementListeners.has(n)&&(e=!0),e=!!this._queue.find(i=>i.element===n)||e,e}}class bz{constructor(n,e,i){this.bodyNode=n,this.driver=e,this._normalizer=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,o)=>{}}_onRemovalComplete(n,e){this.onRemovalComplete(n,e)}get queuedPlayers(){const n=[];return this._namespaceList.forEach(e=>{e.players.forEach(i=>{i.queued&&n.push(i)})}),n}createNamespace(n,e){const i=new yz(n,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(i,e):(this.newHostElements.set(e,i),this.collectEnterElement(e)),this._namespaceLookup[n]=i}_balanceNamespaceList(n,e){const i=this._namespaceList.length-1;if(i>=0){let r=!1;for(let o=i;o>=0;o--)if(this.driver.containsElement(this._namespaceList[o].hostElement,e)){this._namespaceList.splice(o+1,0,n),r=!0;break}r||this._namespaceList.splice(0,0,n)}else this._namespaceList.push(n);return this.namespacesByHostElement.set(e,n),n}register(n,e){let i=this._namespaceLookup[n];return i||(i=this.createNamespace(n,e)),i}registerTrigger(n,e,i){let r=this._namespaceLookup[n];r&&r.register(e,i)&&this.totalAnimations++}destroy(n,e){if(!n)return;const i=this._fetchNamespace(n);this.afterFlush(()=>{this.namespacesByHostElement.delete(i.hostElement),delete this._namespaceLookup[n];const r=this._namespaceList.indexOf(i);r>=0&&this._namespaceList.splice(r,1)}),this.afterFlushAnimationsDone(()=>i.destroy(e))}_fetchNamespace(n){return this._namespaceLookup[n]}fetchNamespacesByElement(n){const e=new Set,i=this.statesByElement.get(n);if(i){const r=Object.keys(i);for(let o=0;o<r.length;o++){const s=i[r[o]].namespaceId;if(s){const l=this._fetchNamespace(s);l&&e.add(l)}}}return e}trigger(n,e,i,r){if(M_(e)){const o=this._fetchNamespace(n);if(o)return o.trigger(e,i,r),!0}return!1}insertNode(n,e,i,r){if(!M_(e))return;const o=e[rs];if(o&&o.setForRemoval){o.setForRemoval=!1,o.setForMove=!0;const s=this.collectedLeaveElements.indexOf(e);s>=0&&this.collectedLeaveElements.splice(s,1)}if(n){const s=this._fetchNamespace(n);s&&s.insertNode(e,i)}r&&this.collectEnterElement(e)}collectEnterElement(n){this.collectedEnterElements.push(n)}markElementAsDisabled(n,e){e?this.disabledNodes.has(n)||(this.disabledNodes.add(n),os(n,pP)):this.disabledNodes.has(n)&&(this.disabledNodes.delete(n),sh(n,pP))}removeNode(n,e,i,r){if(M_(e)){const o=n?this._fetchNamespace(n):null;if(o?o.removeNode(e,r):this.markElementAsRemoved(n,e,!1,r),i){const s=this.namespacesByHostElement.get(e);s&&s.id!==n&&s.removeNode(e,r)}}else this._onRemovalComplete(e,r)}markElementAsRemoved(n,e,i,r){this.collectedLeaveElements.push(e),e[rs]={namespaceId:n,setForRemoval:r,hasAnimation:i,removedBeforeQueried:!1}}listen(n,e,i,r,o){return M_(e)?this._fetchNamespace(n).listen(e,i,r,o):()=>{}}_buildInstruction(n,e,i,r,o){return n.transition.build(this.driver,n.element,n.fromState.value,n.toState.value,i,r,n.fromState.options,n.toState.options,e,o)}destroyInnerAnimations(n){let e=this.driver.query(n,v_,!0);e.forEach(i=>this.destroyActiveAnimationsForElement(i)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(n,WC,!0),e.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(n){const e=this.playersByElement.get(n);e&&e.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(n){const e=this.playersByQueriedElement.get(n);e&&e.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(n=>{if(this.players.length)return gc(this.players).onDone(()=>n());n()})}processLeaveNode(n){const e=n[rs];if(e&&e.setForRemoval){if(n[rs]=mP,e.namespaceId){this.destroyInnerAnimations(n);const i=this._fetchNamespace(e.namespaceId);i&&i.clearElementCache(n)}this._onRemovalComplete(n,e.setForRemoval)}this.driver.matchesElement(n,fP)&&this.markElementAsDisabled(n,!1),this.driver.query(n,fP,!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(n=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,r)=>this._balanceNamespaceList(i,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++)os(this.collectedEnterElements[i],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const i=[];try{e=this._flushAnimations(i,n)}finally{for(let r=0;r<i.length;r++)i[r]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++)this.processLeaveNode(this.collectedLeaveElements[i]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){const i=this._whenQuietFns;this._whenQuietFns=[],e.length?gc(e).onDone(()=>{i.forEach(r=>r())}):i.forEach(r=>r())}}reportError(n){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${n.join("\n")}`)}_flushAnimations(n,e){const i=new k_,r=[],o=new Map,s=[],l=new Map,c=new Map,d=new Map,m=new Set;this.disabledNodes.forEach(Ce=>{m.add(Ce);const Ue=this.driver.query(Ce,".ng-animate-queued",!0);for(let ct=0;ct<Ue.length;ct++)m.add(Ue[ct])});const _=this.bodyNode,w=Array.from(this.statesByElement.keys()),E=vP(w,this.collectedEnterElements),D=new Map;let N=0;E.forEach((Ce,Ue)=>{const ct=GC+N++;D.set(Ue,ct),Ce.forEach(Wt=>os(Wt,ct))});const F=[],j=new Set,H=new Set;for(let Ce=0;Ce<this.collectedLeaveElements.length;Ce++){const Ue=this.collectedLeaveElements[Ce],ct=Ue[rs];ct&&ct.setForRemoval&&(F.push(Ue),j.add(Ue),ct.hasAnimation?this.driver.query(Ue,".ng-star-inserted",!0).forEach(Wt=>j.add(Wt)):H.add(Ue))}const X=new Map,de=vP(w,Array.from(j));de.forEach((Ce,Ue)=>{const ct=g_+N++;X.set(Ue,ct),Ce.forEach(Wt=>os(Wt,ct))}),n.push(()=>{E.forEach((Ce,Ue)=>{const ct=D.get(Ue);Ce.forEach(Wt=>sh(Wt,ct))}),de.forEach((Ce,Ue)=>{const ct=X.get(Ue);Ce.forEach(Wt=>sh(Wt,ct))}),F.forEach(Ce=>{this.processLeaveNode(Ce)})});const Be=[],Gt=[];for(let Ce=this._namespaceList.length-1;Ce>=0;Ce--)this._namespaceList[Ce].drainQueuedTransitions(e).forEach(ct=>{const Wt=ct.player,Gi=ct.element;if(Be.push(Wt),this.collectedEnterElements.length){const Ha=Gi[rs];if(Ha&&Ha.setForMove)return void Wt.destroy()}const Ba=!_||!this.driver.containsElement(_,Gi),jo=X.get(Gi),Ac=D.get(Gi),Jn=this._buildInstruction(ct,i,Ac,jo,Ba);if(Jn.errors&&Jn.errors.length)Gt.push(Jn);else{if(Ba)return Wt.onStart(()=>fu(Gi,Jn.fromStyles)),Wt.onDestroy(()=>xa(Gi,Jn.toStyles)),void r.push(Wt);if(ct.isFallbackTransition)return Wt.onStart(()=>fu(Gi,Jn.fromStyles)),Wt.onDestroy(()=>xa(Gi,Jn.toStyles)),void r.push(Wt);Jn.timelines.forEach(Ha=>Ha.stretchStartingKeyframe=!0),i.append(Gi,Jn.timelines),s.push({instruction:Jn,player:Wt,element:Gi}),Jn.queriedElements.forEach(Ha=>Oo(l,Ha,[]).push(Wt)),Jn.preStyleProps.forEach((Ha,Cm)=>{const Ey=Object.keys(Ha);if(Ey.length){let Uu=c.get(Cm);Uu||c.set(Cm,Uu=new Set),Ey.forEach(HS=>Uu.add(HS))}}),Jn.postStyleProps.forEach((Ha,Cm)=>{const Ey=Object.keys(Ha);let Uu=d.get(Cm);Uu||d.set(Cm,Uu=new Set),Ey.forEach(HS=>Uu.add(HS))})}});if(Gt.length){const Ce=[];Gt.forEach(Ue=>{Ce.push(`@${Ue.triggerName} has failed due to:\n`),Ue.errors.forEach(ct=>Ce.push(`- ${ct}\n`))}),Be.forEach(Ue=>Ue.destroy()),this.reportError(Ce)}const Jt=new Map,Nn=new Map;s.forEach(Ce=>{const Ue=Ce.element;i.has(Ue)&&(Nn.set(Ue,Ue),this._beforeAnimationBuild(Ce.player.namespaceId,Ce.instruction,Jt))}),r.forEach(Ce=>{const Ue=Ce.element;this._getPreviousPlayers(Ue,!1,Ce.namespaceId,Ce.triggerName,null).forEach(Wt=>{Oo(Jt,Ue,[]).push(Wt),Wt.destroy()})});const wr=F.filter(Ce=>bP(Ce,c,d)),Sr=new Map;_P(Sr,this.driver,H,d,fl).forEach(Ce=>{bP(Ce,c,d)&&wr.push(Ce)});const Nl=new Map;E.forEach((Ce,Ue)=>{_P(Nl,this.driver,new Set(Ce),c,"!")}),wr.forEach(Ce=>{const Ue=Sr.get(Ce),ct=Nl.get(Ce);Sr.set(Ce,Object.assign(Object.assign({},Ue),ct))});const ea=[],Bh=[],Hh={};s.forEach(Ce=>{const{element:Ue,player:ct,instruction:Wt}=Ce;if(i.has(Ue)){if(m.has(Ue))return ct.onDestroy(()=>xa(Ue,Wt.toStyles)),ct.disabled=!0,ct.overrideTotalTime(Wt.totalTime),void r.push(ct);let Gi=Hh;if(Nn.size>1){let jo=Ue;const Ac=[];for(;jo=jo.parentNode;){const Jn=Nn.get(jo);if(Jn){Gi=Jn;break}Ac.push(jo)}Ac.forEach(Jn=>Nn.set(Jn,Gi))}const Ba=this._buildAnimation(ct.namespaceId,Wt,Jt,o,Nl,Sr);if(ct.setRealPlayer(Ba),Gi===Hh)ea.push(ct);else{const jo=this.playersByElement.get(Gi);jo&&jo.length&&(ct.parentPlayer=gc(jo)),r.push(ct)}}else fu(Ue,Wt.fromStyles),ct.onDestroy(()=>xa(Ue,Wt.toStyles)),Bh.push(ct),m.has(Ue)&&r.push(ct)}),Bh.forEach(Ce=>{const Ue=o.get(Ce.element);if(Ue&&Ue.length){const ct=gc(Ue);Ce.setRealPlayer(ct)}}),r.forEach(Ce=>{Ce.parentPlayer?Ce.syncPlayerEvents(Ce.parentPlayer):Ce.destroy()});for(let Ce=0;Ce<F.length;Ce++){const Ue=F[Ce],ct=Ue[rs];if(sh(Ue,g_),ct&&ct.hasAnimation)continue;let Wt=[];if(l.size){let Ba=l.get(Ue);Ba&&Ba.length&&Wt.push(...Ba);let jo=this.driver.query(Ue,WC,!0);for(let Ac=0;Ac<jo.length;Ac++){let Jn=l.get(jo[Ac]);Jn&&Jn.length&&Wt.push(...Jn)}}const Gi=Wt.filter(Ba=>!Ba.destroyed);Gi.length?Tz(this,Ue,Gi):this.processLeaveNode(Ue)}return F.length=0,ea.forEach(Ce=>{this.players.push(Ce),Ce.onDone(()=>{Ce.destroy();const Ue=this.players.indexOf(Ce);this.players.splice(Ue,1)}),Ce.play()}),ea}elementContainsData(n,e){let i=!1;const r=e[rs];return r&&r.setForRemoval&&(i=!0),this.playersByElement.has(e)&&(i=!0),this.playersByQueriedElement.has(e)&&(i=!0),this.statesByElement.has(e)&&(i=!0),this._fetchNamespace(n).elementContainsData(e)||i}afterFlush(n){this._flushFns.push(n)}afterFlushAnimationsDone(n){this._whenQuietFns.push(n)}_getPreviousPlayers(n,e,i,r,o){let s=[];if(e){const l=this.playersByQueriedElement.get(n);l&&(s=l)}else{const l=this.playersByElement.get(n);if(l){const c=!o||o==gf;l.forEach(d=>{d.queued||!c&&d.triggerName!=r||s.push(d)})}}return(i||r)&&(s=s.filter(l=>!(i&&i!=l.namespaceId||r&&r!=l.triggerName))),s}_beforeAnimationBuild(n,e,i){const o=e.element,s=e.isRemovalTransition?void 0:n,l=e.isRemovalTransition?void 0:e.triggerName;for(const c of e.timelines){const d=c.element,m=d!==o,_=Oo(i,d,[]);this._getPreviousPlayers(d,m,s,l,e.toState).forEach(E=>{const D=E.getRealPlayer();D.beforeDestroy&&D.beforeDestroy(),E.destroy(),_.push(E)})}fu(o,e.fromStyles)}_buildAnimation(n,e,i,r,o,s){const l=e.triggerName,c=e.element,d=[],m=new Set,_=new Set,w=e.timelines.map(D=>{const N=D.element;m.add(N);const F=N[rs];if(F&&F.removedBeforeQueried)return new rh(D.duration,D.delay);const j=N!==c,H=function(t){const n=[];return yP(t,n),n}((i.get(N)||_z).map(Jt=>Jt.getRealPlayer())).filter(Jt=>!!Jt.element&&Jt.element===N),X=o.get(N),de=s.get(N),Be=zI(0,this._normalizer,0,D.keyframes,X,de),Gt=this._buildPlayer(D,Be,H);if(D.subTimeline&&r&&_.add(N),j){const Jt=new a0(n,l,N);Jt.setRealPlayer(Gt),d.push(Jt)}return Gt});d.forEach(D=>{Oo(this.playersByQueriedElement,D.element,[]).push(D),D.onDone(()=>function(t,n,e){let i;if(t instanceof Map){if(i=t.get(n),i){if(i.length){const r=i.indexOf(e);i.splice(r,1)}0==i.length&&t.delete(n)}}else if(i=t[n],i){if(i.length){const r=i.indexOf(e);i.splice(r,1)}0==i.length&&delete t[n]}return i}(this.playersByQueriedElement,D.element,D))}),m.forEach(D=>os(D,JI));const E=gc(w);return E.onDestroy(()=>{m.forEach(D=>sh(D,JI)),xa(c,e.toStyles)}),_.forEach(D=>{Oo(r,D,[]).push(E)}),E}_buildPlayer(n,e,i){return e.length>0?this.driver.animate(n.element,e,n.duration,n.delay,n.easing,i):new rh(n.duration,n.delay)}}class a0{constructor(n,e,i){this.namespaceId=n,this.triggerName=e,this.element=i,this._player=new rh,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(n){this._containsRealPlayer||(this._player=n,Object.keys(this._queuedCallbacks).forEach(e=>{this._queuedCallbacks[e].forEach(i=>FC(n,e,void 0,i))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(n.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(n){this.totalTime=n}syncPlayerEvents(n){const e=this._player;e.triggerCallback&&n.onStart(()=>e.triggerCallback("start")),n.onDone(()=>this.finish()),n.onDestroy(()=>this.destroy())}_queueEvent(n,e){Oo(this._queuedCallbacks,n,[]).push(e)}onDone(n){this.queued&&this._queueEvent("done",n),this._player.onDone(n)}onStart(n){this.queued&&this._queueEvent("start",n),this._player.onStart(n)}onDestroy(n){this.queued&&this._queueEvent("destroy",n),this._player.onDestroy(n)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(n){this.queued||this._player.setPosition(n)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(n){const e=this._player;e.triggerCallback&&e.triggerCallback(n)}}function M_(t){return t&&1===t.nodeType}function gP(t,n){const e=t.style.display;return t.style.display=null!=n?n:"none",e}function _P(t,n,e,i,r){const o=[];e.forEach(c=>o.push(gP(c)));const s=[];i.forEach((c,d)=>{const m={};c.forEach(_=>{const w=m[_]=n.computeStyle(d,_,r);(!w||0==w.length)&&(d[rs]=vz,s.push(d))}),t.set(d,m)});let l=0;return e.forEach(c=>gP(c,o[l++])),s}function vP(t,n){const e=new Map;if(t.forEach(l=>e.set(l,[])),0==n.length)return e;const r=new Set(n),o=new Map;function s(l){if(!l)return 1;let c=o.get(l);if(c)return c;const d=l.parentNode;return c=e.has(d)?d:r.has(d)?1:s(d),o.set(l,c),c}return n.forEach(l=>{const c=s(l);1!==c&&e.get(c).push(l)}),e}const I_="$$classes";function os(t,n){if(t.classList)t.classList.add(n);else{let e=t[I_];e||(e=t[I_]={}),e[n]=!0}}function sh(t,n){if(t.classList)t.classList.remove(n);else{let e=t[I_];e&&delete e[n]}}function Tz(t,n,e){gc(e).onDone(()=>t.processLeaveNode(n))}function yP(t,n){for(let e=0;e<t.length;e++){const i=t[e];i instanceof HI?yP(i.players,n):n.push(i)}}function bP(t,n,e){const i=e.get(t);if(!i)return!1;let r=n.get(t);return r?i.forEach(o=>r.add(o)):n.set(t,i),e.delete(t),!0}class P_{constructor(n,e,i){this.bodyNode=n,this._driver=e,this._normalizer=i,this._triggerCache={},this.onRemovalComplete=(r,o)=>{},this._transitionEngine=new bz(n,e,i),this._timelineEngine=new pz(n,e,i),this._transitionEngine.onRemovalComplete=(r,o)=>this.onRemovalComplete(r,o)}registerTrigger(n,e,i,r,o){const s=n+"-"+r;let l=this._triggerCache[s];if(!l){const c=[],d=YC(this._driver,o,c);if(c.length)throw new Error(`The animation trigger "${r}" has failed to build due to the following errors:\n - ${c.join("\n - ")}`);l=function(t,n,e){return new uz(t,n,e)}(r,d,this._normalizer),this._triggerCache[s]=l}this._transitionEngine.registerTrigger(e,r,l)}register(n,e){this._transitionEngine.register(n,e)}destroy(n,e){this._transitionEngine.destroy(n,e)}onInsert(n,e,i,r){this._transitionEngine.insertNode(n,e,i,r)}onRemove(n,e,i,r){this._transitionEngine.removeNode(n,e,r||!1,i)}disableAnimations(n,e){this._transitionEngine.markElementAsDisabled(n,e)}process(n,e,i,r){if("@"==i.charAt(0)){const[o,s]=GI(i);this._timelineEngine.command(o,e,s,r)}else this._transitionEngine.trigger(n,e,i,r)}listen(n,e,i,r,o){if("@"==i.charAt(0)){const[s,l]=GI(i);return this._timelineEngine.listen(s,e,l,o)}return this._transitionEngine.listen(n,e,i,r,o)}flush(n=-1){this._transitionEngine.flush(n)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function CP(t,n){let e=null,i=null;return Array.isArray(n)&&n.length?(e=l0(n[0]),n.length>1&&(i=l0(n[n.length-1]))):n&&(e=l0(n)),e||i?new Dz(t,e,i):null}let Dz=(()=>{class t{constructor(e,i,r){this._element=e,this._startStyles=i,this._endStyles=r,this._state=0;let o=t.initialStylesByElement.get(e);o||t.initialStylesByElement.set(e,o={}),this._initialStyles=o}start(){this._state<1&&(this._startStyles&&xa(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(xa(this._element,this._initialStyles),this._endStyles&&(xa(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(t.initialStylesByElement.delete(this._element),this._startStyles&&(fu(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(fu(this._element,this._endStyles),this._endStyles=null),xa(this._element,this._initialStyles),this._state=3)}}return t.initialStylesByElement=new WeakMap,t})();function l0(t){let n=null;const e=Object.keys(t);for(let i=0;i<e.length;i++){const r=e[i];xz(r)&&(n=n||{},n[r]=t[r])}return n}function xz(t){return"display"===t||"position"===t}const wP="animation",SP="animationend";class Pz{constructor(n,e,i,r,o,s,l){this._element=n,this._name=e,this._duration=i,this._delay=r,this._easing=o,this._fillMode=s,this._onDoneFn=l,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=c=>this._handleCallback(c)}apply(){(function(t,n){const e=u0(t,"").trim();let i=0;e.length&&(function(t,n){let e=0;for(let i=0;i<t.length;i++)","===t.charAt(i)&&e++;return e}(e)+1,n=`${e}, ${n}`),A_(t,"",n)})(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),kP(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){TP(this._element,this._name,"paused")}resume(){TP(this._element,this._name,"running")}setPosition(n){const e=EP(this._element,this._name);this._position=n*this._duration,A_(this._element,"Delay",`-${this._position}ms`,e)}getPosition(){return this._position}_handleCallback(n){const e=n._ngTestManualTimestamp||Date.now(),i=1e3*parseFloat(n.elapsedTime.toFixed(3));n.animationName==this._name&&Math.max(e-this._startTime,0)>=this._delay&&i>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),kP(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function(t,n){const i=u0(t,"").split(","),r=c0(i,n);r>=0&&(i.splice(r,1),A_(t,"",i.join(",")))}(this._element,this._name))}}function TP(t,n,e){A_(t,"PlayState",e,EP(t,n))}function EP(t,n){const e=u0(t,"");return e.indexOf(",")>0?c0(e.split(","),n):c0([e],n)}function c0(t,n){for(let e=0;e<t.length;e++)if(t[e].indexOf(n)>=0)return e;return-1}function kP(t,n,e){e?t.removeEventListener(SP,n):t.addEventListener(SP,n)}function A_(t,n,e,i){const r=wP+n;if(null!=i){const o=t.style[r];if(o.length){const s=o.split(",");s[i]=e,e=s.join(",")}}t.style[r]=e}function u0(t,n){return t.style[wP+n]||""}class DP{constructor(n,e,i,r,o,s,l,c){this.element=n,this.keyframes=e,this.animationName=i,this._duration=r,this._delay=o,this._finalStyles=l,this._specialStyles=c,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this.currentSnapshot={},this._state=0,this.easing=s||"linear",this.totalTime=r+o,this._buildStyler()}onStart(n){this._onStartFns.push(n)}onDone(n){this._onDoneFns.push(n)}onDestroy(n){this._onDestroyFns.push(n)}destroy(){this.init(),!(this._state>=4)&&(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(n=>n()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(n=>n()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(n=>n()),this._onStartFns=[]}finish(){this.init(),!(this._state>=3)&&(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(n){this._styler.setPosition(n)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._state=0,this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new Pz(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(n){const e="start"==n?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}beforeDestroy(){this.init();const n={};if(this.hasStarted()){const e=this._state>=3;Object.keys(this._finalStyles).forEach(i=>{"offset"!=i&&(n[i]=e?this._finalStyles[i]:KC(this.element,i))})}this.currentSnapshot=n}}class Lz extends rh{constructor(n,e){super(),this.element=n,this._startingStyles={},this.__initialized=!1,this._styles=ZI(e)}init(){this.__initialized||!this._startingStyles||(this.__initialized=!0,Object.keys(this._styles).forEach(n=>{this._startingStyles[n]=this.element.style[n]}),super.init())}play(){!this._startingStyles||(this.init(),Object.keys(this._styles).forEach(n=>this.element.style.setProperty(n,this._styles[n])),super.play())}destroy(){!this._startingStyles||(Object.keys(this._startingStyles).forEach(n=>{const e=this._startingStyles[n];e?this.element.style.setProperty(n,e):this.element.style.removeProperty(n)}),this._startingStyles=null,super.destroy())}}class MP{constructor(){this._count=0}validateStyleProperty(n){return VC(n)}matchesElement(n,e){return BC(n,e)}containsElement(n,e){return HC(n,e)}query(n,e,i){return jC(n,e,i)}computeStyle(n,e,i){return window.getComputedStyle(n)[e]}buildKeyframeElement(n,e,i){i=i.map(l=>ZI(l));let r=`@keyframes ${e} {\n`,o="";i.forEach(l=>{o=" ";const c=parseFloat(l.offset);r+=`${o}${100*c}% {\n`,o+=" ",Object.keys(l).forEach(d=>{const m=l[d];switch(d){case"offset":return;case"easing":return void(m&&(r+=`${o}animation-timing-function: ${m};\n`));default:return void(r+=`${o}${d}: ${m};\n`)}}),r+=`${o}}\n`}),r+="}\n";const s=document.createElement("style");return s.textContent=r,s}animate(n,e,i,r,o,s=[],l){const c=s.filter(F=>F instanceof DP),d={};iP(i,r)&&c.forEach(F=>{let j=F.currentSnapshot;Object.keys(j).forEach(H=>d[H]=j[H])});const m=function(t){let n={};return t&&(Array.isArray(t)?t:[t]).forEach(i=>{Object.keys(i).forEach(r=>{"offset"==r||"easing"==r||(n[r]=i[r])})}),n}(e=rP(n,e,d));if(0==i)return new Lz(n,m);const _="gen_css_kf_"+this._count++,w=this.buildKeyframeElement(n,_,e);(function(t){var n;const e=null===(n=t.getRootNode)||void 0===n?void 0:n.call(t);return"undefined"!=typeof ShadowRoot&&e instanceof ShadowRoot?e:document.head})(n).appendChild(w);const D=CP(n,e),N=new DP(n,e,_,i,r,o,m,D);return N.onDestroy(()=>function(t){t.parentNode.removeChild(t)}(w)),N}}class PP{constructor(n,e,i,r){this.element=n,this.keyframes=e,this.options=i,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(n=>n()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const n=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,n,this.options),this._finalKeyframe=n.length?n[n.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(n,e,i){return n.animate(e,i)}onStart(n){this._onStartFns.push(n)}onDone(n){this._onDoneFns.push(n)}onDestroy(n){this._onDestroyFns.push(n)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(n=>n()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(n=>n()),this._onDestroyFns=[])}setPosition(n){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=n*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const n={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(e=>{"offset"!=e&&(n[e]=this._finished?this._finalKeyframe[e]:KC(this.element,e))}),this.currentSnapshot=n}triggerCallback(n){const e="start"==n?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}}class Hz{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(AP().toString()),this._cssKeyframesDriver=new MP}validateStyleProperty(n){return VC(n)}matchesElement(n,e){return BC(n,e)}containsElement(n,e){return HC(n,e)}query(n,e,i){return jC(n,e,i)}computeStyle(n,e,i){return window.getComputedStyle(n)[e]}overrideWebAnimationsSupport(n){this._isNativeImpl=n}animate(n,e,i,r,o,s=[],l){if(!l&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(n,e,i,r,o,s);const m={duration:i,delay:r,fill:0==r?"both":"forwards"};o&&(m.easing=o);const _={},w=s.filter(D=>D instanceof PP);iP(i,r)&&w.forEach(D=>{let N=D.currentSnapshot;Object.keys(N).forEach(F=>_[F]=N[F])});const E=CP(n,e=rP(n,e=e.map(D=>_c(D,!1)),_));return new PP(n,e,m,E)}}function AP(){return jI()&&Element.prototype.animate||{}}let zz=(()=>{class t extends LI{constructor(e,i){super(),this._nextAnimationId=0,this._renderer=e.createRenderer(i.body,{id:"0",encapsulation:I.None,styles:[],data:{animation:[]}})}build(e){const i=this._nextAnimationId.toString();this._nextAnimationId++;const r=Array.isArray(e)?UI(e):e;return OP(this._renderer,null,i,"register",[r]),new Gz(i,this._renderer)}}return t.\u0275fac=function(e){return new(e||t)(P(ul),P(Ot))},t.\u0275prov=B({token:t,factory:t.\u0275fac}),t})();class Gz extends class{}{constructor(n,e){super(),this._id=n,this._renderer=e}create(n,e){return new Wz(this._id,n,e||{},this._renderer)}}class Wz{constructor(n,e,i,r){this.id=n,this.element=e,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",i)}_listen(n,e){return this._renderer.listen(this.element,`@@${this.id}:${n}`,e)}_command(n,...e){return OP(this._renderer,this.element,this.id,n,e)}onDone(n){this._listen("done",n)}onStart(n){this._listen("start",n)}onDestroy(n){this._listen("destroy",n)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(n){this._command("setPosition",n)}getPosition(){var n,e;return null!==(e=null===(n=this._renderer.engine.players[+this.id])||void 0===n?void 0:n.getPosition())&&void 0!==e?e:0}}function OP(t,n,e,i,r){return t.setProperty(n,`@@${e}:${i}`,r)}const NP="@.disabled";let qz=(()=>{class t{constructor(e,i,r){this.delegate=e,this.engine=i,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),i.onRemovalComplete=(o,s)=>{s&&s.parentNode(o)&&s.removeChild(o.parentNode,o)}}createRenderer(e,i){const o=this.delegate.createRenderer(e,i);if(!(e&&i&&i.data&&i.data.animation)){let m=this._rendererCache.get(o);return m||(m=new FP("",o,this.engine),this._rendererCache.set(o,m)),m}const s=i.id,l=i.id+"-"+this._currentId;this._currentId++,this.engine.register(l,e);const c=m=>{Array.isArray(m)?m.forEach(c):this.engine.registerTrigger(s,l,e,m.name,m)};return i.data.animation.forEach(c),new Qz(this,l,o,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(e,i,r){e>=0&&e<this._microtaskId?this._zone.run(()=>i(r)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(o=>{const[s,l]=o;s(l)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([i,r]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return t.\u0275fac=function(e){return new(e||t)(P(ul),P(P_),P(it))},t.\u0275prov=B({token:t,factory:t.\u0275fac}),t})();class FP{constructor(n,e,i){this.namespaceId=n,this.delegate=e,this.engine=i,this.destroyNode=this.delegate.destroyNode?r=>e.destroyNode(r):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(n,e){return this.delegate.createElement(n,e)}createComment(n){return this.delegate.createComment(n)}createText(n){return this.delegate.createText(n)}appendChild(n,e){this.delegate.appendChild(n,e),this.engine.onInsert(this.namespaceId,e,n,!1)}insertBefore(n,e,i,r=!0){this.delegate.insertBefore(n,e,i),this.engine.onInsert(this.namespaceId,e,n,r)}removeChild(n,e,i){this.engine.onRemove(this.namespaceId,e,this.delegate,i)}selectRootElement(n,e){return this.delegate.selectRootElement(n,e)}parentNode(n){return this.delegate.parentNode(n)}nextSibling(n){return this.delegate.nextSibling(n)}setAttribute(n,e,i,r){this.delegate.setAttribute(n,e,i,r)}removeAttribute(n,e,i){this.delegate.removeAttribute(n,e,i)}addClass(n,e){this.delegate.addClass(n,e)}removeClass(n,e){this.delegate.removeClass(n,e)}setStyle(n,e,i,r){this.delegate.setStyle(n,e,i,r)}removeStyle(n,e,i){this.delegate.removeStyle(n,e,i)}setProperty(n,e,i){"@"==e.charAt(0)&&e==NP?this.disableAnimations(n,!!i):this.delegate.setProperty(n,e,i)}setValue(n,e){this.delegate.setValue(n,e)}listen(n,e,i){return this.delegate.listen(n,e,i)}disableAnimations(n,e){this.engine.disableAnimations(n,e)}}class Qz extends FP{constructor(n,e,i,r){super(e,i,r),this.factory=n,this.namespaceId=e}setProperty(n,e,i){"@"==e.charAt(0)?"."==e.charAt(1)&&e==NP?this.disableAnimations(n,i=void 0===i||!!i):this.engine.process(this.namespaceId,n,e.substr(1),i):this.delegate.setProperty(n,e,i)}listen(n,e,i){if("@"==e.charAt(0)){const r=function(t){switch(t){case"body":return document.body;case"document":return document;case"window":return window;default:return t}}(n);let o=e.substr(1),s="";return"@"!=o.charAt(0)&&([o,s]=function(t){const n=t.indexOf(".");return[t.substring(0,n),t.substr(n+1)]}(o)),this.engine.listen(this.namespaceId,r,o,s,l=>{this.factory.scheduleListenerCallback(l._data||-1,i,l)})}return this.delegate.listen(n,e,i)}}let Yz=(()=>{class t extends P_{constructor(e,i,r){super(e.body,i,r)}ngOnDestroy(){this.flush()}}return t.\u0275fac=function(e){return new(e||t)(P(Ot),P(zC),P(n0))},t.\u0275prov=B({token:t,factory:t.\u0275fac}),t})();const RP=new tt("AnimationModuleType"),LP=[{provide:LI,useClass:zz},{provide:n0,useFactory:function(){return new rz}},{provide:P_,useClass:Yz},{provide:ul,useFactory:function(t,n,e){return new qz(t,n,e)},deps:[f_,P_,it]}],$P=[{provide:zC,useFactory:function(){return"function"==typeof AP()?new Hz:new MP}},{provide:RP,useValue:"BrowserAnimations"},...LP],UP=[{provide:zC,useClass:KI},{provide:RP,useValue:"NoopAnimations"},...LP];let tG=(()=>{class t{static withConfig(e){return{ngModule:t,providers:e.disableAnimations?UP:$P}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=et({type:t}),t.\u0275inj=Te({providers:$P,imports:[PC]}),t})();const ss=new _t(t=>t.complete());function N_(t){return t?function(t){return new _t(n=>t.schedule(()=>n.complete()))}(t):ss}function Ee(...t){let n=t[t.length-1];return Ln(n)?(t.pop(),Xt(t,n)):vs(t)}function Ci(t,n,e,i){return Xn(e)&&(i=e,e=void 0),i?Ci(t,n,e).pipe(he(r=>mt(r)?i(...r):i(r))):new _t(r=>{VP(t,n,function(s){r.next(arguments.length>1?Array.prototype.slice.call(arguments):s)},r,e)})}function VP(t,n,e,i,r){let o;if(function(t){return t&&"function"==typeof t.addEventListener&&"function"==typeof t.removeEventListener}(t)){const s=t;t.addEventListener(n,e,r),o=()=>s.removeEventListener(n,e,r)}else if(function(t){return t&&"function"==typeof t.on&&"function"==typeof t.off}(t)){const s=t;t.on(n,e),o=()=>s.off(n,e)}else if(function(t){return t&&"function"==typeof t.addListener&&"function"==typeof t.removeListener}(t)){const s=t;t.addListener(n,e),o=()=>s.removeListener(n,e)}else{if(!t||!t.length)throw new TypeError("Invalid event target");for(let s=0,l=t.length;s<l;s++)VP(t[s],n,e,i,r)}i.add(o)}class sG extends gt{constructor(n,e){super()}schedule(n,e=0){return this}}class BP extends sG{constructor(n,e){super(n,e),this.scheduler=n,this.work=e,this.pending=!1}schedule(n,e=0){if(this.closed)return this;this.state=n;const i=this.id,r=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(r,i,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}requestAsyncId(n,e,i=0){return setInterval(n.flush.bind(n,this),i)}recycleAsyncId(n,e,i=0){if(null!==i&&this.delay===i&&!1===this.pending)return e;clearInterval(e)}execute(n,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(n,e);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(n,e){let r,i=!1;try{this.work(n)}catch(o){i=!0,r=!!o&&o||new Error(o)}if(i)return this.unsubscribe(),r}_unsubscribe(){const n=this.id,e=this.scheduler,i=e.actions,r=i.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&i.splice(r,1),null!=n&&(this.id=this.recycleAsyncId(e,n,null)),this.delay=null}}let HP=(()=>{class t{constructor(e,i=t.now){this.SchedulerAction=e,this.now=i}schedule(e,i=0,r){return new this.SchedulerAction(this,e).schedule(r,i)}}return t.now=()=>Date.now(),t})();class ml extends HP{constructor(n,e=HP.now){super(n,()=>ml.delegate&&ml.delegate!==this?ml.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(n,e=0,i){return ml.delegate&&ml.delegate!==this?ml.delegate.schedule(n,e,i):super.schedule(n,e,i)}flush(n){const{actions:e}=this;if(this.active)return void e.push(n);let i;this.active=!0;do{if(i=n.execute(n.state,n.delay))break}while(n=e.shift());if(this.active=!1,i){for(;n=e.shift();)n.unsubscribe();throw i}}}const d0=new ml(BP);function jP(t){return!mt(t)&&t-parseFloat(t)+1>=0}function F_(t=0,n,e){let i=-1;return jP(n)?i=Number(n)<1?1:Number(n):Ln(n)&&(e=n),Ln(e)||(e=d0),new _t(r=>{const o=jP(t)?t:+t-e.now();return e.schedule(aG,o,{index:0,period:i,subscriber:r})})}function aG(t){const{index:n,period:e,subscriber:i}=t;if(i.next(n),!i.closed){if(-1===e)return i.complete();t.index=n+1,this.schedule(t,e)}}class h0 extends vt{notifyNext(n,e,i,r,o){this.destination.next(e)}notifyError(n,e){this.destination.error(n)}notifyComplete(n){this.destination.complete()}}class lG extends vt{constructor(n,e,i){super(),this.parent=n,this.outerValue=e,this.outerIndex=i,this.index=0}_next(n){this.parent.notifyNext(this.outerValue,n,this.outerIndex,this.index++,this)}_error(n){this.parent.notifyError(n,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}function p0(t,n,e,i,r=new lG(t,e,i)){if(!r.closed)return n instanceof _t?n.subscribe(r):Ul(n)(r)}function zP(...t){if(1===t.length){if(!mt(t[0]))return t[0];t=t[0]}return vs(t,void 0).lift(new cG)}class cG{call(n,e){return e.subscribe(new uG(n))}}class uG extends h0{constructor(n){super(n),this.hasFirst=!1,this.observables=[],this.subscriptions=[]}_next(n){this.observables.push(n)}_complete(){const n=this.observables,e=n.length;if(0===e)this.destination.complete();else{for(let i=0;i<e&&!this.hasFirst;i++){const o=p0(this,n[i],void 0,i);this.subscriptions&&this.subscriptions.push(o),this.add(o)}this.observables=null}}notifyNext(n,e,i){if(!this.hasFirst){this.hasFirst=!0;for(let r=0;r<this.subscriptions.length;r++)if(r!==i){let o=this.subscriptions[r];o.unsubscribe(),this.remove(o)}this.subscriptions=null}this.destination.next(e)}}class ln extends Fe{constructor(n){super(),this._value=n}get value(){return this.getValue()}_subscribe(n){const e=super._subscribe(n);return e&&!e.closed&&n.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new un;return this._value}next(n){super.next(this._value=n)}}const GP={};function R_(...t){let n,e;return Ln(t[t.length-1])&&(e=t.pop()),"function"==typeof t[t.length-1]&&(n=t.pop()),1===t.length&&mt(t[0])&&(t=t[0]),vs(t,e).lift(new dG(n))}class dG{constructor(n){this.resultSelector=n}call(n,e){return e.subscribe(new hG(n,this.resultSelector))}}class hG extends h0{constructor(n,e){super(n),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(n){this.values.push(GP),this.observables.push(n)}_complete(){const n=this.observables,e=n.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let i=0;i<e;i++)this.add(p0(this,n[i],void 0,i))}}notifyComplete(n){0==(this.active-=1)&&this.destination.complete()}notifyNext(n,e,i){const r=this.values,s=this.toRespond?r[i]===GP?--this.toRespond:this.toRespond:0;r[i]=e,0===s&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))}_tryResultSelector(n){let e;try{e=this.resultSelector.apply(this,n)}catch(i){return void this.destination.error(i)}this.destination.next(e)}}function gl(){}const vc=new _t(gl);function L_(...t){const n=t[t.length-1];return"function"==typeof n&&t.pop(),vs(t,void 0).lift(new pG(n))}class pG{constructor(n){this.resultSelector=n}call(n,e){return e.subscribe(new fG(n,this.resultSelector))}}class fG extends vt{constructor(n,e,i=Object.create(null)){super(n),this.resultSelector=e,this.iterators=[],this.active=0,this.resultSelector="function"==typeof e?e:void 0}_next(n){const e=this.iterators;mt(n)?e.push(new gG(n)):e.push("function"==typeof n[Sn]?new mG(n[Sn]()):new _G(this.destination,this,n))}_complete(){const n=this.iterators,e=n.length;if(this.unsubscribe(),0!==e){this.active=e;for(let i=0;i<e;i++){let r=n[i];r.stillUnsubscribed?this.destination.add(r.subscribe()):this.active--}}else this.destination.complete()}notifyInactive(){this.active--,0===this.active&&this.destination.complete()}checkIterators(){const n=this.iterators,e=n.length,i=this.destination;for(let s=0;s<e;s++){let l=n[s];if("function"==typeof l.hasValue&&!l.hasValue())return}let r=!1;const o=[];for(let s=0;s<e;s++){let l=n[s],c=l.next();if(l.hasCompleted()&&(r=!0),c.done)return void i.complete();o.push(c.value)}this.resultSelector?this._tryresultSelector(o):i.next(o),r&&i.complete()}_tryresultSelector(n){let e;try{e=this.resultSelector.apply(this,n)}catch(i){return void this.destination.error(i)}this.destination.next(e)}}class mG{constructor(n){this.iterator=n,this.nextResult=n.next()}hasValue(){return!0}next(){const n=this.nextResult;return this.nextResult=this.iterator.next(),n}hasCompleted(){const n=this.nextResult;return Boolean(n&&n.done)}}class gG{constructor(n){this.array=n,this.index=0,this.length=0,this.length=n.length}[Sn](){return this}next(n){const e=this.index++;return e<this.length?{value:this.array[e],done:!1}:{value:null,done:!0}}hasValue(){return this.array.length>this.index}hasCompleted(){return this.array.length===this.index}}class _G extends Mi{constructor(n,e,i){super(n),this.parent=e,this.observable=i,this.stillUnsubscribed=!0,this.buffer=[],this.isComplete=!1}[Sn](){return this}next(){const n=this.buffer;return 0===n.length&&this.isComplete?{value:null,done:!0}:{value:n.shift(),done:!1}}hasValue(){return this.buffer.length>0}hasCompleted(){return 0===this.buffer.length&&this.isComplete}notifyComplete(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()}notifyNext(n){this.buffer.push(n),this.parent.checkIterators()}subscribe(){return qr(this.observable,new lr(this))}}function _f(...t){return _s(1)(Ee(...t))}function Qn(t){return n=>n.lift(new bG(t))}class bG{constructor(n){this.notifier=n}call(n,e){const i=new CG(n),r=qr(this.notifier,new lr(i));return r&&!i.seenValue?(i.add(r),e.subscribe(i)):i}}class CG extends Mi{constructor(n){super(n),this.seenValue=!1}notifyNext(){this.seenValue=!0,this.complete()}notifyComplete(){}}function $t(t,n){return function(i){return i.lift(new wG(t,n))}}class wG{constructor(n,e){this.predicate=n,this.thisArg=e}call(n,e){return e.subscribe(new SG(n,this.predicate,this.thisArg))}}class SG extends vt{constructor(n,e,i){super(n),this.predicate=e,this.thisArg=i,this.count=0}_next(n){let e;try{e=this.predicate.call(this.thisArg,n,this.count++)}catch(i){return void this.destination.error(i)}e&&this.destination.next(n)}}const WP=(()=>{function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t})();function Pn(t){return n=>0===t?N_():n.lift(new TG(t))}class TG{constructor(n){if(this.total=n,this.total<0)throw new WP}call(n,e){return e.subscribe(new EG(n,this.total))}}class EG extends vt{constructor(n,e){super(n),this.total=e,this.count=0}_next(n){const e=this.total,i=++this.count;i<=e&&(this.destination.next(n),i===e&&(this.destination.complete(),this.unsubscribe()))}}function gu(...t){const n=t[t.length-1];return Ln(n)?(t.pop(),e=>_f(t,e,n)):e=>_f(t,e)}function $_(t,n){return e=>e.lift(new kG(t,n))}class kG{constructor(n,e){this.compare=n,this.keySelector=e}call(n,e){return e.subscribe(new DG(n,this.compare,this.keySelector))}}class DG extends vt{constructor(n,e,i){super(n),this.keySelector=i,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(n,e){return n===e}_next(n){let e;try{const{keySelector:r}=this;e=r?r(n):n}catch(r){return this.destination.error(r)}let i=!1;if(this.hasKey)try{const{compare:r}=this;i=r(this.key,e)}catch(r){return this.destination.error(r)}else this.hasKey=!0;i||(this.key=e,this.destination.next(n))}}function ri(t,n){return"function"==typeof n?e=>e.pipe(ri((i,r)=>hn(t(i,r)).pipe(he((o,s)=>n(i,o,r,s))))):e=>e.lift(new xG(t))}class xG{constructor(n){this.project=n}call(n,e){return e.subscribe(new MG(n,this.project))}}class MG extends Mi{constructor(n,e){super(n),this.project=e,this.index=0}_next(n){let e;const i=this.index++;try{e=this.project(n,i)}catch(r){return void this.destination.error(r)}this._innerSub(e)}_innerSub(n){const e=this.innerSubscription;e&&e.unsubscribe();const i=new lr(this),r=this.destination;r.add(i),this.innerSubscription=qr(n,i),this.innerSubscription!==i&&r.add(this.innerSubscription)}_complete(){const{innerSubscription:n}=this;(!n||n.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(n){this.destination.next(n)}}function Zn(t,n,e){return function(r){return r.lift(new IG(t,n,e))}}class IG{constructor(n,e,i){this.nextOrObserver=n,this.error=e,this.complete=i}call(n,e){return e.subscribe(new PG(n,this.nextOrObserver,this.error,this.complete))}}class PG extends vt{constructor(n,e,i,r){super(n),this._tapNext=gl,this._tapError=gl,this._tapComplete=gl,this._tapError=i||gl,this._tapComplete=r||gl,Xn(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||gl,this._tapError=e.error||gl,this._tapComplete=e.complete||gl)}_next(n){try{this._tapNext.call(this._context,n)}catch(e){return void this.destination.error(e)}this.destination.next(n)}_error(n){try{this._tapError.call(this._context,n)}catch(e){return void this.destination.error(e)}this.destination.error(n)}_complete(){try{this._tapComplete.call(this._context)}catch(n){return void this.destination.error(n)}return this.destination.complete()}}function f0(...t){return n=>{let e;return"function"==typeof t[t.length-1]&&(e=t.pop()),n.lift(new AG(t,e))}}class AG{constructor(n,e){this.observables=n,this.project=e}call(n,e){return e.subscribe(new OG(n,this.observables,this.project))}}class OG extends h0{constructor(n,e,i){super(n),this.observables=e,this.project=i,this.toRespond=[];const r=e.length;this.values=new Array(r);for(let o=0;o<r;o++)this.toRespond.push(o);for(let o=0;o<r;o++)this.add(p0(this,e[o],void 0,o))}notifyNext(n,e,i){this.values[i]=e;const r=this.toRespond;if(r.length>0){const o=r.indexOf(i);-1!==o&&r.splice(o,1)}}notifyComplete(){}_next(n){if(0===this.toRespond.length){const e=[n,...this.values];this.project?this._tryProject(e):this.destination.next(e)}}_tryProject(n){let e;try{e=this.project.apply(this,n)}catch(i){return void this.destination.error(i)}this.destination.next(e)}}function qP(t,n){return new _t(n?e=>n.schedule(FG,0,{error:t,subscriber:e}):e=>e.error(t))}function FG({error:t,subscriber:n}){n.error(t)}class oo{constructor(n,e,i){this.kind=n,this.value=e,this.error=i,this.hasValue="N"===n}observe(n){switch(this.kind){case"N":return n.next&&n.next(this.value);case"E":return n.error&&n.error(this.error);case"C":return n.complete&&n.complete()}}do(n,e,i){switch(this.kind){case"N":return n&&n(this.value);case"E":return e&&e(this.error);case"C":return i&&i()}}accept(n,e,i){return n&&"function"==typeof n.next?this.observe(n):this.do(n,e,i)}toObservable(){switch(this.kind){case"N":return Ee(this.value);case"E":return qP(this.error);case"C":return N_()}throw new Error("unexpected notification kind value")}static createNext(n){return void 0!==n?new oo("N",n):oo.undefinedValueNotification}static createError(n){return new oo("E",void 0,n)}static createComplete(){return oo.completeNotification}}function m0(t,n=d0){const i=function(t){return t instanceof Date&&!isNaN(+t)}(t)?+t-n.now():Math.abs(t);return r=>r.lift(new RG(i,n))}oo.completeNotification=new oo("C"),oo.undefinedValueNotification=new oo("N",void 0);class RG{constructor(n,e){this.delay=n,this.scheduler=e}call(n,e){return e.subscribe(new g0(n,this.delay,this.scheduler))}}class g0 extends vt{constructor(n,e,i){super(n),this.delay=e,this.scheduler=i,this.queue=[],this.active=!1,this.errored=!1}static dispatch(n){const e=n.source,i=e.queue,r=n.scheduler,o=n.destination;for(;i.length>0&&i[0].time-r.now()<=0;)i.shift().notification.observe(o);if(i.length>0){const s=Math.max(0,i[0].time-r.now());this.schedule(n,s)}else this.unsubscribe(),e.active=!1}_schedule(n){this.active=!0,this.destination.add(n.schedule(g0.dispatch,this.delay,{source:this,destination:this.destination,scheduler:n}))}scheduleNotification(n){if(!0===this.errored)return;const e=this.scheduler,i=new LG(e.now()+this.delay,n);this.queue.push(i),!1===this.active&&this._schedule(e)}_next(n){this.scheduleNotification(oo.createNext(n))}_error(n){this.errored=!0,this.queue=[],this.destination.error(n),this.unsubscribe()}_complete(){this.scheduleNotification(oo.createComplete()),this.unsubscribe()}}class LG{constructor(n,e){this.time=n,this.notification=e}}class $G{constructor(n){this.total=n}call(n,e){return e.subscribe(new UG(n,this.total))}}class UG extends vt{constructor(n,e){super(n),this.total=e,this.count=0}_next(n){++this.count>this.total&&this.destination.next(n)}}function U_(t,n){return new _t(e=>{const i=t.length;if(0===i)return void e.complete();const r=new Array(i);let o=0,s=0;for(let l=0;l<i;l++){const c=hn(t[l]);let d=!1;e.add(c.subscribe({next:m=>{d||(d=!0,s++),r[l]=m},error:m=>e.error(m),complete:()=>{o++,(o===i||!d)&&(s===i&&e.next(n?n.reduce((m,_,w)=>(m[_]=r[w],m),{}):r),e.complete())}}))}})}let ZP=(()=>{class t{constructor(e,i){this._renderer=e,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(e,i){this._renderer.setProperty(this._elementRef.nativeElement,e,i)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}}return t.\u0275fac=function(e){return new(e||t)(C(vi),C(Ye))},t.\u0275dir=te({type:t}),t})(),_u=(()=>{class t extends ZP{}return t.\u0275fac=function(){let n;return function(i){return(n||(n=tn(t)))(i||t)}}(),t.\u0275dir=te({type:t,features:[oe]}),t})();const wi=new tt("NgValueAccessor"),BG={provide:wi,useExisting:ot(()=>_0),multi:!0};let _0=(()=>{class t extends _u{writeValue(e){this.setProperty("checked",e)}}return t.\u0275fac=function(){let n;return function(i){return(n||(n=tn(t)))(i||t)}}(),t.\u0275dir=te({type:t,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(e,i){1&e&&A("change",function(o){return i.onChange(o.target.checked)})("blur",function(){return i.onTouched()})},features:[At([BG]),oe]}),t})();const HG={provide:wi,useExisting:ot(()=>_l),multi:!0},zG=new tt("CompositionEventMode");let _l=(()=>{class t extends ZP{constructor(e,i,r){super(e,i),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const t=Da()?Da().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(e){this.setProperty("value",null==e?"":e)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}return t.\u0275fac=function(e){return new(e||t)(C(vi),C(Ye),C(zG,8))},t.\u0275dir=te({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,i){1&e&&A("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},features:[At([HG]),oe]}),t})();function yc(t){return null==t||0===t.length}function KP(t){return null!=t&&"number"==typeof t.length}const Ji=new tt("NgValidators"),bc=new tt("NgAsyncValidators"),GG=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class vl{static min(n){return function(t){return n=>{if(yc(n.value)||yc(t))return null;const e=parseFloat(n.value);return!isNaN(e)&&e<t?{min:{min:t,actual:n.value}}:null}}(n)}static max(n){return function(t){return n=>{if(yc(n.value)||yc(t))return null;const e=parseFloat(n.value);return!isNaN(e)&&e>t?{max:{max:t,actual:n.value}}:null}}(n)}static required(n){return XP(n)}static requiredTrue(n){return function(t){return!0===t.value?null:{required:!0}}(n)}static email(n){return function(t){return yc(t.value)||GG.test(t.value)?null:{email:!0}}(n)}static minLength(n){return function(t){return n=>yc(n.value)||!KP(n.value)?null:n.value.length<t?{minlength:{requiredLength:t,actualLength:n.value.length}}:null}(n)}static maxLength(n){return function(t){return n=>KP(n.value)&&n.value.length>t?{maxlength:{requiredLength:t,actualLength:n.value.length}}:null}(n)}static pattern(n){return function(t){if(!t)return Cc;let n,e;return"string"==typeof t?(e="","^"!==t.charAt(0)&&(e+="^"),e+=t,"$"!==t.charAt(t.length-1)&&(e+="$"),n=new RegExp(e)):(e=t.toString(),n=t),i=>{if(yc(i.value))return null;const r=i.value;return n.test(r)?null:{pattern:{requiredPattern:e,actualValue:r}}}}(n)}static nullValidator(n){return null}static compose(n){return u2(n)}static composeAsync(n){return d2(n)}}function XP(t){return yc(t.value)?{required:!0}:null}function Cc(t){return null}function o2(t){return null!=t}function s2(t){const n=Ap(t)?hn(t):t;return bg(n),n}function a2(t){let n={};return t.forEach(e=>{n=null!=e?Object.assign(Object.assign({},n),e):n}),0===Object.keys(n).length?null:n}function l2(t,n){return n.map(e=>e(t))}function c2(t){return t.map(n=>function(t){return!t.validate}(n)?n:e=>n.validate(e))}function u2(t){if(!t)return null;const n=t.filter(o2);return 0==n.length?null:function(e){return a2(l2(e,n))}}function v0(t){return null!=t?u2(c2(t)):null}function d2(t){if(!t)return null;const n=t.filter(o2);return 0==n.length?null:function(e){return function(...t){if(1===t.length){const n=t[0];if(mt(n))return U_(n,null);if(Fl(n)&&Object.getPrototypeOf(n)===Object.prototype){const e=Object.keys(n);return U_(e.map(i=>n[i]),e)}}if("function"==typeof t[t.length-1]){const n=t.pop();return U_(t=1===t.length&&mt(t[0])?t[0]:t,null).pipe(he(e=>n(...e)))}return U_(t,null)}(l2(e,n).map(s2)).pipe(he(a2))}}function y0(t){return null!=t?d2(c2(t)):null}function h2(t,n){return null===t?[n]:Array.isArray(t)?[...t,n]:[t,n]}function p2(t){return t._rawValidators}function f2(t){return t._rawAsyncValidators}function b0(t){return t?Array.isArray(t)?t:[t]:[]}function V_(t,n){return Array.isArray(t)?t.includes(n):t===n}function m2(t,n){const e=b0(n);return b0(t).forEach(r=>{V_(e,r)||e.push(r)}),e}function g2(t,n){return b0(n).filter(e=>!V_(t,e))}let _2=(()=>{class t{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=v0(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=y0(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,i){return!!this.control&&this.control.hasError(e,i)}getError(e,i){return this.control?this.control.getError(e,i):null}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=te({type:t}),t})(),$r=(()=>{class t extends _2{get formDirective(){return null}get path(){return null}}return t.\u0275fac=function(){let n;return function(i){return(n||(n=tn(t)))(i||t)}}(),t.\u0275dir=te({type:t,features:[oe]}),t})();class wc extends _2{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class v2{constructor(n){this._cd=n}is(n){var e,i,r;return"submitted"===n?!!(null===(e=this._cd)||void 0===e?void 0:e.submitted):!!(null===(r=null===(i=this._cd)||void 0===i?void 0:i.control)||void 0===r?void 0:r[n])}}let Si=(()=>{class t extends v2{constructor(e){super(e)}}return t.\u0275fac=function(e){return new(e||t)(C(wc,2))},t.\u0275dir=te({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,i){2&e&&Oe("ng-untouched",i.is("untouched"))("ng-touched",i.is("touched"))("ng-pristine",i.is("pristine"))("ng-dirty",i.is("dirty"))("ng-valid",i.is("valid"))("ng-invalid",i.is("invalid"))("ng-pending",i.is("pending"))},features:[oe]}),t})(),Ur=(()=>{class t extends v2{constructor(e){super(e)}}return t.\u0275fac=function(e){return new(e||t)(C($r,10))},t.\u0275dir=te({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(e,i){2&e&&Oe("ng-untouched",i.is("untouched"))("ng-touched",i.is("touched"))("ng-pristine",i.is("pristine"))("ng-dirty",i.is("dirty"))("ng-valid",i.is("valid"))("ng-invalid",i.is("invalid"))("ng-pending",i.is("pending"))("ng-submitted",i.is("submitted"))},features:[oe]}),t})();function vf(t,n){S0(t,n),n.valueAccessor.writeValue(t.value),function(t,n){n.valueAccessor.registerOnChange(e=>{t._pendingValue=e,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&y2(t,n)})}(t,n),function(t,n){const e=(i,r)=>{n.valueAccessor.writeValue(i),r&&n.viewToModelUpdate(i)};t.registerOnChange(e),n._registerOnDestroy(()=>{t._unregisterOnChange(e)})}(t,n),function(t,n){n.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&y2(t,n),"submit"!==t.updateOn&&t.markAsTouched()})}(t,n),function(t,n){if(n.valueAccessor.setDisabledState){const e=i=>{n.valueAccessor.setDisabledState(i)};t.registerOnDisabledChange(e),n._registerOnDestroy(()=>{t._unregisterOnDisabledChange(e)})}}(t,n)}function j_(t,n,e=!0){const i=()=>{};n.valueAccessor&&(n.valueAccessor.registerOnChange(i),n.valueAccessor.registerOnTouched(i)),G_(t,n),t&&(n._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function z_(t,n){t.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(n)})}function S0(t,n){const e=p2(t);null!==n.validator?t.setValidators(h2(e,n.validator)):"function"==typeof e&&t.setValidators([e]);const i=f2(t);null!==n.asyncValidator?t.setAsyncValidators(h2(i,n.asyncValidator)):"function"==typeof i&&t.setAsyncValidators([i]);const r=()=>t.updateValueAndValidity();z_(n._rawValidators,r),z_(n._rawAsyncValidators,r)}function G_(t,n){let e=!1;if(null!==t){if(null!==n.validator){const r=p2(t);if(Array.isArray(r)&&r.length>0){const o=r.filter(s=>s!==n.validator);o.length!==r.length&&(e=!0,t.setValidators(o))}}if(null!==n.asyncValidator){const r=f2(t);if(Array.isArray(r)&&r.length>0){const o=r.filter(s=>s!==n.asyncValidator);o.length!==r.length&&(e=!0,t.setAsyncValidators(o))}}}const i=()=>{};return z_(n._rawValidators,i),z_(n._rawAsyncValidators,i),e}function y2(t,n){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),n.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function b2(t,n){S0(t,n)}function T0(t,n){if(!t.hasOwnProperty("model"))return!1;const e=t.model;return!!e.isFirstChange()||!Object.is(n,e.currentValue)}function C2(t,n){t._syncPendingControls(),n.forEach(e=>{const i=e.control;"submit"===i.updateOn&&i._pendingChange&&(e.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function E0(t,n){if(!n)return null;let e,i,r;return Array.isArray(n),n.forEach(o=>{o.constructor===_l?e=o:function(t){return Object.getPrototypeOf(t.constructor)===_u}(o)?i=o:r=o}),r||i||e||null}function W_(t,n){const e=t.indexOf(n);e>-1&&t.splice(e,1)}const yf="VALID",q_="INVALID",ah="PENDING",bf="DISABLED";function k0(t){return(x0(t)?t.validators:t)||null}function w2(t){return Array.isArray(t)?v0(t):t||null}function D0(t,n){return(x0(n)?n.asyncValidators:t)||null}function S2(t){return Array.isArray(t)?y0(t):t||null}function x0(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class Q_{constructor(n,e){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=n,this._rawAsyncValidators=e,this._composedValidatorFn=w2(this._rawValidators),this._composedAsyncValidatorFn=S2(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(n){this._rawValidators=this._composedValidatorFn=n}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(n){this._rawAsyncValidators=this._composedAsyncValidatorFn=n}get parent(){return this._parent}get valid(){return this.status===yf}get invalid(){return this.status===q_}get pending(){return this.status==ah}get disabled(){return this.status===bf}get enabled(){return this.status!==bf}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(n){this._rawValidators=n,this._composedValidatorFn=w2(n)}setAsyncValidators(n){this._rawAsyncValidators=n,this._composedAsyncValidatorFn=S2(n)}addValidators(n){this.setValidators(m2(n,this._rawValidators))}addAsyncValidators(n){this.setAsyncValidators(m2(n,this._rawAsyncValidators))}removeValidators(n){this.setValidators(g2(n,this._rawValidators))}removeAsyncValidators(n){this.setAsyncValidators(g2(n,this._rawAsyncValidators))}hasValidator(n){return V_(this._rawValidators,n)}hasAsyncValidator(n){return V_(this._rawAsyncValidators,n)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(n={}){this.touched=!0,this._parent&&!n.onlySelf&&this._parent.markAsTouched(n)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(n=>n.markAllAsTouched())}markAsUntouched(n={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!n.onlySelf&&this._parent._updateTouched(n)}markAsDirty(n={}){this.pristine=!1,this._parent&&!n.onlySelf&&this._parent.markAsDirty(n)}markAsPristine(n={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!n.onlySelf&&this._parent._updatePristine(n)}markAsPending(n={}){this.status=ah,!1!==n.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!n.onlySelf&&this._parent.markAsPending(n)}disable(n={}){const e=this._parentMarkedDirty(n.onlySelf);this.status=bf,this.errors=null,this._forEachChild(i=>{i.disable(Object.assign(Object.assign({},n),{onlySelf:!0}))}),this._updateValue(),!1!==n.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},n),{skipPristineCheck:e})),this._onDisabledChange.forEach(i=>i(!0))}enable(n={}){const e=this._parentMarkedDirty(n.onlySelf);this.status=yf,this._forEachChild(i=>{i.enable(Object.assign(Object.assign({},n),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},n),{skipPristineCheck:e})),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(n){this._parent&&!n.onlySelf&&(this._parent.updateValueAndValidity(n),n.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(n){this._parent=n}updateValueAndValidity(n={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===yf||this.status===ah)&&this._runAsyncValidator(n.emitEvent)),!1!==n.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!n.onlySelf&&this._parent.updateValueAndValidity(n)}_updateTreeValidity(n={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(n)),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?bf:yf}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(n){if(this.asyncValidator){this.status=ah,this._hasOwnPendingAsyncValidator=!0;const e=s2(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:n})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(n,e={}){this.errors=n,this._updateControlsErrors(!1!==e.emitEvent)}get(n){return function(t,n,e){if(null==n||(Array.isArray(n)||(n=n.split(".")),Array.isArray(n)&&0===n.length))return null;let i=t;return n.forEach(r=>{i=i instanceof Bi?i.controls.hasOwnProperty(r)?i.controls[r]:null:i instanceof Cf&&i.at(r)||null}),i}(this,n)}getError(n,e){const i=e?this.get(e):this;return i&&i.errors?i.errors[n]:null}hasError(n,e){return!!this.getError(n,e)}get root(){let n=this;for(;n._parent;)n=n._parent;return n}_updateControlsErrors(n){this.status=this._calculateStatus(),n&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(n)}_initObservables(){this.valueChanges=new q,this.statusChanges=new q}_calculateStatus(){return this._allControlsDisabled()?bf:this.errors?q_:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ah)?ah:this._anyControlsHaveStatus(q_)?q_:yf}_anyControlsHaveStatus(n){return this._anyControls(e=>e.status===n)}_anyControlsDirty(){return this._anyControls(n=>n.dirty)}_anyControlsTouched(){return this._anyControls(n=>n.touched)}_updatePristine(n={}){this.pristine=!this._anyControlsDirty(),this._parent&&!n.onlySelf&&this._parent._updatePristine(n)}_updateTouched(n={}){this.touched=this._anyControlsTouched(),this._parent&&!n.onlySelf&&this._parent._updateTouched(n)}_isBoxedValue(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}_registerOnCollectionChange(n){this._onCollectionChange=n}_setUpdateStrategy(n){x0(n)&&null!=n.updateOn&&(this._updateOn=n.updateOn)}_parentMarkedDirty(n){return!n&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class vu extends Q_{constructor(n=null,e,i){super(k0(e),D0(i,e)),this._onChange=[],this._applyFormState(n),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(n,e={}){this.value=this._pendingValue=n,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(n,e={}){this.setValue(n,e)}reset(n=null,e={}){this._applyFormState(n),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(n){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(n){this._onChange.push(n)}_unregisterOnChange(n){W_(this._onChange,n)}registerOnDisabledChange(n){this._onDisabledChange.push(n)}_unregisterOnDisabledChange(n){W_(this._onDisabledChange,n)}_forEachChild(n){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(n){this._isBoxedValue(n)?(this.value=this._pendingValue=n.value,n.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=n}}class Bi extends Q_{constructor(n,e,i){super(k0(e),D0(i,e)),this.controls=n,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(n,e){return this.controls[n]?this.controls[n]:(this.controls[n]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(n,e,i={}){this.registerControl(n,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(n,e={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),delete this.controls[n],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(n,e,i={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),delete this.controls[n],e&&this.registerControl(n,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(n){return this.controls.hasOwnProperty(n)&&this.controls[n].enabled}setValue(n,e={}){this._checkAllValuesPresent(n),Object.keys(n).forEach(i=>{this._throwIfControlMissing(i),this.controls[i].setValue(n[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(n,e={}){null!=n&&(Object.keys(n).forEach(i=>{this.controls[i]&&this.controls[i].patchValue(n[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(n={},e={}){this._forEachChild((i,r)=>{i.reset(n[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(n,e,i)=>(n[i]=e instanceof vu?e.value:e.getRawValue(),n))}_syncPendingControls(){let n=this._reduceChildren(!1,(e,i)=>!!i._syncPendingControls()||e);return n&&this.updateValueAndValidity({onlySelf:!0}),n}_throwIfControlMissing(n){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[n])throw new Error(`Cannot find form control with name: ${n}.`)}_forEachChild(n){Object.keys(this.controls).forEach(e=>{const i=this.controls[e];i&&n(i,e)})}_setUpControls(){this._forEachChild(n=>{n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(n){for(const e of Object.keys(this.controls)){const i=this.controls[e];if(this.contains(e)&&n(i))return!0}return!1}_reduceValue(){return this._reduceChildren({},(n,e,i)=>((e.enabled||this.disabled)&&(n[i]=e.value),n))}_reduceChildren(n,e){let i=n;return this._forEachChild((r,o)=>{i=e(i,r,o)}),i}_allControlsDisabled(){for(const n of Object.keys(this.controls))if(this.controls[n].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(n){this._forEachChild((e,i)=>{if(void 0===n[i])throw new Error(`Must supply a value for form control with name: '${i}'.`)})}}class Cf extends Q_{constructor(n,e,i){super(k0(e),D0(i,e)),this.controls=n,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(n){return this.controls[n]}push(n,e={}){this.controls.push(n),this._registerControl(n),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(n,e,i={}){this.controls.splice(n,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:i.emitEvent})}removeAt(n,e={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),this.controls.splice(n,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(n,e,i={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),this.controls.splice(n,1),e&&(this.controls.splice(n,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(n,e={}){this._checkAllValuesPresent(n),n.forEach((i,r)=>{this._throwIfControlMissing(r),this.at(r).setValue(i,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(n,e={}){null!=n&&(n.forEach((i,r)=>{this.at(r)&&this.at(r).patchValue(i,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(n=[],e={}){this._forEachChild((i,r)=>{i.reset(n[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(n=>n instanceof vu?n.value:n.getRawValue())}clear(n={}){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:n.emitEvent}))}_syncPendingControls(){let n=this.controls.reduce((e,i)=>!!i._syncPendingControls()||e,!1);return n&&this.updateValueAndValidity({onlySelf:!0}),n}_throwIfControlMissing(n){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(n))throw new Error(`Cannot find form control at index ${n}`)}_forEachChild(n){this.controls.forEach((e,i)=>{n(e,i)})}_updateValue(){this.value=this.controls.filter(n=>n.enabled||this.disabled).map(n=>n.value)}_anyControls(n){return this.controls.some(e=>e.enabled&&n(e))}_setUpControls(){this._forEachChild(n=>this._registerControl(n))}_checkAllValuesPresent(n){this._forEachChild((e,i)=>{if(void 0===n[i])throw new Error(`Must supply a value for form control at index: ${i}.`)})}_allControlsDisabled(){for(const n of this.controls)if(n.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(n){n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange)}}const r9={provide:$r,useExisting:ot(()=>Fo)},wf=(()=>Promise.resolve(null))();let Fo=(()=>{class t extends $r{constructor(e,i){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new q,this.form=new Bi({},v0(e),y0(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){wf.then(()=>{const i=this._findContainer(e.path);e.control=i.registerControl(e.name,e.control),vf(e.control,e),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){wf.then(()=>{const i=this._findContainer(e.path);i&&i.removeControl(e.name),W_(this._directives,e)})}addFormGroup(e){wf.then(()=>{const i=this._findContainer(e.path),r=new Bi({});b2(r,e),i.registerControl(e.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){wf.then(()=>{const i=this._findContainer(e.path);i&&i.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,i){wf.then(()=>{this.form.get(e.path).setValue(i)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submitted=!0,C2(this.form,this._directives),this.ngSubmit.emit(e),!1}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}}return t.\u0275fac=function(e){return new(e||t)(C(Ji,10),C(bc,10))},t.\u0275dir=te({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(e,i){1&e&&A("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[At([r9]),oe]}),t})();const s9={provide:wc,useExisting:ot(()=>Us)},k2=(()=>Promise.resolve(null))();let Us=(()=>{class t extends wc{constructor(e,i,r,o){super(),this.control=new vu,this._registered=!1,this.update=new q,this._parent=e,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=E0(0,o)}ngOnChanges(e){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in e&&this._updateDisabled(e),T0(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?function(t,n){return[...n.path,t]}(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){vf(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(e){k2.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1})})}_updateDisabled(e){const i=e.isDisabled.currentValue,r=""===i||i&&"false"!==i;k2.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable()})}}return t.\u0275fac=function(e){return new(e||t)(C($r,9),C(Ji,10),C(bc,10),C(wi,10))},t.\u0275dir=te({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[At([s9]),oe,St]}),t})(),Vr=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=te({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),t})();const a9={provide:wi,useExisting:ot(()=>M0),multi:!0};let M0=(()=>{class t extends _u{writeValue(e){this.setProperty("value",null==e?"":e)}registerOnChange(e){this.onChange=i=>{e(""==i?null:parseFloat(i))}}}return t.\u0275fac=function(){let n;return function(i){return(n||(n=tn(t)))(i||t)}}(),t.\u0275dir=te({type:t,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(e,i){1&e&&A("input",function(o){return i.onChange(o.target.value)})("blur",function(){return i.onTouched()})},features:[At([a9]),oe]}),t})();const l9={provide:wi,useExisting:ot(()=>I0),multi:!0};let D2=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=et({type:t}),t.\u0275inj=Te({}),t})(),c9=(()=>{class t{constructor(){this._accessors=[]}add(e,i){this._accessors.push([e,i])}remove(e){for(let i=this._accessors.length-1;i>=0;--i)if(this._accessors[i][1]===e)return void this._accessors.splice(i,1)}select(e){this._accessors.forEach(i=>{this._isSameGroup(i,e)&&i[1]!==e&&i[1].fireUncheck(e.value)})}_isSameGroup(e,i){return!!e[0].control&&e[0]._parent===i._control._parent&&e[1].name===i.name}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=B({factory:function(){return new t},token:t,providedIn:D2}),t})(),I0=(()=>{class t extends _u{constructor(e,i,r,o){super(e,i),this._registry=r,this._injector=o,this.onChange=()=>{}}ngOnInit(){this._control=this._injector.get(wc),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(e){this._state=e===this.value,this.setProperty("checked",this._state)}registerOnChange(e){this._fn=e,this.onChange=()=>{e(this.value),this._registry.select(this)}}fireUncheck(e){this.writeValue(e)}_checkName(){!this.name&&this.formControlName&&(this.name=this.formControlName)}}return t.\u0275fac=function(e){return new(e||t)(C(vi),C(Ye),C(c9),C(Mt))},t.\u0275dir=te({type:t,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(e,i){1&e&&A("change",function(){return i.onChange()})("blur",function(){return i.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[At([l9]),oe]}),t})();const P0=new tt("NgModelWithFormControlWarning"),d9={provide:wc,useExisting:ot(()=>Vs)};let Vs=(()=>{class t extends wc{constructor(e,i,r,o){super(),this._ngModelWarningConfig=o,this.update=new q,this._ngModelWarningSent=!1,this._setValidators(e),this._setAsyncValidators(i),this.valueAccessor=E0(0,r)}set isDisabled(e){}ngOnChanges(e){if(this._isControlChanged(e)){const i=e.form.previousValue;i&&j_(i,this,!1),vf(this.form,this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this.form.updateValueAndValidity({emitEvent:!1})}T0(e,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&j_(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_isControlChanged(e){return e.hasOwnProperty("form")}}return t.\u0275fac=function(e){return new(e||t)(C(Ji,10),C(bc,10),C(wi,10),C(P0,8))},t.\u0275dir=te({type:t,selectors:[["","formControl",""]],inputs:{isDisabled:["disabled","isDisabled"],form:["formControl","form"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],features:[At([d9]),oe,St]}),t._ngModelWarningSentOnce=!1,t})();const h9={provide:$r,useExisting:ot(()=>yl)};let yl=(()=>{class t extends $r{constructor(e,i){super(),this.validators=e,this.asyncValidators=i,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new q,this._setValidators(e),this._setAsyncValidators(i)}ngOnChanges(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(G_(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){const i=this.form.get(e.path);return vf(i,e),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),i}getControl(e){return this.form.get(e.path)}removeControl(e){j_(e.control||null,e,!1),W_(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,i){this.form.get(e.path).setValue(i)}onSubmit(e){return this.submitted=!0,C2(this.form,this.directives),this.ngSubmit.emit(e),!1}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_updateDomValue(){this.directives.forEach(e=>{const i=e.control,r=this.form.get(e.path);i!==r&&(j_(i||null,e),r instanceof vu&&(vf(r,e),e.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){const i=this.form.get(e.path);b2(i,e),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){const i=this.form.get(e.path);i&&function(t,n){return G_(t,n)}(i,e)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){S0(this.form,this),this._oldForm&&G_(this._oldForm,this)}_checkFormPresent(){}}return t.\u0275fac=function(e){return new(e||t)(C(Ji,10),C(bc,10))},t.\u0275dir=te({type:t,selectors:[["","formGroup",""]],hostBindings:function(e,i){1&e&&A("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[At([h9]),oe,St]}),t})();const g9={provide:wi,useExisting:ot(()=>Ro),multi:!0};function P2(t,n){return null==t?`${n}`:(n&&"object"==typeof n&&(n="Object"),`${t}: ${n}`.slice(0,50))}let Ro=(()=>{class t extends _u{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){this.value=e;const i=this._getOptionId(e);null==i&&this.setProperty("selectedIndex",-1);const r=P2(i,e);this.setProperty("value",r)}registerOnChange(e){this.onChange=i=>{this.value=this._getOptionValue(i),e(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(e){for(const i of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(i),e))return i;return null}_getOptionValue(e){const i=function(t){return t.split(":")[0]}(e);return this._optionMap.has(i)?this._optionMap.get(i):e}}return t.\u0275fac=function(){let n;return function(i){return(n||(n=tn(t)))(i||t)}}(),t.\u0275dir=te({type:t,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(e,i){1&e&&A("change",function(o){return i.onChange(o.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[At([g9]),oe]}),t})(),as=(()=>{class t{constructor(e,i,r){this._element=e,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption())}set ngValue(e){null!=this._select&&(this._select._optionMap.set(this.id,e),this._setElementValue(P2(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._setElementValue(e),this._select&&this._select.writeValue(this._select.value)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return t.\u0275fac=function(e){return new(e||t)(C(Ye),C(vi),C(Ro,9))},t.\u0275dir=te({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),t})();const v9={provide:wi,useExisting:ot(()=>Z_),multi:!0};function A2(t,n){return null==t?`${n}`:("string"==typeof n&&(n=`'${n}'`),n&&"object"==typeof n&&(n="Object"),`${t}: ${n}`.slice(0,50))}let Z_=(()=>{class t extends _u{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){let i;if(this.value=e,Array.isArray(e)){const r=e.map(o=>this._getOptionId(o));i=(o,s)=>{o._setSelected(r.indexOf(s.toString())>-1)}}else i=(r,o)=>{r._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(e){this.onChange=i=>{const r=[];if(void 0!==i.selectedOptions){const o=i.selectedOptions;for(let s=0;s<o.length;s++){const l=o.item(s),c=this._getOptionValue(l.value);r.push(c)}}else{const o=i.options;for(let s=0;s<o.length;s++){const l=o.item(s);if(l.selected){const c=this._getOptionValue(l.value);r.push(c)}}}this.value=r,e(r)}}_registerOption(e){const i=(this._idCounter++).toString();return this._optionMap.set(i,e),i}_getOptionId(e){for(const i of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(i)._value,e))return i;return null}_getOptionValue(e){const i=function(t){return t.split(":")[0]}(e);return this._optionMap.has(i)?this._optionMap.get(i)._value:e}}return t.\u0275fac=function(){let n;return function(i){return(n||(n=tn(t)))(i||t)}}(),t.\u0275dir=te({type:t,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(e,i){1&e&&A("change",function(o){return i.onChange(o.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[At([v9]),oe]}),t})(),ls=(()=>{class t{constructor(e,i,r){this._element=e,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption(this))}set ngValue(e){null!=this._select&&(this._value=e,this._setElementValue(A2(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._select?(this._value=e,this._setElementValue(A2(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}_setSelected(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return t.\u0275fac=function(e){return new(e||t)(C(Ye),C(vi),C(Z_,9))},t.\u0275dir=te({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),t})();const w9={provide:Ji,useExisting:ot(()=>K_),multi:!0};let K_=(()=>{class t{constructor(){this._required=!1}get required(){return this._required}set required(e){this._required=null!=e&&!1!==e&&"false"!=`${e}`,this._onChange&&this._onChange()}validate(e){return this.required?XP(e):null}registerOnValidatorChange(e){this._onChange=e}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=te({type:t,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(e,i){2&e&&Ct("required",i.required?"":null)},inputs:{required:"required"},features:[At([w9])]}),t})(),H2=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=et({type:t}),t.\u0275inj=Te({imports:[[D2]]}),t})(),N0=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=et({type:t}),t.\u0275inj=Te({imports:[H2]}),t})(),F0=(()=>{class t{static withConfig(e){return{ngModule:t,providers:[{provide:P0,useValue:e.warnOnNgModelWithFormControl}]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=et({type:t}),t.\u0275inj=Te({imports:[H2]}),t})();function x9(t,n){}function M9(t,n){if(1&t&&(p(0,"button",3),k(1),S(2,x9,0,0,"ng-template",4),f()),2&t){const e=n.$implicit;v("ngbPanelToggle",e),g(1),Z(" ",e.title,""),g(1),v("ngTemplateOutlet",null==e.titleTpl?null:e.titleTpl.templateRef)}}function I9(t,n){}function P9(t,n){}function A9(t,n){if(1&t&&(p(0,"div",8),p(1,"div",9),S(2,P9,0,0,"ng-template",4),f(),f()),2&t){const e=b().$implicit;xe("id",e.id),Ct("aria-labelledby",e.id+"-header"),g(2),v("ngTemplateOutlet",(null==e.contentTpl?null:e.contentTpl.templateRef)||null)}}const O9=function(t,n){return{$implicit:t,opened:n}};function N9(t,n){if(1&t&&(p(0,"div"),p(1,"div",5),S(2,I9,0,0,"ng-template",6),f(),S(3,A9,3,3,"div",7),f()),2&t){const e=n.$implicit,i=b(),r=ie(1);Ao("card "+(e.cardClass||"")),g(1),Ao("card-header "+(e.type?"bg-"+e.type:i.type?"bg-"+i.type:"")),Po("id","",e.id,"-header"),g(1),v("ngTemplateOutlet",(null==e.headerTpl?null:e.headerTpl.templateRef)||r)("ngTemplateOutletContext",Bn(8,O9,e,e.isOpen)),g(1),v("ngIf",!i.destroyOnHide||e.isOpen||e.transitionRunning)}}const lh=["*"];function R9(t,n){if(1&t){const e=G();p(0,"li",6),A("click",function(){const o=h(e).$implicit,s=b();return s.focus(),s.select(o.id,s.NgbSlideEventSource.INDICATOR)}),f()}if(2&t){const e=n.$implicit,i=b();Oe("active",e.id===i.activeId),Ct("aria-labelledby","slide-"+e.id)("aria-controls","slide-"+e.id)("aria-selected",e.id===i.activeId)}}function L9(t,n){}function $9(t,n){if(1&t&&(p(0,"div",7),p(1,"span",8),Ki(2,9),f(),S(3,L9,0,0,"ng-template",10),f()),2&t){const e=n.$implicit,i=n.index,r=n.count;v("id","slide-"+e.id),g(2),jd(i+1)(r),function(t){!function(t,n,e){if(Rp>0){const i=t.data[e];OD(t,n,Array.isArray(i)?i:i.update,$i()-Rp-1,Fp)}Fp=0,Rp=0}(u(),a(),t+20)}(2),g(1),v("ngTemplateOutlet",e.tplRef)}}function U9(t,n){if(1&t){const e=G();p(0,"a",11),A("click",function(){return h(e),b().arrowLeft()}),O(1,"span",12),p(2,"span",8),Ki(3,13),f(),f()}}function V9(t,n){if(1&t){const e=G();p(0,"a",14),A("click",function(){return h(e),b().arrowRight()}),O(1,"span",15),p(2,"span",8),Ki(3,16),f(),f()}}const B9=["defaultDayTemplate"],H9=["content"];function j9(t,n){if(1&t&&O(0,"div",7),2&t){const i=n.currentMonth,r=n.selected,o=n.disabled,s=n.focused;v("date",n.date)("currentMonth",i)("selected",r)("disabled",o)("focused",s)}}function z9(t,n){if(1&t&&(p(0,"div",12),k(1),f()),2&t){const e=b().$implicit,i=b(2);g(1),Z(" ",i.i18n.getMonthLabel(e.firstDate)," ")}}function G9(t,n){if(1&t&&(p(0,"div",9),S(1,z9,2,1,"div",10),O(2,"ngb-datepicker-month",11),f()),2&t){const e=n.$implicit,i=b(2);g(1),v("ngIf","none"===i.navigation||i.displayMonths>1&&"select"===i.navigation),g(1),v("month",e.firstDate)}}function W9(t,n){1&t&&S(0,G9,3,2,"div",8),2&t&&v("ngForOf",b().model.months)}function q9(t,n){if(1&t){const e=G();p(0,"ngb-datepicker-navigation",13),A("navigate",function(r){return h(e),b().onNavigateEvent(r)})("select",function(r){return h(e),b().onNavigateDateSelect(r)}),f()}if(2&t){const e=b();v("date",e.model.firstDate)("months",e.model.months)("disabled",e.model.disabled)("showSelect","select"===e.model.navigation)("prevDisabled",e.model.prevDisabled)("nextDisabled",e.model.nextDisabled)("selectBoxes",e.model.selectBoxes)}}function Q9(t,n){}function Z9(t,n){}function K9(t,n){if(1&t&&(p(0,"div",5),k(1),f()),2&t){const e=b(2);g(1),Le(e.i18n.getWeekLabel())}}function Y9(t,n){if(1&t&&(p(0,"div",6),k(1),f()),2&t){const e=n.$implicit;g(1),Le(e)}}function J9(t,n){if(1&t&&(p(0,"div",2),S(1,K9,2,1,"div",3),S(2,Y9,2,1,"div",4),f()),2&t){const e=b();g(1),v("ngIf",e.datepicker.showWeekNumbers),g(1),v("ngForOf",e.viewModel.weekdays)}}function X9(t,n){if(1&t&&(p(0,"div",11),k(1),f()),2&t){const e=b(2).$implicit,i=b();g(1),Le(i.i18n.getWeekNumerals(e.number))}}function eW(t,n){}function tW(t,n){if(1&t&&S(0,eW,0,0,"ng-template",14),2&t){const e=b().$implicit;v("ngTemplateOutlet",b(3).datepicker.dayTemplate)("ngTemplateOutletContext",e.context)}}function nW(t,n){if(1&t){const e=G();p(0,"div",12),A("click",function(r){const s=h(e).$implicit;return b(3).doSelect(s),r.preventDefault()}),S(1,tW,1,2,"ng-template",13),f()}if(2&t){const e=n.$implicit;Oe("disabled",e.context.disabled)("hidden",e.hidden)("ngb-dp-today",e.context.today),v("tabindex",e.tabindex),Ct("aria-label",e.ariaLabel),g(1),v("ngIf",!e.hidden)}}function iW(t,n){if(1&t&&(p(0,"div",8),S(1,X9,2,1,"div",9),S(2,nW,2,9,"div",10),f()),2&t){const e=b().$implicit,i=b();g(1),v("ngIf",i.datepicker.showWeekNumbers),g(1),v("ngForOf",e.days)}}function rW(t,n){1&t&&S(0,iW,3,2,"div",7),2&t&&v("ngIf",!n.$implicit.collapsed)}function oW(t,n){if(1&t){const e=G();p(0,"ngb-datepicker-navigation-select",7),A("select",function(r){return h(e),b().select.emit(r)}),f()}if(2&t){const e=b();v("date",e.date)("disabled",e.disabled)("months",e.selectBoxes.months)("years",e.selectBoxes.years)}}function sW(t,n){1&t&&O(0,"div",0)}function aW(t,n){1&t&&O(0,"div",0)}function lW(t,n){if(1&t&&(S(0,sW,1,0,"div",9),p(1,"div",10),k(2),f(),S(3,aW,1,0,"div",9)),2&t){const e=n.$implicit,i=n.index,r=b(2);v("ngIf",i>0),g(2),Z(" ",r.i18n.getMonthLabel(e.firstDate)," "),g(1),v("ngIf",i!==r.months.length-1)}}function cW(t,n){1&t&&S(0,lW,4,3,"ng-template",8),2&t&&v("ngForOf",b().months)}const uW=["ngbDatepickerDayView",""],dW=["month"],hW=["year"];function pW(t,n){if(1&t&&(p(0,"option",5),k(1),f()),2&t){const e=n.$implicit,i=b();v("value",e),Ct("aria-label",i.i18n.getMonthFullName(e,null==i.date?null:i.date.year)),g(1),Le(i.i18n.getMonthShortName(e,null==i.date?null:i.date.year))}}function fW(t,n){if(1&t&&(p(0,"option",5),k(1),f()),2&t){const e=n.$implicit,i=b();v("value",e),g(1),Le(i.i18n.getYearNumerals(e))}}const mW=["dialog"];function Xi(t){return parseInt(`${t}`,10)}function J_(t){return"string"==typeof t}function Kn(t){return!isNaN(Xi(t))}function jn(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t}function Sc(t){return null!=t}function ch(t){return Kn(t)?`0${t}`.slice(-2):""}function j2(t,n){return t&&t.className&&t.className.split&&t.className.split(/\s+/).indexOf(n)>=0}function uh(t){return(t||document.body).getBoundingClientRect()}"undefined"!=typeof Element&&!Element.prototype.closest&&(Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest=function(t){let n=this;if(!document.documentElement.contains(n))return null;do{if(n.matches(t))return n;n=n.parentElement||n.parentNode}while(null!==n&&1===n.nodeType);return null});const G2={animation:!0,transitionTimerDelayMs:5};let Hi=(()=>{class t{constructor(){this.animation=G2.animation}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=B({factory:function(){return new t},token:t,providedIn:"root"}),t})(),Eq=(()=>{class t{constructor(e){this._ngbConfig=e,this.closeOthers=!1}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(e){this._animation=e}}return t.\u0275fac=function(e){return new(e||t)(P(Hi))},t.\u0275prov=B({factory:function(){return new t(P(Hi))},token:t,providedIn:"root"}),t})();const Dq=()=>{},{transitionTimerDelayMs:xq}=G2,Tf=new Map,Ti=(t,n,e,i)=>{let r=i.context||{};const o=Tf.get(n);if(o)switch(i.runningTransition){case"continue":return ss;case"stop":t.run(()=>o.transition$.complete()),r=Object.assign(o.context,r),Tf.delete(n)}const s=e(n,i.animation,r)||Dq;if(!i.animation||"none"===window.getComputedStyle(n).transitionProperty)return t.run(()=>s()),Ee(void 0).pipe(function(t){return n=>new _t(e=>n.subscribe(s=>t.run(()=>e.next(s)),s=>t.run(()=>e.error(s)),()=>t.run(()=>e.complete())))}(t));const l=new Fe,c=new Fe,d=l.pipe(function(...t){return n=>_f(n,Ee(...t))}(!0));Tf.set(n,{transition$:l,complete:()=>{c.next(),c.complete()},context:r});const m=function(t){const{transitionDelay:n,transitionDuration:e}=window.getComputedStyle(t);return 1e3*(parseFloat(n)+parseFloat(e))}(n);return t.runOutsideAngular(()=>{const _=Ci(n,"transitionend").pipe(Qn(d),$t(({target:E})=>E===n));zP(F_(m+xq).pipe(Qn(d)),_,c).pipe(Qn(d)).subscribe(()=>{Tf.delete(n),t.run(()=>{s(),l.next(),l.complete()})})}),l.asObservable()},L0=(t,n,e)=>{let{direction:i,maxHeight:r}=e;const{classList:o}=t;function s(){o.add("collapse"),"show"===i?o.add("show"):o.remove("show")}if(n)return r||(r=function(t){if("undefined"==typeof navigator)return"0px";const{classList:n}=t,e=n.contains("show");e||n.add("show"),t.style.height="";const i=t.getBoundingClientRect().height+"px";return e||n.remove("show"),i}(t),e.maxHeight=r,t.style.height="show"!==i?r:"0px",o.remove("collapse"),o.remove("collapsing"),o.remove("show"),uh(t),o.add("collapsing")),t.style.height="show"===i?r:"0px",()=>{s(),o.remove("collapsing"),t.style.height=""};s()};let Pq=0,$0=(()=>{class t{constructor(e){this.templateRef=e}}return t.\u0275fac=function(e){return new(e||t)(C(fn))},t.\u0275dir=te({type:t,selectors:[["ng-template","ngbPanelHeader",""]]}),t})(),X_=(()=>{class t{constructor(e){this.templateRef=e}}return t.\u0275fac=function(e){return new(e||t)(C(fn))},t.\u0275dir=te({type:t,selectors:[["ng-template","ngbPanelTitle",""]]}),t})(),ev=(()=>{class t{constructor(e){this.templateRef=e}}return t.\u0275fac=function(e){return new(e||t)(C(fn))},t.\u0275dir=te({type:t,selectors:[["ng-template","ngbPanelContent",""]]}),t})(),Ef=(()=>{class t{constructor(){this.disabled=!1,this.id="ngb-panel-"+Pq++,this.isOpen=!1,this.initClassDone=!1,this.transitionRunning=!1,this.shown=new q,this.hidden=new q}ngAfterContentChecked(){this.titleTpl=this.titleTpls.first,this.headerTpl=this.headerTpls.first,this.contentTpl=this.contentTpls.first}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=te({type:t,selectors:[["ngb-panel"]],contentQueries:function(e,i,r){if(1&e&&(En(r,X_,4),En(r,$0,4),En(r,ev,4)),2&e){let o;ye(o=be())&&(i.titleTpls=o),ye(o=be())&&(i.headerTpls=o),ye(o=be())&&(i.contentTpls=o)}},inputs:{disabled:"disabled",id:"id",title:"title",type:"type",cardClass:"cardClass"},outputs:{shown:"shown",hidden:"hidden"}}),t})(),tv=(()=>{class t{constructor(e,i,r,o){this._element=i,this._ngZone=r,this._changeDetector=o,this.activeIds=[],this.destroyOnHide=!0,this.panelChange=new q,this.shown=new q,this.hidden=new q,this.animation=e.animation,this.type=e.type,this.closeOtherPanels=e.closeOthers}isExpanded(e){return this.activeIds.indexOf(e)>-1}expand(e){this._changeOpenState(this._findPanelById(e),!0)}expandAll(){this.closeOtherPanels?0===this.activeIds.length&&this.panels.length&&this._changeOpenState(this.panels.first,!0):this.panels.forEach(e=>this._changeOpenState(e,!0))}collapse(e){this._changeOpenState(this._findPanelById(e),!1)}collapseAll(){this.panels.forEach(e=>{this._changeOpenState(e,!1)})}toggle(e){const i=this._findPanelById(e);i&&this._changeOpenState(i,!i.isOpen)}ngAfterContentChecked(){J_(this.activeIds)&&(this.activeIds=this.activeIds.split(/\s*,\s*/)),this.panels.forEach(e=>{e.isOpen=!e.disabled&&this.activeIds.indexOf(e.id)>-1}),this.activeIds.length>1&&this.closeOtherPanels&&(this._closeOthers(this.activeIds[0],!1),this._updateActiveIds()),this._ngZone.onStable.pipe(Pn(1)).subscribe(()=>{this.panels.forEach(e=>{const i=this._getPanelElement(e.id);i?e.initClassDone||(e.initClassDone=!0,Ti(this._ngZone,i,L0,{animation:!1,runningTransition:"continue",context:{direction:e.isOpen?"show":"hide"}})):e.initClassDone=!1})})}_changeOpenState(e,i){if(null!=e&&!e.disabled&&e.isOpen!==i){let r=!1;this.panelChange.emit({panelId:e.id,nextState:i,preventDefault:()=>{r=!0}}),r||(e.isOpen=i,e.transitionRunning=!0,i&&this.closeOtherPanels&&this._closeOthers(e.id),this._updateActiveIds(),this._runTransitions(this.animation))}}_closeOthers(e,i=!0){this.panels.forEach(r=>{r.id!==e&&r.isOpen&&(r.isOpen=!1,r.transitionRunning=i)})}_findPanelById(e){return this.panels.find(i=>i.id===e)||null}_updateActiveIds(){this.activeIds=this.panels.filter(e=>e.isOpen&&!e.disabled).map(e=>e.id)}_runTransitions(e){this._changeDetector.detectChanges(),this.panels.forEach(i=>{if(i.transitionRunning){const r=this._getPanelElement(i.id);Ti(this._ngZone,r,L0,{animation:e,runningTransition:"stop",context:{direction:i.isOpen?"show":"hide"}}).subscribe(()=>{i.transitionRunning=!1;const{id:o}=i;i.isOpen?(i.shown.emit(),this.shown.emit(o)):(i.hidden.emit(),this.hidden.emit(o))})}})}_getPanelElement(e){return this._element.nativeElement.querySelector("#"+e)}}return t.\u0275fac=function(e){return new(e||t)(C(Eq),C(Ye),C(it),C(ci))},t.\u0275cmp=Y({type:t,selectors:[["ngb-accordion"]],contentQueries:function(e,i,r){if(1&e&&En(r,Ef,4),2&e){let o;ye(o=be())&&(i.panels=o)}},hostAttrs:["role","tablist",1,"accordion"],hostVars:1,hostBindings:function(e,i){2&e&&Ct("aria-multiselectable",!i.closeOtherPanels)},inputs:{activeIds:"activeIds",destroyOnHide:"destroyOnHide",animation:"animation",type:"type",closeOtherPanels:["closeOthers","closeOtherPanels"]},outputs:{panelChange:"panelChange",shown:"shown",hidden:"hidden"},exportAs:["ngbAccordion"],decls:3,vars:1,consts:[["ngbPanelHeader",""],["t",""],["ngFor","",3,"ngForOf"],[1,"btn","btn-link",3,"ngbPanelToggle"],[3,"ngTemplateOutlet"],["role","tab",3,"id"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["role","tabpanel",3,"id",4,"ngIf"],["role","tabpanel",3,"id"],[1,"card-body"]],template:function(e,i){1&e&&(S(0,M9,3,3,"ng-template",0,1,se),S(2,N9,4,11,"ng-template",2)),2&e&&(g(2),v("ngForOf",i.panels))},directives:function(){return[$0,je,W2,ro,le]},encapsulation:2}),t})(),W2=(()=>{class t{constructor(e,i){this.accordion=e,this.panel=i}set ngbPanelToggle(e){e&&(this.panel=e)}}return t.\u0275fac=function(e){return new(e||t)(C(tv),C(Ef,9))},t.\u0275dir=te({type:t,selectors:[["button","ngbPanelToggle",""]],hostAttrs:["type","button"],hostVars:5,hostBindings:function(e,i){1&e&&A("click",function(){return i.accordion.toggle(i.panel.id)}),2&e&&(no("disabled",i.panel.disabled),Ct("aria-expanded",i.panel.isOpen)("aria-controls",i.panel.id),Oe("collapsed",!i.panel.isOpen))},inputs:{ngbPanelToggle:"ngbPanelToggle"}}),t})(),q2=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=et({type:t}),t.\u0275inj=Te({imports:[[bi]]}),t})(),Q2=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=et({type:t}),t.\u0275inj=Te({imports:[[bi]]}),t})(),K2=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=et({type:t}),t.\u0275inj=Te({}),t})(),Lq=(()=>{class t{constructor(e){this._ngbConfig=e,this.interval=5e3,this.wrap=!0,this.keyboard=!0,this.pauseOnHover=!0,this.pauseOnFocus=!0,this.showNavigationArrows=!0,this.showNavigationIndicators=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(e){this._animation=e}}return t.\u0275fac=function(e){return new(e||t)(P(Hi))},t.\u0275prov=B({factory:function(){return new t(P(Hi))},token:t,providedIn:"root"}),t})();var Tc=(()=>(function(t){t.LEFT="left",t.RIGHT="right"}(Tc||(Tc={})),Tc))();const Y2=({classList:t})=>t.contains("carousel-item-left")||t.contains("carousel-item-right"),kf=t=>{t.remove("carousel-item-left"),t.remove("carousel-item-right")},nv=t=>{kf(t),t.remove("carousel-item-prev"),t.remove("carousel-item-next")},$q=(t,n,{direction:e})=>{const{classList:i}=t;return n?(Y2(t)?kf(i):(i.add("carousel-item-"+(e===Tc.LEFT?"next":"prev")),uh(t),i.add("carousel-item-"+e)),()=>{nv(i),i.add("active")}):(kf(i),nv(i),void i.add("active"))},Uq=(t,n,{direction:e})=>{const{classList:i}=t;return n?(Y2(t)?kf(i):i.add("carousel-item-"+e),()=>{nv(i),i.remove("active")}):(kf(i),nv(i),void i.remove("active"))};let Vq=0,V0=(()=>{class t{constructor(e){this.tplRef=e,this.id="ngb-slide-"+Vq++,this.slid=new q}}return t.\u0275fac=function(e){return new(e||t)(C(fn))},t.\u0275dir=te({type:t,selectors:[["ng-template","ngbSlide",""]],inputs:{id:"id"},outputs:{slid:"slid"}}),t})(),J2=(()=>{class t{constructor(e,i,r,o,s){this._platformId=i,this._ngZone=r,this._cd=o,this._container=s,this.NgbSlideEventSource=yu,this._destroy$=new Fe,this._interval$=new ln(0),this._mouseHover$=new ln(!1),this._focused$=new ln(!1),this._pauseOnHover$=new ln(!1),this._pauseOnFocus$=new ln(!1),this._pause$=new ln(!1),this._wrap$=new ln(!1),this.slide=new q,this.slid=new q,this._transitionIds=null,this.animation=e.animation,this.interval=e.interval,this.wrap=e.wrap,this.keyboard=e.keyboard,this.pauseOnHover=e.pauseOnHover,this.pauseOnFocus=e.pauseOnFocus,this.showNavigationArrows=e.showNavigationArrows,this.showNavigationIndicators=e.showNavigationIndicators}set interval(e){this._interval$.next(e)}get interval(){return this._interval$.value}set wrap(e){this._wrap$.next(e)}get wrap(){return this._wrap$.value}set pauseOnHover(e){this._pauseOnHover$.next(e)}get pauseOnHover(){return this._pauseOnHover$.value}set pauseOnFocus(e){this._pauseOnFocus$.next(e)}get pauseOnFocus(){return this._pauseOnFocus$.value}set mouseHover(e){this._mouseHover$.next(e)}get mouseHover(){return this._mouseHover$.value}set focused(e){this._focused$.next(e)}get focused(){return this._focused$.value}arrowLeft(){this.focus(),this.prev(yu.ARROW_LEFT)}arrowRight(){this.focus(),this.next(yu.ARROW_RIGHT)}ngAfterContentInit(){cf(this._platformId)&&this._ngZone.runOutsideAngular(()=>{const e=R_([this.slide.pipe(he(i=>i.current),gu(this.activeId)),this._wrap$,this.slides.changes.pipe(gu(null))]).pipe(he(([i,r])=>{const o=this.slides.toArray(),s=this._getSlideIdxById(i);return r?o.length>1:s<o.length-1}),$_());R_([this._pause$,this._pauseOnHover$,this._mouseHover$,this._pauseOnFocus$,this._focused$,this._interval$,e]).pipe(he(([i,r,o,s,l,c,d])=>i||r&&o||s&&l||!d?0:c),$_(),ri(i=>i>0?F_(i,i):vc),Qn(this._destroy$)).subscribe(()=>this._ngZone.run(()=>this.next(yu.TIMER)))}),this.slides.changes.pipe(Qn(this._destroy$)).subscribe(()=>{var e;null===(e=this._transitionIds)||void 0===e||e.forEach(i=>(t=>{var n;null===(n=Tf.get(t))||void 0===n||n.complete()})(this._getSlideElement(i))),this._transitionIds=null,this._cd.markForCheck(),this._ngZone.onStable.pipe(Pn(1)).subscribe(()=>{for(const{id:i}of this.slides){const r=this._getSlideElement(i);i===this.activeId?r.classList.add("active"):r.classList.remove("active")}})})}ngAfterContentChecked(){let e=this._getSlideById(this.activeId);this.activeId=e?e.id:this.slides.length?this.slides.first.id:""}ngAfterViewInit(){if(this.activeId){const e=this._getSlideElement(this.activeId);e&&e.classList.add("active")}}ngOnDestroy(){this._destroy$.next()}select(e,i){this._cycleToSelected(e,this._getSlideEventDirection(this.activeId,e),i)}prev(e){this._cycleToSelected(this._getPrevSlide(this.activeId),Tc.RIGHT,e)}next(e){this._cycleToSelected(this._getNextSlide(this.activeId),Tc.LEFT,e)}pause(){this._pause$.next(!0)}cycle(){this._pause$.next(!1)}focus(){this._container.nativeElement.focus()}_cycleToSelected(e,i,r){const o=this._transitionIds;if(o&&(o[0]!==e||o[1]!==this.activeId))return;let s=this._getSlideById(e);if(s&&s.id!==this.activeId){this._transitionIds=[this.activeId,e],this.slide.emit({prev:this.activeId,current:s.id,direction:i,paused:this._pause$.value,source:r});const l={animation:this.animation,runningTransition:"stop",context:{direction:i}},c=[],d=this._getSlideById(this.activeId);if(d){const E=Ti(this._ngZone,this._getSlideElement(d.id),Uq,l);E.subscribe(()=>{d.slid.emit({isShown:!1,direction:i,source:r})}),c.push(E)}const m=this.activeId;this.activeId=s.id;const _=this._getSlideById(this.activeId),w=Ti(this._ngZone,this._getSlideElement(s.id),$q,l);w.subscribe(()=>{null==_||_.slid.emit({isShown:!0,direction:i,source:r})}),c.push(w),L_(...c).pipe(Pn(1)).subscribe(()=>{this._transitionIds=null,this.slid.emit({prev:m,current:s.id,direction:i,paused:this._pause$.value,source:r})})}this._cd.markForCheck()}_getSlideEventDirection(e,i){return this._getSlideIdxById(e)>this._getSlideIdxById(i)?Tc.RIGHT:Tc.LEFT}_getSlideById(e){return this.slides.find(i=>i.id===e)||null}_getSlideIdxById(e){const i=this._getSlideById(e);return null!=i?this.slides.toArray().indexOf(i):-1}_getNextSlide(e){const i=this.slides.toArray(),r=this._getSlideIdxById(e);return r===i.length-1?this.wrap?i[0].id:i[i.length-1].id:i[r+1].id}_getPrevSlide(e){const i=this.slides.toArray(),r=this._getSlideIdxById(e);return 0===r?this.wrap?i[i.length-1].id:i[0].id:i[r-1].id}_getSlideElement(e){return this._container.nativeElement.querySelector(`#slide-${e}`)}}return t.\u0275fac=function(e){return new(e||t)(C(Lq),C(Os),C(it),C(ci),C(Ye))},t.\u0275cmp=Y({type:t,selectors:[["ngb-carousel"]],contentQueries:function(e,i,r){if(1&e&&En(r,V0,4),2&e){let o;ye(o=be())&&(i.slides=o)}},hostAttrs:["tabIndex","0",1,"carousel","slide"],hostVars:3,hostBindings:function(e,i){1&e&&A("keydown.arrowLeft",function(){return i.keyboard&&i.arrowLeft()})("keydown.arrowRight",function(){return i.keyboard&&i.arrowRight()})("mouseenter",function(){return i.mouseHover=!0})("mouseleave",function(){return i.mouseHover=!1})("focusin",function(){return i.focused=!0})("focusout",function(){return i.focused=!1}),2&e&&(Ct("aria-activedescendant","slide-"+i.activeId),to("display","block"))},inputs:{animation:"animation",interval:"interval",wrap:"wrap",keyboard:"keyboard",pauseOnHover:"pauseOnHover",pauseOnFocus:"pauseOnFocus",showNavigationArrows:"showNavigationArrows",showNavigationIndicators:"showNavigationIndicators",activeId:"activeId"},outputs:{slide:"slide",slid:"slid"},exportAs:["ngbCarousel"],decls:6,vars:6,consts:function(){let n,e,i;return n=$localize`:Currently selected slide number read by screen reader@@ngb.carousel.slide-number␟a65b1b49aa7dd8c4f3004da6a8c2241814dae621␟783273603869937627: Slide ${"\ufffd0\ufffd"}:INTERPOLATION: of ${"\ufffd1\ufffd"}:INTERPOLATION_1: `,e=$localize`:@@ngb.carousel.previous␟680d5c75b7fd8d37961083608b9fcdc4167b4c43␟4452427314943113135:Previous`,i=$localize`:@@ngb.carousel.next␟f732c304c7433e5a83ffcd862c3dce709a0f4982␟3885497195825665706:Next`,[["role","tablist",1,"carousel-indicators"],["role","tab",3,"active","click",4,"ngFor","ngForOf"],[1,"carousel-inner"],["class","carousel-item","role","tabpanel",3,"id",4,"ngFor","ngForOf"],["class","carousel-control-prev","role","button",3,"click",4,"ngIf"],["class","carousel-control-next","role","button",3,"click",4,"ngIf"],["role","tab",3,"click"],["role","tabpanel",1,"carousel-item",3,"id"],[1,"sr-only"],n,[3,"ngTemplateOutlet"],["role","button",1,"carousel-control-prev",3,"click"],["aria-hidden","true",1,"carousel-control-prev-icon"],e,["role","button",1,"carousel-control-next",3,"click"],["aria-hidden","true",1,"carousel-control-next-icon"],i]},template:function(e,i){1&e&&(p(0,"ol",0),S(1,R9,1,5,"li",1),f(),p(2,"div",2),S(3,$9,4,4,"div",3),f(),S(4,U9,4,0,"a",4),S(5,V9,4,0,"a",5)),2&e&&(Oe("sr-only",!i.showNavigationIndicators),g(1),v("ngForOf",i.slides),g(2),v("ngForOf",i.slides),g(1),v("ngIf",i.showNavigationArrows),g(1),v("ngIf",i.showNavigationArrows))},directives:[je,le,ro],encapsulation:2,changeDetection:0}),t})();var yu=(()=>(function(t){t.TIMER="timer",t.ARROW_LEFT="arrowLeft",t.ARROW_RIGHT="arrowRight",t.INDICATOR="indicator"}(yu||(yu={})),yu))();let X2=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=et({type:t}),t.\u0275inj=Te({imports:[[bi]]}),t})(),Bq=(()=>{class t{constructor(e){this._ngbConfig=e}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(e){this._animation=e}}return t.\u0275fac=function(e){return new(e||t)(P(Hi))},t.\u0275prov=B({factory:function(){return new t(P(Hi))},token:t,providedIn:"root"}),t})(),B0=(()=>{class t{constructor(e,i,r){this._element=e,this._zone=r,this.collapsed=!1,this.ngbCollapseChange=new q,this.shown=new q,this.hidden=new q,this.animation=i.animation}ngOnInit(){this._runTransition(this.collapsed,!1)}ngOnChanges({collapsed:e}){e.firstChange||this._runTransitionWithEvents(this.collapsed,this.animation)}toggle(e=this.collapsed){this.collapsed=!e,this.ngbCollapseChange.next(this.collapsed),this._runTransitionWithEvents(this.collapsed,this.animation)}_runTransition(e,i){return Ti(this._zone,this._element.nativeElement,L0,{animation:i,runningTransition:"stop",context:{direction:e?"hide":"show"}})}_runTransitionWithEvents(e,i){this._runTransition(e,i).subscribe(()=>{e?this.hidden.emit():this.shown.emit()})}}return t.\u0275fac=function(e){return new(e||t)(C(Ye),C(Bq),C(it))},t.\u0275dir=te({type:t,selectors:[["","ngbCollapse",""]],inputs:{collapsed:["ngbCollapse","collapsed"],animation:"animation"},outputs:{ngbCollapseChange:"ngbCollapseChange",shown:"shown",hidden:"hidden"},exportAs:["ngbCollapse"],features:[St]}),t})(),eA=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=et({type:t}),t.\u0275inj=Te({}),t})();class Ei{constructor(n,e,i){this.year=jn(n)?n:null,this.month=jn(e)?e:null,this.day=jn(i)?i:null}static from(n){return n instanceof Ei?n:n?new Ei(n.year,n.month,n.day):null}equals(n){return null!=n&&this.year===n.year&&this.month===n.month&&this.day===n.day}before(n){return!!n&&(this.year===n.year?this.month===n.month?this.day!==n.day&&this.day<n.day:this.month<n.month:this.year<n.year)}after(n){return!!n&&(this.year===n.year?this.month===n.month?this.day!==n.day&&this.day>n.day:this.month>n.month:this.year>n.year)}}function tA(t){return new Ei(t.getFullYear(),t.getMonth()+1,t.getDate())}function iv(t){const n=new Date(t.year,t.month-1,t.day,12);return isNaN(n.getTime())||n.setFullYear(t.year),n}function Hq(){return new jq}let Df=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=B({factory:Hq,token:t,providedIn:"root"}),t})(),jq=(()=>{class t extends Df{getDaysPerWeek(){return 7}getMonths(){return[1,2,3,4,5,6,7,8,9,10,11,12]}getWeeksPerMonth(){return 6}getNext(e,i="d",r=1){let o=iv(e),s=!0,l=o.getMonth();switch(i){case"y":o.setFullYear(o.getFullYear()+r);break;case"m":l+=r,o.setMonth(l),l%=12,l<0&&(l+=12);break;case"d":o.setDate(o.getDate()+r),s=!1;break;default:return e}return s&&o.getMonth()!==l&&o.setDate(0),tA(o)}getPrev(e,i="d",r=1){return this.getNext(e,i,-r)}getWeekday(e){let r=iv(e).getDay();return 0===r?7:r}getWeekNumber(e,i){7===i&&(i=0);const s=iv(e[(11-i)%7]);s.setDate(s.getDate()+4-(s.getDay()||7));const l=s.getTime();return s.setMonth(0),s.setDate(1),Math.floor(Math.round((l-s.getTime())/864e5)/7)+1}getToday(){return tA(new Date)}isValid(e){if(!(e&&jn(e.year)&&jn(e.month)&&jn(e.day)&&0!==e.year))return!1;const i=iv(e);return!isNaN(i.getTime())&&i.getFullYear()===e.year&&i.getMonth()+1===e.month&&i.getDate()===e.day}}return t.\u0275fac=function(){let n;return function(i){return(n||(n=tn(t)))(i||t)}}(),t.\u0275prov=B({token:t,factory:t.\u0275fac}),t})();function dh(t,n){return!function(t,n){return!t&&!n||!!t&&!!n&&t.equals(n)}(t,n)}function nA(t,n){return!(!t&&!n||t&&n&&t.year===n.year&&t.month===n.month)}function rv(t,n,e){return t&&n&&t.before(n)?n:t&&e&&t.after(e)?e:t||null}function H0(t,n){const{minDate:e,maxDate:i,disabled:r,markDisabled:o}=n;return!(null==t||r||o&&o(t,{year:t.year,month:t.month})||e&&t.before(e)||i&&t.after(i))}let bu=(()=>{class t{getMonthLabel(e){return`${this.getMonthFullName(e.month,e.year)} ${this.getYearNumerals(e.year)}`}getDayNumerals(e){return`${e.day}`}getWeekNumerals(e){return`${e}`}getYearNumerals(e){return`${e}`}getWeekLabel(){return""}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=B({factory:function(){return function(t){return new eQ(t)}(P(es))},token:t,providedIn:"root"}),t})(),eQ=(()=>{class t extends bu{constructor(e){super(),this._locale=e,this._monthsShort=hC(e,kn.Standalone,ft.Abbreviated),this._monthsFull=hC(e,kn.Standalone,ft.Wide)}getWeekdayLabel(e,i){const r=tI(this._locale,kn.Standalone,void 0===i?ft.Short:i);return r.map((s,l)=>r[(l+1)%7])[e-1]||""}getMonthShortName(e){return this._monthsShort[e-1]||""}getMonthFullName(e){return this._monthsFull[e-1]||""}getDayAriaLabel(e){return iI(new Date(e.year,e.month-1,e.day),"fullDate",this._locale)}}return t.\u0275fac=function(e){return new(e||t)(P(es))},t.\u0275prov=B({token:t,factory:t.\u0275fac}),t})(),j0=(()=>{class t{constructor(e,i){this._calendar=e,this._i18n=i,this._VALIDATORS={dayTemplateData:r=>{if(this._state.dayTemplateData!==r)return{dayTemplateData:r}},displayMonths:r=>{if(jn(r=Xi(r))&&r>0&&this._state.displayMonths!==r)return{displayMonths:r}},disabled:r=>{if(this._state.disabled!==r)return{disabled:r}},firstDayOfWeek:r=>{if(jn(r=Xi(r))&&r>=0&&this._state.firstDayOfWeek!==r)return{firstDayOfWeek:r}},focusVisible:r=>{if(this._state.focusVisible!==r&&!this._state.disabled)return{focusVisible:r}},markDisabled:r=>{if(this._state.markDisabled!==r)return{markDisabled:r}},maxDate:r=>{const o=this.toValidDate(r,null);if(dh(this._state.maxDate,o))return{maxDate:o}},minDate:r=>{const o=this.toValidDate(r,null);if(dh(this._state.minDate,o))return{minDate:o}},navigation:r=>{if(this._state.navigation!==r)return{navigation:r}},outsideDays:r=>{if(this._state.outsideDays!==r)return{outsideDays:r}},weekdays:r=>{const o=!0===r||!1===r?ft.Short:r,s=!0!==r&&!1!==r||r;if(this._state.weekdayWidth!==o||this._state.weekdaysVisible!==s)return{weekdayWidth:o,weekdaysVisible:s}}},this._model$=new Fe,this._dateSelect$=new Fe,this._state={dayTemplateData:null,markDisabled:null,maxDate:null,minDate:null,disabled:!1,displayMonths:1,firstDate:null,firstDayOfWeek:1,lastDate:null,focusDate:null,focusVisible:!1,months:[],navigation:"select",outsideDays:"visible",prevDisabled:!1,nextDisabled:!1,selectedDate:null,selectBoxes:{years:[],months:[]},weekdayWidth:ft.Short,weekdaysVisible:!0}}get model$(){return this._model$.pipe($t(e=>e.months.length>0))}get dateSelect$(){return this._dateSelect$.pipe($t(e=>null!==e))}set(e){let i=Object.keys(e).map(r=>this._VALIDATORS[r](e[r])).reduce((r,o)=>Object.assign(Object.assign({},r),o),{});Object.keys(i).length>0&&this._nextState(i)}focus(e){const i=this.toValidDate(e,null);null!=i&&!this._state.disabled&&dh(this._state.focusDate,i)&&this._nextState({focusDate:e})}focusSelect(){H0(this._state.focusDate,this._state)&&this.select(this._state.focusDate,{emitEvent:!0})}open(e){const i=this.toValidDate(e,this._calendar.getToday());null!=i&&!this._state.disabled&&(!this._state.firstDate||nA(this._state.firstDate,i))&&this._nextState({firstDate:i})}select(e,i={}){const r=this.toValidDate(e,null);null!=r&&!this._state.disabled&&(dh(this._state.selectedDate,r)&&this._nextState({selectedDate:r}),i.emitEvent&&H0(r,this._state)&&this._dateSelect$.next(r))}toValidDate(e,i){const r=Ei.from(e);return void 0===i&&(i=this._calendar.getToday()),this._calendar.isValid(r)?r:i}getMonth(e){for(let i of this._state.months)if(e.month===i.number&&e.year===i.year)return i;throw new Error(`month ${e.month} of year ${e.year} not found`)}_nextState(e){const i=this._updateState(e);this._patchContexts(i),this._state=i,this._model$.next(this._state)}_patchContexts(e){const{months:i,displayMonths:r,selectedDate:o,focusDate:s,focusVisible:l,disabled:c,outsideDays:d}=e;e.months.forEach(m=>{m.weeks.forEach(_=>{_.days.forEach(w=>{s&&(w.context.focused=s.equals(w.date)&&l),w.tabindex=!c&&s&&w.date.equals(s)&&s.month===m.number?0:-1,!0===c&&(w.context.disabled=!0),void 0!==o&&(w.context.selected=null!==o&&o.equals(w.date)),m.number!==w.date.month&&(w.hidden="hidden"===d||"collapsed"===d||r>1&&w.date.after(i[0].firstDate)&&w.date.before(i[r-1].lastDate))})})})}_updateState(e){const i=Object.assign({},this._state,e);let r=i.firstDate;if(("minDate"in e||"maxDate"in e)&&(function(t,n){if(n&&t&&n.before(t))throw new Error(`'maxDate' ${n} should be greater than 'minDate' ${t}`)}(i.minDate,i.maxDate),i.focusDate=rv(i.focusDate,i.minDate,i.maxDate),i.firstDate=rv(i.firstDate,i.minDate,i.maxDate),r=i.focusDate),"disabled"in e&&(i.focusVisible=!1),"selectedDate"in e&&0===this._state.months.length&&(r=i.selectedDate),"focusVisible"in e||"focusDate"in e&&(i.focusDate=rv(i.focusDate,i.minDate,i.maxDate),r=i.focusDate,0!==i.months.length&&i.focusDate&&!i.focusDate.before(i.firstDate)&&!i.focusDate.after(i.lastDate)))return i;if("firstDate"in e&&(i.firstDate=rv(i.firstDate,i.minDate,i.maxDate),r=i.firstDate),r){const s=function(t,n,e,i,r){const{displayMonths:o,months:s}=e,l=s.splice(0,s.length);return Array.from({length:o},(d,m)=>{const _=Object.assign(t.getNext(n,"m",m),{day:1});if(s[m]=null,!r){const w=l.findIndex(E=>E.firstDate.equals(_));-1!==w&&(s[m]=l.splice(w,1)[0])}return _}).forEach((d,m)=>{null===s[m]&&(s[m]=function(t,n,e,i,r={}){const{dayTemplateData:o,minDate:s,maxDate:l,firstDayOfWeek:c,markDisabled:d,outsideDays:m,weekdayWidth:_,weekdaysVisible:w}=e,E=t.getToday();r.firstDate=null,r.lastDate=null,r.number=n.month,r.year=n.year,r.weeks=r.weeks||[],r.weekdays=r.weekdays||[],n=function(t,n,e){const i=t.getDaysPerWeek(),r=new Ei(n.year,n.month,1),o=t.getWeekday(r)%i;return t.getPrev(r,"d",(i+o-e)%i)}(t,n,c),w||(r.weekdays.length=0);for(let D=0;D<t.getWeeksPerMonth();D++){let N=r.weeks[D];N||(N=r.weeks[D]={number:0,days:[],collapsed:!0});const F=N.days;for(let j=0;j<t.getDaysPerWeek();j++){0===D&&w&&(r.weekdays[j]=i.getWeekdayLabel(t.getWeekday(n),_));const H=new Ei(n.year,n.month,n.day),X=t.getNext(H),de=i.getDayAriaLabel(H);let Be=!!(s&&H.before(s)||l&&H.after(l));!Be&&d&&(Be=d(H,{month:r.number,year:r.year}));let Gt=H.equals(E),Jt=o?o(H,{month:r.number,year:r.year}):void 0;null===r.firstDate&&H.month===r.number&&(r.firstDate=H),H.month===r.number&&X.month!==r.number&&(r.lastDate=H);let Nn=F[j];Nn||(Nn=F[j]={}),Nn.date=H,Nn.context=Object.assign(Nn.context||{},{$implicit:H,date:H,data:Jt,currentMonth:r.number,currentYear:r.year,disabled:Be,focused:!1,selected:!1,today:Gt}),Nn.tabindex=-1,Nn.ariaLabel=de,Nn.hidden=!1,n=X}N.number=t.getWeekNumber(F.map(j=>j.date),c),N.collapsed="collapsed"===m&&F[0].date.month!==r.number&&F[F.length-1].date.month!==r.number}return r}(t,d,e,i,l.shift()||{}))}),s}(this._calendar,r,i,this._i18n,"dayTemplateData"in e||"firstDayOfWeek"in e||"markDisabled"in e||"minDate"in e||"maxDate"in e||"disabled"in e||"outsideDays"in e||"weekdaysVisible"in e);i.months=s,i.firstDate=s[0].firstDate,i.lastDate=s[s.length-1].lastDate,"selectedDate"in e&&!H0(i.selectedDate,i)&&(i.selectedDate=null),"firstDate"in e&&(!i.focusDate||i.focusDate.before(i.firstDate)||i.focusDate.after(i.lastDate))&&(i.focusDate=r);const l=!this._state.firstDate||this._state.firstDate.year!==i.firstDate.year,c=!this._state.firstDate||this._state.firstDate.month!==i.firstDate.month;"select"===i.navigation?(("minDate"in e||"maxDate"in e||0===i.selectBoxes.years.length||l)&&(i.selectBoxes.years=function(t,n,e){if(!t)return[];const i=n?Math.max(n.year,t.year-500):t.year-10,o=(e?Math.min(e.year,t.year+500):t.year+10)-i+1,s=Array(o);for(let l=0;l<o;l++)s[l]=i+l;return s}(i.firstDate,i.minDate,i.maxDate)),("minDate"in e||"maxDate"in e||0===i.selectBoxes.months.length||l)&&(i.selectBoxes.months=function(t,n,e,i){if(!n)return[];let r=t.getMonths(n.year);if(e&&n.year===e.year){const o=r.findIndex(s=>s===e.month);r=r.slice(o)}if(i&&n.year===i.year){const o=r.findIndex(s=>s===i.month);r=r.slice(0,o+1)}return r}(this._calendar,i.firstDate,i.minDate,i.maxDate))):i.selectBoxes={years:[],months:[]},("arrows"===i.navigation||"select"===i.navigation)&&(c||l||"minDate"in e||"maxDate"in e||"disabled"in e)&&(i.prevDisabled=i.disabled||function(t,n,e){const i=Object.assign(t.getPrev(n,"m"),{day:1});return null!=e&&(i.year===e.year&&i.month<e.month||i.year<e.year&&1===e.month)}(this._calendar,i.firstDate,i.minDate),i.nextDisabled=i.disabled||function(t,n,e){const i=Object.assign(t.getNext(n,"m"),{day:1});return null!=e&&i.after(e)}(this._calendar,i.lastDate,i.maxDate))}return i}}return t.\u0275fac=function(e){return new(e||t)(P(Df),P(bu))},t.\u0275prov=B({token:t,factory:t.\u0275fac}),t})();var hh=(()=>(function(t){t[t.PREV=0]="PREV",t[t.NEXT=1]="NEXT"}(hh||(hh={})),hh))();let z0=(()=>{class t{constructor(){this.displayMonths=1,this.firstDayOfWeek=1,this.navigation="select",this.outsideDays="visible",this.showWeekNumbers=!1,this.weekdays=ft.Short}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=B({factory:function(){return new t},token:t,providedIn:"root"}),t})();function tQ(){return new nQ}let ph=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=B({factory:tQ,token:t,providedIn:"root"}),t})(),nQ=(()=>{class t extends ph{fromModel(e){return e&&jn(e.year)&&jn(e.month)&&jn(e.day)?{year:e.year,month:e.month,day:e.day}:null}toModel(e){return e&&jn(e.year)&&jn(e.month)&&jn(e.day)?{year:e.year,month:e.month,day:e.day}:null}}return t.\u0275fac=function(){let n;return function(i){return(n||(n=tn(t)))(i||t)}}(),t.\u0275prov=B({token:t,factory:t.\u0275fac}),t})(),iQ=(()=>{class t{constructor(e){this.templateRef=e}}return t.\u0275fac=function(e){return new(e||t)(C(fn))},t.\u0275dir=te({type:t,selectors:[["ng-template","ngbDatepickerContent",""]]}),t})(),iA=(()=>{class t{constructor(e,i,r,o,s,l,c,d){this._service=e,this._calendar=i,this.i18n=r,this._elementRef=l,this._ngbDateAdapter=c,this._ngZone=d,this._controlValue=null,this._destroyed$=new Fe,this._publicState={},this.navigate=new q,this.dateSelect=new q,this.onChange=m=>{},this.onTouched=()=>{},["dayTemplate","dayTemplateData","displayMonths","firstDayOfWeek","footerTemplate","markDisabled","minDate","maxDate","navigation","outsideDays","showWeekNumbers","startDate","weekdays"].forEach(m=>this[m]=o[m]),e.dateSelect$.pipe(Qn(this._destroyed$)).subscribe(m=>{this.dateSelect.emit(m)}),e.model$.pipe(Qn(this._destroyed$)).subscribe(m=>{const _=m.firstDate,w=this.model?this.model.firstDate:null;this._publicState={maxDate:m.maxDate,minDate:m.minDate,firstDate:m.firstDate,lastDate:m.lastDate,focusedDate:m.focusDate,months:m.months.map(j=>j.firstDate)};let E=!1;if(!_.equals(w)&&(this.navigate.emit({current:w?{year:w.year,month:w.month}:null,next:{year:_.year,month:_.month},preventDefault:()=>E=!0}),E&&null!==w))return void this._service.open(w);const D=m.selectedDate,N=m.focusDate,F=this.model?this.model.focusDate:null;this.model=m,dh(D,this._controlValue)&&(this._controlValue=D,this.onTouched(),this.onChange(this._ngbDateAdapter.toModel(D))),dh(N,F)&&F&&m.focusVisible&&this.focus(),s.markForCheck()})}get state(){return this._publicState}get calendar(){return this._calendar}focusDate(e){this._service.focus(Ei.from(e))}focusSelect(){this._service.focusSelect()}focus(){this._ngZone.onStable.asObservable().pipe(Pn(1)).subscribe(()=>{const e=this._elementRef.nativeElement.querySelector('div.ngb-dp-day[tabindex="0"]');e&&e.focus()})}navigateTo(e){this._service.open(Ei.from(e?e.day?e:Object.assign(Object.assign({},e),{day:1}):null))}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{const e=Ci(this._contentEl.nativeElement,"focusin"),i=Ci(this._contentEl.nativeElement,"focusout"),{nativeElement:r}=this._elementRef;zo(e,i).pipe($t(({target:o,relatedTarget:s})=>!(j2(o,"ngb-dp-day")&&j2(s,"ngb-dp-day")&&r.contains(o)&&r.contains(s))),Qn(this._destroyed$)).subscribe(({type:o})=>this._ngZone.run(()=>this._service.set({focusVisible:"focusin"===o})))})}ngOnDestroy(){this._destroyed$.next()}ngOnInit(){if(void 0===this.model){const e={};["dayTemplateData","displayMonths","markDisabled","firstDayOfWeek","navigation","minDate","maxDate","outsideDays","weekdays"].forEach(i=>e[i]=this[i]),this._service.set(e),this.navigateTo(this.startDate)}this.dayTemplate||(this.dayTemplate=this._defaultDayTemplate)}ngOnChanges(e){const i={};if(["dayTemplateData","displayMonths","markDisabled","firstDayOfWeek","navigation","minDate","maxDate","outsideDays","weekdays"].filter(r=>r in e).forEach(r=>i[r]=this[r]),this._service.set(i),"startDate"in e){const{currentValue:r,previousValue:o}=e.startDate;nA(o,r)&&this.navigateTo(this.startDate)}}onDateSelect(e){this._service.focus(e),this._service.select(e,{emitEvent:!0})}onNavigateDateSelect(e){this._service.open(e)}onNavigateEvent(e){switch(e){case hh.PREV:this._service.open(this._calendar.getPrev(this.model.firstDate,"m",1));break;case hh.NEXT:this._service.open(this._calendar.getNext(this.model.firstDate,"m",1))}}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this._service.set({disabled:e})}writeValue(e){this._controlValue=Ei.from(this._ngbDateAdapter.fromModel(e)),this._service.select(this._controlValue)}}return t.\u0275fac=function(e){return new(e||t)(C(j0),C(Df),C(bu),C(z0),C(ci),C(Ye),C(ph),C(it))},t.\u0275cmp=Y({type:t,selectors:[["ngb-datepicker"]],contentQueries:function(e,i,r){if(1&e&&En(r,iQ,7),2&e){let o;ye(o=be())&&(i.contentTemplate=o.first)}},viewQuery:function(e,i){if(1&e&&(pt(B9,7),pt(H9,7)),2&e){let r;ye(r=be())&&(i._defaultDayTemplate=r.first),ye(r=be())&&(i._contentEl=r.first)}},inputs:{dayTemplate:"dayTemplate",dayTemplateData:"dayTemplateData",displayMonths:"displayMonths",firstDayOfWeek:"firstDayOfWeek",footerTemplate:"footerTemplate",markDisabled:"markDisabled",maxDate:"maxDate",minDate:"minDate",navigation:"navigation",outsideDays:"outsideDays",showWeekNumbers:"showWeekNumbers",startDate:"startDate",weekdays:"weekdays"},outputs:{navigate:"navigate",dateSelect:"dateSelect"},exportAs:["ngbDatepicker"],features:[At([{provide:wi,useExisting:ot(()=>t),multi:!0},j0]),St],decls:10,vars:5,consts:[["defaultDayTemplate",""],["defaultContentTemplate",""],[1,"ngb-dp-header"],[3,"date","months","disabled","showSelect","prevDisabled","nextDisabled","selectBoxes","navigate","select",4,"ngIf"],[1,"ngb-dp-content"],["content",""],[3,"ngTemplateOutlet"],["ngbDatepickerDayView","",3,"date","currentMonth","selected","disabled","focused"],["class","ngb-dp-month",4,"ngFor","ngForOf"],[1,"ngb-dp-month"],["class","ngb-dp-month-name",4,"ngIf"],[3,"month"],[1,"ngb-dp-month-name"],[3,"date","months","disabled","showSelect","prevDisabled","nextDisabled","selectBoxes","navigate","select"]],template:function(e,i){if(1&e&&(S(0,j9,1,5,"ng-template",null,0,se),S(2,W9,1,1,"ng-template",null,1,se),p(4,"div",2),S(5,q9,1,7,"ngb-datepicker-navigation",3),f(),p(6,"div",4,5),S(8,Q9,0,0,"ng-template",6),f(),S(9,Z9,0,0,"ng-template",6)),2&e){const r=ie(3);g(5),v("ngIf","none"!==i.navigation),g(1),Oe("ngb-dp-months",!i.contentTemplate),g(2),v("ngTemplateOutlet",(null==i.contentTemplate?null:i.contentTemplate.templateRef)||r),g(1),v("ngTemplateOutlet",i.footerTemplate)}},directives:function(){return[le,ro,fQ,je,oQ,sQ]},styles:["ngb-datepicker{border:1px solid #dfdfdf;border-radius:.25rem;display:inline-block}ngb-datepicker-month{pointer-events:auto}ngb-datepicker.dropdown-menu{padding:0}.ngb-dp-body{z-index:1050}.ngb-dp-header{border-bottom:0;border-radius:.25rem .25rem 0 0;padding-top:.25rem;background-color:#f8f9fa;background-color:var(--light)}.ngb-dp-months{display:flex}.ngb-dp-month{pointer-events:none}.ngb-dp-month-name{font-size:larger;height:2rem;line-height:2rem;text-align:center;background-color:#f8f9fa;background-color:var(--light)}.ngb-dp-month+.ngb-dp-month .ngb-dp-month-name,.ngb-dp-month+.ngb-dp-month .ngb-dp-week{padding-left:1rem}.ngb-dp-month:last-child .ngb-dp-week{padding-right:.25rem}.ngb-dp-month:first-child .ngb-dp-week{padding-left:.25rem}.ngb-dp-month .ngb-dp-week:last-child{padding-bottom:.25rem}"],encapsulation:2,changeDetection:0}),t})();var xt=(()=>(function(t){t[t.Tab=9]="Tab",t[t.Enter=13]="Enter",t[t.Escape=27]="Escape",t[t.Space=32]="Space",t[t.PageUp=33]="PageUp",t[t.PageDown=34]="PageDown",t[t.End=35]="End",t[t.Home=36]="Home",t[t.ArrowLeft=37]="ArrowLeft",t[t.ArrowUp=38]="ArrowUp",t[t.ArrowRight=39]="ArrowRight",t[t.ArrowDown=40]="ArrowDown"}(xt||(xt={})),xt))();let rQ=(()=>{class t{processKey(e,i){const{state:r,calendar:o}=i;switch(e.which){case xt.PageUp:i.focusDate(o.getPrev(r.focusedDate,e.shiftKey?"y":"m",1));break;case xt.PageDown:i.focusDate(o.getNext(r.focusedDate,e.shiftKey?"y":"m",1));break;case xt.End:i.focusDate(e.shiftKey?r.maxDate:r.lastDate);break;case xt.Home:i.focusDate(e.shiftKey?r.minDate:r.firstDate);break;case xt.ArrowLeft:i.focusDate(o.getPrev(r.focusedDate,"d",1));break;case xt.ArrowUp:i.focusDate(o.getPrev(r.focusedDate,"d",o.getDaysPerWeek()));break;case xt.ArrowRight:i.focusDate(o.getNext(r.focusedDate,"d",1));break;case xt.ArrowDown:i.focusDate(o.getNext(r.focusedDate,"d",o.getDaysPerWeek()));break;case xt.Enter:case xt.Space:i.focusSelect();break;default:return}e.preventDefault(),e.stopPropagation()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=B({factory:function(){return new t},token:t,providedIn:"root"}),t})(),oQ=(()=>{class t{constructor(e,i,r,o){this.i18n=e,this.datepicker=i,this._keyboardService=r,this._service=o}set month(e){this.viewModel=this._service.getMonth(e)}onKeyDown(e){this._keyboardService.processKey(e,this.datepicker)}doSelect(e){!e.context.disabled&&!e.hidden&&this.datepicker.onDateSelect(e.date)}}return t.\u0275fac=function(e){return new(e||t)(C(bu),C(iA),C(rQ),C(j0))},t.\u0275cmp=Y({type:t,selectors:[["ngb-datepicker-month"]],hostAttrs:["role","grid"],hostBindings:function(e,i){1&e&&A("keydown",function(o){return i.onKeyDown(o)})},inputs:{month:"month"},decls:2,vars:2,consts:[["class","ngb-dp-week ngb-dp-weekdays","role","row",4,"ngIf"],["ngFor","",3,"ngForOf"],["role","row",1,"ngb-dp-week","ngb-dp-weekdays"],["class","ngb-dp-weekday ngb-dp-showweek small",4,"ngIf"],["class","ngb-dp-weekday small","role","columnheader",4,"ngFor","ngForOf"],[1,"ngb-dp-weekday","ngb-dp-showweek","small"],["role","columnheader",1,"ngb-dp-weekday","small"],["class","ngb-dp-week","role","row",4,"ngIf"],["role","row",1,"ngb-dp-week"],["class","ngb-dp-week-number small text-muted",4,"ngIf"],["class","ngb-dp-day","role","gridcell",3,"disabled","tabindex","hidden","ngb-dp-today","click",4,"ngFor","ngForOf"],[1,"ngb-dp-week-number","small","text-muted"],["role","gridcell",1,"ngb-dp-day",3,"tabindex","click"],[3,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,i){1&e&&(S(0,J9,3,2,"div",0),S(1,rW,1,1,"ng-template",1)),2&e&&(v("ngIf",i.viewModel.weekdays.length>0),g(1),v("ngForOf",i.viewModel.weeks))},directives:[le,je,ro],styles:['ngb-datepicker-month{display:block}.ngb-dp-week-number,.ngb-dp-weekday{line-height:2rem;text-align:center;font-style:italic}.ngb-dp-weekday{color:#5bc0de;color:var(--info)}.ngb-dp-week{border-radius:.25rem;display:flex}.ngb-dp-weekdays{border-bottom:1px solid rgba(0,0,0,.125);border-radius:0;background-color:#f8f9fa;background-color:var(--light)}.ngb-dp-day,.ngb-dp-week-number,.ngb-dp-weekday{width:2rem;height:2rem}.ngb-dp-day{cursor:pointer}.ngb-dp-day.disabled,.ngb-dp-day.hidden{cursor:default;pointer-events:none}.ngb-dp-day[tabindex="0"]{z-index:1}'],encapsulation:2}),t})(),sQ=(()=>{class t{constructor(e){this.i18n=e,this.navigation=hh,this.months=[],this.navigate=new q,this.select=new q}onClickPrev(e){e.currentTarget.focus(),this.navigate.emit(this.navigation.PREV)}onClickNext(e){e.currentTarget.focus(),this.navigate.emit(this.navigation.NEXT)}}return t.\u0275fac=function(e){return new(e||t)(C(bu))},t.\u0275cmp=Y({type:t,selectors:[["ngb-datepicker-navigation"]],inputs:{months:"months",date:"date",disabled:"disabled",showSelect:"showSelect",prevDisabled:"prevDisabled",nextDisabled:"nextDisabled",selectBoxes:"selectBoxes"},outputs:{navigate:"navigate",select:"select"},decls:8,vars:4,consts:function(){let n,e,i,r;return n=$localize`:@@ngb.datepicker.previous-month␟c3b08b07b5ab98e7cdcf18df39355690ab7d3884␟8586908745456864217:Previous month`,e=$localize`:@@ngb.datepicker.previous-month␟c3b08b07b5ab98e7cdcf18df39355690ab7d3884␟8586908745456864217:Previous month`,i=$localize`:@@ngb.datepicker.next-month␟4bd046985cfe13040d5ef0cd881edce0968a111a␟3628374603023447227:Next month`,r=$localize`:@@ngb.datepicker.next-month␟4bd046985cfe13040d5ef0cd881edce0968a111a␟3628374603023447227:Next month`,[[1,"ngb-dp-arrow"],["type","button","aria-label",n,"title",e,1,"btn","btn-link","ngb-dp-arrow-btn",3,"disabled","click"],[1,"ngb-dp-navigation-chevron"],["class","ngb-dp-navigation-select",3,"date","disabled","months","years","select",4,"ngIf"],[4,"ngIf"],[1,"ngb-dp-arrow","right"],["type","button","aria-label",i,"title",r,1,"btn","btn-link","ngb-dp-arrow-btn",3,"disabled","click"],[1,"ngb-dp-navigation-select",3,"date","disabled","months","years","select"],["ngFor","",3,"ngForOf"],["class","ngb-dp-arrow",4,"ngIf"],[1,"ngb-dp-month-name"]]},template:function(e,i){1&e&&(p(0,"div",0),p(1,"button",1),A("click",function(o){return i.onClickPrev(o)}),O(2,"span",2),f(),f(),S(3,oW,1,4,"ngb-datepicker-navigation-select",3),S(4,cW,1,1,void 0,4),p(5,"div",5),p(6,"button",6),A("click",function(o){return i.onClickNext(o)}),O(7,"span",2),f(),f()),2&e&&(g(1),v("disabled",i.prevDisabled),g(2),v("ngIf",i.showSelect),g(1),v("ngIf",!i.showSelect),g(2),v("disabled",i.nextDisabled))},directives:function(){return[le,mQ,je]},styles:["ngb-datepicker-navigation{display:flex;align-items:center}.ngb-dp-navigation-chevron{border-style:solid;border-width:.2em .2em 0 0;display:inline-block;width:.75em;height:.75em;margin-left:.25em;margin-right:.15em;transform:rotate(-135deg)}.ngb-dp-arrow{display:flex;flex:1 1 auto;padding-right:0;padding-left:0;margin:0;width:2rem;height:2rem}.ngb-dp-arrow.right{justify-content:flex-end}.ngb-dp-arrow.right .ngb-dp-navigation-chevron{transform:rotate(45deg);margin-left:.15em;margin-right:.25em}.ngb-dp-arrow-btn{padding:0 .25rem;margin:0 .5rem;border:none;background-color:transparent;z-index:1}.ngb-dp-arrow-btn:focus{outline-width:1px;outline-style:auto}@media (-ms-high-contrast:active),(-ms-high-contrast:none){.ngb-dp-arrow-btn:focus{outline-style:solid}}.ngb-dp-month-name{font-size:larger;height:2rem;line-height:2rem;text-align:center}.ngb-dp-navigation-select{display:flex;flex:1 1 9rem}"],encapsulation:2,changeDetection:0}),t})();const ov=(t,n)=>!!n&&n.some(e=>e.contains(t)),rA=(t,n)=>!n||null!=function(t,n){return n&&void 0!==t.closest?t.closest(n):null}(t,n),aQ="undefined"!=typeof navigator&&!!navigator.userAgent&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Android/.test(navigator.userAgent));function xf(t,n,e,i,r,o,s,l){e&&t.runOutsideAngular((t=>aQ?()=>setTimeout(()=>t(),100):t)(()=>{const d=Ci(n,"keydown").pipe(Qn(r),$t(w=>w.which===xt.Escape),Zn(w=>w.preventDefault())),m=Ci(n,"mousedown").pipe(he(w=>{const E=w.target;return 2!==w.button&&!ov(E,s)&&("inside"===e?ov(E,o)&&rA(E,l):"outside"===e?!ov(E,o):rA(E,l)||!ov(E,o))}),Qn(r)),_=Ci(n,"mouseup").pipe(f0(m),$t(([w,E])=>E),m0(0),Qn(r));zP([d.pipe(he(w=>0)),_.pipe(he(w=>1))]).subscribe(w=>t.run(()=>i(w)))}))}const oA=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function sA(t){const n=Array.from(t.querySelectorAll(oA)).filter(e=>-1!==e.tabIndex);return[n[0],n[n.length-1]]}const aA=(t,n,e,i=!1)=>{t.runOutsideAngular(()=>{const r=Ci(n,"focusin").pipe(Qn(e),he(o=>o.target));Ci(n,"keydown").pipe(Qn(e),$t(o=>o.which===xt.Tab),f0(r)).subscribe(([o,s])=>{const[l,c]=sA(n);(s===l||s===n)&&o.shiftKey&&(c.focus(),o.preventDefault()),s===c&&!o.shiftKey&&(l.focus(),o.preventDefault())}),i&&Ci(n,"click").pipe(Qn(e),f0(r),he(o=>o[1])).subscribe(o=>o.focus())})},uQ=/\s+/,lA=new class{getAllStyles(n){return window.getComputedStyle(n)}getStyle(n,e){return this.getAllStyles(n)[e]}isStaticPositioned(n){return"static"===(this.getStyle(n,"position")||"static")}offsetParent(n){let e=n.offsetParent||document.documentElement;for(;e&&e!==document.documentElement&&this.isStaticPositioned(e);)e=e.offsetParent;return e||document.documentElement}position(n,e=!0){let i,r={width:0,height:0,top:0,bottom:0,left:0,right:0};if("fixed"===this.getStyle(n,"position"))i=n.getBoundingClientRect(),i={top:i.top,bottom:i.bottom,left:i.left,right:i.right,height:i.height,width:i.width};else{const o=this.offsetParent(n);i=this.offset(n,!1),o!==document.documentElement&&(r=this.offset(o,!1)),r.top+=o.clientTop,r.left+=o.clientLeft}return i.top-=r.top,i.bottom-=r.top,i.left-=r.left,i.right-=r.left,e&&(i.top=Math.round(i.top),i.bottom=Math.round(i.bottom),i.left=Math.round(i.left),i.right=Math.round(i.right)),i}offset(n,e=!0){const i=n.getBoundingClientRect(),r_top=window.pageYOffset-document.documentElement.clientTop,r_left=window.pageXOffset-document.documentElement.clientLeft;let o={height:i.height||n.offsetHeight,width:i.width||n.offsetWidth,top:i.top+r_top,bottom:i.bottom+r_top,left:i.left+r_left,right:i.right+r_left};return e&&(o.height=Math.round(o.height),o.width=Math.round(o.width),o.top=Math.round(o.top),o.bottom=Math.round(o.bottom),o.left=Math.round(o.left),o.right=Math.round(o.right)),o}positionElements(n,e,i,r){const[o="top",s="center"]=i.split("-"),l=r?this.offset(n,!1):this.position(n,!1),c=this.getAllStyles(e),d=parseFloat(c.marginTop),m=parseFloat(c.marginBottom),_=parseFloat(c.marginLeft),w=parseFloat(c.marginRight);let E=0,D=0;switch(o){case"top":E=l.top-(e.offsetHeight+d+m);break;case"bottom":E=l.top+l.height;break;case"left":D=l.left-(e.offsetWidth+_+w);break;case"right":D=l.left+l.width}switch(s){case"top":E=l.top;break;case"bottom":E=l.top+l.height-e.offsetHeight;break;case"left":D=l.left;break;case"right":D=l.left+l.width-e.offsetWidth;break;case"center":"top"===o||"bottom"===o?D=l.left+l.width/2-e.offsetWidth/2:E=l.top+l.height/2-e.offsetHeight/2}e.style.transform=`translate(${Math.round(D)}px, ${Math.round(E)}px)`;const N=e.getBoundingClientRect(),F=document.documentElement,j=window.innerHeight||F.clientHeight,H=window.innerWidth||F.clientWidth;return N.left>=0&&N.top>=0&&N.right<=H&&N.bottom<=j}};function Mf(t,n,e,i,r){let o=Array.isArray(e)?e:e.split(uQ);const s=["top","bottom","left","right","top-left","top-right","bottom-left","bottom-right","left-top","left-bottom","right-top","right-bottom"],l=n.classList,c=E=>{const[D,N]=E.split("-"),F=[];return r&&(F.push(`${r}-${D}`),N&&F.push(`${r}-${D}-${N}`),F.forEach(j=>{l.add(j)})),F};r&&s.forEach(E=>{l.remove(`${r}-${E}`)});let d=o.findIndex(E=>"auto"===E);d>=0&&s.forEach(function(E){null==o.find(D=>-1!==D.search("^"+E))&&o.splice(d++,1,E)});const m=n.style;m.position="absolute",m.top="0",m.left="0",m["will-change"]="transform";let _=null,w=!1;for(_ of o){let E=c(_);if(lA.positionElements(t,n,_,i)){w=!0;break}r&&E.forEach(D=>{l.remove(D)})}return w||(_=o[0],c(_),lA.positionElements(t,n,_,i)),_}function dQ(){return new hQ}let sv=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=B({factory:dQ,token:t,providedIn:"root"}),t})(),hQ=(()=>{class t extends sv{parse(e){if(null!=e){const i=e.trim().split("-");if(1===i.length&&Kn(i[0]))return{year:Xi(i[0]),month:null,day:null};if(2===i.length&&Kn(i[0])&&Kn(i[1]))return{year:Xi(i[0]),month:Xi(i[1]),day:null};if(3===i.length&&Kn(i[0])&&Kn(i[1])&&Kn(i[2]))return{year:Xi(i[0]),month:Xi(i[1]),day:Xi(i[2])}}return null}format(e){return e?`${e.year}-${Kn(e.month)?ch(e.month):""}-${Kn(e.day)?ch(e.day):""}`:""}}return t.\u0275fac=function(){let n;return function(i){return(n||(n=tn(t)))(i||t)}}(),t.\u0275prov=B({token:t,factory:t.\u0275fac}),t})(),cA=(()=>{class t extends z0{constructor(){super(...arguments),this.autoClose=!0,this.placement=["bottom-left","bottom-right","top-left","top-right"],this.restoreFocus=!0}}return t.\u0275fac=function(){let n;return function(i){return(n||(n=tn(t)))(i||t)}}(),t.\u0275prov=B({factory:function(){return new t},token:t,providedIn:"root"}),t})(),pQ=(()=>{class t{constructor(e,i,r,o,s,l,c,d,m,_,w){this._parserFormatter=e,this._elRef=i,this._vcRef=r,this._renderer=o,this._cfr=s,this._ngZone=l,this._calendar=c,this._dateAdapter=d,this._document=m,this._changeDetector=_,this._cRef=null,this._disabled=!1,this._elWithFocus=null,this._model=null,this.dateSelect=new q,this.navigate=new q,this.closed=new q,this._onChange=E=>{},this._onTouched=()=>{},this._validatorChange=()=>{},["autoClose","container","positionTarget","placement"].forEach(E=>this[E]=w[E]),this._zoneSubscription=l.onStable.subscribe(()=>this._updatePopupPosition())}get disabled(){return this._disabled}set disabled(e){this._disabled=""===e||e&&"false"!==e,this.isOpen()&&this._cRef.instance.setDisabledState(this._disabled)}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}registerOnValidatorChange(e){this._validatorChange=e}setDisabledState(e){this.disabled=e}validate(e){const{value:i}=e;if(null!=i){const r=this._fromDateStruct(this._dateAdapter.fromModel(i));if(!r)return{ngbDate:{invalid:i}};if(this.minDate&&r.before(Ei.from(this.minDate)))return{ngbDate:{minDate:{minDate:this.minDate,actual:i}}};if(this.maxDate&&r.after(Ei.from(this.maxDate)))return{ngbDate:{maxDate:{maxDate:this.maxDate,actual:i}}}}return null}writeValue(e){this._model=this._fromDateStruct(this._dateAdapter.fromModel(e)),this._writeModelValue(this._model)}manualDateChange(e,i=!1){const r=e!==this._inputValue;r&&(this._inputValue=e,this._model=this._fromDateStruct(this._parserFormatter.parse(e))),(r||!i)&&this._onChange(this._model?this._dateAdapter.toModel(this._model):""===e?null:e),i&&this._model&&this._writeModelValue(this._model)}isOpen(){return!!this._cRef}open(){if(!this.isOpen()){const e=this._cfr.resolveComponentFactory(iA);this._cRef=this._vcRef.createComponent(e),this._applyPopupStyling(this._cRef.location.nativeElement),this._applyDatepickerInputs(this._cRef.instance),this._subscribeForDatepickerOutputs(this._cRef.instance),this._cRef.instance.ngOnInit(),this._cRef.instance.writeValue(this._dateAdapter.toModel(this._model)),this._cRef.instance.registerOnChange(i=>{this.writeValue(i),this._onChange(i),this._onTouched()}),this._cRef.changeDetectorRef.detectChanges(),this._cRef.instance.setDisabledState(this.disabled),"body"===this.container&&this._document.querySelector(this.container).appendChild(this._cRef.location.nativeElement),this._elWithFocus=this._document.activeElement,aA(this._ngZone,this._cRef.location.nativeElement,this.closed,!0),this._cRef.instance.focus(),xf(this._ngZone,this._document,this.autoClose,()=>this.close(),this.closed,[],[this._elRef.nativeElement,this._cRef.location.nativeElement])}}close(){if(this.isOpen()){this._vcRef.remove(this._vcRef.indexOf(this._cRef.hostView)),this._cRef=null,this.closed.emit(),this._changeDetector.markForCheck();let e=this._elWithFocus;J_(this.restoreFocus)?e=this._document.querySelector(this.restoreFocus):void 0!==this.restoreFocus&&(e=this.restoreFocus),e&&e.focus?e.focus():this._document.body.focus()}}toggle(){this.isOpen()?this.close():this.open()}navigateTo(e){this.isOpen()&&this._cRef.instance.navigateTo(e)}onBlur(){this._onTouched()}onFocus(){this._elWithFocus=this._elRef.nativeElement}ngOnChanges(e){if((e.minDate||e.maxDate)&&(this._validatorChange(),this.isOpen()&&(e.minDate&&(this._cRef.instance.minDate=this.minDate),e.maxDate&&(this._cRef.instance.maxDate=this.maxDate),this._cRef.instance.ngOnChanges(e))),e.datepickerClass){const{currentValue:i,previousValue:r}=e.datepickerClass;this._applyPopupClass(i,r)}}ngOnDestroy(){this.close(),this._zoneSubscription.unsubscribe()}_applyDatepickerInputs(e){["dayTemplate","dayTemplateData","displayMonths","firstDayOfWeek","footerTemplate","markDisabled","minDate","maxDate","navigation","outsideDays","showNavigation","showWeekNumbers","weekdays"].forEach(i=>{void 0!==this[i]&&(e[i]=this[i])}),e.startDate=this.startDate||this._model}_applyPopupClass(e,i){var r;const o=null===(r=this._cRef)||void 0===r?void 0:r.location.nativeElement;o&&(e&&this._renderer.addClass(o,e),i&&this._renderer.removeClass(o,i))}_applyPopupStyling(e){this._renderer.addClass(e,"dropdown-menu"),this._renderer.addClass(e,"show"),"body"===this.container&&this._renderer.addClass(e,"ngb-dp-body"),this._applyPopupClass(this.datepickerClass)}_subscribeForDatepickerOutputs(e){e.navigate.subscribe(i=>this.navigate.emit(i)),e.dateSelect.subscribe(i=>{this.dateSelect.emit(i),(!0===this.autoClose||"inside"===this.autoClose)&&this.close()})}_writeModelValue(e){const i=this._parserFormatter.format(e);this._inputValue=i,this._renderer.setProperty(this._elRef.nativeElement,"value",i),this.isOpen()&&(this._cRef.instance.writeValue(this._dateAdapter.toModel(e)),this._onTouched())}_fromDateStruct(e){const i=e?new Ei(e.year,e.month,e.day):null;return this._calendar.isValid(i)?i:null}_updatePopupPosition(){if(!this._cRef)return;let e;if(e=J_(this.positionTarget)?this._document.querySelector(this.positionTarget):this.positionTarget instanceof HTMLElement?this.positionTarget:this._elRef.nativeElement,this.positionTarget&&!e)throw new Error("ngbDatepicker could not find element declared in [positionTarget] to position against.");Mf(e,this._cRef.location.nativeElement,this.placement,"body"===this.container)}}return t.\u0275fac=function(e){return new(e||t)(C(sv),C(Ye),C(Yi),C(vi),C(_r),C(it),C(Df),C(ph),C(Ot),C(ci),C(cA))},t.\u0275dir=te({type:t,selectors:[["input","ngbDatepicker",""]],hostVars:1,hostBindings:function(e,i){1&e&&A("input",function(o){return i.manualDateChange(o.target.value)})("change",function(o){return i.manualDateChange(o.target.value,!0)})("focus",function(){return i.onFocus()})("blur",function(){return i.onBlur()}),2&e&&no("disabled",i.disabled)},inputs:{disabled:"disabled",autoClose:"autoClose",datepickerClass:"datepickerClass",dayTemplate:"dayTemplate",dayTemplateData:"dayTemplateData",displayMonths:"displayMonths",firstDayOfWeek:"firstDayOfWeek",footerTemplate:"footerTemplate",markDisabled:"markDisabled",minDate:"minDate",maxDate:"maxDate",navigation:"navigation",outsideDays:"outsideDays",placement:"placement",restoreFocus:"restoreFocus",showWeekNumbers:"showWeekNumbers",startDate:"startDate",container:"container",positionTarget:"positionTarget",weekdays:"weekdays"},outputs:{dateSelect:"dateSelect",navigate:"navigate",closed:"closed"},exportAs:["ngbDatepicker"],features:[At([{provide:wi,useExisting:ot(()=>t),multi:!0},{provide:Ji,useExisting:ot(()=>t),multi:!0},{provide:z0,useExisting:cA}]),St]}),t})(),fQ=(()=>{class t{constructor(e){this.i18n=e}isMuted(){return!this.selected&&(this.date.month!==this.currentMonth||this.disabled)}}return t.\u0275fac=function(e){return new(e||t)(C(bu))},t.\u0275cmp=Y({type:t,selectors:[["","ngbDatepickerDayView",""]],hostAttrs:[1,"btn-light"],hostVars:10,hostBindings:function(e,i){2&e&&Oe("bg-primary",i.selected)("text-white",i.selected)("text-muted",i.isMuted())("outside",i.isMuted())("active",i.focused)},inputs:{currentMonth:"currentMonth",date:"date",disabled:"disabled",focused:"focused",selected:"selected"},attrs:uW,decls:1,vars:1,template:function(e,i){1&e&&k(0),2&e&&Le(i.i18n.getDayNumerals(i.date))},styles:["[ngbDatepickerDayView]{text-align:center;width:2rem;height:2rem;line-height:2rem;border-radius:.25rem;background:transparent}[ngbDatepickerDayView].outside{opacity:.5}"],encapsulation:2,changeDetection:0}),t})(),mQ=(()=>{class t{constructor(e,i){this.i18n=e,this._renderer=i,this.select=new q,this._month=-1,this._year=-1}changeMonth(e){this.select.emit(new Ei(this.date.year,Xi(e),1))}changeYear(e){this.select.emit(new Ei(Xi(e),this.date.month,1))}ngAfterViewChecked(){this.date&&(this.date.month!==this._month&&(this._month=this.date.month,this._renderer.setProperty(this.monthSelect.nativeElement,"value",this._month)),this.date.year!==this._year&&(this._year=this.date.year,this._renderer.setProperty(this.yearSelect.nativeElement,"value",this._year)))}}return t.\u0275fac=function(e){return new(e||t)(C(bu),C(vi))},t.\u0275cmp=Y({type:t,selectors:[["ngb-datepicker-navigation-select"]],viewQuery:function(e,i){if(1&e&&(pt(dW,7,Ye),pt(hW,7,Ye)),2&e){let r;ye(r=be())&&(i.monthSelect=r.first),ye(r=be())&&(i.yearSelect=r.first)}},inputs:{date:"date",disabled:"disabled",months:"months",years:"years"},outputs:{select:"select"},decls:6,vars:4,consts:function(){let n,e,i,r;return n=$localize`:@@ngb.datepicker.select-month␟1dbc84807f35518112f62e5775d1daebd3d8462b␟2253869508135064750:Select month`,e=$localize`:@@ngb.datepicker.select-month␟1dbc84807f35518112f62e5775d1daebd3d8462b␟2253869508135064750:Select month`,i=$localize`:@@ngb.datepicker.select-year␟8ceb09d002bf0c5d1cac171dfbffe1805d2b3962␟8852264961585484321:Select year`,r=$localize`:@@ngb.datepicker.select-year␟8ceb09d002bf0c5d1cac171dfbffe1805d2b3962␟8852264961585484321:Select year`,[["aria-label",n,"title",e,1,"custom-select",3,"disabled","change"],["month",""],[3,"value",4,"ngFor","ngForOf"],["aria-label",i,"title",r,1,"custom-select",3,"disabled","change"],["year",""],[3,"value"]]},template:function(e,i){1&e&&(p(0,"select",0,1),A("change",function(o){return i.changeMonth(o.target.value)}),S(2,pW,2,3,"option",2),f(),p(3,"select",3,4),A("change",function(o){return i.changeYear(o.target.value)}),S(5,fW,2,2,"option",2),f()),2&e&&(v("disabled",i.disabled),g(2),v("ngForOf",i.months),g(1),v("disabled",i.disabled),g(2),v("ngForOf",i.years))},directives:[je,as,ls],styles:["ngb-datepicker-navigation-select>.custom-select{flex:1 1 auto;padding:0 .5rem;font-size:.875rem;height:1.85rem}ngb-datepicker-navigation-select>.custom-select:focus{z-index:1}ngb-datepicker-navigation-select>.custom-select::-ms-value{background-color:transparent!important}"],encapsulation:2,changeDetection:0}),t})();new Date(1882,10,12),new Date(2174,10,25);let mA=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=et({type:t}),t.\u0275inj=Te({imports:[[bi,N0]]}),t})(),yA=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=et({type:t}),t.\u0275inj=Te({}),t})(),bA=(()=>{class t{constructor(e){this._ngbConfig=e,this.backdrop=!0,this.keyboard=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(e){this._animation=e}}return t.\u0275fac=function(e){return new(e||t)(P(Hi))},t.\u0275prov=B({factory:function(){return new t(P(Hi))},token:t,providedIn:"root"}),t})();class Su{constructor(n,e,i){this.nodes=n,this.viewRef=e,this.componentRef=i}}class Q0{constructor(n,e,i,r,o,s,l){this._type=n,this._injector=e,this._viewContainerRef=i,this._renderer=r,this._ngZone=o,this._componentFactoryResolver=s,this._applicationRef=l,this._windowRef=null,this._contentRef=null}open(n,e,i=!1){this._windowRef||(this._contentRef=this._getContentRef(n,e),this._windowRef=this._viewContainerRef.createComponent(this._componentFactoryResolver.resolveComponentFactory(this._type),this._viewContainerRef.length,this._injector,this._contentRef.nodes));const{nativeElement:r}=this._windowRef.location,o=this._ngZone.onStable.pipe(Pn(1),rn(()=>Ti(this._ngZone,r,({classList:s})=>s.add("show"),{animation:i,runningTransition:"continue"})));return{windowRef:this._windowRef,transition$:o}}close(n=!1){return this._windowRef?Ti(this._ngZone,this._windowRef.location.nativeElement,({classList:e})=>e.remove("show"),{animation:n,runningTransition:"stop"}).pipe(Zn(()=>{var e;this._windowRef&&(this._viewContainerRef.remove(this._viewContainerRef.indexOf(this._windowRef.hostView)),this._windowRef=null),(null===(e=this._contentRef)||void 0===e?void 0:e.viewRef)&&(this._applicationRef.detachView(this._contentRef.viewRef),this._contentRef.viewRef.destroy(),this._contentRef=null)})):Ee(void 0)}_getContentRef(n,e){if(n){if(n instanceof fn){const i=n.createEmbeddedView(e);return this._applicationRef.attachView(i),new Su([i.rootNodes],i)}return new Su([[this._renderer.createText(`${n}`)]])}return new Su([])}}const EQ=()=>{};let CA=(()=>{class t{constructor(e){this._document=e}compensate(){const e=this._getWidth();return this._isPresent(e)?this._adjustBody(e):EQ}_adjustBody(e){const i=this._document.body,r=i.style.paddingRight,o=parseFloat(window.getComputedStyle(i)["padding-right"]);return i.style["padding-right"]=`${o+e}px`,()=>i.style["padding-right"]=r}_isPresent(e){const i=this._document.body.getBoundingClientRect();return window.innerWidth-(i.left+i.right)>=e-.1*e}_getWidth(){const e=this._document.createElement("div");e.className="modal-scrollbar-measure";const i=this._document.body;i.appendChild(e);const r=e.getBoundingClientRect().width-e.clientWidth;return i.removeChild(e),r}}return t.\u0275fac=function(e){return new(e||t)(P(Ot))},t.\u0275prov=B({factory:function(){return new t(P(Ot))},token:t,providedIn:"root"}),t})(),kQ=(()=>{class t{constructor(e,i){this._el=e,this._zone=i}ngOnInit(){this._zone.onStable.asObservable().pipe(Pn(1)).subscribe(()=>{Ti(this._zone,this._el.nativeElement,(e,i)=>{i&&uh(e),e.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return Ti(this._zone,this._el.nativeElement,({classList:e})=>e.remove("show"),{animation:this.animation,runningTransition:"stop"})}}return t.\u0275fac=function(e){return new(e||t)(C(Ye),C(it))},t.\u0275cmp=Y({type:t,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1050"],hostVars:6,hostBindings:function(e,i){2&e&&(Ao("modal-backdrop"+(i.backdropClass?" "+i.backdropClass:"")),Oe("show",!i.animation)("fade",i.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},decls:0,vars:0,template:function(e,i){},encapsulation:2}),t})();class wA{close(n){}dismiss(n){}}class DQ{constructor(n,e,i,r){this._windowCmptRef=n,this._contentRef=e,this._backdropCmptRef=i,this._beforeDismiss=r,this._closed=new Fe,this._dismissed=new Fe,this._hidden=new Fe,n.instance.dismissEvent.subscribe(o=>{this.dismiss(o)}),this.result=new Promise((o,s)=>{this._resolve=o,this._reject=s}),this.result.then(null,()=>{})}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(Qn(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(Qn(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}close(n){this._windowCmptRef&&(this._closed.next(n),this._resolve(n),this._removeModalElements())}_dismiss(n){this._dismissed.next(n),this._reject(n),this._removeModalElements()}dismiss(n){if(this._windowCmptRef)if(this._beforeDismiss){const e=this._beforeDismiss();e&&e.then?e.then(i=>{!1!==i&&this._dismiss(n)},()=>{}):!1!==e&&this._dismiss(n)}else this._dismiss(n)}_removeModalElements(){const n=this._windowCmptRef.instance.hide(),e=this._backdropCmptRef?this._backdropCmptRef.instance.hide():Ee(void 0);n.subscribe(()=>{const{nativeElement:i}=this._windowCmptRef.location;i.parentNode.removeChild(i),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),e.subscribe(()=>{if(this._backdropCmptRef){const{nativeElement:i}=this._backdropCmptRef.location;i.parentNode.removeChild(i),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),L_(n,e).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}}var Af=(()=>(function(t){t[t.BACKDROP_CLICK=0]="BACKDROP_CLICK",t[t.ESC=1]="ESC"}(Af||(Af={})),Af))();let xQ=(()=>{class t{constructor(e,i,r){this._document=e,this._elRef=i,this._zone=r,this._closed$=new Fe,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new q,this.shown=new Fe,this.hidden=new Fe}dismiss(e){this.dismissEvent.emit(e)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe(Pn(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){const{nativeElement:e}=this._elRef,i={animation:this.animation,runningTransition:"stop"},s=L_(Ti(this._zone,e,()=>e.classList.remove("show"),i),Ti(this._zone,this._dialogEl.nativeElement,()=>{},i));return s.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),s}_show(){const e={animation:this.animation,runningTransition:"continue"};L_(Ti(this._zone,this._elRef.nativeElement,(o,s)=>{s&&uh(o),o.classList.add("show")},e),Ti(this._zone,this._dialogEl.nativeElement,()=>{},e)).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){const{nativeElement:e}=this._elRef;this._zone.runOutsideAngular(()=>{Ci(e,"keydown").pipe(Qn(this._closed$),$t(r=>r.which===xt.Escape)).subscribe(r=>{this.keyboard?requestAnimationFrame(()=>{r.defaultPrevented||this._zone.run(()=>this.dismiss(Af.ESC))}):"static"===this.backdrop&&this._bumpBackdrop()});let i=!1;Ci(this._dialogEl.nativeElement,"mousedown").pipe(Qn(this._closed$),Zn(()=>i=!1),ri(()=>Ci(e,"mouseup").pipe(Qn(this._closed$),Pn(1))),$t(({target:r})=>e===r)).subscribe(()=>{i=!0}),Ci(e,"click").pipe(Qn(this._closed$)).subscribe(({target:r})=>{e===r&&("static"===this.backdrop?this._bumpBackdrop():!0===this.backdrop&&!i&&this._zone.run(()=>this.dismiss(Af.BACKDROP_CLICK))),i=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){const{nativeElement:e}=this._elRef;if(!e.contains(document.activeElement)){const i=e.querySelector("[ngbAutofocus]"),r=sA(e)[0];(i||r||e).focus()}}_restoreFocus(){const e=this._document.body,i=this._elWithFocus;let r;r=i&&i.focus&&e.contains(i)?i:e,this._zone.runOutsideAngular(()=>{setTimeout(()=>r.focus()),this._elWithFocus=null})}_bumpBackdrop(){"static"===this.backdrop&&Ti(this._zone,this._elRef.nativeElement,({classList:e})=>(e.add("modal-static"),()=>e.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}}return t.\u0275fac=function(e){return new(e||t)(C(Ot),C(Ye),C(it))},t.\u0275cmp=Y({type:t,selectors:[["ngb-modal-window"]],viewQuery:function(e,i){if(1&e&&pt(mW,7),2&e){let r;ye(r=be())&&(i._dialogEl=r.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(e,i){2&e&&(Ct("aria-modal",!0)("aria-labelledby",i.ariaLabelledBy)("aria-describedby",i.ariaDescribedBy),Ao("modal d-block"+(i.windowClass?" "+i.windowClass:"")),Oe("fade",i.animation))},inputs:{backdrop:"backdrop",keyboard:"keyboard",animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",centered:"centered",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},ngContentSelectors:lh,decls:4,vars:2,consts:[["role","document"],["dialog",""],[1,"modal-content"]],template:function(e,i){1&e&&(Ca(),p(0,"div",0,1),p(2,"div",2),wa(3),f(),f()),2&e&&Ao("modal-dialog"+(i.size?" modal-"+i.size:"")+(i.centered?" modal-dialog-centered":"")+(i.scrollable?" modal-dialog-scrollable":"")+(i.modalDialogClass?" "+i.modalDialogClass:""))},styles:["ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}"],encapsulation:2}),t})(),SA=(()=>{class t{constructor(e,i,r,o,s,l){this._applicationRef=e,this._injector=i,this._document=r,this._scrollBar=o,this._rendererFactory=s,this._ngZone=l,this._activeWindowCmptHasChanged=new Fe,this._ariaHiddenValues=new Map,this._backdropAttributes=["animation","backdropClass"],this._modalRefs=[],this._windowAttributes=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","keyboard","scrollable","size","windowClass","modalDialogClass"],this._windowCmpts=[],this._activeInstances=new q,this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){const c=this._windowCmpts[this._windowCmpts.length-1];aA(this._ngZone,c.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(c.location.nativeElement)}})}open(e,i,r,o){const s=o.container instanceof HTMLElement?o.container:Sc(o.container)?this._document.querySelector(o.container):this._document.body,l=this._rendererFactory.createRenderer(null,null),c=this._scrollBar.compensate(),d=()=>{this._modalRefs.length||(l.removeClass(this._document.body,"modal-open"),this._revertAriaHidden())};if(!s)throw new Error(`The specified modal container "${o.container||"body"}" was not found in the DOM.`);const m=new wA,_=this._getContentRef(e,o.injector||i,r,m,o);let w=!1!==o.backdrop?this._attachBackdrop(e,s):void 0,E=this._attachWindowComponent(e,s,_),D=new DQ(E,_,w,o.beforeDismiss);return this._registerModalRef(D),this._registerWindowCmpt(E),D.result.then(c,c),D.result.then(d,d),m.close=N=>{D.close(N)},m.dismiss=N=>{D.dismiss(N)},this._applyWindowOptions(E.instance,o),1===this._modalRefs.length&&l.addClass(this._document.body,"modal-open"),w&&w.instance&&(this._applyBackdropOptions(w.instance,o),w.changeDetectorRef.detectChanges()),E.changeDetectorRef.detectChanges(),D}get activeInstances(){return this._activeInstances}dismissAll(e){this._modalRefs.forEach(i=>i.dismiss(e))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(e,i){let o=e.resolveComponentFactory(kQ).create(this._injector);return this._applicationRef.attachView(o.hostView),i.appendChild(o.location.nativeElement),o}_attachWindowComponent(e,i,r){let s=e.resolveComponentFactory(xQ).create(this._injector,r.nodes);return this._applicationRef.attachView(s.hostView),i.appendChild(s.location.nativeElement),s}_applyWindowOptions(e,i){this._windowAttributes.forEach(r=>{Sc(i[r])&&(e[r]=i[r])})}_applyBackdropOptions(e,i){this._backdropAttributes.forEach(r=>{Sc(i[r])&&(e[r]=i[r])})}_getContentRef(e,i,r,o,s){return r?r instanceof fn?this._createFromTemplateRef(r,o):J_(r)?this._createFromString(r):this._createFromComponent(e,i,r,o,s):new Su([])}_createFromTemplateRef(e,i){const o=e.createEmbeddedView({$implicit:i,close(s){i.close(s)},dismiss(s){i.dismiss(s)}});return this._applicationRef.attachView(o),new Su([o.rootNodes],o)}_createFromString(e){const i=this._document.createTextNode(`${e}`);return new Su([[i]])}_createFromComponent(e,i,r,o,s){const l=e.resolveComponentFactory(r),c=Mt.create({providers:[{provide:wA,useValue:o}],parent:i}),d=l.create(c),m=d.location.nativeElement;return s.scrollable&&m.classList.add("component-host-scrollable"),this._applicationRef.attachView(d.hostView),new Su([[m]],d.hostView,d)}_setAriaHidden(e){const i=e.parentElement;i&&e!==this._document.body&&(Array.from(i.children).forEach(r=>{r!==e&&"SCRIPT"!==r.nodeName&&(this._ariaHiddenValues.set(r,r.getAttribute("aria-hidden")),r.setAttribute("aria-hidden","true"))}),this._setAriaHidden(i))}_revertAriaHidden(){this._ariaHiddenValues.forEach((e,i)=>{e?i.setAttribute("aria-hidden",e):i.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(e){const i=()=>{const r=this._modalRefs.indexOf(e);r>-1&&(this._modalRefs.splice(r,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(e),this._activeInstances.emit(this._modalRefs),e.result.then(i,i)}_registerWindowCmpt(e){this._windowCmpts.push(e),this._activeWindowCmptHasChanged.next(),e.onDestroy(()=>{const i=this._windowCmpts.indexOf(e);i>-1&&(this._windowCmpts.splice(i,1),this._activeWindowCmptHasChanged.next())})}}return t.\u0275fac=function(e){return new(e||t)(P(ts),P(Mt),P(Ot),P(CA),P(ul),P(it))},t.\u0275prov=B({factory:function(){return new t(P(ts),P(ll),P(Ot),P(CA),P(ul),P(it))},token:t,providedIn:"root"}),t})(),Z0=(()=>{class t{constructor(e,i,r,o){this._moduleCFR=e,this._injector=i,this._modalStack=r,this._config=o}open(e,i={}){const r=Object.assign(Object.assign(Object.assign({},this._config),{animation:this._config.animation}),i);return this._modalStack.open(this._moduleCFR,this._injector,e,r)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(e){this._modalStack.dismissAll(e)}hasOpenModals(){return this._modalStack.hasOpenModals()}}return t.\u0275fac=function(e){return new(e||t)(P(_r),P(Mt),P(SA),P(bA))},t.\u0275prov=B({factory:function(){return new t(P(_r),P(ll),P(SA),P(bA))},token:t,providedIn:"root"}),t})(),TA=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=et({type:t}),t.\u0275inj=Te({providers:[Z0]}),t})(),xA=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=et({type:t}),t.\u0275inj=Te({imports:[[bi]]}),t})(),RA=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=et({type:t}),t.\u0275inj=Te({imports:[[bi]]}),t})();class RQ{constructor(n,e){this.open=n,this.close=e,e||(this.close=n)}isManual(){return"manual"===this.open||"manual"===this.close}}const LQ={hover:["mouseenter","mouseleave"],focus:["focusin","focusout"]},LA=t=>t>0?m0(t):n=>n;let UA=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=et({type:t}),t.\u0275inj=Te({imports:[[bi]]}),t})(),VA=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=et({type:t}),t.\u0275inj=Te({imports:[[bi]]}),t})(),BA=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=et({type:t}),t.\u0275inj=Te({imports:[[bi]]}),t})(),GA=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=et({type:t}),t.\u0275inj=Te({imports:[[bi]]}),t})(),WA=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=et({type:t}),t.\u0275inj=Te({imports:[[bi]]}),t})(),nZ=(()=>{class t{constructor(e){this._ngbConfig=e,this.autoClose=!0,this.placement="auto",this.triggers="hover focus",this.disableTooltip=!1,this.openDelay=0,this.closeDelay=0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(e){this._animation=e}}return t.\u0275fac=function(e){return new(e||t)(P(Hi))},t.\u0275prov=B({factory:function(){return new t(P(Hi))},token:t,providedIn:"root"}),t})(),iZ=0,rZ=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Y({type:t,selectors:[["ngb-tooltip-window"]],hostAttrs:["role","tooltip"],hostVars:5,hostBindings:function(e,i){2&e&&(no("id",i.id),Ao("tooltip"+(i.tooltipClass?" "+i.tooltipClass:"")),Oe("fade",i.animation))},inputs:{animation:"animation",id:"id",tooltipClass:"tooltipClass"},ngContentSelectors:lh,decls:3,vars:0,consts:[[1,"arrow"],[1,"tooltip-inner"]],template:function(e,i){1&e&&(Ca(),O(0,"div",0),p(1,"div",1),wa(2),f())},styles:["ngb-tooltip-window{pointer-events:none}ngb-tooltip-window .tooltip-inner{pointer-events:auto}ngb-tooltip-window.bs-tooltip-bottom .arrow,ngb-tooltip-window.bs-tooltip-top .arrow{left:calc(50% - .4rem)}ngb-tooltip-window.bs-tooltip-bottom-left .arrow,ngb-tooltip-window.bs-tooltip-top-left .arrow{left:1em}ngb-tooltip-window.bs-tooltip-bottom-right .arrow,ngb-tooltip-window.bs-tooltip-top-right .arrow{left:auto;right:.8rem}ngb-tooltip-window.bs-tooltip-left .arrow,ngb-tooltip-window.bs-tooltip-right .arrow{top:calc(50% - .4rem)}ngb-tooltip-window.bs-tooltip-left-top .arrow,ngb-tooltip-window.bs-tooltip-right-top .arrow{top:.4rem}ngb-tooltip-window.bs-tooltip-left-bottom .arrow,ngb-tooltip-window.bs-tooltip-right-bottom .arrow{top:auto;bottom:.4rem}"],encapsulation:2,changeDetection:0}),t})(),Of=(()=>{class t{constructor(e,i,r,o,s,l,c,d,m,_){this._elementRef=e,this._renderer=i,this._ngZone=c,this._document=d,this._changeDetector=m,this.shown=new q,this.hidden=new q,this._ngbTooltipWindowId="ngb-tooltip-"+iZ++,this._windowRef=null,this.animation=l.animation,this.autoClose=l.autoClose,this.placement=l.placement,this.triggers=l.triggers,this.container=l.container,this.disableTooltip=l.disableTooltip,this.tooltipClass=l.tooltipClass,this.openDelay=l.openDelay,this.closeDelay=l.closeDelay,this._popupService=new Q0(rZ,r,s,i,this._ngZone,o,_),this._zoneSubscription=c.onStable.subscribe(()=>{this._windowRef&&Mf(this._elementRef.nativeElement,this._windowRef.location.nativeElement,this.placement,"body"===this.container,"bs-tooltip")})}set ngbTooltip(e){this._ngbTooltip=e,!e&&this._windowRef&&this.close()}get ngbTooltip(){return this._ngbTooltip}open(e){if(!this._windowRef&&this._ngbTooltip&&!this.disableTooltip){const{windowRef:i,transition$:r}=this._popupService.open(this._ngbTooltip,e,this.animation);this._windowRef=i,this._windowRef.instance.animation=this.animation,this._windowRef.instance.tooltipClass=this.tooltipClass,this._windowRef.instance.id=this._ngbTooltipWindowId,this._renderer.setAttribute(this._elementRef.nativeElement,"aria-describedby",this._ngbTooltipWindowId),"body"===this.container&&this._document.querySelector(this.container).appendChild(this._windowRef.location.nativeElement),this._windowRef.changeDetectorRef.detectChanges(),this._windowRef.changeDetectorRef.markForCheck(),xf(this._ngZone,this._document,this.autoClose,()=>this.close(),this.hidden,[this._windowRef.location.nativeElement]),r.subscribe(()=>this.shown.emit())}}close(){null!=this._windowRef&&(this._renderer.removeAttribute(this._elementRef.nativeElement,"aria-describedby"),this._popupService.close(this.animation).subscribe(()=>{this._windowRef=null,this.hidden.emit(),this._changeDetector.markForCheck()}))}toggle(){this._windowRef?this.close():this.open()}isOpen(){return null!=this._windowRef}ngOnInit(){this._unregisterListenersFn=function(t,n,e,i,r,o,s=0,l=0){const c=function(t,n=LQ){const e=(t||"").trim();if(0===e.length)return[];const i=e.split(/\s+/).map(o=>o.split(":")).map(o=>{let s=n[o[0]]||o;return new RQ(s[0],s[1])}),r=i.filter(o=>o.isManual());if(r.length>1)throw"Triggers parse error: only one manual trigger is allowed";if(1===r.length&&i.length>1)throw"Triggers parse error: manual trigger can't be mixed with other triggers";return i}(e);if(1===c.length&&c[0].isManual())return()=>{};const d=function(t,n,e,i){return new _t(r=>{const o=[],s=()=>r.next(!0),l=()=>r.next(!1),c=()=>r.next(!i());return e.forEach(d=>{d.open===d.close?o.push(t.listen(n,d.open,c)):o.push(t.listen(n,d.open,s),t.listen(n,d.close,l))}),()=>{o.forEach(d=>d())}})}(t,n,c,i).pipe(function(t,n,e){return i=>{let r=null;const o=i.pipe(he(c=>({open:c})),$t(c=>{const d=e();return d===c.open||r&&r.open!==d?(r&&r.open!==c.open&&(r=null),!1):(r=c,!0)}),Ii());return zo(o.pipe($t(c=>c.open),LA(t)),o.pipe($t(c=>!c.open),LA(n))).pipe($t(c=>c===r&&(r=null,c.open!==e())),he(c=>c.open))}}(s,l,i)).subscribe(m=>m?r():o());return()=>d.unsubscribe()}(this._renderer,this._elementRef.nativeElement,this.triggers,this.isOpen.bind(this),this.open.bind(this),this.close.bind(this),+this.openDelay,+this.closeDelay)}ngOnChanges({tooltipClass:e}){e&&this.isOpen()&&(this._windowRef.instance.tooltipClass=e.currentValue)}ngOnDestroy(){this.close(),this._unregisterListenersFn&&this._unregisterListenersFn(),this._zoneSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(C(Ye),C(vi),C(Mt),C(_r),C(Yi),C(nZ),C(it),C(Ot),C(ci),C(ts))},t.\u0275dir=te({type:t,selectors:[["","ngbTooltip",""]],inputs:{animation:"animation",autoClose:"autoClose",placement:"placement",triggers:"triggers",container:"container",disableTooltip:"disableTooltip",tooltipClass:"tooltipClass",openDelay:"openDelay",closeDelay:"closeDelay",ngbTooltip:"ngbTooltip"},outputs:{shown:"shown",hidden:"hidden"},exportAs:["ngbTooltip"],features:[St]}),t})(),qA=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=et({type:t}),t.\u0275inj=Te({}),t})();new tt("live announcer delay",{providedIn:"root",factory:function(){return 100}});let KA=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=et({type:t}),t.\u0275inj=Te({imports:[[bi]]}),t})();const dZ=[q2,Q2,K2,X2,eA,mA,yA,TA,xA,RA,UA,VA,BA,GA,WA,qA,KA];let hZ=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=et({type:t}),t.\u0275inj=Te({imports:[dZ,q2,Q2,K2,X2,eA,mA,yA,TA,xA,RA,UA,VA,BA,GA,WA,qA,KA]}),t})();function pZ(t,n){}const hv=()=>{const t="undefined"!=typeof window?window:void 0;return t&&t.tinymce?t.tinymce:null};let fZ=(()=>{class t{constructor(){this.onBeforePaste=new q,this.onBlur=new q,this.onClick=new q,this.onContextMenu=new q,this.onCopy=new q,this.onCut=new q,this.onDblclick=new q,this.onDrag=new q,this.onDragDrop=new q,this.onDragEnd=new q,this.onDragGesture=new q,this.onDragOver=new q,this.onDrop=new q,this.onFocus=new q,this.onFocusIn=new q,this.onFocusOut=new q,this.onKeyDown=new q,this.onKeyPress=new q,this.onKeyUp=new q,this.onMouseDown=new q,this.onMouseEnter=new q,this.onMouseLeave=new q,this.onMouseMove=new q,this.onMouseOut=new q,this.onMouseOver=new q,this.onMouseUp=new q,this.onPaste=new q,this.onSelectionChange=new q,this.onActivate=new q,this.onAddUndo=new q,this.onBeforeAddUndo=new q,this.onBeforeExecCommand=new q,this.onBeforeGetContent=new q,this.onBeforeRenderUI=new q,this.onBeforeSetContent=new q,this.onChange=new q,this.onClearUndos=new q,this.onDeactivate=new q,this.onDirty=new q,this.onExecCommand=new q,this.onGetContent=new q,this.onHide=new q,this.onInit=new q,this.onInitNgModel=new q,this.onLoadContent=new q,this.onNodeChange=new q,this.onPostProcess=new q,this.onPostRender=new q,this.onPreInit=new q,this.onPreProcess=new q,this.onProgressState=new q,this.onRedo=new q,this.onRemove=new q,this.onReset=new q,this.onResizeEditor=new q,this.onSaveContent=new q,this.onSetAttrib=new q,this.onObjectResizeStart=new q,this.onObjectResized=new q,this.onObjectSelected=new q,this.onSetContent=new q,this.onShow=new q,this.onSubmit=new q,this.onUndo=new q,this.onVisualAid=new q}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=te({type:t,outputs:{onBeforePaste:"onBeforePaste",onBlur:"onBlur",onClick:"onClick",onContextMenu:"onContextMenu",onCopy:"onCopy",onCut:"onCut",onDblclick:"onDblclick",onDrag:"onDrag",onDragDrop:"onDragDrop",onDragEnd:"onDragEnd",onDragGesture:"onDragGesture",onDragOver:"onDragOver",onDrop:"onDrop",onFocus:"onFocus",onFocusIn:"onFocusIn",onFocusOut:"onFocusOut",onKeyDown:"onKeyDown",onKeyPress:"onKeyPress",onKeyUp:"onKeyUp",onMouseDown:"onMouseDown",onMouseEnter:"onMouseEnter",onMouseLeave:"onMouseLeave",onMouseMove:"onMouseMove",onMouseOut:"onMouseOut",onMouseOver:"onMouseOver",onMouseUp:"onMouseUp",onPaste:"onPaste",onSelectionChange:"onSelectionChange",onActivate:"onActivate",onAddUndo:"onAddUndo",onBeforeAddUndo:"onBeforeAddUndo",onBeforeExecCommand:"onBeforeExecCommand",onBeforeGetContent:"onBeforeGetContent",onBeforeRenderUI:"onBeforeRenderUI",onBeforeSetContent:"onBeforeSetContent",onChange:"onChange",onClearUndos:"onClearUndos",onDeactivate:"onDeactivate",onDirty:"onDirty",onExecCommand:"onExecCommand",onGetContent:"onGetContent",onHide:"onHide",onInit:"onInit",onInitNgModel:"onInitNgModel",onLoadContent:"onLoadContent",onNodeChange:"onNodeChange",onPostProcess:"onPostProcess",onPostRender:"onPostRender",onPreInit:"onPreInit",onPreProcess:"onPreProcess",onProgressState:"onProgressState",onRedo:"onRedo",onRemove:"onRemove",onReset:"onReset",onResizeEditor:"onResizeEditor",onSaveContent:"onSaveContent",onSetAttrib:"onSetAttrib",onObjectResizeStart:"onObjectResizeStart",onObjectResized:"onObjectResized",onObjectSelected:"onObjectSelected",onSetContent:"onSetContent",onShow:"onShow",onSubmit:"onSubmit",onUndo:"onUndo",onVisualAid:"onVisualAid"}}),t})();const YA=["onActivate","onAddUndo","onBeforeAddUndo","onBeforeExecCommand","onBeforeGetContent","onBeforeRenderUI","onBeforeSetContent","onBeforePaste","onBlur","onChange","onClearUndos","onClick","onContextMenu","onCopy","onCut","onDblclick","onDeactivate","onDirty","onDrag","onDragDrop","onDragEnd","onDragGesture","onDragOver","onDrop","onExecCommand","onFocus","onFocusIn","onFocusOut","onGetContent","onHide","onInit","onKeyDown","onKeyPress","onKeyUp","onLoadContent","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onNodeChange","onObjectResizeStart","onObjectResized","onObjectSelected","onPaste","onPostProcess","onPostRender","onPreProcess","onProgressState","onRedo","onRemove","onReset","onResizeEditor","onSaveContent","onSelectionChange","onSetAttrib","onSetContent","onShow","onSubmit","onUndo","onVisualAid"],JA=(t,n)=>"string"==typeof t?t.split(",").map(e=>e.trim()):Array.isArray(t)?t:n;let XA=0;const eO=t=>{const e=(new Date).getTime(),i=Math.floor(1e9*Math.random());return XA++,t+"_"+i+XA+String(e)},tO=t=>void 0!==t&&"textarea"===t.tagName.toLowerCase(),nO=t=>void 0===t||""===t?[]:Array.isArray(t)?t:t.split(" "),_Z=(t,n)=>nO(t).concat(nO(n)),vZ=()=>{},iO=t=>null==t,rO=()=>({listeners:[],scriptId:eO("tiny-script"),scriptLoaded:!1}),bZ=(()=>{let t=rO();return{load:(r,o,s)=>{t.scriptLoaded?s():(t.listeners.push(s),r.getElementById(t.scriptId)||((r,o,s,l)=>{const c=o.createElement("script");c.referrerPolicy="origin",c.type="application/javascript",c.id=r,c.src=s;const d=()=>{c.removeEventListener("load",d),t.listeners.forEach(l=>l()),t.scriptLoaded=!0};c.addEventListener("load",d),o.head&&o.head.appendChild(c)})(t.scriptId,r,o))},reinitialize:()=>{t=rO()}}})(),oO=new tt("TINYMCE_SCRIPT_SRC"),CZ={provide:wi,useExisting:ot(()=>X0),multi:!0};let X0=(()=>{class t extends fZ{constructor(e,i,r,o){super(),this.platformId=r,this.tinymceScriptSrc=o,this.cloudChannel="5",this.apiKey="no-api-key",this.id="",this.modelEvents="change input undo redo",this.onTouchedCallback=vZ,this._elementRef=e,this.ngZone=i,this.initialise=this.initialise.bind(this)}set disabled(e){this._disabled=e,this._editor&&this._editor.initialized&&this._editor.setMode(e?"readonly":"design")}get disabled(){return this._disabled}get editor(){return this._editor}writeValue(e){this._editor&&this._editor.initialized?this._editor.setContent(iO(e)?"":e):this.initialValue=null===e?void 0:e}registerOnChange(e){this.onChangeCallback=e}registerOnTouched(e){this.onTouchedCallback=e}setDisabledState(e){this._editor?this._editor.setMode(e?"readonly":"design"):e&&(this.init=Object.assign(Object.assign({},this.init),{readonly:!0}))}ngAfterViewInit(){var e;cf(this.platformId)&&(this.id=this.id||eO("tiny-angular"),this.inline=void 0!==this.inline?!1!==this.inline:!!(null===(e=this.init)||void 0===e?void 0:e.inline),this.createElement(),null!==hv()?this.initialise():this._element&&this._element.ownerDocument&&bZ.load(this._element.ownerDocument,this.getScriptSrc(),this.initialise.bind(this)))}ngOnDestroy(){null!==hv()&&hv().remove(this._editor)}createElement(){this._element=document.createElement(this.inline?"string"==typeof this.tagName?this.tagName:"div":"textarea"),this._element&&(document.getElementById(this.id)&&console.warn(`TinyMCE-Angular: an element with id [${this.id}] already exists. Editors with duplicate Id will not be able to mount`),this._element.id=this.id,tO(this._element)&&(this._element.style.visibility="hidden"),this._elementRef.nativeElement.appendChild(this._element))}initialise(){const e=Object.assign(Object.assign({},this.init),{target:this._element,inline:this.inline,readonly:this.disabled,plugins:_Z(this.init&&this.init.plugins,this.plugins),toolbar:this.toolbar||this.init&&this.init.toolbar,setup:i=>{this._editor=i,i.on("init",r=>{this.initEditor(i)}),((t,n)=>{(t=>{const n=JA(t.ignoreEvents,[]);return JA(t.allowedEvents,YA).filter(i=>YA.includes(i)&&!n.includes(i))})(t).forEach(i=>{const r=t[i];n.on(i.substring(2),o=>t.ngZone.run(()=>r.emit({event:o,editor:n})))})})(this,i),this.init&&"function"==typeof this.init.setup&&this.init.setup(i)}});tO(this._element)&&(this._element.style.visibility=""),this.ngZone.runOutsideAngular(()=>{hv().init(e)})}getScriptSrc(){return iO(this.tinymceScriptSrc)?`https://cdn.tiny.cloud/1/${this.apiKey}/tinymce/${this.cloudChannel}/tinymce.min.js`:this.tinymceScriptSrc}initEditor(e){e.on("blur",()=>this.ngZone.run(()=>this.onTouchedCallback())),e.on(this.modelEvents,()=>this.ngZone.run(()=>this.emitOnChange(e))),"string"==typeof this.initialValue&&this.ngZone.run(()=>{e.setContent(this.initialValue),e.getContent()!==this.initialValue&&this.emitOnChange(e),void 0!==this.onInitNgModel&&this.onInitNgModel.emit(e)})}emitOnChange(e){this.onChangeCallback&&this.onChangeCallback(e.getContent({format:this.outputFormat}))}}return t.\u0275fac=function(e){return new(e||t)(C(Ye),C(it),C(Os),C(oO,8))},t.\u0275cmp=Y({type:t,selectors:[["editor"]],inputs:{cloudChannel:"cloudChannel",apiKey:"apiKey",id:"id",modelEvents:"modelEvents",disabled:"disabled",initialValue:"initialValue",init:"init",inline:"inline",outputFormat:"outputFormat",tagName:"tagName",plugins:"plugins",toolbar:"toolbar",allowedEvents:"allowedEvents",ignoreEvents:"ignoreEvents"},features:[At([CZ]),oe],decls:1,vars:0,template:function(e,i){1&e&&S(0,pZ,0,0,"ng-template")},styles:["[_nghost-%COMP%] { display: block; }"]}),t})(),wZ=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=et({type:t}),t.\u0275inj=Te({imports:[[bi,N0]]}),t})();function mh(t,n){return rn(t,n,1)}class sO{}class aO{}class er{constructor(n){this.normalizedNames=new Map,this.lazyUpdate=null,n?this.lazyInit="string"==typeof n?()=>{this.headers=new Map,n.split("\n").forEach(e=>{const i=e.indexOf(":");if(i>0){const r=e.slice(0,i),o=r.toLowerCase(),s=e.slice(i+1).trim();this.maybeSetNormalizedName(r,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:()=>{this.headers=new Map,Object.keys(n).forEach(e=>{let i=n[e];const r=e.toLowerCase();"string"==typeof i&&(i=[i]),i.length>0&&(this.headers.set(r,i),this.maybeSetNormalizedName(e,r))})}:this.headers=new Map}has(n){return this.init(),this.headers.has(n.toLowerCase())}get(n){this.init();const e=this.headers.get(n.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(n){return this.init(),this.headers.get(n.toLowerCase())||null}append(n,e){return this.clone({name:n,value:e,op:"a"})}set(n,e){return this.clone({name:n,value:e,op:"s"})}delete(n,e){return this.clone({name:n,value:e,op:"d"})}maybeSetNormalizedName(n,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,n)}init(){this.lazyInit&&(this.lazyInit instanceof er?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(n=>this.applyUpdate(n)),this.lazyUpdate=null))}copyFrom(n){n.init(),Array.from(n.headers.keys()).forEach(e=>{this.headers.set(e,n.headers.get(e)),this.normalizedNames.set(e,n.normalizedNames.get(e))})}clone(n){const e=new er;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof er?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([n]),e}applyUpdate(n){const e=n.name.toLowerCase();switch(n.op){case"a":case"s":let i=n.value;if("string"==typeof i&&(i=[i]),0===i.length)return;this.maybeSetNormalizedName(n.name,e);const r=("a"===n.op?this.headers.get(e):void 0)||[];r.push(...i),this.headers.set(e,r);break;case"d":const o=n.value;if(o){let s=this.headers.get(e);if(!s)return;s=s.filter(l=>-1===o.indexOf(l)),0===s.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,s)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(n){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>n(this.normalizedNames.get(e),this.headers.get(e)))}}class SZ{encodeKey(n){return lO(n)}encodeValue(n){return lO(n)}decodeKey(n){return decodeURIComponent(n)}decodeValue(n){return decodeURIComponent(n)}}const EZ=/%(\d[a-f0-9])/gi,kZ={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function lO(t){return encodeURIComponent(t).replace(EZ,(n,e)=>{var i;return null!==(i=kZ[e])&&void 0!==i?i:n})}function cO(t){return`${t}`}class Ec{constructor(n={}){if(this.updates=null,this.cloneFrom=null,this.encoder=n.encoder||new SZ,n.fromString){if(n.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(t,n){const e=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(r=>{const o=r.indexOf("="),[s,l]=-1==o?[n.decodeKey(r),""]:[n.decodeKey(r.slice(0,o)),n.decodeValue(r.slice(o+1))],c=e.get(s)||[];c.push(l),e.set(s,c)}),e}(n.fromString,this.encoder)}else n.fromObject?(this.map=new Map,Object.keys(n.fromObject).forEach(e=>{const i=n.fromObject[e];this.map.set(e,Array.isArray(i)?i:[i])})):this.map=null}has(n){return this.init(),this.map.has(n)}get(n){this.init();const e=this.map.get(n);return e?e[0]:null}getAll(n){return this.init(),this.map.get(n)||null}keys(){return this.init(),Array.from(this.map.keys())}append(n,e){return this.clone({param:n,value:e,op:"a"})}appendAll(n){const e=[];return Object.keys(n).forEach(i=>{const r=n[i];Array.isArray(r)?r.forEach(o=>{e.push({param:i,value:o,op:"a"})}):e.push({param:i,value:r,op:"a"})}),this.clone(e)}set(n,e){return this.clone({param:n,value:e,op:"s"})}delete(n,e){return this.clone({param:n,value:e,op:"d"})}toString(){return this.init(),this.keys().map(n=>{const e=this.encoder.encodeKey(n);return this.map.get(n).map(i=>e+"="+this.encoder.encodeValue(i)).join("&")}).filter(n=>""!==n).join("&")}clone(n){const e=new Ec({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(n),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(n=>this.map.set(n,this.cloneFrom.map.get(n))),this.updates.forEach(n=>{switch(n.op){case"a":case"s":const e=("a"===n.op?this.map.get(n.param):void 0)||[];e.push(cO(n.value)),this.map.set(n.param,e);break;case"d":if(void 0===n.value){this.map.delete(n.param);break}{let i=this.map.get(n.param)||[];const r=i.indexOf(cO(n.value));-1!==r&&i.splice(r,1),i.length>0?this.map.set(n.param,i):this.map.delete(n.param)}}}),this.cloneFrom=this.updates=null)}}class DZ{constructor(){this.map=new Map}set(n,e){return this.map.set(n,e),this}get(n){return this.map.has(n)||this.map.set(n,n.defaultValue()),this.map.get(n)}delete(n){return this.map.delete(n),this}keys(){return this.map.keys()}}function uO(t){return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer}function dO(t){return"undefined"!=typeof Blob&&t instanceof Blob}function hO(t){return"undefined"!=typeof FormData&&t instanceof FormData}class Nf{constructor(n,e,i,r){let o;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=n.toUpperCase(),function(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==i?i:null,o=r):o=i,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params)),this.headers||(this.headers=new er),this.context||(this.context=new DZ),this.params){const s=this.params.toString();if(0===s.length)this.urlWithParams=e;else{const l=e.indexOf("?");this.urlWithParams=e+(-1===l?"?":l<e.length-1?"&":"")+s}}else this.params=new Ec,this.urlWithParams=e}serializeBody(){return null===this.body?null:uO(this.body)||dO(this.body)||hO(this.body)||function(t){return"undefined"!=typeof URLSearchParams&&t instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Ec?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||hO(this.body)?null:dO(this.body)?this.body.type||null:uO(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Ec?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(n={}){var e;const i=n.method||this.method,r=n.url||this.url,o=n.responseType||this.responseType,s=void 0!==n.body?n.body:this.body,l=void 0!==n.withCredentials?n.withCredentials:this.withCredentials,c=void 0!==n.reportProgress?n.reportProgress:this.reportProgress;let d=n.headers||this.headers,m=n.params||this.params;const _=null!==(e=n.context)&&void 0!==e?e:this.context;return void 0!==n.setHeaders&&(d=Object.keys(n.setHeaders).reduce((w,E)=>w.set(E,n.setHeaders[E]),d)),n.setParams&&(m=Object.keys(n.setParams).reduce((w,E)=>w.set(E,n.setParams[E]),m)),new Nf(i,r,s,{params:m,headers:d,context:_,reportProgress:c,responseType:o,withCredentials:l})}}var Yn=(()=>((Yn=Yn||{})[Yn.Sent=0]="Sent",Yn[Yn.UploadProgress=1]="UploadProgress",Yn[Yn.ResponseHeader=2]="ResponseHeader",Yn[Yn.DownloadProgress=3]="DownloadProgress",Yn[Yn.Response=4]="Response",Yn[Yn.User=5]="User",Yn))();class ew{constructor(n,e=200,i="OK"){this.headers=n.headers||new er,this.status=void 0!==n.status?n.status:e,this.statusText=n.statusText||i,this.url=n.url||null,this.ok=this.status>=200&&this.status<300}}class tw extends ew{constructor(n={}){super(n),this.type=Yn.ResponseHeader}clone(n={}){return new tw({headers:n.headers||this.headers,status:void 0!==n.status?n.status:this.status,statusText:n.statusText||this.statusText,url:n.url||this.url||void 0})}}class pv extends ew{constructor(n={}){super(n),this.type=Yn.Response,this.body=void 0!==n.body?n.body:null}clone(n={}){return new pv({body:void 0!==n.body?n.body:this.body,headers:n.headers||this.headers,status:void 0!==n.status?n.status:this.status,statusText:n.statusText||this.statusText,url:n.url||this.url||void 0})}}class pO extends ew{constructor(n){super(n,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${n.url||"(unknown url)"}`:`Http failure response for ${n.url||"(unknown url)"}: ${n.status} ${n.statusText}`,this.error=n.error||null}}function nw(t,n){return{body:n,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials}}let zt=(()=>{class t{constructor(e){this.handler=e}request(e,i,r={}){let o;if(e instanceof Nf)o=e;else{let c,d;c=r.headers instanceof er?r.headers:new er(r.headers),r.params&&(d=r.params instanceof Ec?r.params:new Ec({fromObject:r.params})),o=new Nf(e,i,void 0!==r.body?r.body:null,{headers:c,context:r.context,params:d,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials})}const s=Ee(o).pipe(mh(c=>this.handler.handle(c)));if(e instanceof Nf||"events"===r.observe)return s;const l=s.pipe($t(c=>c instanceof pv));switch(r.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return l.pipe(he(c=>{if(null!==c.body&&!(c.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return c.body}));case"blob":return l.pipe(he(c=>{if(null!==c.body&&!(c.body instanceof Blob))throw new Error("Response is not a Blob.");return c.body}));case"text":return l.pipe(he(c=>{if(null!==c.body&&"string"!=typeof c.body)throw new Error("Response is not a string.");return c.body}));case"json":default:return l.pipe(he(c=>c.body))}case"response":return l;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(e,i={}){return this.request("DELETE",e,i)}get(e,i={}){return this.request("GET",e,i)}head(e,i={}){return this.request("HEAD",e,i)}jsonp(e,i){return this.request("JSONP",e,{params:(new Ec).append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,i={}){return this.request("OPTIONS",e,i)}patch(e,i,r={}){return this.request("PATCH",e,nw(r,i))}post(e,i,r={}){return this.request("POST",e,nw(r,i))}put(e,i,r={}){return this.request("PUT",e,nw(r,i))}}return t.\u0275fac=function(e){return new(e||t)(P(sO))},t.\u0275prov=B({token:t,factory:t.\u0275fac}),t})();class fO{constructor(n,e){this.next=n,this.interceptor=e}handle(n){return this.interceptor.intercept(n,this.next)}}const iw=new tt("HTTP_INTERCEPTORS");let IZ=(()=>{class t{intercept(e,i){return i.handle(e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=B({token:t,factory:t.\u0275fac}),t})();const PZ=/^\)\]\}',?\n/;let mO=(()=>{class t{constructor(e){this.xhrFactory=e}handle(e){if("JSONP"===e.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new _t(i=>{const r=this.xhrFactory.build();if(r.open(e.method,e.urlWithParams),e.withCredentials&&(r.withCredentials=!0),e.headers.forEach((E,D)=>r.setRequestHeader(E,D.join(","))),e.headers.has("Accept")||r.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){const E=e.detectContentTypeHeader();null!==E&&r.setRequestHeader("Content-Type",E)}if(e.responseType){const E=e.responseType.toLowerCase();r.responseType="json"!==E?E:"text"}const o=e.serializeBody();let s=null;const l=()=>{if(null!==s)return s;const E=1223===r.status?204:r.status,D=r.statusText||"OK",N=new er(r.getAllResponseHeaders()),F=function(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}(r)||e.url;return s=new tw({headers:N,status:E,statusText:D,url:F}),s},c=()=>{let{headers:E,status:D,statusText:N,url:F}=l(),j=null;204!==D&&(j=void 0===r.response?r.responseText:r.response),0===D&&(D=j?200:0);let H=D>=200&&D<300;if("json"===e.responseType&&"string"==typeof j){const X=j;j=j.replace(PZ,"");try{j=""!==j?JSON.parse(j):null}catch(de){j=X,H&&(H=!1,j={error:de,text:j})}}H?(i.next(new pv({body:j,headers:E,status:D,statusText:N,url:F||void 0})),i.complete()):i.error(new pO({error:j,headers:E,status:D,statusText:N,url:F||void 0}))},d=E=>{const{url:D}=l(),N=new pO({error:E,status:r.status||0,statusText:r.statusText||"Unknown Error",url:D||void 0});i.error(N)};let m=!1;const _=E=>{m||(i.next(l()),m=!0);let D={type:Yn.DownloadProgress,loaded:E.loaded};E.lengthComputable&&(D.total=E.total),"text"===e.responseType&&!!r.responseText&&(D.partialText=r.responseText),i.next(D)},w=E=>{let D={type:Yn.UploadProgress,loaded:E.loaded};E.lengthComputable&&(D.total=E.total),i.next(D)};return r.addEventListener("load",c),r.addEventListener("error",d),r.addEventListener("timeout",d),r.addEventListener("abort",d),e.reportProgress&&(r.addEventListener("progress",_),null!==o&&r.upload&&r.upload.addEventListener("progress",w)),r.send(o),i.next({type:Yn.Sent}),()=>{r.removeEventListener("error",d),r.removeEventListener("abort",d),r.removeEventListener("load",c),r.removeEventListener("timeout",d),e.reportProgress&&(r.removeEventListener("progress",_),null!==o&&r.upload&&r.upload.removeEventListener("progress",w)),r.readyState!==r.DONE&&r.abort()}})}}return t.\u0275fac=function(e){return new(e||t)(P(wI))},t.\u0275prov=B({token:t,factory:t.\u0275fac}),t})();const rw=new tt("XSRF_COOKIE_NAME"),ow=new tt("XSRF_HEADER_NAME");class gO{}let OZ=(()=>{class t{constructor(e,i,r){this.doc=e,this.platform=i,this.cookieName=r,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=uI(e,this.cookieName),this.lastCookieString=e),this.lastToken}}return t.\u0275fac=function(e){return new(e||t)(P(Ot),P(Os),P(rw))},t.\u0275prov=B({token:t,factory:t.\u0275fac}),t})(),sw=(()=>{class t{constructor(e,i){this.tokenService=e,this.headerName=i}intercept(e,i){const r=e.url.toLowerCase();if("GET"===e.method||"HEAD"===e.method||r.startsWith("http://")||r.startsWith("https://"))return i.handle(e);const o=this.tokenService.getToken();return null!==o&&!e.headers.has(this.headerName)&&(e=e.clone({headers:e.headers.set(this.headerName,o)})),i.handle(e)}}return t.\u0275fac=function(e){return new(e||t)(P(gO),P(ow))},t.\u0275prov=B({token:t,factory:t.\u0275fac}),t})(),NZ=(()=>{class t{constructor(e,i){this.backend=e,this.injector=i,this.chain=null}handle(e){if(null===this.chain){const i=this.injector.get(iw,[]);this.chain=i.reduceRight((r,o)=>new fO(r,o),this.backend)}return this.chain.handle(e)}}return t.\u0275fac=function(e){return new(e||t)(P(aO),P(Mt))},t.\u0275prov=B({token:t,factory:t.\u0275fac}),t})(),FZ=(()=>{class t{static disable(){return{ngModule:t,providers:[{provide:sw,useClass:IZ}]}}static withOptions(e={}){return{ngModule:t,providers:[e.cookieName?{provide:rw,useValue:e.cookieName}:[],e.headerName?{provide:ow,useValue:e.headerName}:[]]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=et({type:t}),t.\u0275inj=Te({providers:[sw,{provide:iw,useExisting:sw,multi:!0},{provide:gO,useClass:OZ},{provide:rw,useValue:"XSRF-TOKEN"},{provide:ow,useValue:"X-XSRF-TOKEN"}]}),t})(),RZ=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=et({type:t}),t.\u0275inj=Te({providers:[zt,{provide:sO,useClass:NZ},mO,{provide:aO,useExisting:mO}],imports:[[FZ.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),t})();const fv=(()=>{function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t})();function mv(t){return new _t(n=>{let e;try{e=t()}catch(r){return void n.error(r)}return(e?hn(e):N_()).subscribe(n)})}function _O(t,n){let e=!1;return arguments.length>=2&&(e=!0),function(r){return r.lift(new LZ(t,n,e))}}class LZ{constructor(n,e,i=!1){this.accumulator=n,this.seed=e,this.hasSeed=i}call(n,e){return e.subscribe(new $Z(n,this.accumulator,this.seed,this.hasSeed))}}class $Z extends vt{constructor(n,e,i,r){super(n),this.accumulator=e,this._seed=i,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(n){this.hasSeed=!0,this._seed=n}_next(n){if(this.hasSeed)return this._tryNext(n);this.seed=n,this.destination.next(n)}_tryNext(n){const e=this.index++;let i;try{i=this.accumulator(this.seed,n,e)}catch(r){this.destination.error(r)}this.seed=i,this.destination.next(i)}}function Lo(t){return function(e){const i=new UZ(t),r=e.lift(i);return i.caught=r}}class UZ{constructor(n){this.selector=n}call(n,e){return e.subscribe(new VZ(n,this.selector,this.caught))}}class VZ extends Mi{constructor(n,e,i){super(n),this.selector=e,this.caught=i}error(n){if(!this.isStopped){let e;try{e=this.selector(n,this.caught)}catch(o){return void super.error(o)}this._unsubscribeAndRecycle();const i=new lr(this);this.add(i);const r=qr(e,i);r!==i&&this.add(r)}}}function aw(t){return function(e){return 0===t?N_():e.lift(new BZ(t))}}class BZ{constructor(n){if(this.total=n,this.total<0)throw new WP}call(n,e){return e.subscribe(new HZ(n,this.total))}}class HZ extends vt{constructor(n,e){super(n),this.total=e,this.ring=new Array,this.count=0}_next(n){const e=this.ring,i=this.total,r=this.count++;e.length<i?e.push(n):e[r%i]=n}_complete(){const n=this.destination;let e=this.count;if(e>0){const i=this.count>=this.total?this.total:this.count,r=this.ring;for(let o=0;o<i;o++){const s=e++%i;n.next(r[s])}}n.complete()}}function vO(t=GZ){return n=>n.lift(new jZ(t))}class jZ{constructor(n){this.errorFactory=n}call(n,e){return e.subscribe(new zZ(n,this.errorFactory))}}class zZ extends vt{constructor(n,e){super(n),this.errorFactory=e,this.hasValue=!1}_next(n){this.hasValue=!0,this.destination.next(n)}_complete(){if(this.hasValue)return this.destination.complete();{let n;try{n=this.errorFactory()}catch(e){n=e}this.destination.error(n)}}}function GZ(){return new fv}function yO(t=null){return n=>n.lift(new WZ(t))}class WZ{constructor(n){this.defaultValue=n}call(n,e){return e.subscribe(new qZ(n,this.defaultValue))}}class qZ extends vt{constructor(n,e){super(n),this.defaultValue=e,this.isEmpty=!0}_next(n){this.isEmpty=!1,this.destination.next(n)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function re(t,n){const e=arguments.length>=2;return i=>i.pipe(t?$t((r,o)=>t(r,o,i)):Rn,Pn(1),e?yO(n):vO(()=>new fv))}class KZ{constructor(n){this.callback=n}call(n,e){return e.subscribe(new YZ(n,this.callback))}}class YZ extends vt{constructor(n,e){super(n),this.add(new gt(e))}}class bl{constructor(n,e){this.id=n,this.url=e}}class gv extends bl{constructor(n,e,i="imperative",r=null){super(n,e),this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Tu extends bl{constructor(n,e,i){super(n,e),this.urlAfterRedirects=i}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class lw extends bl{constructor(n,e,i){super(n,e),this.reason=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class bO extends bl{constructor(n,e,i){super(n,e),this.error=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class JZ extends bl{constructor(n,e,i,r){super(n,e),this.urlAfterRedirects=i,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class XZ extends bl{constructor(n,e,i,r){super(n,e),this.urlAfterRedirects=i,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class eK extends bl{constructor(n,e,i,r,o){super(n,e),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class CO extends bl{constructor(n,e,i,r){super(n,e),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class tK extends bl{constructor(n,e,i,r){super(n,e),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class wO{constructor(n){this.route=n}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class SO{constructor(n){this.route=n}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class nK{constructor(n){this.snapshot=n}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class iK{constructor(n){this.snapshot=n}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class rK{constructor(n){this.snapshot=n}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class oK{constructor(n){this.snapshot=n}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class TO{constructor(n,e,i){this.routerEvent=n,this.position=e,this.anchor=i}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const It="primary";class sK{constructor(n){this.params=n||{}}has(n){return Object.prototype.hasOwnProperty.call(this.params,n)}get(n){if(this.has(n)){const e=this.params[n];return Array.isArray(e)?e[0]:e}return null}getAll(n){if(this.has(n)){const e=this.params[n];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function gh(t){return new sK(t)}const EO="ngNavigationCancelingError";function cw(t){const n=Error("NavigationCancelingError: "+t);return n[EO]=!0,n}function lK(t,n,e){const i=e.path.split("/");if(i.length>t.length||"full"===e.pathMatch&&(n.hasChildren()||i.length<t.length))return null;const r={};for(let o=0;o<i.length;o++){const s=i[o],l=t[o];if(s.startsWith(":"))r[s.substring(1)]=l;else if(s!==l.path)return null}return{consumed:t.slice(0,i.length),posParams:r}}function Ma(t,n){const e=t?Object.keys(t):void 0,i=n?Object.keys(n):void 0;if(!e||!i||e.length!=i.length)return!1;let r;for(let o=0;o<e.length;o++)if(r=e[o],!kO(t[r],n[r]))return!1;return!0}function kO(t,n){if(Array.isArray(t)&&Array.isArray(n)){if(t.length!==n.length)return!1;const e=[...t].sort(),i=[...n].sort();return e.every((r,o)=>i[o]===r)}return t===n}function DO(t){return Array.prototype.concat.apply([],t)}function xO(t){return t.length>0?t[t.length-1]:null}function tr(t,n){for(const e in t)t.hasOwnProperty(e)&&n(t[e],e)}function Ia(t){return bg(t)?t:Ap(t)?hn(Promise.resolve(t)):Ee(t)}const dK={exact:function PO(t,n,e){if(!ku(t.segments,n.segments)||!_v(t.segments,n.segments,e)||t.numberOfChildren!==n.numberOfChildren)return!1;for(const i in n.children)if(!t.children[i]||!PO(t.children[i],n.children[i],e))return!1;return!0},subset:AO},MO={exact:function(t,n){return Ma(t,n)},subset:function(t,n){return Object.keys(n).length<=Object.keys(t).length&&Object.keys(n).every(e=>kO(t[e],n[e]))},ignored:()=>!0};function IO(t,n,e){return dK[e.paths](t.root,n.root,e.matrixParams)&&MO[e.queryParams](t.queryParams,n.queryParams)&&!("exact"===e.fragment&&t.fragment!==n.fragment)}function AO(t,n,e){return OO(t,n,n.segments,e)}function OO(t,n,e,i){if(t.segments.length>e.length){const r=t.segments.slice(0,e.length);return!(!ku(r,e)||n.hasChildren()||!_v(r,e,i))}if(t.segments.length===e.length){if(!ku(t.segments,e)||!_v(t.segments,e,i))return!1;for(const r in n.children)if(!t.children[r]||!AO(t.children[r],n.children[r],i))return!1;return!0}{const r=e.slice(0,t.segments.length),o=e.slice(t.segments.length);return!!(ku(t.segments,r)&&_v(t.segments,r,i)&&t.children[It])&&OO(t.children[It],n,o,i)}}function _v(t,n,e){return n.every((i,r)=>MO[e](t[r].parameters,i.parameters))}class Eu{constructor(n,e,i){this.root=n,this.queryParams=e,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=gh(this.queryParams)),this._queryParamMap}toString(){return gK.serialize(this)}}class Nt{constructor(n,e){this.segments=n,this.children=e,this.parent=null,tr(e,(i,r)=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return vv(this)}}class Ff{constructor(n,e){this.path=n,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=gh(this.parameters)),this._parameterMap}toString(){return LO(this)}}function ku(t,n){return t.length===n.length&&t.every((e,i)=>e.path===n[i].path)}class uw{}class NO{parse(n){const e=new EK(n);return new Eu(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(n){return`${`/${Rf(n.root,!0)}`}${function(t){const n=Object.keys(t).map(e=>{const i=t[e];return Array.isArray(i)?i.map(r=>`${yv(e)}=${yv(r)}`).join("&"):`${yv(e)}=${yv(i)}`}).filter(e=>!!e);return n.length?`?${n.join("&")}`:""}(n.queryParams)}${"string"==typeof n.fragment?`#${function(t){return encodeURI(t)}(n.fragment)}`:""}`}}const gK=new NO;function vv(t){return t.segments.map(n=>LO(n)).join("/")}function Rf(t,n){if(!t.hasChildren())return vv(t);if(n){const e=t.children[It]?Rf(t.children[It],!1):"",i=[];return tr(t.children,(r,o)=>{o!==It&&i.push(`${o}:${Rf(r,!1)}`)}),i.length>0?`${e}(${i.join("//")})`:e}{const e=function(t,n){let e=[];return tr(t.children,(i,r)=>{r===It&&(e=e.concat(n(i,r)))}),tr(t.children,(i,r)=>{r!==It&&(e=e.concat(n(i,r)))}),e}(t,(i,r)=>r===It?[Rf(t.children[It],!1)]:[`${r}:${Rf(i,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children[It]?`${vv(t)}/${e[0]}`:`${vv(t)}/(${e.join("//")})`}}function FO(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function yv(t){return FO(t).replace(/%3B/gi,";")}function dw(t){return FO(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function bv(t){return decodeURIComponent(t)}function RO(t){return bv(t.replace(/\+/g,"%20"))}function LO(t){return`${dw(t.path)}${function(t){return Object.keys(t).map(n=>`;${dw(n)}=${dw(t[n])}`).join("")}(t.parameters)}`}const bK=/^[^\/()?;=#]+/;function Cv(t){const n=t.match(bK);return n?n[0]:""}const CK=/^[^=?&#]+/,SK=/^[^?&#]+/;class EK{constructor(n){this.url=n,this.remaining=n}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Nt([],{}):new Nt([],this.parseChildren())}parseQueryParams(){const n={};if(this.consumeOptional("?"))do{this.parseQueryParam(n)}while(this.consumeOptional("&"));return n}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const n=[];for(this.peekStartsWith("(")||n.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),n.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(n.length>0||Object.keys(e).length>0)&&(i[It]=new Nt(n,e)),i}parseSegment(){const n=Cv(this.remaining);if(""===n&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(n),new Ff(bv(n),this.parseMatrixParams())}parseMatrixParams(){const n={};for(;this.consumeOptional(";");)this.parseParam(n);return n}parseParam(n){const e=Cv(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){const r=Cv(this.remaining);r&&(i=r,this.capture(i))}n[bv(e)]=bv(i)}parseQueryParam(n){const e=function(t){const n=t.match(CK);return n?n[0]:""}(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){const s=function(t){const n=t.match(SK);return n?n[0]:""}(this.remaining);s&&(i=s,this.capture(i))}const r=RO(e),o=RO(i);if(n.hasOwnProperty(r)){let s=n[r];Array.isArray(s)||(s=[s],n[r]=s),s.push(o)}else n[r]=o}parseParens(n){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=Cv(this.remaining),r=this.remaining[i.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let o;i.indexOf(":")>-1?(o=i.substr(0,i.indexOf(":")),this.capture(o),this.capture(":")):n&&(o=It);const s=this.parseChildren();e[o]=1===Object.keys(s).length?s[It]:new Nt([],s),this.consumeOptional("//")}return e}peekStartsWith(n){return this.remaining.startsWith(n)}consumeOptional(n){return!!this.peekStartsWith(n)&&(this.remaining=this.remaining.substring(n.length),!0)}capture(n){if(!this.consumeOptional(n))throw new Error(`Expected "${n}".`)}}class $O{constructor(n){this._root=n}get root(){return this._root.value}parent(n){const e=this.pathFromRoot(n);return e.length>1?e[e.length-2]:null}children(n){const e=hw(n,this._root);return e?e.children.map(i=>i.value):[]}firstChild(n){const e=hw(n,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(n){const e=pw(n,this._root);return e.length<2?[]:e[e.length-2].children.map(r=>r.value).filter(r=>r!==n)}pathFromRoot(n){return pw(n,this._root).map(e=>e.value)}}function hw(t,n){if(t===n.value)return n;for(const e of n.children){const i=hw(t,e);if(i)return i}return null}function pw(t,n){if(t===n.value)return[n];for(const e of n.children){const i=pw(t,e);if(i.length)return i.unshift(n),i}return[]}class Cl{constructor(n,e){this.value=n,this.children=e}toString(){return`TreeNode(${this.value})`}}function Lf(t){const n={};return t&&t.children.forEach(e=>n[e.value.outlet]=e),n}class UO extends $O{constructor(n,e){super(n),this.snapshot=e,fw(this,n)}toString(){return this.snapshot.toString()}}function VO(t,n){const e=function(t,n){const s=new wv([],{},{},"",{},It,n,null,t.root,-1,{});return new HO("",new Cl(s,[]))}(t,n),i=new ln([new Ff("",{})]),r=new ln({}),o=new ln({}),s=new ln({}),l=new ln(""),c=new Me(i,r,s,l,o,It,n,e.root);return c.snapshot=e.root,new UO(new Cl(c,[]),e)}class Me{constructor(n,e,i,r,o,s,l,c){this.url=n,this.params=e,this.queryParams=i,this.fragment=r,this.data=o,this.outlet=s,this.component=l,this._futureSnapshot=c}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(he(n=>gh(n)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(he(n=>gh(n)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function BO(t,n="emptyOnly"){const e=t.pathFromRoot;let i=0;if("always"!==n)for(i=e.length-1;i>=1;){const r=e[i],o=e[i-1];if(r.routeConfig&&""===r.routeConfig.path)i--;else{if(o.component)break;i--}}return function(t){return t.reduce((n,e)=>({params:Object.assign(Object.assign({},n.params),e.params),data:Object.assign(Object.assign({},n.data),e.data),resolve:Object.assign(Object.assign({},n.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(e.slice(i))}class wv{constructor(n,e,i,r,o,s,l,c,d,m,_){this.url=n,this.params=e,this.queryParams=i,this.fragment=r,this.data=o,this.outlet=s,this.component=l,this.routeConfig=c,this._urlSegment=d,this._lastPathIndex=m,this._resolve=_}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=gh(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=gh(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class HO extends $O{constructor(n,e){super(e),this.url=n,fw(this,e)}toString(){return jO(this._root)}}function fw(t,n){n.value._routerState=t,n.children.forEach(e=>fw(t,e))}function jO(t){const n=t.children.length>0?` { ${t.children.map(jO).join(", ")} } `:"";return`${t.value}${n}`}function mw(t){if(t.snapshot){const n=t.snapshot,e=t._futureSnapshot;t.snapshot=e,Ma(n.queryParams,e.queryParams)||t.queryParams.next(e.queryParams),n.fragment!==e.fragment&&t.fragment.next(e.fragment),Ma(n.params,e.params)||t.params.next(e.params),function(t,n){if(t.length!==n.length)return!1;for(let e=0;e<t.length;++e)if(!Ma(t[e],n[e]))return!1;return!0}(n.url,e.url)||t.url.next(e.url),Ma(n.data,e.data)||t.data.next(e.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function gw(t,n){return Ma(t.params,n.params)&&function(t,n){return ku(t,n)&&t.every((e,i)=>Ma(e.parameters,n[i].parameters))}(t.url,n.url)&&!(!t.parent!=!n.parent)&&(!t.parent||gw(t.parent,n.parent))}function Sv(t,n,e){if(e&&t.shouldReuseRoute(n.value,e.value.snapshot)){const i=e.value;i._futureSnapshot=n.value;const r=function(t,n,e){return n.children.map(i=>{for(const r of e.children)if(t.shouldReuseRoute(i.value,r.value.snapshot))return Sv(t,i,r);return Sv(t,i)})}(t,n,e);return new Cl(i,r)}{if(t.shouldAttach(n.value)){const o=t.retrieve(n.value);if(null!==o){const s=o.route;return zO(n,s),s}}const i=function(t){return new Me(new ln(t.url),new ln(t.params),new ln(t.queryParams),new ln(t.fragment),new ln(t.data),t.outlet,t.component,t)}(n.value),r=n.children.map(o=>Sv(t,o));return new Cl(i,r)}}function zO(t,n){if(t.value.routeConfig!==n.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(t.children.length!==n.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");n.value._futureSnapshot=t.value;for(let e=0;e<t.children.length;++e)zO(t.children[e],n.children[e])}function Tv(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function $f(t){return"object"==typeof t&&null!=t&&t.outlets}function _w(t,n,e,i,r){let o={};return i&&tr(i,(s,l)=>{o[l]=Array.isArray(s)?s.map(c=>`${c}`):`${s}`}),new Eu(e.root===t?n:GO(e.root,t,n),o,r)}function GO(t,n,e){const i={};return tr(t.children,(r,o)=>{i[o]=r===n?e:GO(r,n,e)}),new Nt(t.segments,i)}class WO{constructor(n,e,i){if(this.isAbsolute=n,this.numberOfDoubleDots=e,this.commands=i,n&&i.length>0&&Tv(i[0]))throw new Error("Root segment cannot have matrix parameters");const r=i.find($f);if(r&&r!==xO(i))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class vw{constructor(n,e,i){this.segmentGroup=n,this.processChildren=e,this.index=i}}function qO(t,n,e){if(t||(t=new Nt([],{})),0===t.segments.length&&t.hasChildren())return Ev(t,n,e);const i=function(t,n,e){let i=0,r=n;const o={match:!1,pathIndex:0,commandIndex:0};for(;r<t.segments.length;){if(i>=e.length)return o;const s=t.segments[r],l=e[i];if($f(l))break;const c=`${l}`,d=i<e.length-1?e[i+1]:null;if(r>0&&void 0===c)break;if(c&&d&&"object"==typeof d&&void 0===d.outlets){if(!ZO(c,d,s))return o;i+=2}else{if(!ZO(c,{},s))return o;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(t,n,e),r=e.slice(i.commandIndex);if(i.match&&i.pathIndex<t.segments.length){const o=new Nt(t.segments.slice(0,i.pathIndex),{});return o.children[It]=new Nt(t.segments.slice(i.pathIndex),t.children),Ev(o,0,r)}return i.match&&0===r.length?new Nt(t.segments,{}):i.match&&!t.hasChildren()?yw(t,n,e):i.match?Ev(t,0,r):yw(t,n,e)}function Ev(t,n,e){if(0===e.length)return new Nt(t.segments,{});{const i=function(t){return $f(t[0])?t[0].outlets:{[It]:t}}(e),r={};return tr(i,(o,s)=>{"string"==typeof o&&(o=[o]),null!==o&&(r[s]=qO(t.children[s],n,o))}),tr(t.children,(o,s)=>{void 0===i[s]&&(r[s]=o)}),new Nt(t.segments,r)}}function yw(t,n,e){const i=t.segments.slice(0,n);let r=0;for(;r<e.length;){const o=e[r];if($f(o)){const c=LK(o.outlets);return new Nt(i,c)}if(0===r&&Tv(e[0])){i.push(new Ff(t.segments[n].path,QO(e[0]))),r++;continue}const s=$f(o)?o.outlets[It]:`${o}`,l=r<e.length-1?e[r+1]:null;s&&l&&Tv(l)?(i.push(new Ff(s,QO(l))),r+=2):(i.push(new Ff(s,{})),r++)}return new Nt(i,{})}function LK(t){const n={};return tr(t,(e,i)=>{"string"==typeof e&&(e=[e]),null!==e&&(n[i]=yw(new Nt([],{}),0,e))}),n}function QO(t){const n={};return tr(t,(e,i)=>n[i]=`${e}`),n}function ZO(t,n,e){return t==e.path&&Ma(n,e.parameters)}class UK{constructor(n,e,i,r){this.routeReuseStrategy=n,this.futureState=e,this.currState=i,this.forwardEvent=r}activate(n){const e=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,i,n),mw(this.futureState.root),this.activateChildRoutes(e,i,n)}deactivateChildRoutes(n,e,i){const r=Lf(e);n.children.forEach(o=>{const s=o.value.outlet;this.deactivateRoutes(o,r[s],i),delete r[s]}),tr(r,(o,s)=>{this.deactivateRouteAndItsChildren(o,i)})}deactivateRoutes(n,e,i){const r=n.value,o=e?e.value:null;if(r===o)if(r.component){const s=i.getContext(r.outlet);s&&this.deactivateChildRoutes(n,e,s.children)}else this.deactivateChildRoutes(n,e,i);else o&&this.deactivateRouteAndItsChildren(e,i)}deactivateRouteAndItsChildren(n,e){this.routeReuseStrategy.shouldDetach(n.value.snapshot)?this.detachAndStoreRouteSubtree(n,e):this.deactivateRouteAndOutlet(n,e)}detachAndStoreRouteSubtree(n,e){const i=e.getContext(n.value.outlet);if(i&&i.outlet){const r=i.outlet.detach(),o=i.children.onOutletDeactivated();this.routeReuseStrategy.store(n.value.snapshot,{componentRef:r,route:n,contexts:o})}}deactivateRouteAndOutlet(n,e){const i=e.getContext(n.value.outlet),r=i&&n.value.component?i.children:e,o=Lf(n);for(const s of Object.keys(o))this.deactivateRouteAndItsChildren(o[s],r);i&&i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated(),i.attachRef=null,i.resolver=null,i.route=null)}activateChildRoutes(n,e,i){const r=Lf(e);n.children.forEach(o=>{this.activateRoutes(o,r[o.value.outlet],i),this.forwardEvent(new oK(o.value.snapshot))}),n.children.length&&this.forwardEvent(new iK(n.value.snapshot))}activateRoutes(n,e,i){const r=n.value,o=e?e.value:null;if(mw(r),r===o)if(r.component){const s=i.getOrCreateContext(r.outlet);this.activateChildRoutes(n,e,s.children)}else this.activateChildRoutes(n,e,i);else if(r.component){const s=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const l=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),s.children.onOutletReAttached(l.contexts),s.attachRef=l.componentRef,s.route=l.route.value,s.outlet&&s.outlet.attach(l.componentRef,l.route.value),KO(l.route)}else{const l=function(t){for(let n=t.parent;n;n=n.parent){const e=n.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig;if(e&&e.component)return null}return null}(r.snapshot),c=l?l.module.componentFactoryResolver:null;s.attachRef=null,s.route=r,s.resolver=c,s.outlet&&s.outlet.activateWith(r,c),this.activateChildRoutes(n,null,s.children)}}else this.activateChildRoutes(n,null,i)}}function KO(t){mw(t.value),t.children.forEach(KO)}class bw{constructor(n,e){this.routes=n,this.module=e}}function kc(t){return"function"==typeof t}function Du(t){return t instanceof Eu}const Uf=Symbol("INITIAL_VALUE");function Vf(){return ri(t=>R_(t.map(n=>n.pipe(Pn(1),gu(Uf)))).pipe(_O((n,e)=>{let i=!1;return e.reduce((r,o,s)=>r!==Uf?r:(o===Uf&&(i=!0),i||!1!==o&&s!==e.length-1&&!Du(o)?r:o),n)},Uf),$t(n=>n!==Uf),he(n=>Du(n)?n:!0===n),Pn(1)))}let YO=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Y({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(e,i){1&e&&O(0,"router-outlet")},directives:function(){return[Ew]},encapsulation:2}),t})();function JO(t,n=""){for(let e=0;e<t.length;e++){const i=t[e];WK(i,qK(n,i))}}function WK(t,n){t.children&&JO(t.children,n)}function qK(t,n){return n?t||n.path?t&&!n.path?`${t}/`:!t&&n.path?n.path:`${t}/${n.path}`:"":t}function Cw(t){const n=t.children&&t.children.map(Cw),e=n?Object.assign(Object.assign({},t),{children:n}):Object.assign({},t);return!e.component&&(n||e.loadChildren)&&e.outlet&&e.outlet!==It&&(e.component=YO),e}function cs(t){return t.outlet||It}function XO(t,n){const e=t.filter(i=>cs(i)===n);return e.push(...t.filter(i=>cs(i)!==n)),e}const eN={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function kv(t,n,e){var i;if(""===n.path)return"full"===n.pathMatch&&(t.hasChildren()||e.length>0)?Object.assign({},eN):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const o=(n.matcher||lK)(e,t,n);if(!o)return Object.assign({},eN);const s={};tr(o.posParams,(c,d)=>{s[d]=c.path});const l=o.consumed.length>0?Object.assign(Object.assign({},s),o.consumed[o.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:o.consumed,lastChild:o.consumed.length,parameters:l,positionalParamSegments:null!==(i=o.posParams)&&void 0!==i?i:{}}}function Dv(t,n,e,i,r="corrected"){if(e.length>0&&function(t,n,e){return e.some(i=>xv(t,n,i)&&cs(i)!==It)}(t,e,i)){const s=new Nt(n,function(t,n,e,i){const r={};r[It]=i,i._sourceSegment=t,i._segmentIndexShift=n.length;for(const o of e)if(""===o.path&&cs(o)!==It){const s=new Nt([],{});s._sourceSegment=t,s._segmentIndexShift=n.length,r[cs(o)]=s}return r}(t,n,i,new Nt(e,t.children)));return s._sourceSegment=t,s._segmentIndexShift=n.length,{segmentGroup:s,slicedSegments:[]}}if(0===e.length&&function(t,n,e){return e.some(i=>xv(t,n,i))}(t,e,i)){const s=new Nt(t.segments,function(t,n,e,i,r,o){const s={};for(const l of i)if(xv(t,e,l)&&!r[cs(l)]){const c=new Nt([],{});c._sourceSegment=t,c._segmentIndexShift="legacy"===o?t.segments.length:n.length,s[cs(l)]=c}return Object.assign(Object.assign({},r),s)}(t,n,e,i,t.children,r));return s._sourceSegment=t,s._segmentIndexShift=n.length,{segmentGroup:s,slicedSegments:e}}const o=new Nt(t.segments,t.children);return o._sourceSegment=t,o._segmentIndexShift=n.length,{segmentGroup:o,slicedSegments:e}}function xv(t,n,e){return(!(t.hasChildren()||n.length>0)||"full"!==e.pathMatch)&&""===e.path}function tN(t,n,e,i){return!!(cs(t)===i||i!==It&&xv(n,e,t))&&("**"===t.path||kv(n,t,e).matched)}function nN(t,n,e){return 0===n.length&&!t.children[e]}class Bf{constructor(n){this.segmentGroup=n||null}}class iN{constructor(n){this.urlTree=n}}function Mv(t){return new _t(n=>n.error(new Bf(t)))}function rN(t){return new _t(n=>n.error(new iN(t)))}function JK(t){return new _t(n=>n.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t}'`)))}class tY{constructor(n,e,i,r,o){this.configLoader=e,this.urlSerializer=i,this.urlTree=r,this.config=o,this.allowRedirects=!0,this.ngModule=n.get(Ea)}apply(){const n=Dv(this.urlTree.root,[],[],this.config).segmentGroup,e=new Nt(n.segments,n.children);return this.expandSegmentGroup(this.ngModule,this.config,e,It).pipe(he(o=>this.createUrlTree(ww(o),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Lo(o=>{if(o instanceof iN)return this.allowRedirects=!1,this.match(o.urlTree);throw o instanceof Bf?this.noMatchError(o):o}))}match(n){return this.expandSegmentGroup(this.ngModule,this.config,n.root,It).pipe(he(r=>this.createUrlTree(ww(r),n.queryParams,n.fragment))).pipe(Lo(r=>{throw r instanceof Bf?this.noMatchError(r):r}))}noMatchError(n){return new Error(`Cannot match any routes. URL Segment: '${n.segmentGroup}'`)}createUrlTree(n,e,i){const r=n.segments.length>0?new Nt([],{[It]:n}):n;return new Eu(r,e,i)}expandSegmentGroup(n,e,i,r){return 0===i.segments.length&&i.hasChildren()?this.expandChildren(n,e,i).pipe(he(o=>new Nt([],o))):this.expandSegment(n,i,e,i.segments,r,!0)}expandChildren(n,e,i){const r=[];for(const o of Object.keys(i.children))"primary"===o?r.unshift(o):r.push(o);return hn(r).pipe(mh(o=>{const s=i.children[o],l=XO(e,o);return this.expandSegmentGroup(n,l,s,o).pipe(he(c=>({segment:c,outlet:o})))}),_O((o,s)=>(o[s.outlet]=s.segment,o),{}),function(t,n){const e=arguments.length>=2;return i=>i.pipe(t?$t((r,o)=>t(r,o,i)):Rn,aw(1),e?yO(n):vO(()=>new fv))}())}expandSegment(n,e,i,r,o,s){return hn(i).pipe(mh(l=>this.expandSegmentAgainstRoute(n,e,i,l,r,o,s).pipe(Lo(d=>{if(d instanceof Bf)return Ee(null);throw d}))),re(l=>!!l),Lo((l,c)=>{if(l instanceof fv||"EmptyError"===l.name){if(nN(e,r,o))return Ee(new Nt([],{}));throw new Bf(e)}throw l}))}expandSegmentAgainstRoute(n,e,i,r,o,s,l){return tN(r,e,o,s)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(n,e,r,o,s):l&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(n,e,i,r,o,s):Mv(e):Mv(e)}expandSegmentAgainstRouteUsingRedirect(n,e,i,r,o,s){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(n,i,r,s):this.expandRegularSegmentAgainstRouteUsingRedirect(n,e,i,r,o,s)}expandWildCardWithParamsAgainstRouteUsingRedirect(n,e,i,r){const o=this.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?rN(o):this.lineralizeSegments(i,o).pipe(rn(s=>{const l=new Nt(s,{});return this.expandSegment(n,l,e,s,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(n,e,i,r,o,s){const{matched:l,consumedSegments:c,lastChild:d,positionalParamSegments:m}=kv(e,r,o);if(!l)return Mv(e);const _=this.applyRedirectCommands(c,r.redirectTo,m);return r.redirectTo.startsWith("/")?rN(_):this.lineralizeSegments(r,_).pipe(rn(w=>this.expandSegment(n,e,i,w.concat(o.slice(d)),s,!1)))}matchSegmentAgainstRoute(n,e,i,r,o){if("**"===i.path)return i.loadChildren?(i._loadedConfig?Ee(i._loadedConfig):this.configLoader.load(n.injector,i)).pipe(he(w=>(i._loadedConfig=w,new Nt(r,{})))):Ee(new Nt(r,{}));const{matched:s,consumedSegments:l,lastChild:c}=kv(e,i,r);if(!s)return Mv(e);const d=r.slice(c);return this.getChildConfig(n,i,r).pipe(rn(_=>{const w=_.module,E=_.routes,{segmentGroup:D,slicedSegments:N}=Dv(e,l,d,E),F=new Nt(D.segments,D.children);if(0===N.length&&F.hasChildren())return this.expandChildren(w,E,F).pipe(he(de=>new Nt(l,de)));if(0===E.length&&0===N.length)return Ee(new Nt(l,{}));const j=cs(i)===o;return this.expandSegment(w,F,E,N,j?It:o,!0).pipe(he(X=>new Nt(l.concat(X.segments),X.children)))}))}getChildConfig(n,e,i){return e.children?Ee(new bw(e.children,n)):e.loadChildren?void 0!==e._loadedConfig?Ee(e._loadedConfig):this.runCanLoadGuards(n.injector,e,i).pipe(rn(r=>r?this.configLoader.load(n.injector,e).pipe(he(o=>(e._loadedConfig=o,o))):function(t){return new _t(n=>n.error(cw(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`)))}(e))):Ee(new bw([],n))}runCanLoadGuards(n,e,i){const r=e.canLoad;return r&&0!==r.length?Ee(r.map(s=>{const l=n.get(s);let c;if(function(t){return t&&kc(t.canLoad)}(l))c=l.canLoad(e,i);else{if(!kc(l))throw new Error("Invalid CanLoad guard");c=l(e,i)}return Ia(c)})).pipe(Vf(),Zn(s=>{if(!Du(s))return;const l=cw(`Redirecting to "${this.urlSerializer.serialize(s)}"`);throw l.url=s,l}),he(s=>!0===s)):Ee(!0)}lineralizeSegments(n,e){let i=[],r=e.root;for(;;){if(i=i.concat(r.segments),0===r.numberOfChildren)return Ee(i);if(r.numberOfChildren>1||!r.children[It])return JK(n.redirectTo);r=r.children[It]}}applyRedirectCommands(n,e,i){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),n,i)}applyRedirectCreatreUrlTree(n,e,i,r){const o=this.createSegmentGroup(n,e.root,i,r);return new Eu(o,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(n,e){const i={};return tr(n,(r,o)=>{if("string"==typeof r&&r.startsWith(":")){const l=r.substring(1);i[o]=e[l]}else i[o]=r}),i}createSegmentGroup(n,e,i,r){const o=this.createSegments(n,e.segments,i,r);let s={};return tr(e.children,(l,c)=>{s[c]=this.createSegmentGroup(n,l,i,r)}),new Nt(o,s)}createSegments(n,e,i,r){return e.map(o=>o.path.startsWith(":")?this.findPosParam(n,o,r):this.findOrReturn(o,i))}findPosParam(n,e,i){const r=i[e.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${n}'. Cannot find '${e.path}'.`);return r}findOrReturn(n,e){let i=0;for(const r of e){if(r.path===n.path)return e.splice(i),r;i++}return n}}function ww(t){const n={};for(const i of Object.keys(t.children)){const o=ww(t.children[i]);(o.segments.length>0||o.hasChildren())&&(n[i]=o)}return function(t){if(1===t.numberOfChildren&&t.children[It]){const n=t.children[It];return new Nt(t.segments.concat(n.segments),n.children)}return t}(new Nt(t.segments,n))}class oN{constructor(n){this.path=n,this.route=this.path[this.path.length-1]}}class Iv{constructor(n,e){this.component=n,this.route=e}}function rY(t,n,e){const i=t._root;return Hf(i,n?n._root:null,e,[i.value])}function Pv(t,n,e){const i=function(t){if(!t)return null;for(let n=t.parent;n;n=n.parent){const e=n.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig}return null}(n);return(i?i.module.injector:e).get(t)}function Hf(t,n,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const o=Lf(n);return t.children.forEach(s=>{(function(t,n,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const o=t.value,s=n?n.value:null,l=e?e.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){const c=function(t,n,e){if("function"==typeof e)return e(t,n);switch(e){case"pathParamsChange":return!ku(t.url,n.url);case"pathParamsOrQueryParamsChange":return!ku(t.url,n.url)||!Ma(t.queryParams,n.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!gw(t,n)||!Ma(t.queryParams,n.queryParams);case"paramsChange":default:return!gw(t,n)}}(s,o,o.routeConfig.runGuardsAndResolvers);c?r.canActivateChecks.push(new oN(i)):(o.data=s.data,o._resolvedData=s._resolvedData),Hf(t,n,o.component?l?l.children:null:e,i,r),c&&l&&l.outlet&&l.outlet.isActivated&&r.canDeactivateChecks.push(new Iv(l.outlet.component,s))}else s&&jf(n,l,r),r.canActivateChecks.push(new oN(i)),Hf(t,null,o.component?l?l.children:null:e,i,r)})(s,o[s.value.outlet],e,i.concat([s.value]),r),delete o[s.value.outlet]}),tr(o,(s,l)=>jf(s,e.getContext(l),r)),r}function jf(t,n,e){const i=Lf(t),r=t.value;tr(i,(o,s)=>{jf(o,r.component?n?n.children.getContext(s):null:n,e)}),e.canDeactivateChecks.push(new Iv(r.component&&n&&n.outlet&&n.outlet.isActivated?n.outlet.component:null,r))}class _Y{}function sN(t){return new _t(n=>n.error(t))}class yY{constructor(n,e,i,r,o,s){this.rootComponentType=n,this.config=e,this.urlTree=i,this.url=r,this.paramsInheritanceStrategy=o,this.relativeLinkResolution=s}recognize(){const n=Dv(this.urlTree.root,[],[],this.config.filter(s=>void 0===s.redirectTo),this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,n,It);if(null===e)return null;const i=new wv([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},It,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new Cl(i,e),o=new HO(this.url,r);return this.inheritParamsAndData(o._root),o}inheritParamsAndData(n){const e=n.value,i=BO(e,this.paramsInheritanceStrategy);e.params=Object.freeze(i.params),e.data=Object.freeze(i.data),n.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(n,e,i){return 0===e.segments.length&&e.hasChildren()?this.processChildren(n,e):this.processSegment(n,e,e.segments,i)}processChildren(n,e){const i=[];for(const o of Object.keys(e.children)){const s=e.children[o],l=XO(n,o),c=this.processSegmentGroup(l,s,o);if(null===c)return null;i.push(...c)}const r=aN(i);return function(t){t.sort((n,e)=>n.value.outlet===It?-1:e.value.outlet===It?1:n.value.outlet.localeCompare(e.value.outlet))}(r),r}processSegment(n,e,i,r){for(const o of n){const s=this.processSegmentAgainstRoute(o,e,i,r);if(null!==s)return s}return nN(e,i,r)?[]:null}processSegmentAgainstRoute(n,e,i,r){if(n.redirectTo||!tN(n,e,i,r))return null;let o,s=[],l=[];if("**"===n.path){const E=i.length>0?xO(i).parameters:{};o=new wv(i,E,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,uN(n),cs(n),n.component,n,lN(e),cN(e)+i.length,dN(n))}else{const E=kv(e,n,i);if(!E.matched)return null;s=E.consumedSegments,l=i.slice(E.lastChild),o=new wv(s,E.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,uN(n),cs(n),n.component,n,lN(e),cN(e)+s.length,dN(n))}const c=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(n),{segmentGroup:d,slicedSegments:m}=Dv(e,s,l,c.filter(E=>void 0===E.redirectTo),this.relativeLinkResolution);if(0===m.length&&d.hasChildren()){const E=this.processChildren(c,d);return null===E?null:[new Cl(o,E)]}if(0===c.length&&0===m.length)return[new Cl(o,[])];const _=cs(n)===r,w=this.processSegment(c,d,m,_?It:r);return null===w?null:[new Cl(o,w)]}}function wY(t){const n=t.value.routeConfig;return n&&""===n.path&&void 0===n.redirectTo}function aN(t){const n=[],e=new Set;for(const i of t){if(!wY(i)){n.push(i);continue}const r=n.find(o=>i.value.routeConfig===o.value.routeConfig);void 0!==r?(r.children.push(...i.children),e.add(r)):n.push(i)}for(const i of e){const r=aN(i.children);n.push(new Cl(i.value,r))}return n.filter(i=>!e.has(i))}function lN(t){let n=t;for(;n._sourceSegment;)n=n._sourceSegment;return n}function cN(t){let n=t,e=n._segmentIndexShift?n._segmentIndexShift:0;for(;n._sourceSegment;)n=n._sourceSegment,e+=n._segmentIndexShift?n._segmentIndexShift:0;return e-1}function uN(t){return t.data||{}}function dN(t){return t.resolve||{}}function Sw(t){return ri(n=>{const e=t(n);return e?hn(e).pipe(he(()=>n)):Ee(n)})}class IY extends class{shouldDetach(n){return!1}store(n,e){}shouldAttach(n){return!1}retrieve(n){return null}shouldReuseRoute(n,e){return n.routeConfig===e.routeConfig}}{}const Tw=new tt("ROUTES");class hN{constructor(n,e,i,r){this.loader=n,this.compiler=e,this.onLoadStartListener=i,this.onLoadEndListener=r}load(n,e){if(e._loader$)return e._loader$;this.onLoadStartListener&&this.onLoadStartListener(e);const r=this.loadModuleFactory(e.loadChildren).pipe(he(o=>{this.onLoadEndListener&&this.onLoadEndListener(e);const s=o.create(n);return new bw(DO(s.injector.get(Tw,void 0,we.Self|we.Optional)).map(Cw),s)}),Lo(o=>{throw e._loader$=void 0,o}));return e._loader$=new qa(r,()=>new Fe).pipe(Wa()),e._loader$}loadModuleFactory(n){return"string"==typeof n?hn(this.loader.load(n)):Ia(n()).pipe(rn(e=>e instanceof ox?Ee(e):hn(this.compiler.compileModuleAsync(e))))}}class PY{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new _h,this.attachRef=null}}class _h{constructor(){this.contexts=new Map}onChildOutletCreated(n,e){const i=this.getOrCreateContext(n);i.outlet=e,this.contexts.set(n,i)}onChildOutletDestroyed(n){const e=this.getContext(n);e&&(e.outlet=null,e.attachRef=null)}onOutletDeactivated(){const n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let e=this.getContext(n);return e||(e=new PY,this.contexts.set(n,e)),e}getContext(n){return this.contexts.get(n)||null}}class OY{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,e){return n}}function NY(t){throw t}function FY(t,n,e){return n.parse("/")}function pN(t,n){return Ee(null)}const RY={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},LY={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Ft=(()=>{class t{constructor(e,i,r,o,s,l,c,d){this.rootComponentType=e,this.urlSerializer=i,this.rootContexts=r,this.location=o,this.config=d,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Fe,this.errorHandler=NY,this.malformedUriErrorHandler=FY,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:pN,afterPreactivation:pN},this.urlHandlingStrategy=new OY,this.routeReuseStrategy=new IY,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=s.get(Ea),this.console=s.get($g);const w=s.get(it);this.isNgZoneEnabled=w instanceof it&&it.isInAngularZone(),this.resetConfig(d),this.currentUrlTree=new Eu(new Nt([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new hN(l,c,E=>this.triggerEvent(new wO(E)),E=>this.triggerEvent(new SO(E))),this.routerState=VO(this.currentUrlTree,this.rootComponentType),this.transitions=new ln({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var e;return null===(e=this.location.getState())||void 0===e?void 0:e.\u0275routerPageId}setupNavigations(e){const i=this.events;return e.pipe($t(r=>0!==r.id),he(r=>Object.assign(Object.assign({},r),{extractedUrl:this.urlHandlingStrategy.extract(r.rawUrl)})),ri(r=>{let o=!1,s=!1;return Ee(r).pipe(Zn(l=>{this.currentNavigation={id:l.id,initialUrl:l.currentRawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),ri(l=>{const c=this.browserUrlTree.toString(),d=!this.navigated||l.extractedUrl.toString()!==c||c!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||d)&&this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return Av(l.source)&&(this.browserUrlTree=l.extractedUrl),Ee(l).pipe(ri(_=>{const w=this.transitions.getValue();return i.next(new gv(_.id,this.serializeUrl(_.extractedUrl),_.source,_.restoredState)),w!==this.transitions.getValue()?ss:Promise.resolve(_)}),function(t,n,e,i){return ri(r=>function(t,n,e,i,r){return new tY(t,n,e,i,r).apply()}(t,n,e,r.extractedUrl,i).pipe(he(o=>Object.assign(Object.assign({},r),{urlAfterRedirects:o}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),Zn(_=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:_.urlAfterRedirects})}),function(t,n,e,i,r){return rn(o=>function(t,n,e,i,r="emptyOnly",o="legacy"){try{const s=new yY(t,n,e,i,r,o).recognize();return null===s?sN(new _Y):Ee(s)}catch(s){return sN(s)}}(t,n,o.urlAfterRedirects,e(o.urlAfterRedirects),i,r).pipe(he(s=>Object.assign(Object.assign({},o),{targetSnapshot:s}))))}(this.rootComponentType,this.config,_=>this.serializeUrl(_),this.paramsInheritanceStrategy,this.relativeLinkResolution),Zn(_=>{"eager"===this.urlUpdateStrategy&&(_.extras.skipLocationChange||this.setBrowserUrl(_.urlAfterRedirects,_),this.browserUrlTree=_.urlAfterRedirects);const w=new JZ(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot);i.next(w)}));if(d&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:w,extractedUrl:E,source:D,restoredState:N,extras:F}=l,j=new gv(w,this.serializeUrl(E),D,N);i.next(j);const H=VO(E,this.rootComponentType).snapshot;return Ee(Object.assign(Object.assign({},l),{targetSnapshot:H,urlAfterRedirects:E,extras:Object.assign(Object.assign({},F),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=l.rawUrl,this.browserUrlTree=l.urlAfterRedirects,l.resolve(null),ss}),Sw(l=>{const{targetSnapshot:c,id:d,extractedUrl:m,rawUrl:_,extras:{skipLocationChange:w,replaceUrl:E}}=l;return this.hooks.beforePreactivation(c,{navigationId:d,appliedUrlTree:m,rawUrlTree:_,skipLocationChange:!!w,replaceUrl:!!E})}),Zn(l=>{const c=new XZ(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot);this.triggerEvent(c)}),he(l=>Object.assign(Object.assign({},l),{guards:rY(l.targetSnapshot,l.currentSnapshot,this.rootContexts)})),function(t,n){return rn(e=>{const{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:o,canDeactivateChecks:s}}=e;return 0===s.length&&0===o.length?Ee(Object.assign(Object.assign({},e),{guardsResult:!0})):function(t,n,e,i){return hn(t).pipe(rn(r=>function(t,n,e,i,r){const o=n&&n.routeConfig?n.routeConfig.canDeactivate:null;return o&&0!==o.length?Ee(o.map(l=>{const c=Pv(l,n,r);let d;if(function(t){return t&&kc(t.canDeactivate)}(c))d=Ia(c.canDeactivate(t,n,e,i));else{if(!kc(c))throw new Error("Invalid CanDeactivate guard");d=Ia(c(t,n,e,i))}return d.pipe(re())})).pipe(Vf()):Ee(!0)}(r.component,r.route,e,n,i)),re(r=>!0!==r,!0))}(s,i,r,t).pipe(rn(l=>l&&function(t){return"boolean"==typeof t}(l)?function(t,n,e,i){return hn(n).pipe(mh(r=>_f(function(t,n){return null!==t&&n&&n(new nK(t)),Ee(!0)}(r.route.parent,i),function(t,n){return null!==t&&n&&n(new rK(t)),Ee(!0)}(r.route,i),function(t,n,e){const i=n[n.length-1],o=n.slice(0,n.length-1).reverse().map(s=>function(t){const n=t.routeConfig?t.routeConfig.canActivateChild:null;return n&&0!==n.length?{node:t,guards:n}:null}(s)).filter(s=>null!==s).map(s=>mv(()=>Ee(s.guards.map(c=>{const d=Pv(c,s.node,e);let m;if(function(t){return t&&kc(t.canActivateChild)}(d))m=Ia(d.canActivateChild(i,t));else{if(!kc(d))throw new Error("Invalid CanActivateChild guard");m=Ia(d(i,t))}return m.pipe(re())})).pipe(Vf())));return Ee(o).pipe(Vf())}(t,r.path,e),function(t,n,e){const i=n.routeConfig?n.routeConfig.canActivate:null;return i&&0!==i.length?Ee(i.map(o=>mv(()=>{const s=Pv(o,n,e);let l;if(function(t){return t&&kc(t.canActivate)}(s))l=Ia(s.canActivate(n,t));else{if(!kc(s))throw new Error("Invalid CanActivate guard");l=Ia(s(n,t))}return l.pipe(re())}))).pipe(Vf()):Ee(!0)}(t,r.route,e))),re(r=>!0!==r,!0))}(i,o,t,n):Ee(l)),he(l=>Object.assign(Object.assign({},e),{guardsResult:l})))})}(this.ngModule.injector,l=>this.triggerEvent(l)),Zn(l=>{if(Du(l.guardsResult)){const d=cw(`Redirecting to "${this.serializeUrl(l.guardsResult)}"`);throw d.url=l.guardsResult,d}const c=new eK(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.triggerEvent(c)}),$t(l=>!!l.guardsResult||(this.restoreHistory(l),this.cancelNavigationTransition(l,""),!1)),Sw(l=>{if(l.guards.canActivateChecks.length)return Ee(l).pipe(Zn(c=>{const d=new CO(c.id,this.serializeUrl(c.extractedUrl),this.serializeUrl(c.urlAfterRedirects),c.targetSnapshot);this.triggerEvent(d)}),ri(c=>{let d=!1;return Ee(c).pipe(function(t,n){return rn(e=>{const{targetSnapshot:i,guards:{canActivateChecks:r}}=e;if(!r.length)return Ee(e);let o=0;return hn(r).pipe(mh(s=>function(t,n,e,i){return function(t,n,e,i){const r=Object.keys(t);if(0===r.length)return Ee({});const o={};return hn(r).pipe(rn(s=>function(t,n,e,i){const r=Pv(t,n,i);return Ia(r.resolve?r.resolve(n,e):r(n,e))}(t[s],n,e,i).pipe(Zn(l=>{o[s]=l}))),aw(1),rn(()=>Object.keys(o).length===r.length?Ee(o):ss))}(t._resolve,t,n,i).pipe(he(o=>(t._resolvedData=o,t.data=Object.assign(Object.assign({},t.data),BO(t,e).resolve),null)))}(s.route,i,t,n)),Zn(()=>o++),aw(1),rn(s=>o===r.length?Ee(e):ss))})}(this.paramsInheritanceStrategy,this.ngModule.injector),Zn({next:()=>d=!0,complete:()=>{d||(this.restoreHistory(c),this.cancelNavigationTransition(c,"At least one route resolver didn't emit any value."))}}))}),Zn(c=>{const d=new tK(c.id,this.serializeUrl(c.extractedUrl),this.serializeUrl(c.urlAfterRedirects),c.targetSnapshot);this.triggerEvent(d)}))}),Sw(l=>{const{targetSnapshot:c,id:d,extractedUrl:m,rawUrl:_,extras:{skipLocationChange:w,replaceUrl:E}}=l;return this.hooks.afterPreactivation(c,{navigationId:d,appliedUrlTree:m,rawUrlTree:_,skipLocationChange:!!w,replaceUrl:!!E})}),he(l=>{const c=function(t,n,e){const i=Sv(t,n._root,e?e._root:void 0);return new UO(i,n)}(this.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return Object.assign(Object.assign({},l),{targetRouterState:c})}),Zn(l=>{this.currentUrlTree=l.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(l.urlAfterRedirects,l.rawUrl),this.routerState=l.targetRouterState,"deferred"===this.urlUpdateStrategy&&(l.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,l),this.browserUrlTree=l.urlAfterRedirects)}),((t,n,e)=>he(i=>(new UK(n,i.targetRouterState,i.currentRouterState,e).activate(t),i)))(this.rootContexts,this.routeReuseStrategy,l=>this.triggerEvent(l)),Zn({next(){o=!0},complete(){o=!0}}),function(t){return n=>n.lift(new KZ(t))}(()=>{var l;if(!o&&!s){const c=`Navigation ID ${r.id} is not equal to the current navigation id ${this.navigationId}`;"replace"===this.canceledNavigationResolution?(this.restoreHistory(r),this.cancelNavigationTransition(r,c)):this.cancelNavigationTransition(r,c)}(null===(l=this.currentNavigation)||void 0===l?void 0:l.id)===r.id&&(this.currentNavigation=null)}),Lo(l=>{if(s=!0,function(t){return t&&t[EO]}(l)){const c=Du(l.url);c||(this.navigated=!0,this.restoreHistory(r,!0));const d=new lw(r.id,this.serializeUrl(r.extractedUrl),l.message);i.next(d),c?setTimeout(()=>{const m=this.urlHandlingStrategy.merge(l.url,this.rawUrlTree),_={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Av(r.source)};this.scheduleNavigation(m,"imperative",null,_,{resolve:r.resolve,reject:r.reject,promise:r.promise})},0):r.resolve(!1)}else{this.restoreHistory(r,!0);const c=new bO(r.id,this.serializeUrl(r.extractedUrl),l);i.next(c);try{r.resolve(this.errorHandler(l))}catch(d){r.reject(d)}}return ss}))}))}resetRootComponentType(e){this.rootComponentType=e,this.routerState.root.component=this.rootComponentType}getTransition(){const e=this.transitions.value;return e.urlAfterRedirects=this.browserUrlTree,e}setTransition(e){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),e))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const i=this.extractLocationChangeInfoFromEvent(e);this.shouldScheduleNavigation(this.lastLocationChangeInfo,i)&&setTimeout(()=>{const{source:r,state:o,urlTree:s}=i,l={replaceUrl:!0};if(o){const c=Object.assign({},o);delete c.navigationId,delete c.\u0275routerPageId,0!==Object.keys(c).length&&(l.state=c)}this.scheduleNavigation(s,r,o,l)},0),this.lastLocationChangeInfo=i}))}extractLocationChangeInfoFromEvent(e){var i;return{source:"popstate"===e.type?"popstate":"hashchange",urlTree:this.parseUrl(e.url),state:(null===(i=e.state)||void 0===i?void 0:i.navigationId)?e.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(e,i){if(!e)return!0;const r=i.urlTree.toString()===e.urlTree.toString();return i.transitionId!==e.transitionId||!r||!("hashchange"===i.source&&"popstate"===e.source||"popstate"===i.source&&"hashchange"===e.source)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(e){this.events.next(e)}resetConfig(e){JO(e),this.config=e.map(Cw),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(e,i={}){const{relativeTo:r,queryParams:o,fragment:s,queryParamsHandling:l,preserveFragment:c}=i,d=r||this.routerState.root,m=c?this.currentUrlTree.fragment:s;let _=null;switch(l){case"merge":_=Object.assign(Object.assign({},this.currentUrlTree.queryParams),o);break;case"preserve":_=this.currentUrlTree.queryParams;break;default:_=o||null}return null!==_&&(_=this.removeEmptyProps(_)),function(t,n,e,i,r){if(0===e.length)return _w(n.root,n.root,n,i,r);const o=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new WO(!0,0,t);let n=0,e=!1;const i=t.reduce((r,o,s)=>{if("object"==typeof o&&null!=o){if(o.outlets){const l={};return tr(o.outlets,(c,d)=>{l[d]="string"==typeof c?c.split("/"):c}),[...r,{outlets:l}]}if(o.segmentPath)return[...r,o.segmentPath]}return"string"!=typeof o?[...r,o]:0===s?(o.split("/").forEach((l,c)=>{0==c&&"."===l||(0==c&&""===l?e=!0:".."===l?n++:""!=l&&r.push(l))}),r):[...r,o]},[]);return new WO(e,n,i)}(e);if(o.toRoot())return _w(n.root,new Nt([],{}),n,i,r);const s=function(t,n,e){if(t.isAbsolute)return new vw(n.root,!0,0);if(-1===e.snapshot._lastPathIndex){const o=e.snapshot._urlSegment;return new vw(o,o===n.root,0)}const i=Tv(t.commands[0])?0:1;return function(t,n,e){let i=t,r=n,o=e;for(;o>r;){if(o-=r,i=i.parent,!i)throw new Error("Invalid number of '../'");r=i.segments.length}return new vw(i,!1,r-o)}(e.snapshot._urlSegment,e.snapshot._lastPathIndex+i,t.numberOfDoubleDots)}(o,n,t),l=s.processChildren?Ev(s.segmentGroup,s.index,o.commands):qO(s.segmentGroup,s.index,o.commands);return _w(s.segmentGroup,l,n,i,r)}(d,this.currentUrlTree,e,_,null!=m?m:null)}navigateByUrl(e,i={skipLocationChange:!1}){const r=Du(e)?e:this.parseUrl(e),o=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(o,"imperative",null,i)}navigate(e,i={skipLocationChange:!1}){return function(t){for(let n=0;n<t.length;n++){const e=t[n];if(null==e)throw new Error(`The requested path contains ${e} segment at index ${n}`)}}(e),this.navigateByUrl(this.createUrlTree(e,i),i)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let i;try{i=this.urlSerializer.parse(e)}catch(r){i=this.malformedUriErrorHandler(r,this.urlSerializer,e)}return i}isActive(e,i){let r;if(r=!0===i?Object.assign({},RY):!1===i?Object.assign({},LY):i,Du(e))return IO(this.currentUrlTree,e,r);const o=this.parseUrl(e);return IO(this.currentUrlTree,o,r)}removeEmptyProps(e){return Object.keys(e).reduce((i,r)=>{const o=e[r];return null!=o&&(i[r]=o),i},{})}processNavigations(){this.navigations.subscribe(e=>{this.navigated=!0,this.lastSuccessfulId=e.id,this.currentPageId=e.targetPageId,this.events.next(new Tu(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,e.resolve(!0)},e=>{this.console.warn(`Unhandled Navigation Error: ${e}`)})}scheduleNavigation(e,i,r,o,s){var l,c;if(this.disposed)return Promise.resolve(!1);const d=this.getTransition(),m=Av(i)&&d&&!Av(d.source),E=(this.lastSuccessfulId===d.id||this.currentNavigation?d.rawUrl:d.urlAfterRedirects).toString()===e.toString();if(m&&E)return Promise.resolve(!0);let D,N,F;s?(D=s.resolve,N=s.reject,F=s.promise):F=new Promise((X,de)=>{D=X,N=de});const j=++this.navigationId;let H;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(r=this.location.getState()),H=r&&r.\u0275routerPageId?r.\u0275routerPageId:o.replaceUrl||o.skipLocationChange?null!==(l=this.browserPageId)&&void 0!==l?l:0:(null!==(c=this.browserPageId)&&void 0!==c?c:0)+1):H=0,this.setTransition({id:j,targetPageId:H,source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:e,extras:o,resolve:D,reject:N,promise:F,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),F.catch(X=>Promise.reject(X))}setBrowserUrl(e,i){const r=this.urlSerializer.serialize(e),o=Object.assign(Object.assign({},i.extras.state),this.generateNgRouterState(i.id,i.targetPageId));this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl?this.location.replaceState(r,"",o):this.location.go(r,"",o)}restoreHistory(e,i=!1){var r,o;if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-e.targetPageId;"popstate"!==e.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(r=this.currentNavigation)||void 0===r?void 0:r.finalUrl)||0===s?this.currentUrlTree===(null===(o=this.currentNavigation)||void 0===o?void 0:o.finalUrl)&&0===s&&(this.resetState(e),this.browserUrlTree=e.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(s)}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=e.currentRouterState,this.currentUrlTree=e.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(e,i){const r=new lw(e.id,this.serializeUrl(e.extractedUrl),i);this.triggerEvent(r),e.resolve(!1)}generateNgRouterState(e,i){return"computed"===this.canceledNavigationResolution?{navigationId:e,\u0275routerPageId:i}:{navigationId:e}}}return t.\u0275fac=function(e){return new(e||t)(P(Ym),P(uw),P(_h),P(of),P(Mt),P(Vg),P(lu),P(void 0))},t.\u0275prov=B({token:t,factory:t.\u0275fac}),t})();function Av(t){return"imperative"!==t}let us=(()=>{class t{constructor(e,i,r,o,s){this.router=e,this.route=i,this.commands=[],this.onChanges=new Fe,null==r&&o.setAttribute(s.nativeElement,"tabindex","0")}ngOnChanges(e){this.onChanges.next(this)}set routerLink(e){this.commands=null!=e?Array.isArray(e)?e:[e]:[]}onClick(){const e={skipLocationChange:vh(this.skipLocationChange),replaceUrl:vh(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,e),!0}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:vh(this.preserveFragment)})}}return t.\u0275fac=function(e){return new(e||t)(C(Ft),C(Me),fa("tabindex"),C(vi),C(Ye))},t.\u0275dir=te({type:t,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(e,i){1&e&&A("click",function(){return i.onClick()})},inputs:{routerLink:"routerLink",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[St]}),t})(),Ht=(()=>{class t{constructor(e,i,r){this.router=e,this.route=i,this.locationStrategy=r,this.commands=[],this.onChanges=new Fe,this.subscription=e.events.subscribe(o=>{o instanceof Tu&&this.updateTargetUrlAndHref()})}set routerLink(e){this.commands=null!=e?Array.isArray(e)?e:[e]:[]}ngOnChanges(e){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(e,i,r,o,s){if(0!==e||i||r||o||s||"string"==typeof this.target&&"_self"!=this.target)return!0;const l={skipLocationChange:vh(this.skipLocationChange),replaceUrl:vh(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,l),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:vh(this.preserveFragment)})}}return t.\u0275fac=function(e){return new(e||t)(C(Ft),C(Me),C(nh))},t.\u0275dir=te({type:t,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(e,i){1&e&&A("click",function(o){return i.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),2&e&&(no("href",i.href,li),Ct("target",i.target))},inputs:{routerLink:"routerLink",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[St]}),t})();function vh(t){return""===t||!!t}let Ew=(()=>{class t{constructor(e,i,r,o,s){this.parentContexts=e,this.location=i,this.resolver=r,this.changeDetector=s,this.activated=null,this._activatedRoute=null,this.activateEvents=new q,this.deactivateEvents=new q,this.name=o||It,e.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const e=this.parentContexts.getContext(this.name);e&&e.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,e}attach(e,i){this.activated=e,this._activatedRoute=i,this.location.insert(e.hostView)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,i){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=e;const s=(i=i||this.resolver).resolveComponentFactory(e._futureSnapshot.routeConfig.component),l=this.parentContexts.getOrCreateContext(this.name).children,c=new BY(e,l,this.location.injector);this.activated=this.location.createComponent(s,this.location.length,c),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(e){return new(e||t)(C(_h),C(Yi),C(_r),fa("name"),C(ci))},t.\u0275dir=te({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),t})();class BY{constructor(n,e,i){this.route=n,this.childContexts=e,this.parent=i}get(n,e){return n===Me?this.route:n===_h?this.childContexts:this.parent.get(n,e)}}class fN{}class mN{preload(n,e){return Ee(null)}}let gN=(()=>{class t{constructor(e,i,r,o,s){this.router=e,this.injector=o,this.preloadingStrategy=s,this.loader=new hN(i,r,d=>e.triggerEvent(new wO(d)),d=>e.triggerEvent(new SO(d)))}setUpPreloading(){this.subscription=this.router.events.pipe($t(e=>e instanceof Tu),mh(()=>this.preload())).subscribe(()=>{})}preload(){const e=this.injector.get(Ea);return this.processRoutes(e,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,i){const r=[];for(const o of i)if(o.loadChildren&&!o.canLoad&&o._loadedConfig){const s=o._loadedConfig;r.push(this.processRoutes(s.module,s.routes))}else o.loadChildren&&!o.canLoad?r.push(this.preloadConfig(e,o)):o.children&&r.push(this.processRoutes(e,o.children));return hn(r).pipe(_s(),he(o=>{}))}preloadConfig(e,i){return this.preloadingStrategy.preload(i,()=>(i._loadedConfig?Ee(i._loadedConfig):this.loader.load(e.injector,i)).pipe(rn(o=>(i._loadedConfig=o,this.processRoutes(o.module,o.routes)))))}}return t.\u0275fac=function(e){return new(e||t)(P(Ft),P(Vg),P(lu),P(Mt),P(fN))},t.\u0275prov=B({token:t,factory:t.\u0275fac}),t})(),kw=(()=>{class t{constructor(e,i,r={}){this.router=e,this.viewportScroller=i,this.options=r,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},r.scrollPositionRestoration=r.scrollPositionRestoration||"disabled",r.anchorScrolling=r.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(e=>{e instanceof gv?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof Tu&&(this.lastId=e.id,this.scheduleScrollEvent(e,this.router.parseUrl(e.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(e=>{e instanceof TO&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,i){this.router.triggerEvent(new TO(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(P(Ft),P(bI),P(void 0))},t.\u0275prov=B({token:t,factory:t.\u0275fac}),t})();const xu=new tt("ROUTER_CONFIGURATION"),_N=new tt("ROUTER_FORROOT_GUARD"),jY=[of,{provide:uw,useClass:NO},{provide:Ft,useFactory:function(t,n,e,i,r,o,s,l={},c,d){const m=new Ft(null,t,n,e,i,r,o,DO(s));return c&&(m.urlHandlingStrategy=c),d&&(m.routeReuseStrategy=d),function(t,n){t.errorHandler&&(n.errorHandler=t.errorHandler),t.malformedUriErrorHandler&&(n.malformedUriErrorHandler=t.malformedUriErrorHandler),t.onSameUrlNavigation&&(n.onSameUrlNavigation=t.onSameUrlNavigation),t.paramsInheritanceStrategy&&(n.paramsInheritanceStrategy=t.paramsInheritanceStrategy),t.relativeLinkResolution&&(n.relativeLinkResolution=t.relativeLinkResolution),t.urlUpdateStrategy&&(n.urlUpdateStrategy=t.urlUpdateStrategy)}(l,m),l.enableTracing&&m.events.subscribe(_=>{var w,E;null===(w=console.group)||void 0===w||w.call(console,`Router Event: ${_.constructor.name}`),console.log(_.toString()),console.log(_),null===(E=console.groupEnd)||void 0===E||E.call(console)}),m},deps:[uw,_h,of,Mt,Vg,lu,Tw,xu,[class{},new fr],[class{},new fr]]},_h,{provide:Me,useFactory:function(t){return t.routerState.root},deps:[Ft]},{provide:Vg,useClass:uH},gN,mN,class{preload(n,e){return e().pipe(Lo(()=>Ee(null)))}},{provide:xu,useValue:{enableTracing:!1}}];function zY(){return new Q1("Router",Ft)}let Ov=(()=>{class t{constructor(e,i){}static forRoot(e,i){return{ngModule:t,providers:[jY,vN(e),{provide:_N,useFactory:qY,deps:[[Ft,new fr,new ac]]},{provide:xu,useValue:i||{}},{provide:nh,useFactory:WY,deps:[du,[new sc(dC),new fr],xu]},{provide:kw,useFactory:GY,deps:[Ft,bI,xu]},{provide:fN,useExisting:i&&i.preloadingStrategy?i.preloadingStrategy:mN},{provide:Q1,multi:!0,useFactory:zY},[Dw,{provide:Jd,multi:!0,useFactory:YY,deps:[Dw]},{provide:yN,useFactory:JY,deps:[Dw]},{provide:aM,multi:!0,useExisting:yN}]]}}static forChild(e){return{ngModule:t,providers:[vN(e)]}}}return t.\u0275fac=function(e){return new(e||t)(P(_N,8),P(Ft,8))},t.\u0275mod=et({type:t}),t.\u0275inj=Te({}),t})();function GY(t,n,e){return e.scrollOffset&&n.setOffset(e.scrollOffset),new kw(t,n,e)}function WY(t,n,e={}){return e.useHash?new I6(t,n):new YM(t,n)}function qY(t){return"guarded"}function vN(t){return[{provide:qy,multi:!0,useValue:t},{provide:Tw,multi:!0,useValue:t}]}let Dw=(()=>{class t{constructor(e){this.injector=e,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Fe}appInitializer(){return this.injector.get(D6,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let i=null;const r=new Promise(l=>i=l),o=this.injector.get(Ft),s=this.injector.get(xu);return"disabled"===s.initialNavigation?(o.setUpLocationChangeListener(),i(!0)):"enabled"===s.initialNavigation||"enabledBlocking"===s.initialNavigation?(o.hooks.afterPreactivation=()=>this.initNavigation?Ee(null):(this.initNavigation=!0,i(!0),this.resultOfPreactivationDone),o.initialNavigation()):i(!0),r})}bootstrapListener(e){const i=this.injector.get(xu),r=this.injector.get(gN),o=this.injector.get(kw),s=this.injector.get(Ft),l=this.injector.get(ts);e===l.components[0]&&(("enabledNonBlocking"===i.initialNavigation||void 0===i.initialNavigation)&&s.initialNavigation(),r.setUpPreloading(),o.init(),s.resetRootComponentType(l.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return t.\u0275fac=function(e){return new(e||t)(P(Mt))},t.\u0275prov=B({token:t,factory:t.\u0275fac}),t})();function YY(t){return t.appInitializer.bind(t)}function JY(t){return t.bootstrapListener.bind(t)}const yN=new tt("Router Initializer");class ${static get apiPrefix(){return"wiki1"}static get spaPrefix(){return"wiki2"}static get wikiUrl(){return`https://${window.location.hostname}`}static get wikiApiUrl(){return`${this.wikiUrl}/${this.apiPrefix}/api`}static get wikiSPAUrl(){return`${this.wikiUrl}/${this.spaPrefix}`}static get wikiStaticUrl(){return`${this.wikiUrl}/static`}static get wikiMediaUrl(){return`${this.wikiUrl}/media`}static get wikiAudioUploadUrl(){return`${this.wikiUrl}/uploads`}static get wikiTokenUrl(){return`${this.wikiApiUrl}/token`}static get wikiTokenRefreshUrl(){return`${this.wikiTokenUrl}/refresh`}static get wikiUrlFrontendPrefix(){return"/wiki2"}static get wikiUrlFrontendPrefixNoSlash(){return"wiki2"}static get NONE_STRING(){return"None"}static get isSmallScreen(){return window.screen.availWidth<576}static get isTouchDevice(){return"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.maxTouchPoints>0}static get prologueForbiddenCharacters(){return/[\[\]\(\)\|\\\%~#<>\?/,]/g}static get createState(){return"create"}static get deleteState(){return"delete"}static get updateState(){return"update"}static get outdatedUpdateState(){return"outdated"}static get displayState(){return"display"}static get articleTypeSidebarColorMapping(){return{item:"yellow",character:"blue",creature:"red",location:"brown",organization:"purple",diaryentry:"darkgreen",quest:"white",encounter:"lightgreen",recording:"green",sessionaudio:"green",map:"beige",rules:"orange",spell:"violet"}}static get articleTypeMetaData(){return[{title:"Creatures",iconClass:"fas fa-dragon",route:"creature-overview",color:"red",article_types:["creature"],showInSidebar:!0},{title:"Characters",iconClass:"fas fa-male",route:"character-overview",color:"blue",article_types:["character"],showInSidebar:!0},{title:"DiaryEntries",iconClass:"fas fa-book-open",route:"diaryentry-overview",color:"darkgreen",article_types:["diaryentry"],showInSidebar:!0},{title:"Encounters",iconClass:"fa fa-comments",route:null,color:"lightgreen",article_types:["encounter"],showInSidebar:!1},{title:"Items",iconClass:"fa fa-magic",route:"item-overview",color:"yellow",article_types:["item"],showInSidebar:!0},{title:"Locations",iconClass:"fas fa-compass",route:"location-overview",color:"brown",article_types:["location"],showInSidebar:!0},{title:"Maps",iconClass:"fa fa-map",route:"default-map",color:"beige",article_types:["map"],showInSidebar:!0},{title:"Organizations",iconClass:"fas fa-sitemap",route:"organization-overview",color:"purple",article_types:["organization"],showInSidebar:!0},{title:"Quests",iconClass:"fas fa-question-circle",route:"quest-overview",color:"white",article_types:["quest"],showInSidebar:!0},{title:"Recordings",iconClass:"fa fa-file-audio-o",route:"sessionaudio-overview",color:"green",article_types:["sessionaudio","recording"],showInSidebar:!0},{title:"Rules",iconClass:"fa fa-book",route:"rules",color:"orange",article_types:["rule","rules"],showInSidebar:!0},{title:"Spells",iconClass:"fas fa-hand-sparkles",route:"spells",color:"violet",article_types:["spell","spells"],showInSidebar:!0},{title:"Sessions",iconClass:"fas fa-calendar-alt",route:"sessions",color:null,article_types:["session","sessions"],showInSidebar:!0}]}static get accessTokenType(){return"access"}static get refreshTokenType(){return"refresh"}static get anonymousUserName(){return"AnonymousUser"}static get userDataKey(){return"user_data"}static get audioImageUrl(){return"/assets/default_images/audio_pic_default.webp"}static get timeoutImageUrl(){return"/assets/error_images/504.jpeg"}static get badInputImageUrl(){return"/assets/error_images/400.png"}static get pageNotFoundImageUrl(){return"/assets/error_images/404.png"}static get serverErrorImageUrl(){return"/assets/error_images/500.jpeg"}static get noscriptErrorImageUrl(){return"/assets/error_images/noscript.jpg"}static get loginMessageForState(){return{"token-expired":"Your Session expired, please log in again","token-null":"You do not have a valid token, please log in","invalid-login":"No active account found with the given credentials","logged-out":"Log out successful. Log in again?","no-token":"You are not logged in. Please enter your credentials"}}static get maxDistanceToPageBottomForPaginationLoad(){return 400}static get defaultBackgroundImageUrl(){return"/assets/default_images/background_default.webp"}static get defaultImageUrl(){return"assets/default_images/icon_default.webp"}static get defaultCampaignIconUrl(){return"/assets/icons/icon-512x512.webp"}static get defaultMapName(){return"Aldrune"}static get defaultCampaign(){return"Aldrune"}static get tinyMCESettings(){return{plugins:["advlist autolink lists link image charmap anchor","searchreplace visualblocks fullscreen media","table paste help wordcount"],toolbar:["undo redo | formatselect | bold italic underline strikethrough subscript superscript link unlink blockquote | backcolor forecolor hilitecolor fontsizeselect |","alignleft aligncenter alignright | bullist numlist outdent indent | removeformat | table help"],skin:"oxide-dark",content_css:"dark",browser_spellcheck:!0,menubar:!1,height:500,convert_urls:!1,relative_urls:!1,branding:!1,base_url:"/tinymce",suffix:".min"}}static get castingTimeOptions(){return[{label:"1 Action",value:"1 Action"},{label:"1 Bonus Action",value:"1 Bonus Action"},{label:"1 Reaction",value:"1 Reaction"},{label:"1 Minute",value:"1 Minute"},{label:"10 Minutes",value:"10 Minutes"},{label:"1 Hour",value:"1 Hour"},{label:"8 Hours",value:"8 Hours"},{label:"12 Hours",value:"12 Hours"},{label:"24 Hours",value:"24 Hours"}]}static get savingThrowOptions(){return[{value:"ATK",label:"Attack"},{value:"STR",label:"Strength"},{value:"CON",label:"Constitution"},{value:"DEX",label:"Dexterity"},{value:"INT",label:"Intelligence"},{value:"WIS",label:"Wisdom"},{value:"CHA",label:"Charisma"}]}static get spellLevelOptions(){return[{value:0,label:"Cantrip"},{value:1,label:"1"},{value:2,label:"2"},{value:3,label:"3"},{value:4,label:"4"},{value:5,label:"5"},{value:6,label:"6"},{value:7,label:"7"},{value:8,label:"8"},{value:9,label:"9"}]}static get durationOptions(){return[{value:"Instantaneous",label:"Instantaneous"},{value:"1 Round",label:"1 Round"},{value:"6 Rounds",label:"6 Rounds"},{value:"1 Minute",label:"1 Minute"},{value:"10 Minutes",label:"10 Minutes"},{value:"1 Hour",label:"1 Hour"},{value:"2 Hours",label:"2 Hours"},{value:"8 Hours",label:"8 Hours"},{value:"24 Hours",label:"24 Hours"},{value:"1 Day",label:"1 Day"},{value:"7 Day",label:"7 Days"},{value:"10 Day",label:"10 Days"},{value:"30 Day",label:"30 Days"},{value:"Special",label:"Special"},{value:"Until Dispelled",label:"Until Dispelled"}]}static get rangeOptions(){return[{value:"Self",label:"Self"},{value:"5 Feet",label:"5 Feet"},{value:"10 Feet",label:"10 Feet"},{value:"15 Feet",label:"15 Feet"},{value:"30 Feet",label:"30 Feet"},{value:"60 Feet",label:"60 Feet"},{value:"90 Feet",label:"90 Feet"},{value:"100 Feet",label:"100 Feet"},{value:"120 Feet",label:"120 Feet"},{value:"150 Feet",label:"150 Feet"},{value:"1 Mile",label:"1 Mile"},{value:"3 Miles",label:"3 Miles"},{value:"10 Miles",label:"10 Miles"}]}static get componentOptions(){return[{value:"V",label:"V"},{value:"S",label:"S"},{value:"M",label:"M"},{value:"VS",label:"VS"},{value:"VM",label:"VM"},{value:"SM",label:"SM"},{value:"VSM",label:"VSM"},{value:"VSM*",label:"VSM*"}]}static get schoolOptions(){return[{value:"Abjuration",label:"Abjuration"},{value:"Conjuration",label:"Conjuration"},{value:"Divination",label:"Divination"},{value:"Enchantment",label:"Enchantment"},{value:"Evocation",label:"Evocation"},{value:"Illusion",label:"Illusion"},{value:"Necromancy",label:"Necromancy"},{value:"Transmutation",label:"Transmutation"}]}}var Ie=(()=>(function(t){t.Character="CHARACTER",t.Creature="CREATURE",t.Diaryentry="DIARYENTRY",t.Encounter="ENCOUNTER",t.Item="ITEM",t.Location="LOCATION",t.Map="MAP",t.MarkerType="MARKERTYPE",t.MarkerTypeType="MARKERTYPETYPE",t.Organization="ORGANIZATION",t.Quest="QUEST",t.Quote="QUOTE",t.Rule="RULE",t.Session="SESSION",t.Sessionaudio="SESSIONAUDIO",t.Spell="SPELL",t.User="USER"}(Ie||(Ie={})),Ie))(),ue=(()=>(function(t){t.MEMBER="member",t.ADMIN="admin",t.GUEST="guest",t.GLOBALGUEST="globalguest",t.GLOBALMEMBER="globalmember"}(ue||(ue={})),ue))(),Br=(()=>(function(t){t[t.CREATE=0]="CREATE",t[t.READ=1]="READ",t[t.UPDATE=2]="UPDATE",t[t.UPDATEOUTDATED=3]="UPDATEOUTDATED",t[t.DELETE=4]="DELETE"}(Br||(Br={})),Br))();let ke=(()=>{class t{constructor(e){this.http=e,this.jwtTokenUrl=$.wikiTokenUrl,this.refreshTokenUrl=$.wikiTokenRefreshUrl,this.ID_IDENTIFIER_PREFIX="id_"}login(e){return this.http.post(this.jwtTokenUrl,{username:e.username,password:e.password})}refreshUserData(){const e=t.getRefreshToken();return this.http.post(this.refreshTokenUrl,{refresh:e.token})}invalidateJWTToken(){}static getUserData(){return JSON.parse(localStorage.getItem($.userDataKey))}hasTokens(){return null!=t.getUserData()&&!!t.getAccessToken()&&!!t.getRefreshToken()}hasValidJWTToken(){return!!this.hasTokens()&&!this.isTokenExpired(t.getRefreshToken())}static getAccessToken(){return this.getUserData().accessToken}static getRefreshToken(){return this.getUserData().refreshToken}setUserData(e){localStorage.setItem($.userDataKey,JSON.stringify(e))}removeJWTTokenFromLocalStorage(){localStorage.removeItem($.userDataKey)}getCurrentUserPk(){return t.getUserData().userId}isAdmin(){const e=t.getUserData();return null!=e&&e.isAdmin}isSuperUser(){const e=t.getUserData();return null!=e&&e.isSuperUser}getCurrentUserName(){var e;return null===(e=t.getUserData())||void 0===e?void 0:e.userName}isCampaignMember(e){const i=this.getCampaignRole(e);return this.isSuperUser()||this.isAdmin()||i===ue.MEMBER||i===ue.ADMIN}isCampaignAdmin(e){return this.isSuperUser()||this.isAdmin()||this.getCampaignRole(e)===ue.ADMIN}isCampaignGuest(e){return this.isSuperUser()||this.isAdmin()||this.getCampaignRole(e)===ue.GUEST}getCampaignRole(e){if(null==e)return null;const i=this.getCampaignMemberships();if(null==i)return null;const r=i[e.toLowerCase()];return ue[null==r?void 0:r.toUpperCase()]}getCampaignMemberships(){const e=t.getUserData(),i={};for(const r of Object.keys(e.campaignMemberships))r.startsWith(this.ID_IDENTIFIER_PREFIX)||(i[r.toLowerCase()]=e.campaignMemberships[r]);return i}isAccessTokenExpired(){return this.isTokenExpired(t.getAccessToken())}isRefreshTokenExpired(){return this.isTokenExpired(t.getRefreshToken())}isTokenExpired(e){const i=e.exp,r=Math.floor((new Date).getTime()/1e3),o=r>=i;return o&&console.log(`${e.type} Token is expired. Request timestamp: ${new Date(1e3*r).toString()}. Token expiry timestamp: ${new Date(1e3*i).toString()}`),o}}return t.\u0275fac=function(e){return new(e||t)(P(zt))},t.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),ji=(()=>{class t{constructor(e,i){if(this.tokenService=e,this.route=i,this.userHasUpdatePermission=()=>[ue.ADMIN,ue.MEMBER].includes(this.campaignRole),this.userHasViewPermission=()=>[ue.ADMIN,ue.MEMBER,ue.GUEST].includes(this.campaignRole),this.userHasDeletePermission=()=>[ue.ADMIN,ue.MEMBER].includes(this.campaignRole),this.userHasCreatePermission=()=>[ue.ADMIN,ue.MEMBER].includes(this.campaignRole),this.isAdminOrSuperUser=this.tokenService.isAdmin()||this.tokenService.isSuperUser(),this.isAdminOrSuperUser)this.hasCreatePermission=!0,this.hasViewPermission=!0,this.hasUpdatePermission=!0,this.hasDeletePermission=!0;else{const r=this.tokenService.getCampaignMemberships();this.campaignRole=r[this.route.snapshot.params.campaign.toLowerCase()],this.hasCreatePermission=this.userHasCreatePermission(),this.hasViewPermission=this.userHasViewPermission(),this.hasUpdatePermission=this.userHasUpdatePermission(),this.hasDeletePermission=this.userHasDeletePermission()}}}return t.\u0275fac=function(e){return new(e||t)(C(ke),C(Me))},t.\u0275dir=te({type:t}),t})();const hi=(t,n,e="animate__")=>{if(null==t)throw"Invalid Input Exception. The given element is null";return new Promise((i,r)=>{const o=`${e}${n}`;t.classList.add(`${e}animated`,o),t.addEventListener("animationend",function(l){l.stopPropagation(),t.classList.remove(`${e}animated`,o),i("Animation ended")},{once:!0})})};function bN(t){var n;document.getSelection().rangeCount>0&&(n=document.getSelection().getRangeAt(0),window.getSelection().removeRange(n));const e=function(t){const n=document.createElement("div");return n.innerHTML=t,n.innerHTML=n.textContent.replaceAll(">","<br>> ").slice("<br>".length),n.style.position="absolute",n.style.left="-9999px",n}(t);document.body.appendChild(e);const i=function(t){const n=document.createRange();return n.selectNode(t),window.getSelection().addRange(n),n}(e);(function(){try{document.execCommand("copy")}catch(t){window.alert("Your Browser Doesn't support this! Error : "+t)}})(),window.getSelection().removeRange(i),document.body.removeChild(e),n&&window.getSelection().addRange(n)}let Ze=(()=>{class t{constructor(){this.warnings={0:"This can't be done without an internet connection",200:"Potential Syntaxerror",404:"The target URL for the requested action does not seem to exist",500:"An error occurred on the server, unrelated to your input. Please copy the full error message and send it to the developer",504:"This can't be done without an internet connection"},this.headings={400:"Invalid Input"},this.defaultWarning="The requested action was not carried out. An error occurred"}showWarning(e){console.log(e);const r=this.getHeading("number"!=typeof e?e.status:e),o=this.getBody(e);this.showErrorNotification(r,o,e)}getBody(e){const i="number"!=typeof e?e.status:e;var r=this.warnings[i];if(r=null==r?this.defaultWarning:r,500===i)return r;if(!("number"==typeof e||e.hasOwnProperty("status")&&e.hasOwnProperty("error")))throw console.error(e),"Error while trying to display the error above";let l;return l="string"==typeof e.error?"The error was caused by: <br>    "+e.error:"number"==typeof e?"":this.getHttpErrorMessages(e),r+"<br>"+l}getHeading(e){const r=this.headings[e];return null==r?`Error ${e}`:r}getHttpErrorMessages(e){let i="The errors you received were because of:<br>";for(let r in e.error)i+=`${r}<br>`,Array.isArray(e.error[r])?e.error[r].forEach(l=>{i+=`<strong class='ml-5'>- ${l}</strong> <br>`}):i+=`<strong class='ml-5'>- ${e.error[r]}</strong> <br>`;return i}showAlert(e){alert(e)}showErrorNotification(e,i,r={}){const o=document.querySelector("body"),s=`\n    <div class="card notification animate__animated animate__fadeInDown">\n        <div class="card-body">\n          <i class="fa fa-times fa-1-5x icon float-right" id="closeIcon"></i>\n          <h3 class="card-title mb-0">${e}</h3>\n          <hr class="white-separator">\n          <div class="card-subtitle"></div>\n          <div class="card-text">${i}</div>\n          <div class="mt-3">\n              <div class="btn btn-secondary" id="closeBtn"> <i class="fa fa-times"></i> Close </div>\n              <div class="btn btn-secondary" id="copy"> <i class="fas fa-clipboard"></i> Copy Full Error</div>\n          </div>\n        </div>\n    </div>\n    `,l=document.createElement("div");l.innerHTML=s,l.onclick=c=>this.onErrorNotificationClick(c,r),o.appendChild(l)}onErrorNotificationClick(e,i){const o="closeBtn"===e.target.id;if("closeIcon"===e.target.id){const l=e.target.parentElement.parentElement;console.log(l),hi(l,"fadeOutUp").then(()=>l.parentElement.remove())}if(o){const l=e.target.parentElement.parentElement.parentElement;hi(l,"fadeOutUp").then(()=>l.parentElement.remove())}"copy"===e.target.id&&this.copyErrorToClipboard(i)}copyErrorToClipboard(e){bN("number"==typeof e?`Error status ${e}`:JSON.stringify(e,null,"    "))}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),ce=(()=>{class t{constructor(e,i){this.router=e,this.warning=i,this.router.routeReuseStrategy.shouldReuseRoute=()=>!1}routeToApiObject(e){const i=e.getAbsoluteRouterUrl(),r=this.replaceSpecialUnicodeCharacters(i);this.router.navigateByUrl(r)}routeToPath(e,i={}){const r=this.getRoutePath(e,i),o=this.replaceSpecialUnicodeCharacters(r);this.router.navigateByUrl(o)}getRoutePath(e,i={}){let r=this.getVariableRoutePathByName(e);if(this.hasPathVariables(r)){const o=this.getPathVariableNames(r);for(let s of o){if(!i.hasOwnProperty(s))throw`Tried to create path for route ${e} but lacked parameter ${s}`;null===i[s]&&(i[s]=$.NONE_STRING),r=r.replace(`:${s}`,i[s])}}return`/${r}`}routeToErrorPage(e){if("number"!=typeof e&&!e.hasOwnProperty("status"))throw this.warning.showWarning(e),"Incorrect error input. The input does not contain an error status or an object with the error status. Can not route to error page without error status.";"number"!=typeof e&&e.hasOwnProperty("status")&&(e=e.status),this.routeToPath("error",{errorStatus:`${e}`})}routeNameMatches(e,i){return e.snapshot.data.name===i}replaceSpecialUnicodeCharacters(e){return e.replace("(","%28").replace(")","%29").replace("?","?").replace("\u2020","%E2%80%A0")}getVariableRouteByName(e){const r=this.router.config.filter(s=>s.data.name===e);if(r.length>1)throw`There is more than 1 route with the name ${e}. Please contact the Developer to ensure all routes have unique names.`;if(0===r.length)throw`There is no route with the name ${e}. Please contact the Developer to use either a different route name or create a route for this name.`;return r[0]}getVariableRoutePathByName(e){return this.getVariableRouteByName(e).path}hasPathVariables(e){return e.includes("/:")}hasRoutePath(e){return this.router.config.filter(o=>o.data.name===e).length>0}getPathVariableNames(e){return e.split("/").filter(s=>s.startsWith(":")).map(s=>s.slice(1))}}return t.\u0275fac=function(e){return new(e||t)(P(Ft),P(Ze))},t.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),rJ=(()=>{class t{transform(e,i){const o=e.reduce((c,d)=>{const m=this.getFieldValue(i,d);return c.hasOwnProperty(m)?c[m].push(d):c[m]=[d],c},{});return Object.keys(o).map(c=>({key:c,value:o[c]})).sort((c,d)=>c.key.toLowerCase()<d.key.toLowerCase()?1:-1).reverse()}getFieldValue(e,i){const r=e.split(".");let o=i;for(let s of r)o=o[s];return o}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=Ve({name:"groupBy",type:t,pure:!0}),t})(),oJ=(()=>{class t{transform(e,i){const o=e.reduce((s,l)=>{const d=l[i][0];return s.hasOwnProperty(d)?s[d].push(l):s[d]=[l],s},{});return Object.keys(o).map(s=>({key:s,value:o[s]}))}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=Ve({name:"groupByFirstLetter",type:t,pure:!0}),t})();const sJ=["overviewMainCard"],aJ=["filter"];function lJ(t,n){if(1&t&&(p(0,"div",13),p(1,"h1",21),k(2),f(),f()),2&t){const e=b();g(2),Le(null==e.overviewTypeMetaData[e.overviewTypeName]?null:e.overviewTypeMetaData[e.overviewTypeName].heading)}}function cJ(t,n){1&t&&Zi(0,22),2&t&&(b(),v("ngTemplateOutlet",ie(23)))}function uJ(t,n){1&t&&Zi(0,22),2&t&&(b(),v("ngTemplateOutlet",ie(21)))}function dJ(t,n){if(1&t&&(p(0,"div",23),p(1,"a",24),O(2,"i",25),k(3),Lt(4,"titlecase"),f(),f()),2&t){const e=b();g(3),Z(" Add ",yn(4,1,e.overviewTypeName)," ")}}function hJ(t,n){1&t&&Zi(0,22),2&t&&(b(),v("ngTemplateOutlet",ie(25)))}function pJ(t,n){1&t&&Zi(0,22),2&t&&(b(),v("ngTemplateOutlet",ie(27)))}function fJ(t,n){1&t&&Zi(0,22),2&t&&(b(),v("ngTemplateOutlet",ie(29)))}function mJ(t,n){if(1&t&&(p(0,"div",13),O(1,"img",26),f()),2&t){const e=b();g(1),v("src",e.overviewTypeMetaData[e.overviewTypeName].image,li)}}function gJ(t,n){if(1&t&&O(0,"img",36),2&t){const e=b().$implicit;v("src",b(2).constants.wikiUrl+e.images[0],li)}}function _J(t,n){if(1&t&&(p(0,"div",30),p(1,"a",31),p(2,"div",32),S(3,gJ,1,1,"img",33),p(4,"div",34),p(5,"h5",35),k(6),f(),f(),f(),f(),f()),2&t){const e=n.$implicit;g(1),v("routerLink",e.getAbsoluteRouterUrl()),g(2),v("ngIf",e.images),g(3),Le(e.name_full)}}function vJ(t,n){if(1&t&&(p(0,"div",13),p(1,"h3",27),k(2," Player Characters "),f(),f(),p(3,"div",28),S(4,_J,7,3,"div",29),f()),2&t){const e=b();g(4),v("ngForOf",e.playerCharacters)}}const yh=function(t){return{"d-none":t}};function yJ(t,n){if(1&t&&(p(0,"span",43),p(1,"li",39),p(2,"a",31),k(3),f(),f(),f()),2&t){const e=n.$implicit;b(3);const i=ie(11);g(1),v("ngClass",ht(3,yh,!e.name_full.toLowerCase().includes(i.value.toLowerCase()))),g(1),v("routerLink",e.getAbsoluteRouterUrl()),g(1),Z(" ",e.name_full," ")}}const CN=function(t,n){return{"py-4 col-md-6 border-bottom":t,"col-12":n}};function bJ(t,n){if(1&t&&(p(0,"div",39),p(1,"h5",40),k(2),f(),p(3,"ul",41),S(4,yJ,4,5,"span",42),f(),f()),2&t){const e=n.$implicit;b(2);const i=ie(11);v("ngClass",Bn(4,CN,!i.value,i.value)),g(1),v("ngClass",ht(7,yh,i.value)),g(1),Z(" ",e.key," "),g(2),v("ngForOf",e.value)}}function CJ(t,n){if(1&t&&(Zi(0,22),p(1,"div",13),p(2,"h3",37),k(3," Non-Player Characters "),f(),f(),p(4,"div",13),S(5,bJ,5,9,"div",38),Lt(6,"groupByFirstLetter"),f()),2&t){const e=b();v("ngTemplateOutlet",ie(31)),g(5),v("ngForOf",ka(6,2,e.listItems,"name"))}}function wJ(t,n){if(1&t&&(p(0,"span",13),p(1,"li",45),p(2,"a",31),k(3),f(),f(),f()),2&t){const e=n.$implicit;b(3);const i=ie(11);g(1),v("ngClass",ht(3,yh,!e.name_full.toLowerCase().includes(i.value.toLowerCase()))),g(1),v("routerLink",e.getAbsoluteRouterUrl()),g(1),Z(" ",e.name_full," ")}}const SJ=function(t){return{"mb-0":t}};function TJ(t,n){if(1&t&&(p(0,"div"),p(1,"div",13),p(2,"h5",45),k(3),f(),f(),p(4,"ul",39),S(5,wJ,4,5,"span",46),f(),f()),2&t){const e=n.$implicit;b(2);const i=ie(11);g(2),v("ngClass",ht(4,yh,i.value)),g(1),Z(" ",e.key," "),g(1),v("ngClass",ht(6,SJ,i.value)),g(1),v("ngForOf",e.value)}}function EJ(t,n){1&t&&(S(0,TJ,6,8,"div",44),Lt(1,"groupBy")),2&t&&v("ngForOf",ka(1,1,b().listItems,"author_details.name"))}function kJ(t,n){if(1&t&&(p(0,"li",39),p(1,"a",31),k(2),f(),f()),2&t){const e=n.$implicit;b(3);const i=ie(11);v("ngClass",ht(3,yh,!e.name_full.toLowerCase().includes(i.value.toLowerCase()))),g(1),v("routerLink",e.getAbsoluteRouterUrl()),g(1),Z(" ",e.name_full," ")}}function DJ(t,n){if(1&t&&(p(0,"div",39),p(1,"h5",40),k(2),f(),p(3,"ul",41),S(4,kJ,3,5,"li",38),f(),f()),2&t){const e=n.$implicit;b(2);const i=ie(11);v("ngClass",Bn(4,CN,!i.value,i.value)),g(1),v("ngClass",ht(7,yh,i.value)),g(1),Z(" ",e.key," "),g(2),v("ngForOf",e.value)}}function xJ(t,n){if(1&t&&(Zi(0,22),p(1,"div",13),S(2,DJ,5,9,"div",38),Lt(3,"groupByFirstLetter"),f()),2&t){const e=b();v("ngTemplateOutlet",ie(31)),g(2),v("ngForOf",ka(3,2,e.listItems,"name_full"))}}function MJ(t,n){}let bh=(()=>{class t extends ji{constructor(e,i,r,o){super(o,r),this.router=e,this.routingService=i,this.OverviewType=Ie,this.isInitialAnimationFinished=!1,this.constants=$,this.overviewTypeMetaData={character:{image:"/assets/overview_images/characters.webp",heading:"Characters",processing:s=>this.processCharacterOverviewItems(s),overviewTypeEnum:Ie.Character},creature:{image:"/assets/overview_images/creatures.webp",heading:"Creatures",processing:null,overviewTypeEnum:Ie.Creature},diaryentry:{image:"/assets/overview_images/diaryentries.webp",heading:"Diaryentries",processing:s=>this.processDiaryentryOverviewItems(s),overviewTypeEnum:Ie.Diaryentry},item:{image:"/assets/overview_images/items.webp",heading:"Items",processing:null,overviewTypeEnum:Ie.Item},location:{image:"/assets/overview_images/locations.webp",heading:"Locations",processing:s=>this.processLocationOverviewItems(s),overviewTypeEnum:Ie.Location},organization:{image:"/assets/overview_images/organizations.webp",heading:"Organizations",processing:null,overviewTypeEnum:Ie.Organization}},this.characterOverview="character",this.itemOverview="item",this.creatureOverview="creature",this.locationOverview="location",this.organizationOverview="organization",this.diaryentryOverview="diaryentry"}ngOnInit(){this.campaign=this.route.snapshot.data.campaign;const e=this.route.snapshot.data.overviewList,r=this.getOverviewConfigs().processing;this.listItems=null!=r?r(e):e,this.setRouterLinks(this.campaign,this.listItems)}setRouterLinks(e,i){this.homeUrl=this.routingService.getRoutePath("home2",{campaign:e.name})}getOverviewConfigs(){const e=this.router.url.split("/");return this.overviewTypeName=e[e.length-2],this.overviewTypeMetaData[this.overviewTypeName]}ngAfterViewInit(){var e;!(null===(e=this.articleElement)||void 0===e?void 0:e.nativeElement)||hi(this.articleElement.nativeElement,"fadeIn")}filterListItems(){}openFirstArticle(e){const i=e.toLowerCase(),o=this.listItems.filter(s=>s.name.toLowerCase().includes(i))[0];this.routingService.routeToApiObject(o)}processCharacterOverviewItems(e){const i=[],r=[];return e.forEach(o=>o.player_character?i.push(o):r.push(o)),this.playerCharacters=i,r}processDiaryentryOverviewItems(e){return e.forEach(i=>i.name_full=this.buildDiaryEntryNameForList(i)),e}processLocationOverviewItems(e){return e.forEach(i=>{const s=this.getParentLocations(i,e).map(l=>l.name).reverse().join(" - ");i.name_full=s}),this.sortLocationsByNameFull(e),e}getParentLocations(e,i){const r=[e];for(var o=e;null!=o.parent_location_details.pk;){const l=this.getListItemByPk(o.parent_location_details.pk,i);r.push(l),o=l}return r}getListItemByPk(e,i){return null==e?null:i.find(o=>o.pk===e)}sortLocationsByNameFull(e){e.sort((i,r)=>i.name_full>r.name_full?1:-1)}buildDiaryEntryNameForList(e){const i=`#${e.session_details.session_number}`;let r=null!=e.name?`- ${e.name}`:"";if($.isSmallScreen)return`${i} ${r}`;let o="";if(null!=e.session_details.start_day&&null!=e.session_details.end_day){const s=3;o=`- Days ${this.padNumber(e.session_details.start_day,s,"")}-${this.padNumber(e.session_details.end_day,s,"")}`}return`${i} ${o} ${r}`}padNumber(e,i,r="0"){return(r.repeat(i)+e).slice(-1*i)}}return t.\u0275fac=function(e){return new(e||t)(C(Ft),C(ce),C(Me),C(ke))},t.\u0275cmp=Y({type:t,selectors:[["app-article-overview"]],viewQuery:function(e,i){if(1&e&&(pt(sJ,5),pt(aJ,5)),2&e){let r;ye(r=be())&&(i.articleElement=r.first),ye(r=be())&&(i.filterField=r)}},features:[oe],decls:32,vars:9,consts:[[1,"main"],["overviewMainCard",""],[1,"container"],["class","row",4,"ngIf"],[3,"ngSwitch"],["heading",""],[3,"ngTemplateOutlet",4,"ngSwitchCase"],[3,"ngTemplateOutlet",4,"ngSwitchDefault"],["class","mb-3 row",4,"ngIf"],["autocomplete","off",1,"row",3,"submit"],["type","text","id","filter_input",1,"filter-bar","mt-2","mb-4","w-100","col",3,"placeholder","keyup"],["filter",""],["body",""],[1,"row"],[1,"mt-4","col-sm-3","btn","btn-secondary",3,"routerLink"],["defaultHeading",""],["characterHeading",""],["characterBody",""],["diaryentryBody",""],["defaultBody",""],["filterField",""],[1,"major","col","mb-4","pb-1","border-bottom"],[3,"ngTemplateOutlet"],[1,"mb-3","row"],["routerLink","create",1,"btn","btn-primary","col-lg-2","col-sm-3"],[1,"fa","fa-plus"],["alt","Image indicating the overview type",1,"col","overview-image","px-0","mb-4",3,"src"],[1,"col","mb-0"],["id","player-characters",1,"mb-5","row"],["class","mb-4 col-md-4 col-sm-6 col-12",4,"ngFor","ngForOf"],[1,"mb-4","col-md-4","col-sm-6","col-12"],[3,"routerLink"],[1,"card"],["class","card-img-top","alt","An image displaying a player character",3,"src",4,"ngIf"],[1,"card-body","p-3"],[1,"card-title","mb-0","text-center"],["alt","An image displaying a player character",1,"card-img-top",3,"src"],[1,"mb-3","col"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],[1,"mb-0",3,"ngClass"],[1,"mb-0"],["class","px-0",4,"ngFor","ngForOf"],[1,"px-0"],[4,"ngFor","ngForOf"],[1,"col",3,"ngClass"],["class","row",4,"ngFor","ngForOf"]],template:function(e,i){if(1&e){const r=G();p(0,"div",0,1),p(2,"article",2),S(3,lJ,3,1,"div",3),Vt(4,4,5),S(6,cJ,1,1,"ng-container",6),S(7,uJ,1,1,"ng-container",7),Bt(),S(8,dJ,5,3,"div",8),p(9,"form",9),A("submit",function(){h(r);const s=ie(11);return i.openFirstArticle(s.value)}),p(10,"input",10,11),A("keyup",function(){return i.filterListItems()}),f(),f(),Vt(12,4,12),S(14,hJ,1,1,"ng-container",6),S(15,pJ,1,1,"ng-container",6),S(16,fJ,1,1,"ng-container",7),Bt(),p(17,"div",13),p(18,"a",14),k(19," Back to Frontpage "),f(),f(),f(),f(),S(20,mJ,2,1,"ng-template",null,15,se),S(22,vJ,5,1,"ng-template",null,16,se),S(24,CJ,7,5,"ng-template",null,17,se),S(26,EJ,2,4,"ng-template",null,18,se),S(28,xJ,4,5,"ng-template",null,19,se),S(30,MJ,0,0,"ng-template",null,20,se)}2&e&&(g(3),v("ngIf",i.overviewTypeName),g(1),v("ngSwitch",i.overviewTypeMetaData[i.overviewTypeName].overviewTypeEnum),g(2),v("ngSwitchCase",i.OverviewType.Character),g(2),v("ngIf",i.hasCreatePermission),g(2),Po("placeholder","Search for ",i.overviewTypeName,"..."),g(2),v("ngSwitch",i.overviewTypeMetaData[i.overviewTypeName].overviewTypeEnum),g(2),v("ngSwitchCase",i.OverviewType.Character),g(1),v("ngSwitchCase",i.OverviewType.Diaryentry),g(3),v("routerLink",i.homeUrl))},directives:[le,ih,a_,pI,Vr,Ur,Fo,Ht,ro,je,Yt],pipes:[lf,oJ,rJ],styles:["ul[_ngcontent-%COMP%]{list-style-type:disclosure-closed}.overview-image[_ngcontent-%COMP%]{max-height:23rem;object-fit:cover;object-position:bottom}.filter-bar[_ngcontent-%COMP%]{background-color:transparent;border:1px white solid;border-radius:5px;padding:0 1rem;line-height:1.65;font-size:1rem;height:2.75rem;color:#fff}.filter-bar[_ngcontent-%COMP%]:focus{background:rgba(255,255,255,.1);border-color:#fff;box-shadow:0 0 0 2px #fff}#player-characters[_ngcontent-%COMP%]{margin-right:-15px;margin-left:-15px}#player-characters[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:7rem;object-fit:cover;transition:max-height .2s ease-in-out}#player-characters[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:hover > img[_ngcontent-%COMP%]{max-height:20rem}@media (max-width: 768px){li[_ngcontent-%COMP%]{font-size:larger}}"]}),t})();const IJ=["article"];let Hs=(()=>{class t extends ji{constructor(e,i,r,o,s,l){super(l,i),this.articleService=e,this.routingService=r,this.warnings=o,this.globalUrlParams=s,this.constants=$,this.queryParameterName="name",this.isLoadingArticleData=!1,this.textfieldFormStateSubject=new ln($.displayState)}ngOnInit(){this.campaign=this.route.snapshot.data.campaign,this.articleData=this.route.snapshot.data.article,this.updateDynamicVariables(this.campaign,this.articleData,null),this.updateOnDeleteRouteParameters(this.campaign,this.route.snapshot.params)}ngAfterViewInit(){var e;!(null===(e=this.articleElement)||void 0===e?void 0:e.nativeElement)||hi(this.articleElement.nativeElement,"fadeIn").then(i=>this.onInitAnimationEnd())}onInitAnimationEnd(){}updateDynamicVariables(e,i,r){}updateOnDeleteRouteParameters(e,i){this.deleteRoute.params.campaign=e.name}onDescriptionUpdate(e){this.articleService.patch(this.articleData.pk,{description:e,update_datetime:this.articleData.update_datetime}).pipe(re()).subscribe(r=>{this.articleData=r},r=>{this.onDescriptionUpdateError(r)})}onDescriptionUpdateError(e){409===(null==e?void 0:e.status)?(this.articleData=e.error,this.textfieldFormStateSubject.next($.outdatedUpdateState)):this.warnings.showWarning(e)}deleteArticle(){this.articleService.delete(this.articleData.pk).pipe(re()).subscribe(e=>this.routingService.routeToPath(this.deleteRoute.routeName,this.deleteRoute.params),e=>this.warnings.showWarning(e))}ngOnDestroy(){this.parameter_subscription&&this.parameter_subscription.unsubscribe(),this.globalParamSubscription&&this.globalParamSubscription.unsubscribe()}}return t.\u0275fac=function(e){Ud()},t.\u0275dir=te({type:t,viewQuery:function(e,i){if(1&e&&pt(IJ,5),2&e){let r;ye(r=be())&&(i.articleElement=r.first)}},features:[oe]}),t})();function Cn(t,n,e,i){var s,r=arguments.length,o=r<3?n:null===i?i=Object.getOwnPropertyDescriptor(n,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,n,e,i);else for(var l=t.length-1;l>=0;l--)(s=t[l])&&(o=(r<3?s(o):r>3?s(n,e,o):s(n,e))||o);return r>3&&o&&Object.defineProperty(n,e,o),o}function Nv(t,n){return function(e,i){n(e,i,t)}}function Pa(t,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,n)}function Et(t,n,e,i){return new(e||(e=Promise))(function(o,s){function l(m){try{d(i.next(m))}catch(_){s(_)}}function c(m){try{d(i.throw(m))}catch(_){s(_)}}function d(m){m.done?o(m.value):function(o){return o instanceof e?o:new e(function(s){s(o)})}(m.value).then(l,c)}d((i=i.apply(t,n||[])).next())})}class zf{constructor(n){n&&Object.assign(this,n)}getAbsoluteRouterUrl(){return`${$.wikiUrlFrontendPrefix}/character/${this.campaign_details.name}/${this.name}`}}class Rv{constructor(n){n&&Object.assign(this,n)}getAbsoluteRouterUrl(){return`${$.wikiUrlFrontendPrefix}/creature/${this.campaign_details.name}/${this.name}`}}class Gf{constructor(n){n&&Object.assign(this,n)}getAbsoluteRouterUrl(){if(!this.session_details)throw"Can't generate URL for diaryEntry object without Session Details";if(!this.session_details)throw"Can't generate URL for diaryEntry object without author_Details";return`${$.wikiUrlFrontendPrefix}/diaryentry/${this.campaign_details.name}/${this.session_details.session_number}/${this.session_details.is_main_session_int}/${this.author_details.name}`}}class js{constructor(n){this.orderIndexIncrement=10,n&&Object.assign(this,n)}hasShiftedOrderIndex(){return this.order_index%this.orderIndexIncrement>0}getShiftedOrderIndex(){return this.hasShiftedOrderIndex()?this.order_index:this.order_index+1}getUnshiftedOrderIndex(){return Math.floor(this.order_index/this.orderIndexIncrement)*this.orderIndexIncrement}unshiftOrderIndex(){this.order_index=this.getUnshiftedOrderIndex()}swapOrderIndexState(){this.hasShiftedOrderIndex()?this.unshiftOrderIndex():this.shiftOrderIndex()}shiftOrderIndex(){this.order_index++}nextOrderIndex(){return this.getUnshiftedOrderIndex()+this.orderIndexIncrement}priorOrderIndex(){return this.getUnshiftedOrderIndex()-this.orderIndexIncrement}getAbsoluteRouterUrl(){if(!this.diaryentry_details.session_number||!this.diaryentry_details.author_name||null==this.diaryentry_details.is_main_session)throw console.error(this.diaryentry_details),"Can't generate URL for Encounter object without all necessary information! I only have this:";return`${$.wikiUrlFrontendPrefix}/diaryentry/${this.campaign_details.name}/${this.diaryentry_details.session_number}/${this.diaryentry_details.is_main_session}/${this.diaryentry_details.author_name}/${this.title}`}getAbsoluteLocationRouterUrl(){if(!this.location_details)throw"Can't generate URL for Location of Encounter object without locatoin_details !";return`${$.wikiUrlFrontendPrefix}/location/${this.campaign_details.name}/${this.location_details.parent_location_name}/${this.location_details.name}`}}class Wf{constructor(n){n&&Object.assign(this,n)}getAbsoluteRouterUrl(){return`${$.wikiUrlFrontendPrefix}/item/${this.campaign_details.name}/${this.name}`}}class Mu{constructor(n){n&&Object.assign(this,n)}getAbsoluteRouterUrl(){if(!this.parent_location_details)throw"Can't generate URL for Location object without parent_location_details";return`${$.wikiUrlFrontendPrefix}/location/${this.campaign_details.name}/${this.parent_location_details.name}/${this.name}`}getAbsoluteRouterUrlForParentLocation(){if(!this.parent_location_details)throw"Can't generate URL for Parent-Location of Location object without parent_location_details";return`${$.wikiUrlFrontendPrefix}/location/${this.campaign_details.name}/${this.parent_location_details.parent_location}/${this.parent_location_details.name}`}}class Lv{constructor(n){n&&Object.assign(this,n)}getAbsoluteRouterUrl(){return`${$.wikiUrlFrontendPrefix}/organization/${this.campaign_details.name}/${this.name}`}}class $v{constructor(n){n&&Object.assign(this,n)}getAbsoluteRouterUrl(){return null==this.absoluteRouterUrl&&(this.absoluteRouterUrl=`${$.wikiUrlFrontendPrefix}/quest/${this.campaign_details.name}/${this.name}`),this.absoluteRouterUrl}}class qf{constructor(n){n&&Object.assign(this,n)}getAbsoluteRouterUrl(){if(!this.session_details)throw"Can't generate URL for SessionAudio object without session_details";return`${$.wikiUrlFrontendPrefix}/sessionaudio/${this.campaign_details.name}/${this.session_details.is_main_session_int}/${this.session_details.session_number}`}}class Iu{constructor(n){n&&Object.assign(this,n)}}class Ch{constructor(n){n&&Object.assign(this,n)}getAbsoluteRouterUrl(){return`${$.wikiUrlFrontendPrefix}/map/${this.campaign_details.name}/${this.name}`}}class Qf{constructor(n){n&&Object.assign(this,n)}}class Pu{constructor(n){n&&Object.assign(this,n)}getAbsoluteRouterUrl(){if(!this.map_details)throw"Can't generate URL for MapMarker object without map_details";if(!this.location_details)throw"Can't generate URL for Encounter object without location_details";return`${$.wikiUrlFrontendPrefix}/marker/${this.campaign_details.name}/${this.location_details.parent_location_name}/${this.location_details.name}/${this.map_details.name}`}}class Uv{constructor(n){n&&Object.assign(this,n)}getAbsoluteRouterUrl(){return`${$.wikiUrlFrontendPrefix}/spells/${this.campaign_details.name}/${this.name}`}}class Vv{constructor(n){n&&Object.assign(this,n)}getAbsoluteRouterUrl(){return`${$.wikiUrlFrontendPrefix}/rules/${this.campaign_details.name}/${this.name}`}}class Au{constructor(n){n&&Object.assign(this,n)}getAbsoluteRouterUrl(){if(!this.article_type)throw"Can not generate URL for undefined article_type";if(!this.absoluteRouterUrl){const e=new(0,EN[this.article_type])(this);this.absoluteRouterUrl=e.getAbsoluteRouterUrl()}return this.absoluteRouterUrl}}const EN={character:zf,creature:Rv,diaryentry:Gf,encounter:js,item:Wf,location:Mu,organization:Lv,quest:$v,sessionaudio:qf,session:Iu,map:Ch,timestamp:Qf,mapmarker:Pu,spell:Uv,rules:Vv};function zs(t,n){return t.pipe(he(e=>{const i=[];for(let r of e)i.push(new n(r));return i}))}function Ou(t,n){return t.pipe(he(e=>new n(e)))}function Aa(t){return function(n,e,i){const r=i.value;return i.value=function(){const o=r.apply(this,arguments);return["String","string"].includes(typeof t)&&(t=this[t]),Ou(o,t)},i}}function Bv(t){return function(n,e,i){const r=i.value;return i.value=function(){["String","string"].includes(typeof t)&&(t=this[t]);const s=r.apply(this,arguments);return zs(s,t)},i}}let nr=(()=>{class t{constructor(e,i){this.http=e,this.objectClass=i}list(){return zs(this.http.get(`${this.baseUrl}/`),this.objectClass)}campaignList(e){return zs(this.http.get(`${this.baseUrl}/${e}/overview/`),this.objectClass)}campaignDetailList(e){return zs(this.http.get(`${this.baseUrl}/${e}/`),this.objectClass)}create(e){return Ou(this.http.post(`${this.baseUrl}/`,e),this.objectClass)}update(e,i){return Ou(this.http.put(`${this.baseUrl}/pk/${e}/`,i),this.objectClass)}read(e){return Ou(this.http.get(`${this.baseUrl}/pk/${e}/`),this.objectClass)}readByParam(e,i){if("string"!=typeof i.name)throw console.error("The params you used in the service"),console.error(i),'Invalid params exception. You tried to use the base readByParams of GenericObjectService with a parameter \n      object without the "name" attribute. This indicates your call is more complex than \n      this base implementation is useful for. Overwrite readByParam in the service that inherits from  \n      GenericObjectService and implement the function yourself';if(null==e)throw"You tried to use readByParam without specifying which campaign you're querying for!";return Ou(this.http.get(`${this.baseUrl}/${e}/${i.name}/`),this.objectClass)}delete(e){return this.http.delete(`${this.baseUrl}/pk/${e}/`)}patch(e,i){return Ou(this.http.patch(`${this.baseUrl}/pk/${e}/`,i),this.objectClass)}}return t.\u0275fac=function(e){Ud()},t.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();new er({"Content-Type":"application/json"});class ir extends nr{constructor(n){super(n,zf),this.baseUrl=`${$.wikiApiUrl}/character`}getPlayerCharacters(n){return this.http.get(`${this.baseUrl}/${n}/playercharacters/`)}getNonPlayerCharacters(n){return this.http.get(`${this.baseUrl}/${n}/nonplayercharacters/`)}}function Nu(t,n="file"){if(!t.hasOwnProperty(n))throw`Can't convert object to FormData! Your model does not have a ${n} property!`;if(!t[n][0])throw`Can't convert object to FormData! Your model's ${n} has no file!`;const e=new FormData;for(var i in t)i===n?e.append(i,t[n][0]):t[i]&&e.append(i,t[i]);return e}ir.\u0275fac=function(n){return new(n||ir)(P(zt))},ir.\u0275prov=B({token:ir,factory:ir.\u0275fac,providedIn:"root"}),Cn([Bv(Au)],ir.prototype,"getPlayerCharacters",null),Cn([Bv(Au)],ir.prototype,"getNonPlayerCharacters",null);let Oa=(()=>{class t{constructor(e){this.http=e}list(){return this.http.get(`${this.baseUrl}/`)}campaignList(e){return this.http.get(`${this.baseUrl}/${e}/overview`)}campaignDetailList(e){return this.http.get(`${this.baseUrl}/${e}/`)}create(e){return this.http.post(`${this.baseUrl}/`,e)}update(e,i){return this.http.put(`${this.baseUrl}/pk/${e}/`,i)}read(e){return this.http.get(`${this.baseUrl}/pk/${e}/`)}readByParam(e,i){if("string"!=typeof i.name)throw console.error("The params you used in the service"),console.error(i),'Invalid params exception. You tried to use the base readByParams of GenericService with a parameter \n      object without the "name" attribute. This indicates your call is more complex than \n      this base implementation is useful for. Overwrite readByParam in the service that inherits from  \n      GenericObjectService and implement the function yourself';return this.http.get(`${this.baseUrl}/${e}/${i.name}/`)}delete(e){return this.http.delete(`${this.baseUrl}/pk/${e}/`)}patch(e,i){return this.http.patch(`${this.baseUrl}/pk/${e}/`,i)}}return t.\u0275fac=function(e){return new(e||t)(P(zt))},t.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),ki=(()=>{class t extends Oa{constructor(e,i){super(e),this.tokenService=i,this.baseUrl=`${$.wikiApiUrl}/campaign`}campaignList(){return this.http.get(`${this.baseUrl}/overview/`).pipe(he(i=>(i.forEach(r=>{r.isMember=this.tokenService.isCampaignMember(r.name.toLowerCase()),r.isAdmin=this.tokenService.isCampaignAdmin(r.name.toLowerCase()),r.isGuest=this.tokenService.isCampaignGuest(r.name.toLowerCase())}),i)))}create(e){const i=this.processCampaignData(e);return super.create(i)}update(e,i){const r=this.processCampaignData(i);return super.update(e,r)}patch(e,i){const r=this.processCampaignData(i);return super.patch(e,r)}processCampaignData(e){const i=this.hasImageSelected(e.icon),r=this.hasImageSelected(e.background_image);return i||r?!i&&r?(delete e.icon,Nu(e,"background_image")):i&&!r?(delete e.background_image,Nu(e,"icon")):function(t,n){n.forEach(r=>{if(!t.hasOwnProperty(r))throw`Can't convert object to FormData! Your model does not have a ${r} property!`});const e=new FormData;for(var i in t)n.includes(i)?e.append(i,t[i][0]):t[i]&&e.append(i,t[i]);return e}(e,["background_image","icon"]):(delete e.icon,delete e.background_image,e)}hasImageSelected(e){return"FileList"===e.constructor.name}delete(e){throw"You can not delete a campaign, please use 'deactivate' instead"}deactivate(e){return super.delete(e)}statistics(e){return this.http.get(`${$.wikiApiUrl}/admin/statistics/${e}`)}readByParam(e){return this.http.get(`${this.baseUrl}/${e}/`)}addGuest(e,i){return this.http.patch(`${this.baseUrl}/${e}/members/`,{action:"add_guest",user:i})}addMember(e,i){return this.http.patch(`${this.baseUrl}/${e}/members/`,{action:"add_member",user:i})}addAdmin(e,i){return this.http.patch(`${this.baseUrl}/${e}/members/`,{action:"add_admin",user:i})}removeGuest(e,i){return this.http.patch(`${this.baseUrl}/${e}/members/`,{action:"remove_guest",user:i})}removeMember(e,i){return this.http.patch(`${this.baseUrl}/${e}/members/`,{action:"remove_member",user:i})}removeAdmin(e,i){return this.http.patch(`${this.baseUrl}/${e}/members/`,{action:"remove_admin",user:i})}addEmptySearchResponse(e){return this.http.post(`${$.wikiApiUrl}/emptysearchresponse/`,e)}deleteEmptySearchResponse(e){return this.http.delete(`${$.wikiApiUrl}/emptysearchresponse/pk/${e}`)}}return t.\u0275fac=function(e){return new(e||t)(P(zt),P(ke))},t.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),FJ=(()=>{class t{constructor(e){this.titleService=e,this.defaultTitle="StoryFont"}updatePageTitle(e,i){const r=this.createPageTitle(e,i);this.titleService.setTitle(r)}createPageTitle(e,i){const r=e.campaign;if(null==r)return this.defaultTitle;const o=this.getArticleName(e,i);return this.capitalizeFirstLetters(`${r} ${o}`)}getArticleName(e,i){const r=e.name;return null!=r?r:i.includes("diaryentry")&&e.sessionNumber?`Diaryentry ${e.sessionNumber}`:i.includes("sessionaudio")&&e.sessionNumber?`Recording ${e.sessionNumber}`:i}capitalizeFirstLetters(e){return e.toLowerCase().replace(/^\w|\s\w/g,r=>r.toUpperCase())}}return t.\u0275fac=function(e){return new(e||t)(P(FI))},t.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),$e=(()=>{class t{constructor(e,i,r,o,s,l,c){this.campaignService=e,this.tokenService=i,this.router=r,this.routingService=o,this.urlLocation=s,this.myTitleService=l,this.route=c,this.currentCampaignSet=new ln(null),this.isLoadingCampaignSet=!1,this.currentCampaign=new ln(null),this.currentCampaignSet.pipe(function(t){return n=>n.lift(new $G(t))}(1)).subscribe(()=>{this.updateCurrentlySelectedCampaignFromRoute(this.route.snapshot.params)}),this.autoUpdateCampaignSet().then(()=>this.startListeningToRoutingEvents())}autoUpdateCampaignSet(){return Et(this,void 0,void 0,function*(){!this.tokenService.hasValidJWTToken()||this.isLoadingCampaignSet||(this.isLoadingCampaignSet=!0,this.campaignService.campaignList().pipe(re()).subscribe(e=>{this.isLoadingCampaignSet=!1,this.updateCampaignSet(e)},e=>this.routingService.routeToErrorPage(e)))})}updateCurrentlySelectedCampaign(e){var i;return Et(this,void 0,void 0,function*(){if(e===(null===(i=this.currentCampaign.value)||void 0===i?void 0:i.name))return;yield this.currentCampaignSet.pipe($t(s=>null!=s),re()).toPromise();const o=yield this.findCampaignByName(e);this.currentCampaign.next(o)})}getCurrentCampaign(){return Et(this,void 0,void 0,function*(){return yield this.currentCampaign.pipe($t(i=>null!=i),re()).toPromise()})}waitForCampaignSetsToLoad(){return Et(this,void 0,void 0,function*(){yield this.getCampaigns().pipe($t(e=>null!=e),re()).toPromise()})}getCampaigns(){return this.currentCampaignSet}unsetCurrentlySelectedCampaign(){this.updateCurrentlySelectedCampaign(null)}updateCampaignSet(e){this.currentCampaignSet.next(e)}refreshAndReturnToLastURL(){return Et(this,void 0,void 0,function*(){yield this.autoUpdateCampaignSet(),this.urlLocation.back()})}startListeningToRoutingEvents(){this.router.events.pipe($t(e=>e instanceof CO)).subscribe(e=>this.onRouteResolveStart(e))}onRouteResolveStart(e){const i=e.state.root.firstChild,r=i.params,o=i.data.name;this.updateCurrentlySelectedCampaignFromRoute(r),this.myTitleService.updatePageTitle(r,o)}updateCurrentlySelectedCampaignFromRoute(e){this.updateCurrentlySelectedCampaign(null==e?void 0:e.campaign)}findCampaignByName(e){return Et(this,void 0,void 0,function*(){if(null==e)return;let i=this.currentCampaignSet.value;return null!=i||(yield this.autoUpdateCampaignSet(),i=this.currentCampaignSet.value,null!=i)?(e=e.toLowerCase(),i.find(r=>r.name.toLowerCase()===e)):void 0})}}return t.\u0275fac=function(e){return new(e||t)(P(ki),P(ke),P(Ft),P(ce),P(of),P(FJ),P(Me))},t.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();class RJ{}new er({"Content-Type":"application/json"});let LJ=(()=>{class t extends Oa{constructor(e){super(e),this.baseUrl=`${$.wikiApiUrl}/image`}getArticleImages(e,i){return this.http.get(`${this.baseUrl}/${e}/${i}`)}update(e,i){const r=Nu(i,"image");return this.http.put(`${this.baseUrl}/pk/${e}/`,r)}create(e){const i=`${$.wikiApiUrl}/image/upload/`,r=Nu(e,"image");return this.http.post(i,r)}patch(e,i){const r=`${this.baseUrl}/pk/${e}/`,o=function(t){const n=new FormData;return Object.keys(t).forEach(i=>n.append(i,t[i])),n}(i);return this.http.patch(r,o)}delete(e){return this.http.delete(`${this.baseUrl}/pk/${e}`)}}return t.\u0275fac=function(e){return new(e||t)(P(zt))},t.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Zf=(()=>{class t extends nr{constructor(e){super(e,Rv),this.baseUrl=`${$.wikiApiUrl}/creature`}}return t.\u0275fac=function(e){return new(e||t)(P(zt))},t.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();class Gs extends nr{constructor(n){super(n,Gf),this.http=n,this.baseUrl=`${$.wikiApiUrl}/diaryentry`}readByParam(n,e){return this.http.get(`${this.baseUrl}/${n}/${e.sessionNumber}/${e.isMainSession}/${e.authorName}/`)}}Gs.\u0275fac=function(n){return new(n||Gs)(P(zt))},Gs.\u0275prov=B({token:Gs,factory:Gs.\u0275fac,providedIn:"root"}),Cn([Aa(Gf)],Gs.prototype,"readByParam",null),new er({"Content-Type":"application/json"});let Hv=(()=>{class t extends nr{constructor(e){super(e,js),this.baseUrl=`${$.wikiApiUrl}/encounter`}getDiaryEntryEncounters(e,i){return zs(this.http.get(`${this.baseUrl}/session/${e}/${i}`),js)}createForDiaryentry(e,i){return zs(this.http.post(`${this.baseUrl}/`,i),js)}swapEncounterOrder(e,i,r){return zs(this.http.patch(`${this.baseUrl}/${e}/orderswap/`,{encounter1:i,encounter2:r}),js)}cutInsertEncounter(e,i,r){return zs(this.http.patch(`${this.baseUrl}/${e}/cutinsert/`,{encounter:i.pk,old_order_index:i.order_index,new_order_index:r}),js)}}return t.\u0275fac=function(e){return new(e||t)(P(zt))},t.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Kf=(()=>{class t extends nr{constructor(e){super(e,Wf),this.baseUrl=`${$.wikiApiUrl}/item`}}return t.\u0275fac=function(e){return new(e||t)(P(zt))},t.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),wl=(()=>{class t extends nr{constructor(e){super(e,Mu),this.baseUrl=`${$.wikiApiUrl}/location`}readByParam(e,i){return Ou(this.http.get(`${this.baseUrl}/${e}/${i.parentLocationName}/${i.locationName}/`),Mu)}}return t.\u0275fac=function(e){return new(e||t)(P(zt))},t.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();class Hr extends nr{constructor(n){super(n,Ch),this.baseUrl=`${$.wikiApiUrl}/map`}create(n){const e=Nu(n,"image");return this.http.post(`${this.baseUrl}/`,e)}update(n,e){let r;return"FileList"===e.image.constructor.name?r=Nu(e,"image"):(delete e.image,r=e),this.http.patch(`${this.baseUrl}/pk/${n}/`,r)}}Hr.\u0275fac=function(n){return new(n||Hr)(P(zt))},Hr.\u0275prov=B({token:Hr,factory:Hr.\u0275fac,providedIn:"root"}),Cn([Aa(Ch)],Hr.prototype,"create",null),Cn([Aa(Ch)],Hr.prototype,"update",null);class $o extends nr{constructor(n){super(n,Pu),this.baseUrl=`${$.wikiApiUrl}/marker`}readByParam(n,e){return this.http.get(`${this.baseUrl}/${n}/${e.parentLocationName}/${e.locationName}/${e.mapName}`)}}$o.\u0275fac=function(n){return new(n||$o)(P(zt))},$o.\u0275prov=B({token:$o,factory:$o.\u0275fac,providedIn:"root"}),Cn([Aa(Pu)],$o.prototype,"readByParam",null);let kN=(()=>{class t extends Oa{constructor(e){super(e),this.baseUrl=`${$.wikiApiUrl}/markertype`}}return t.\u0275fac=function(e){return new(e||t)(P(zt))},t.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),wh=(()=>{class t extends nr{constructor(e){super(e,Lv),this.baseUrl=`${$.wikiApiUrl}/organization`}}return t.\u0275fac=function(e){return new(e||t)(P(zt))},t.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();class ds extends nr{constructor(n,e){super(n,$v),this.characterService=e,this.baseUrl=`${$.wikiApiUrl}/quest`}getQuestStates(){return this.http.get(`${this.baseUrl}states`)}getQuestTakers(n){return this.characterService.getPlayerCharacters(n).pipe(he(i=>(i.unshift({name:"Group",name_full:"Group",pk:null,article_type:"quest"}),i)))}}ds.\u0275fac=function(n){return new(n||ds)(P(zt),P(ir))},ds.\u0275prov=B({token:ds,factory:ds.\u0275fac,providedIn:"root"}),Cn([Bv(Au)],ds.prototype,"getQuestTakers",null);let jv=(()=>{class t extends nr{constructor(e){super(e,Vv),this.baseUrl=`${$.wikiApiUrl}/rule`}}return t.\u0275fac=function(e){return new(e||t)(P(zt))},t.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();new er({"Content-Type":"application/json"});class hs extends nr{constructor(n){super(n,Iu),this.baseUrl=`${$.wikiApiUrl}/session`}getSession(n,e){return"boolean"==typeof e&&(e=e?1:0),this.http.get(`${this.baseUrl}/${n}/${e}`)}}hs.\u0275fac=function(n){return new(n||hs)(P(zt))},hs.\u0275prov=B({token:hs,factory:hs.\u0275fac,providedIn:"root"}),Cn([Aa(Iu)],hs.prototype,"getSession",null);class ps extends nr{constructor(n){super(n,qf),this.http=n,this.baseUrl=`${$.wikiApiUrl}/sessionaudio`}readByParam(n,e){return this.http.get(`${this.baseUrl}/${n}/${e.isMainSession}/${e.sessionNumber}/`)}uploadFile(n,e){const i=new er({"ngsw-bypass":"true","X-Progress-ID":n});return this.http.post(`${$.wikiAudioUploadUrl}/${n}`,e,{reportProgress:!0,observe:"events",headers:i}).pipe(Zn(r=>console.log(r)))}update(n,e){const i=`${this.baseUrl}/pk/${n}/`,r=Nu(e,"audio_file"),o=new er({"ngsw-bypass":"true"});return this.http.put(i,r,{headers:o,observe:"events",reportProgress:!0})}}ps.\u0275fac=function(n){return new(n||ps)(P(zt))},ps.\u0275prov=B({token:ps,factory:ps.\u0275fac,providedIn:"root"}),Cn([Aa(qf)],ps.prototype,"readByParam",null);let zv=(()=>{class t extends nr{constructor(e){super(e,Uv),this.baseUrl=`${$.wikiApiUrl}/spell`}}return t.\u0275fac=function(e){return new(e||t)(P(zt))},t.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Gv=(()=>{class t extends Oa{constructor(e){super(e),this.baseUrl=`${$.wikiApiUrl}/quote`}getQuotes(e,i){return this.http.get(`${this.baseUrl}/${e}/${i}/`)}getRandomQuote(e,i){return this.http.get(`${this.baseUrl}/${e}/${i}/random/`)}getAllCharacterQuotes(e,i){return this.http.get(`${this.baseUrl}/${e}/${i}/`)}}return t.\u0275fac=function(e){return new(e||t)(P(zt))},t.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();class Dc{constructor(n){n&&Object.assign(this,n)}getAbsoluteRouterUrl(){return""}}class so extends nr{constructor(n,e){super(n,Dc),this.tokenService=e,this.baseUrl=`${$.wikiApiUrl}/user`}updateUserGroups(n){return this.http.patch(`${this.baseUrl}/pk/${n.pk}/`,{groups:n.groups})}updateUserAdminState(n){return this.http.patch(`${this.baseUrl}/pk/${n.pk}/`,{is_staff:n.is_staff,is_superuser:n.is_superuser})}patchUser(n,e){return this.http.patch(`${this.baseUrl}/pk/${n}/`,e)}getThisUser(){const n=this.tokenService.getCurrentUserPk();return this.http.get(`${this.baseUrl}/pk/${n}/`)}}so.\u0275fac=function(n){return new(n||so)(P(zt),P(ke))},so.\u0275prov=B({token:so,factory:so.\u0275fac,providedIn:"root"}),Cn([Aa(Dc)],so.prototype,"updateUserGroups",null),Cn([Aa(Dc)],so.prototype,"updateUserAdminState",null),Cn([Aa(Dc)],so.prototype,"patchUser",null),Cn([Aa(Dc)],so.prototype,"getThisUser",null);let Yf=(()=>{class t{constructor(e,i,r,o,s,l,c,d,m,_,w,E,D,N,F,j,H){this.characterService=e,this.creatureService=i,this.diaryentryService=r,this.encounterService=o,this.itemService=s,this.locationService=l,this.mapService=c,this.markerService=d,this.markerTypeService=m,this.organizationService=_,this.questService=w,this.ruleService=E,this.sessionService=D,this.sessionaudioService=N,this.spellService=F,this.quoteService=j,this.userService=H,this.overviewUrl=`${$.wikiApiUrl}`,this.overviewServiceMapping={[Ie.Character]:this.characterService,[Ie.Creature]:this.creatureService,[Ie.Diaryentry]:this.diaryentryService,[Ie.Encounter]:this.encounterService,[Ie.Item]:this.itemService,[Ie.Location]:this.locationService,[Ie.Map]:this.mapService,[Ie.MarkerType]:this.markerService,[Ie.MarkerTypeType]:this.markerTypeService,[Ie.Organization]:this.organizationService,[Ie.Quest]:this.questService,[Ie.Quote]:this.quoteService,[Ie.Rule]:this.ruleService,[Ie.Session]:this.sessionService,[Ie.Sessionaudio]:this.sessionaudioService,[Ie.Spell]:this.spellService,[Ie.User]:this.userService}}getCampaignOverviewItems(e,i,r){let s=this.overviewServiceMapping[i].campaignList(e);return null!=r&&(s=s.pipe(he(l=>l.sort((c,d)=>c[r]<d[r]?-1:1)))),zs(s,Au)}getAllOverviewItems(e,i){let o=this.overviewServiceMapping[e].list();return null!=i&&(o=o.pipe(he(s=>s.sort((l,c)=>l[i].toLowerCase()<c[i].toLowerCase()?-1:1)))),zs(o,Au)}}return t.\u0275fac=function(e){return new(e||t)(P(ir),P(Zf),P(Gs),P(Hv),P(Kf),P(wl),P(Hr),P($o),P(kN),P(wh),P(ds),P(jv),P(hs),P(ps),P(zv),P(Gv),P(so))},t.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),mn=(()=>{class t{constructor(e){this.selectOptionService=e}setDefaultValues(e){return null==e.required&&(e.required=!0),null==e.disabled&&(e.disabled=!1),null==e.sortProp&&(e.sortProperty=null),e}genericSelect(e){const i=(e=this.setDefaultValues(e)).validators?e.validators:[];let r;return!0===e.required&&i.push("required"),r=null==e.campaign?this.selectOptionService.getAllOverviewItems(e.overviewType,e.sortProp):this.selectOptionService.getCampaignOverviewItems(e.campaign,e.overviewType,e.sortProp),{key:e.key,type:"select",className:e.className,wrappers:e.wrappers,hideExpression:!!e.hide&&e.hide,templateOptions:{label:e.label?e.label:this.capitalizeFirstLetter(e.key),labelProp:e.labelProp?e.labelProp:"name_full",valueProp:e.valueProp?e.valueProp:"pk",options:r,required:"boolean"!=typeof e.required||e.required,disabled:e.disabled},validators:{validation:i}}}genericDisableSelect(e){const i=(e=this.setDefaultValues(e)).validators?e.validators:[];let r;return!0===e.required&&i.push("required"),null==e.showWrapperLabel&&(e.showWrapperLabel=!0),r=null==e.campaign?this.selectOptionService.getAllOverviewItems(e.overviewType,e.sortProp):this.selectOptionService.getCampaignOverviewItems(e.campaign,e.overviewType,e.sortProp),{key:e.key,type:"formly-select-disable",className:e.className,wrappers:e.wrappers,hideExpression:!!e.hide&&e.hide,templateOptions:{label:e.label?e.label:this.capitalizeFirstLetter(e.key),labelProp:e.labelProp?e.labelProp:"name_full",valueProp:e.valueProp?e.valueProp:"pk",options:r,required:"boolean"!=typeof e.required||e.required,disabledExpression:e.disabledExpression,tooltipMessage:e.tooltipMessage,warningMessage:e.warningMessage,additionalProperties:{showWrapperLabel:e.showWrapperLabel}},validators:{validation:i}}}customSelect(e){const i=(e=this.setDefaultValues(e)).validators?e.validators:[];return!0===e.required&&i.push("required"),{key:e.key,type:"select",className:e.className,hideExpression:!!e.hide&&e.hide,templateOptions:{label:e.label?e.label:this.capitalizeFirstLetter(e.key),options:e.options,required:"boolean"!=typeof e.required||e.required,disabled:e.disabled},validators:{validation:i}}}customStringSelect(e){e=this.setDefaultValues(e);let i=[];for(let o of e.options)i.push({label:o,value:o});const r=e.validators?e.validators:[];return!0===e.required&&r.push("required"),{key:e.key,type:"select",className:e.className,hideExpression:!!e.hide&&e.hide,templateOptions:{label:e.label?e.label:this.capitalizeFirstLetter(e.key),options:i,required:"boolean"!=typeof e.required||e.required,disabled:e.disabled},validators:{validation:r}}}genericInput(e){const i=(e=this.setDefaultValues(e)).validators?e.validators:[];let r;return!0===e.required&&i.push("required"),!0===e.isNumberInput&&i.push("notInteger"),!0===e.isNameInput&&i.push("hasSpecialCharacters"),r=e.isPasswordInput?"password":e.isNumberInput?"number":"string",{key:e.key,type:"input",className:e.className,hideExpression:!!e.hide&&e.hide,parsers:e.parsers,templateOptions:{maxLength:e.maxLength,minLength:e.minLength,label:e.label?e.label:this.capitalizeFirstLetter(e.key),type:r,required:"boolean"!=typeof e.required||e.required,placeholder:e.placeholder?e.placeholder:null,disabled:e.disabled},validators:{validation:i}}}genericPasswordInput(e){const i=(e=this.setDefaultValues(e)).validators?e.validators:[];return!0===e.required&&i.push("required"),{key:e.key,type:"input",className:e.className,fieldGroupClassName:e.fieldGroupClassName,templateOptions:{label:e.label?e.label:"Password",type:"password",required:!0,placeholder:"Your password",disabled:e.disabled,attributes:{autocomplete:"on"}},validators:{validation:i}}}confirmedPasswordInput(e){const i=(e=this.setDefaultValues(e)).validators?e.validators:[];return i.push("required"),{validators:{validation:[{name:"fieldMatch",options:{errorPath:"passwordConfirm"}}]},fieldGroup:[{key:"password",type:"input",className:e.className,templateOptions:{label:e.label?e.label:"Password",type:"password",required:!0,placeholder:"Password, at least 7 characters",disabled:e.disabled},validators:{validation:i}},{key:"passwordConfirm",type:"input",className:e.className,templateOptions:{label:e.label?"Confirm "+e.label:"Password Confirmation",type:"password",required:!0,placeholder:"Please re-enter your password",disabled:e.disabled}}]}}genericCheckbox(e){return{key:(e=this.setDefaultValues(e)).key,type:"checkbox",className:e.className,defaultValue:e.defaultValue,hideExpression:!!e.hide&&e.hide,templateOptions:{label:e.label?e.label:this.capitalizeFirstLetter(e.key),disabled:e.disabled}}}genericDatepicker(e){const i=(e=this.setDefaultValues(e)).validators?e.validators:[];return i.push("date"),!0===e.required&&i.push("required"),{key:e.key,type:"datepicker",className:e.className,hideExpression:!!e.hide&&e.hide,templateOptions:{label:e.label?e.label:this.capitalizeFirstLetter(e.key),disabled:e.disabled},validators:{validation:i}}}singleFileField(e){const i=(e=this.setDefaultValues(e)).validators?e.validators:[];return!0===e.required&&i.push("required"),{key:e.key,type:"file",className:e.className,hideExpression:!!e.hide&&e.hide,templateOptions:{label:e.label?e.label:this.capitalizeFirstLetter(e.key),required:"boolean"!=typeof e.required||e.required,disabled:e.disabled},validators:{validation:i}}}genericTextField(e){const i=(e=this.setDefaultValues(e)).validators?e.validators:[];return!0===e.required&&i.push("required"),{key:e.key,type:"tinymce",className:e.className,hideExpression:!!e.hide&&e.hide,templateOptions:{label:e.label?e.label:this.capitalizeFirstLetter(e.key),required:"boolean"!=typeof e.required||e.required,disabled:e.disabled},validators:{validation:i}}}capitalizeFirstLetter(e){return e.charAt(0).toUpperCase()+e.slice(1)}}return t.\u0275fac=function(e){return new(e||t)(P(Yf))},t.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function Iw(t,n){var e={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&n.indexOf(i)<0&&(e[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(t);r<i.length;r++)n.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(e[i[r]]=t[i[r]])}return e}class VJ{constructor(n,e){this.dueTime=n,this.scheduler=e}call(n,e){return e.subscribe(new BJ(n,this.dueTime,this.scheduler))}}class BJ extends vt{constructor(n,e,i){super(n),this.dueTime=e,this.scheduler=i,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(n){this.clearDebounce(),this.lastValue=n,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(HJ,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:n}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(n)}}clearDebounce(){const n=this.debouncedSubscription;null!==n&&(this.remove(n),n.unsubscribe(),this.debouncedSubscription=null)}}function HJ(t){t.debouncedNext()}function Jf(t){return!!t&&(t instanceof _t||"function"==typeof t.lift&&"function"==typeof t.subscribe)}const jJ=["content"];function zJ(t,n){if(1&t&&O(0,"formly-field",2),2&t){const e=n.$implicit;v("form",e.form)("options",e.options)("model",e.model)("field",e)}}const MN=["*"],GJ=["container"];function WJ(t,n){}const qJ=["fieldComponent"];function QJ(t,n){1&t&&O(0,"formly-field",1),2&t&&v("field",n.$implicit)}function ZJ(t,n,e){if(n.id)return n.id;let i=n.type;return!i&&n.template&&(i="template"),[t,i,n.key,e].join("_")}function Na(t){if(!t.key)return[];if(!t._keyPath||t._keyPath.key!==t.key){let n=[];if("string"==typeof t.key){const e=-1===t.key.indexOf("[")?t.key:t.key.replace(/\[(\w+)\]/g,".$1");n=-1!==e.indexOf(".")?e.split("."):[e]}else n=Array.isArray(t.key)?t.key.slice(0):[`${t.key}`];t._keyPath={key:t.key,path:n}}return t._keyPath.path.slice(0)}const IN=["required","pattern","minLength","maxLength","min","max"];function Xf(t,n){let e=Na(t);if(0===e.length)return;let i=t;for(;i.parent;)i=i.parent,e=[...Na(i),...e];if(void 0===n&&t.resetOnHide){const r=e.pop();delete e.reduce((s,l)=>s[l]||{},i.model)[r]}else!function(t,n,e){for(let i=0;i<n.length-1;i++){const r=n[i];(!t[r]||!Mc(t[r]))&&(t[r]=/^\d+$/.test(n[i+1])?[]:{}),t=t[r]}t[n[n.length-1]]=jr(e)}(i.model,e,n)}function em(t){let n=t.parent.model;for(const e of Na(t)){if(!n)return n;n=n[e]}return n}function Sh(t,...n){return n.forEach(e=>{for(let i in e)xc(t[i])||YJ(t[i])?t[i]=jr(e[i]):JJ(t[i],e[i])&&Sh(t[i],e[i])}),t}function xc(t){return null==t}function tm(t){return void 0===t}function YJ(t){return""===t}function PN(t){return"function"==typeof t}function JJ(t,n){return Mc(t)&&Mc(n)&&Object.getPrototypeOf(t)===Object.getPrototypeOf(n)&&!(Array.isArray(t)||Array.isArray(n))}function Mc(t){return null!=t&&"object"==typeof t}function jr(t){if(!Mc(t)||Jf(t)||t.changingThisBreaksApplicationSecurity||-1!==["RegExp","FileList","File","Blob"].indexOf(t.constructor.name))return t;if(t instanceof Set)return new Set(t);if(t instanceof Map)return new Map(t);if(t._isAMomentObject&&PN(t.clone))return t.clone();if(t instanceof Q_)return null;if(t instanceof Date)return new Date(t.getTime());if(Array.isArray(t))return t.slice(0).map(i=>jr(i));const n=Object.getPrototypeOf(t);let e=Object.create(n);return e=Object.setPrototypeOf(e,n),Object.keys(t).reduce((i,r)=>{const o=Object.getOwnPropertyDescriptor(t,r);return o.get?Object.defineProperty(i,r,o):i[r]=jr(t[r]),i},e)}function rr(t,n,e){Object.defineProperty(t,n,{enumerable:!1,writable:!0,configurable:!0}),t[n]=e}function Sl(t,n,e){t._observers||rr(t,"_observers",{}),t._observers[n]||(t._observers[n]=[]);let i=t._observers[n];return-1===i.indexOf(e)&&(i.push(e),e({currentValue:t[n],firstChange:!0}),1===i.length&&(rr(t,`___$${n}`,t[n]),Object.defineProperty(t,n,{configurable:!0,get:()=>t[`___$${n}`],set:r=>{if(r!==t[`___$${n}`]){const o=t[`___$${n}`];t[`___$${n}`]=r,i.forEach(s=>s({previousValue:o,currentValue:r,firstChange:!1}))}}}))),()=>i.splice(i.indexOf(e),1)}function AN(t,n){const e=t._updateTreeValidity.bind(t);let i={called:!1,emitEvent:!1};t._updateTreeValidity=({emitEvent:r}={emitEvent:!0})=>i={called:!0,emitEvent:r||i.emitEvent},n(),i.called&&e({emitEvent:i.emitEvent}),t._updateTreeValidity=e}const Th=new tt("FORMLY_CONFIG");class or{constructor(){this.types={},this.validators={},this.wrappers={},this.messages={},this.templateManipulators={preWrapper:[],postWrapper:[]},this.extras={checkExpressionOn:"changeDetectionCheck",lazyRender:!1,showError:function(n){return n.formControl&&n.formControl.invalid&&(n.formControl.touched||n.options.parentForm&&n.options.parentForm.submitted||!(!n.field.validation||!n.field.validation.show))}},this.extensions={}}addConfig(n){n.types&&n.types.forEach(e=>this.setType(e)),n.validators&&n.validators.forEach(e=>this.setValidator(e)),n.wrappers&&n.wrappers.forEach(e=>this.setWrapper(e)),n.manipulators&&(console.warn("NgxFormly: passing 'manipulators' config is deprecated, use custom extension instead."),n.manipulators.forEach(e=>this.setManipulator(e))),n.validationMessages&&n.validationMessages.forEach(e=>this.addValidatorMessage(e.name,e.message)),n.extensions&&n.extensions.forEach(e=>this.extensions[e.name]=e.extension),n.extras&&(this.extras=Object.assign({},this.extras,n.extras))}setType(n){Array.isArray(n)?n.forEach(e=>this.setType(e)):(this.types[n.name]||(this.types[n.name]={name:n.name}),["component","extends","defaultOptions","wrappers"].forEach(e=>{n.hasOwnProperty(e)&&(this.types[n.name][e]=n[e])}))}getType(n){if(!this.types[n])throw new Error(`[Formly Error] The type "${n}" could not be found. Please make sure that is registered through the FormlyModule declaration.`);return this.mergeExtendedType(n),this.types[n]}getMergedField(n={}){const e=this.getType(n.type);e.defaultOptions&&Sh(n,e.defaultOptions);const i=e.extends&&this.getType(e.extends).defaultOptions;i&&Sh(n,i),n&&n.optionsTypes&&n.optionsTypes.forEach(o=>{const s=this.getType(o).defaultOptions;s&&Sh(n,s)});const r=this.resolveFieldTypeRef(n);r&&r.instance&&r.instance.defaultOptions&&Sh(n,r.instance.defaultOptions),!n.wrappers&&e.wrappers&&(n.wrappers=[...e.wrappers])}resolveFieldTypeRef(n={}){if(!n.type)return null;const e=this.getType(n.type);if(!e.component||e._componentRef)return e._componentRef;const{_resolver:i,_injector:r}=n.parent.options,o=i.resolveComponentFactory(e.component).create(r);return rr(e,"_componentRef",o),o.destroy(),e._componentRef}setWrapper(n){this.wrappers[n.name]=n,n.types&&n.types.forEach(e=>{this.setTypeWrapper(e,n.name)})}getWrapper(n){if(!this.wrappers[n])throw new Error(`[Formly Error] The wrapper "${n}" could not be found. Please make sure that is registered through the FormlyModule declaration.`);return this.wrappers[n]}setTypeWrapper(n,e){this.types[n]||(this.types[n]={}),this.types[n].wrappers||(this.types[n].wrappers=[]),-1===this.types[n].wrappers.indexOf(e)&&this.types[n].wrappers.push(e)}setValidator(n){this.validators[n.name]=n}getValidator(n){if(!this.validators[n])throw new Error(`[Formly Error] The validator "${n}" could not be found. Please make sure that is registered through the FormlyModule declaration.`);return this.validators[n]}addValidatorMessage(n,e){this.messages[n]=e}getValidatorMessage(n){return this.messages[n]}setManipulator(n){(new n.class)[n.method](this)}mergeExtendedType(n){if(!this.types[n].extends)return;const e=this.getType(this.types[n].extends);this.types[n].component||(this.types[n].component=e.component),this.types[n].wrappers||(this.types[n].wrappers=e.wrappers)}}or.\u0275fac=function(n){return new(n||or)},or.\u0275prov=B({token:or,factory:or.\u0275fac,providedIn:"root"}),or.ngInjectableDef=bo({factory:function(){return new or},token:or,providedIn:"root"});class Uo{constructor(n,e,i){this.formlyConfig=n,this.componentFactoryResolver=e,this.injector=i}buildForm(n,e=[],i,r){if(!this.formlyConfig.extensions.core)throw new Error("NgxFormly: missing `forRoot()` call. use `forRoot()` when registering the `FormlyModule`.");const o={fieldGroup:e,model:i,formControl:n,options:this._setOptions(r)};AN(n,()=>this._buildForm(o)),o.options._checkField(o,!0)}_buildForm(n){this.getExtensions().forEach(e=>e.prePopulate&&e.prePopulate(n)),this.getExtensions().forEach(e=>e.onPopulate&&e.onPopulate(n)),n.fieldGroup&&n.fieldGroup.forEach(e=>this._buildForm(e)),this.getExtensions().forEach(e=>e.postPopulate&&e.postPopulate(n))}getExtensions(){return Object.keys(this.formlyConfig.extensions).map(n=>this.formlyConfig.extensions[n])}_setOptions(n){return(n=n||{}).formState=n.formState||{},n.showError||(n.showError=this.formlyConfig.extras.showError),n.fieldChanges||rr(n,"fieldChanges",new Fe),n._resolver||rr(n,"_resolver",this.componentFactoryResolver),n._injector||rr(n,"_injector",this.injector),n._hiddenFieldsForCheck||(n._hiddenFieldsForCheck=[]),n._markForCheck||(n._markForCheck=e=>{e._componentRefs&&e._componentRefs.forEach(i=>{i.injector.get(ci).markForCheck()}),e.fieldGroup&&e.fieldGroup.forEach(i=>n._markForCheck(i))}),n._buildField||(n._buildField=e=>(this.buildForm(e.form,e.fieldGroup,e.model,e.options),e)),n}}function Aw(t,n,e=!1){(n=n||t.formControl)._fields||rr(n,"_fields",[]),-1===n._fields.indexOf(t)&&n._fields.push(t),!t.formControl&&n&&(rr(t,"formControl",n),n.setValidators(null),n.setAsyncValidators(null),t.templateOptions.disabled=!!t.templateOptions.disabled,Sl(t.templateOptions,"disabled",({firstChange:l,currentValue:c})=>{l||(c?t.formControl.disable():t.formControl.enable())}),n.registerOnDisabledChange&&n.registerOnDisabledChange(l=>{t.templateOptions.___$disabled=l,t.options&&t.options._markForCheck(t)}));let i=t.parent.formControl;if(!i||!t.key)return;const r=Na(t),o=em(t);(!xc(n.value)||!xc(o))&&n.value!==o&&n instanceof vu&&n.patchValue(o);for(let l=0;l<r.length-1;l++){const c=r[l];i.get([c])||qv(i,{emitEvent:e},()=>i.setControl(c,new Bi({}))),i=i.get([c])}const s=r[r.length-1];!t._hide&&i.get([s])!==n&&qv(i,{emitEvent:e},()=>i.setControl(s,n))}function nm(t){const n=t.status;t.updateValueAndValidity({emitEvent:!1}),n!==t.status&&t.statusChanges.emit(t.status)}function qv(t,n,e){t instanceof Bi&&!t.__patchForEachChild&&(rr(t,"__patchForEachChild",!0),t._forEachChild=r=>{Object.keys(t.controls).forEach(o=>t.controls[o]&&r(t.controls[o],o))});const i=t.updateValueAndValidity.bind(t);!1===n.emitEvent&&(t.updateValueAndValidity=r=>{i(Object.assign({},r||{},{emitEvent:!1}))}),e(),!1===n.emitEvent&&(t.updateValueAndValidity=i)}function NN(t){t._fields&&delete t._fields,(t instanceof Bi||t instanceof Cf)&&Object.keys(t.controls).forEach(n=>NN(t.controls[n]))}Uo.\u0275fac=function(n){return new(n||Uo)(P(or),P(_r),P(Mt))},Uo.\u0275prov=B({token:Uo,factory:Uo.\u0275fac,providedIn:"root"}),Uo.ngInjectableDef=bo({factory:function(){return new Uo(Xy(or),Xy(_r),Xy(ll))},token:Uo,providedIn:"root"});let Eh=(()=>{class t{constructor(e,i,r,o,s){this.formlyBuilder=e,this.formlyConfig=i,this.ngZone=r,this.parentFormGroup=s,this.modelChange=new q,this.immutable=!1,this._modelChangeValue={},this.modelChangeSubs=[],this.modelChange$=new Fe,this.modelChangeSub=this.modelChange$.pipe(ri(()=>this.ngZone.onStable.asObservable().pipe(Pn(1)))).subscribe(()=>this.ngZone.runGuarded(()=>{this.checkExpressionChange(),this.modelChange.emit(this._modelChangeValue=jr(this.model))})),null!==o&&console.warn("NgxFormly: passing 'immutable' attribute to 'formly-form' component is deprecated since v5.5, enable immutable mode through NgModule declaration instead."),this.immutable=null!==o||!!i.extras.immutable}set model(e){this._model=this.immutable?jr(e):e}get model(){return this._model||(this._model={}),this._model}set fields(e){this._fields=this.immutable?jr(e):e}get fields(){return this._fields||[]}set options(e){this._options=this.immutable?jr(e):e}get options(){return this._options}set content(e){if(e){let i=!1,r=e.nativeElement.nextSibling;for(;r&&!i;)(r.nodeType===Node.ELEMENT_NODE||r.nodeType===Node.TEXT_NODE&&r.textContent&&""!==r.textContent.trim())&&(i=!0),r=r.nextSibling;i&&console.warn("NgxFormly: content projection for 'formly-form' component is deprecated since v5.5, you should avoid passing content inside the 'formly-form' tag.")}}ngDoCheck(){"changeDetectionCheck"===this.formlyConfig.extras.checkExpressionOn&&this.checkExpressionChange()}ngOnChanges(e){e.model&&this.field&&(this.field.model=this.model),e.fields&&this.form&&NN(this.form),(e.fields||e.form||e.model&&this._modelChangeValue!==e.model.currentValue)&&(this.form=this.form||new Bi({}),this.setOptions(),this.options.updateInitialValue(),this.clearModelSubscriptions(),this.formlyBuilder.buildForm(this.form,this.fields,this.model,this.options),this.trackModelChanges(this.fields))}ngOnDestroy(){this.modelChangeSub.unsubscribe(),this.clearModelSubscriptions()}changeModel({value:i,field:r}){Xf(r,i),this.modelChange$.next()}setOptions(){this.options||(this.options={}),this.options.resetModel||(this.options.resetModel=e=>{e=jr(xc(e)?this.options._initialModel:e),this.model&&(Object.keys(this.model).forEach(i=>delete this.model[i]),Object.assign(this.model,e||{})),this.options._buildForm(),this.options.parentForm&&this.options.parentForm.control===this.form?this.options.parentForm.resetForm(this.model):this.form.reset(this.model)}),!this.options.parentForm&&this.parentFormGroup&&(rr(this.options,"parentForm",this.parentFormGroup),Sl(this.options.parentForm,"submitted",({firstChange:e})=>{e||(this.checkExpressionChange(),this.options._markForCheck({fieldGroup:this.fields,model:this.model,formControl:this.form,options:this.options}))})),this.options.updateInitialValue||(this.options.updateInitialValue=()=>this.options._initialModel=jr(this.model)),this.options._buildForm||(this.options._buildForm=(e=!1)=>{this.clearModelSubscriptions(),this.formlyBuilder.buildForm(this.form,this.fields,this.model,this.options),this.trackModelChanges(this.fields),e&&this.modelChange.emit(this._modelChangeValue=jr(this.model))})}checkExpressionChange(){this.options&&this.options._checkField&&this.options._checkField({fieldGroup:this.fields,model:this.model,formControl:this.form,options:this.options})}trackModelChanges(e,i=[]){e.forEach(r=>{if(r.key&&!r.fieldGroup&&r.formControl){const o=r.formControl;let s=o.valueChanges.pipe($_((m,_)=>!(m!==_||Array.isArray(m)||Mc(m))));const{updateOn:l,debounce:c}=r.modelOptions;(!l||"change"===l)&&c&&c.default>0&&(s=o.valueChanges.pipe(function(t,n=d0){return e=>e.lift(new VJ(t,n))}(c.default))),this.modelChangeSubs.push(s.subscribe(m=>{o instanceof vu&&o._fields&&o._fields.length>1&&o.patchValue(m,{emitEvent:!1,onlySelf:!0}),r.parsers&&r.parsers.length>0&&r.parsers.forEach(_=>m=_(m)),this.changeModel({key:[...i,...Na(r)].join("."),value:m,field:r})}));const d=o.valueChanges.observers;d&&d.length>1&&d.unshift(d.pop())}r.fieldGroup&&r.fieldGroup.length>0&&this.trackModelChanges(r.fieldGroup,r.key?[...i,...Na(r)]:i)})}clearModelSubscriptions(){this.modelChangeSubs.forEach(e=>e.unsubscribe()),this.modelChangeSubs=[]}get field(){return this.fields&&this.fields[0]&&this.fields[0].parent}}return t.\u0275fac=function(e){return new(e||t)(C(Uo),C(or),C(it),fa("immutable"),C(yl,8))},t.\u0275cmp=Y({type:t,selectors:[["formly-form"]],viewQuery:function(e,i){if(1&e&&pt(jJ,5),2&e){let r;ye(r=be())&&(i.content=r.first)}},inputs:{model:"model",fields:"fields",options:"options",form:"form"},outputs:{modelChange:"modelChange"},features:[At([Uo]),St],ngContentSelectors:MN,decls:4,vars:1,consts:[["hide-deprecation","",3,"form","options","model","field",4,"ngFor","ngForOf"],["content",""],["hide-deprecation","",3,"form","options","model","field"]],template:function(e,i){1&e&&(Ca(),S(0,zJ,1,4,"formly-field",0),Vt(1,null,1),wa(3),Bt()),2&e&&v("ngForOf",i.fields)},directives:function(){return[je,FN]},encapsulation:2}),t})(),FN=(()=>{class t{constructor(e,i,r,o,s){this.formlyConfig=e,this.renderer=i,this.resolver=r,this.elementRef=o,this.warnDeprecation=!1,this.modelChange=new q,this.hostObservers=[],this.componentRefs=[],this.hooksObservers=[],this.detectFieldBuild=!1,this.warnDeprecation=null===s}set model(e){this.warnDeprecation&&console.warn(`NgxFormly: passing 'model' input to '${this.constructor.name}' component is not required anymore, you may remove it!`)}set form(e){this.warnDeprecation&&console.warn(`NgxFormly: passing 'form' input to '${this.constructor.name}' component is not required anymore, you may remove it!`)}set options(e){this.warnDeprecation&&console.warn(`NgxFormly: passing 'options' input to '${this.constructor.name}' component is not required anymore, you may remove it!`)}ngAfterContentInit(){this.triggerHook("afterContentInit")}ngAfterContentChecked(){this.triggerHook("afterContentChecked")}ngAfterViewInit(){this.triggerHook("afterViewInit")}ngAfterViewChecked(){this.triggerHook("afterViewChecked")}ngDoCheck(){this.triggerHook("doCheck"),this.detectFieldBuild&&this.field&&this.field.options&&this.render()}ngOnInit(){this.triggerHook("onInit")}ngOnChanges(e){this.triggerHook("onChanges",e)}ngOnDestroy(){this.resetRefs(this.field),this.hostObservers.forEach(e=>e()),this.hooksObservers.forEach(e=>e()),this.triggerHook("onDestroy")}renderField(e,i,r=[]){if(this.containerRef===e&&(this.resetRefs(this.field),this.containerRef.clear(),r=this.field?this.field.wrappers:[]),r&&r.length>0){const[o,...s]=r,{component:l}=this.formlyConfig.getWrapper(o),c=e.createComponent(this.resolver.resolveComponentFactory(l));this.attachComponentRef(c,i),Sl(c.instance,"fieldComponent",({firstChange:d,previousValue:m,currentValue:_})=>{if(_){if(m&&m._lContainer===_._lContainer)return;const w=m?m.detach():null;w&&!w.destroyed?_.insert(w):this.renderField(_,i,s),!d&&c.changeDetectorRef.detectChanges()}})}else if(i&&i.type){const{component:o}=this.formlyConfig.getType(i.type),s=e.createComponent(this.resolver.resolveComponentFactory(o));this.attachComponentRef(s,i)}}triggerHook(e,i){if(this.field&&this.field.hooks&&this.field.hooks[e]&&(!i||i.field)){const r=this.field.hooks[e](this.field);if(Jf(r)&&-1!==["onInit","afterContentInit","afterViewInit"].indexOf(e)){const o=r.subscribe();this.hooksObservers.push(()=>o.unsubscribe())}}this.field&&this.field.lifecycle&&this.field.lifecycle[e]&&this.field.lifecycle[e](this.field.form,this.field,this.field.model,this.field.options),"onChanges"===e&&i.field&&(this.resetRefs(i.field.previousValue),this.render())}attachComponentRef(e,i){this.componentRefs.push(e),i._componentRefs.push(e),Object.assign(e.instance,{field:i})}render(){if(this.field){if(!this.field.options)return void(this.detectFieldBuild=!0);this.detectFieldBuild=!1,this.hostObservers.forEach(e=>e()),this.hostObservers=[Sl(this.field,"hide",({firstChange:e,currentValue:i})=>{this.formlyConfig.extras.lazyRender?i?this.containerRef.clear():this.renderField(this.containerRef,this.field):(e&&this.renderField(this.containerRef,this.field),(!e||e&&i)&&this.renderer.setStyle(this.elementRef.nativeElement,"display",i?"none":""))}),Sl(this.field,"className",({firstChange:e,currentValue:i})=>{(!e||e&&i)&&this.renderer.setAttribute(this.elementRef.nativeElement,"class",i)})]}}resetRefs(e){e&&(e._componentRefs?e._componentRefs=e._componentRefs.filter(i=>-1===this.componentRefs.indexOf(i)):rr(this.field,"_componentRefs",[])),this.componentRefs=[]}}return t.\u0275fac=function(e){return new(e||t)(C(or),C(vi),C(_r),C(Ye),fa("hide-deprecation"))},t.\u0275cmp=Y({type:t,selectors:[["formly-field"]],viewQuery:function(e,i){if(1&e&&pt(GJ,7,Yi),2&e){let r;ye(r=be())&&(i.containerRef=r.first)}},inputs:{model:"model",form:"form",options:"options",field:"field"},outputs:{modelChange:"modelChange"},features:[St],decls:2,vars:0,consts:[["container",""]],template:function(e,i){1&e&&S(0,WJ,0,0,"ng-template",null,0,se)},encapsulation:2}),t})(),Tl=(()=>{class t{constructor(e,i,r){this.renderer=e,this.elementRef=i,this.uiAttributesCache={},this.uiAttributes=[...IN,"tabindex","placeholder","readonly","disabled","step"],this.uiEvents={listeners:[],events:["click","keyup","keydown","keypress"]},this.document=r}get to(){return this.field.templateOptions||{}}get fieldAttrElements(){return this.field&&this.field._elementRefs||[]}ngOnChanges(e){e.field&&(this.field.name&&this.setAttribute("name",this.field.name),this.uiEvents.listeners.forEach(i=>i()),this.uiEvents.events.forEach(i=>{this.to&&this.to[i]&&this.uiEvents.listeners.push(this.renderer.listen(this.elementRef.nativeElement,i,r=>this.to[i](this.field,r)))}),this.to&&this.to.attributes&&Sl(this.to,"attributes",({currentValue:i,previousValue:r})=>{r&&Object.keys(r).forEach(o=>this.removeAttribute(o)),i&&Object.keys(i).forEach(o=>{null!=i[o]&&this.setAttribute(o,i[o])})}),this.detachElementRef(e.field.previousValue),this.attachElementRef(e.field.currentValue),1===this.fieldAttrElements.length&&(!this.id&&this.field.id&&this.setAttribute("id",this.field.id),Sl(this.field,"focus",({currentValue:i})=>{this.toggleFocus(i)}))),e.id&&this.setAttribute("id",this.id)}ngDoCheck(){this.uiAttributes.forEach(e=>{const i=this.to[e];this.uiAttributesCache[e]!==i&&(!this.to.attributes||!this.to.attributes.hasOwnProperty(e.toLowerCase()))&&(this.uiAttributesCache[e]=i,i||0===i?this.setAttribute(e,!0===i?e:`${i}`):this.removeAttribute(e))})}ngOnDestroy(){this.uiEvents.listeners.forEach(e=>e()),this.detachElementRef(this.field)}toggleFocus(e){const i=this.fieldAttrElements?this.fieldAttrElements[0]:null;if(!i||!i.nativeElement.focus)return;const r=!!this.document.activeElement&&this.fieldAttrElements.some(({nativeElement:o})=>this.document.activeElement===o||o.contains(this.document.activeElement));e&&!r?i.nativeElement.focus():!e&&r&&i.nativeElement.blur()}onFocus(e){this.field.___$focus=!0,this.to.focus&&this.to.focus(this.field,e)}onBlur(e){this.field.___$focus=!1,this.to.blur&&this.to.blur(this.field,e)}onChange(e){this.to.change&&this.to.change(this.field,e),this.field.formControl&&this.field.formControl.markAsDirty()}attachElementRef(e){!e||(e._elementRefs&&-1===e._elementRefs.indexOf(this.elementRef)?e._elementRefs.push(this.elementRef):rr(e,"_elementRefs",[this.elementRef]))}detachElementRef(e){const i=e&&e._elementRefs?this.fieldAttrElements.indexOf(this.elementRef):-1;-1!==i&&this.field._elementRefs.splice(i,1)}setAttribute(e,i){this.renderer.setAttribute(this.elementRef.nativeElement,e,i)}removeAttribute(e){this.renderer.removeAttribute(this.elementRef.nativeElement,e)}}return t.\u0275fac=function(e){return new(e||t)(C(vi),C(Ye),C(Ot))},t.\u0275dir=te({type:t,selectors:[["","formlyAttributes",""]],hostBindings:function(e,i){1&e&&A("focus",function(o){return i.onFocus(o)})("blur",function(o){return i.onBlur(o)})("change",function(o){return i.onChange(o)})},inputs:{field:["formlyAttributes","field"],id:"id"},features:[St]}),t})(),ao=(()=>{class t{get model(){return this.field.model}set model(e){console.warn(`NgxFormly: passing 'model' input to '${this.constructor.name}' component is not required anymore, you may remove it!`)}get form(){return this.field.parent.formControl}set form(e){console.warn(`NgxFormly: passing 'form' input to '${this.constructor.name}' component is not required anymore, you may remove it!`)}get options(){return this.field.options}set options(e){console.warn(`NgxFormly: passing 'options' input to '${this.constructor.name}' component is not required anymore, you may remove it!`)}get key(){return this.field.key}get formControl(){return this.field.formControl}get to(){return this.field.templateOptions||{}}get showError(){return this.options.showError(this)}get id(){return this.field.id}get formState(){return this.options.formState||{}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=te({type:t,inputs:{model:"model",form:"form",options:"options",field:"field"}}),t})(),Ow=(()=>{class t extends ao{}return t.\u0275fac=function(){let n;return function(i){return(n||(n=tn(t)))(i||t)}}(),t.\u0275dir=te({type:t,viewQuery:function(e,i){if(1&e&&pt(qJ,5,Yi),2&e){let r;ye(r=be())&&(i.fieldComponent=r.first)}},features:[oe]}),t})(),eX=(()=>{class t extends ao{constructor(){super(...arguments),this.defaultOptions={defaultValue:{}}}}return t.\u0275fac=function(){let n;return function(i){return(n||(n=tn(t)))(i||t)}}(),t.\u0275cmp=Y({type:t,selectors:[["formly-group"]],hostVars:2,hostBindings:function(e,i){2&e&&Ao(i.field.fieldGroupClassName||"")},features:[oe],ngContentSelectors:MN,decls:2,vars:1,consts:[[3,"field",4,"ngFor","ngForOf"],[3,"field"]],template:function(e,i){1&e&&(Ca(),S(0,QJ,1,1,"formly-field",0),wa(1)),2&e&&v("ngForOf",i.field.fieldGroup)},directives:[je,FN],encapsulation:2}),t})(),tX=(()=>{class t{constructor(e){this.formlyConfig=e}ngOnChanges(){this.errorMessage$=this.field.formControl.statusChanges.pipe(gu(null),ri(()=>Jf(this.errorMessage)?this.errorMessage:Ee(this.errorMessage)))}get errorMessage(){const e=this.field.formControl;for(let i in e.errors)if(e.errors.hasOwnProperty(i)){let r=this.formlyConfig.getValidatorMessage(i);if(Mc(e.errors[i])){if(e.errors[i].errorPath)return;e.errors[i].message&&(r=e.errors[i].message)}return this.field.validation&&this.field.validation.messages&&this.field.validation.messages[i]&&(r=this.field.validation.messages[i]),this.field.validators&&this.field.validators[i]&&this.field.validators[i].message&&(r=this.field.validators[i].message),this.field.asyncValidators&&this.field.asyncValidators[i]&&this.field.asyncValidators[i].message&&(r=this.field.asyncValidators[i].message),"function"==typeof r?r(e.errors[i],this.field):r}}}return t.\u0275fac=function(e){return new(e||t)(C(or))},t.\u0275cmp=Y({type:t,selectors:[["formly-validation-message"]],inputs:{field:"field"},features:[St],decls:2,vars:3,template:function(e,i){1&e&&(k(0),Lt(1,"async")),2&e&&Le(yn(1,1,i.errorMessage$))},pipes:[fc],encapsulation:2,changeDetection:0}),t})(),nX=(()=>{class t extends ao{constructor(e){super(),this.sanitizer=e,this.innerHtml={content:null,template:null}}get template(){return this.field&&this.field.template!==this.innerHtml.template&&(this.innerHtml={template:this.field.template,content:this.to.safeHtml?this.sanitizer.bypassSecurityTrustHtml(this.field.template):this.field.template}),this.innerHtml.content}}return t.\u0275fac=function(e){return new(e||t)(C(pf))},t.\u0275cmp=Y({type:t,selectors:[["formly-template"]],features:[oe],decls:1,vars:1,consts:[[3,"innerHtml"]],template:function(e,i){1&e&&O(0,"div",0),2&e&&v("innerHtml",i.template,Or)},encapsulation:2}),t})();function RN(t,n,e){return t instanceof Function?t.apply(n,e):!!t}class rX{prePopulate(n){if(n.parent||n.options._checkField)return;let e=!1;n.options._checkField=(i,r)=>{e||(e=!0,AN(i.formControl,()=>this.checkField(i,r)),e=!1)}}postPopulate(n){if(n.parent&&!n._expressionProperties){if(rr(n,"_expressionProperties",{}),n.expressionProperties)for(const e in n.expressionProperties){const i=n.expressionProperties[e];if("string"==typeof i||PN(i))n._expressionProperties[e]={expression:this._evalExpression(e,i,"templateOptions.disabled"===e&&n.parent.expressionProperties&&n.parent.expressionProperties.hasOwnProperty("templateOptions.disabled")?()=>n.parent.templateOptions.disabled:void 0)},"templateOptions.disabled"===e&&Object.defineProperty(n._expressionProperties[e],"expressionValue",{get:()=>n.templateOptions.disabled,set:()=>{},enumerable:!0,configurable:!0});else if(i instanceof _t){const r=()=>i.subscribe(c=>{this.setExprValue(n,e,c),n.options&&n.options._markForCheck&&n.options._markForCheck(n)});let o=r();const s=n.hooks.onInit;n.hooks.onInit=()=>(null===o&&(o=r()),s&&s(n));const l=n.hooks.onDestroy;n.hooks.onDestroy=()=>{l&&l(n),o.unsubscribe(),o=null}}}n.hideExpression?(delete n.hide,n.hideExpression=this._evalExpression("hide",n.hideExpression,()=>{let e=n.parent;for(;e.parent&&!e.hide;)e=e.parent;return e.hide})):Sl(n,"hide",({currentValue:e,firstChange:i})=>{n._hide=e,(!i||i&&!0===e)&&n.options._hiddenFieldsForCheck.push(n)})}}_evalExpression(n,e,i){return(r,o,s)=>{try{return"string"==typeof e&&(e=function(t,n){try{return-1!==t.indexOf("this.field")&&console.warn("NgxFormly: using 'this.field' in expressionProperties is deprecated since v5.1, use 'field' instead."),Function("model","formState","field",`return ${t};`)}catch(e){console.error(e)}}(e)),"function"!=typeof e&&(e=()=>!!e),i&&i()||e(r,o,s)}catch(l){throw l.message=`[Formly Error] [Expression "${n}"] ${l.message}`,l}}}checkField(n,e=!1){const i=this._checkField(n,e);n.options._hiddenFieldsForCheck.sort(r=>r.hide?-1:1).forEach(r=>this.toggleFormControl(r,!!r.hide,!e)),n.options._hiddenFieldsForCheck=[],i&&(this.checkField(n),n.options&&n.options._markForCheck&&n.options._markForCheck(n))}_checkField(n,e=!1){let i=!1;return n.fieldGroup.forEach(r=>{!r.options||(this.checkFieldExpressionChange(r,e)&&(i=!0),this.checkFieldVisibilityChange(r,e)&&(n.options._hiddenFieldsForCheck.push(r),i=!0),r.fieldGroup&&r.fieldGroup.length>0&&this._checkField(r,e)&&(i=!0))}),i}checkFieldExpressionChange(n,e){if(!n||!n._expressionProperties)return!1;let i=!1;const r=n._expressionProperties;for(const o in r){let s=RN(r[o].expression,{field:n},[n.model,n.options.formState,n]);"templateOptions.disabled"===o&&(s=!!s),(e||r[o].expressionValue!==s&&(!Mc(s)||Jf(s)||JSON.stringify(s)!==JSON.stringify(r[o].expressionValue)))&&(i=!0,r[o].expressionValue=s,this.setExprValue(n,o,s))}return i}checkFieldVisibilityChange(n,e){if(!n||xc(n.hideExpression))return!1;const i=!!RN(n.hideExpression,{field:n},[n.model,n.options.formState,n]);let r=!1;return(i!==n.hide||e)&&(r=!0,n.hide=i,n.templateOptions.hidden=i),r}setDisabledState(n,e){n.fieldGroup&&n.fieldGroup.filter(i=>!i.expressionProperties||!i.expressionProperties.hasOwnProperty("templateOptions.disabled")).forEach(i=>this.setDisabledState(i,e)),n.key&&n.templateOptions.disabled!==e&&(n.templateOptions.disabled=e)}toggleFormControl(n,e,i){if(n.formControl&&n.key){rr(n,"_hide",!(!e&&!n.hide));const r=n.formControl;r._fields&&r._fields.length>1&&nm(r),!0!==e||r._fields&&!r._fields.every(o=>!!o._hide)?!1===e&&(n.resetOnHide&&n.parent&&!tm(n.defaultValue)&&tm(em(n))&&Xf(n,n.defaultValue),Aw(n,void 0,!0),n.resetOnHide&&n.fieldArray&&(n.fieldGroup||[]).length!==(n.model||[]).length&&n.options._buildForm(!0)):(function(t,n=!1){const e=t.formControl.parent;if(!e)return;const i=t.formControl,r={emitEvent:n};if(e instanceof Cf){const o=e.controls.findIndex(s=>s===i);-1!==o&&qv(e,r,()=>e.removeAt(o))}else if(e instanceof Bi){const o=Na(t),s=o[o.length-1];e.get([s])===i&&qv(e,r,()=>e.removeControl(s))}i.setParent(null)}(n,!0),i&&n.resetOnHide&&(n.formControl.reset({value:void 0,disabled:n.formControl.disabled}),n.fieldGroup&&(Xf(n,void 0),n.formControl instanceof Cf&&(n.fieldGroup.length=0))))}n.fieldGroup&&n.fieldGroup.filter(r=>!r.hideExpression).forEach(r=>this.toggleFormControl(r,e,i)),n.options.fieldChanges&&n.options.fieldChanges.next({field:n,type:"hidden",value:e})}setExprValue(n,e,i){try{let r=n;const o=-1===e.indexOf("[")?e.split("."):e.replace(/\'|\"/g,"").split(/[[\]]{1,2}/).filter(l=>l),s=o.length-1;for(let l=0;l<s;l++)r=r[o[l]];r[o[s]]=i}catch(r){throw r.message=`[Formly Error] [Expression "${e}"] ${r.message}`,r}if("templateOptions.disabled"===e&&n.key&&this.setDisabledState(n,i),0===e.indexOf("model.")){const r=e.replace(/^model\./,""),o=n.key&&e===r?n.formControl:n.parent.formControl.get(r);o&&(!xc(o.value)||!xc(i))&&o.value!==i&&o.patchValue(i)}this.emitExpressionChanges(n,e,i)}emitExpressionChanges(n,e,i){!n.options.fieldChanges||n.options.fieldChanges.next({field:n,type:"expressionChanges",property:e,value:i})}}class oX{constructor(n){this.formlyConfig=n}onPopulate(n){this.initFieldValidation(n,"validators"),this.initFieldValidation(n,"asyncValidators")}initFieldValidation(n,e){const i=[];if("validators"===e&&!(n.hasOwnProperty("fieldGroup")&&!n.key)&&i.push(this.getPredefinedFieldValidation(n)),n[e])for(const r in n[e])"validation"===r&&!Array.isArray(n[e].validation)&&(n[e].validation=[n[e].validation],console.warn(`NgxFormly(${n.key}): passing a non array value to the 'validation' is deprecated, pass an array instead`)),"validation"===r?i.push(...n[e].validation.map(o=>this.wrapNgValidatorFn(n,o))):i.push(this.wrapNgValidatorFn(n,n[e][r],r));rr(n,"_"+e,i)}getPredefinedFieldValidation(n){let e=[];return IN.forEach(i=>Sl(n.templateOptions,i,({currentValue:r,firstChange:o})=>{e=e.filter(s=>s!==i),null!=r&&!1!==r&&e.push(i),!o&&n.formControl&&nm(n.formControl)})),i=>0===e.length?null:vl.compose(e.map(r=>()=>{const o=n.templateOptions[r];switch(r){case"required":return vl.required(i);case"pattern":return vl.pattern(o)(i);case"minLength":return vl.minLength(o)(i);case"maxLength":return vl.maxLength(o)(i);case"min":return vl.min(o)(i);case"max":return vl.max(o)(i)}}))(i)}wrapNgValidatorFn(n,e,i){let r=null;if("string"==typeof e&&(r=jr(this.formlyConfig.getValidator(e))),"object"==typeof e&&e.name&&(r=jr(this.formlyConfig.getValidator(e.name)),e.options&&(r.options=e.options)),"object"==typeof e&&e.expression){const{expression:o}=e,s=Iw(e,["expression"]);r={name:i,validation:o,options:Object.keys(s).length>0?s:null}}return"function"==typeof e&&(r={name:i,validation:e}),o=>{const s=r.validation(o,n,r.options);return function(t){return!!t&&"function"==typeof t.then}(s)?s.then(l=>this.handleAsyncResult(n,i?!!l:l,r)):Jf(s)?s.pipe(he(l=>this.handleAsyncResult(n,i?!!l:l,r))):this.handleResult(n,i?!!s:s,r)}}handleAsyncResult(n,e,i){return n.options&&n.options._markForCheck&&n.options._markForCheck(n),this.handleResult(n,e,i)}handleResult(n,e,{name:i,options:r}){"boolean"==typeof e&&(e=e?null:{[i]:r||!0});const o=n.formControl;return o._childrenErrors&&o._childrenErrors[i]&&o._childrenErrors[i](),Mc(e)&&Object.keys(e).forEach(s=>{const l=e[s].errorPath?e[s].errorPath:(r||{}).errorPath,c=l?n.formControl.get(l):null;if(c){const m=Iw(e[s],["errorPath"]);c.setErrors(Object.assign({},c.errors||{},{[s]:m})),!o._childrenErrors&&rr(o,"_childrenErrors",{}),o._childrenErrors[s]=()=>{const D=Iw(c.errors||{},["symbol"==typeof s?s:s+""]);c.setErrors(0===Object.keys(D).length?null:D)}}}),e}}class sX{constructor(n){this.config=n}onPopulate(n){!n.parent||(n.fieldGroup&&!n.key?rr(n,"formControl",n.parent.formControl):this.addFormControl(n))}postPopulate(n){if(n.parent)return;const e=this.setValidators(n);if(0!==e.length)if(1===e.length){let i=e[0].formControl;for(;i;)i._updateTreeValidity({onlySelf:!0}),i=i.parent}else n.formControl._updateTreeValidity()}addFormControl(n){let e=function(t){if(t.formControl)return t.formControl;if(!1===t.shareFormControl)return null;const n=t.parent.formControl;return n?n.get(Na(t)):null}(n);if(!e){const i={updateOn:n.modelOptions.updateOn},r=n.key?em(n):n.defaultValue,o=this.config?this.config.resolveFieldTypeRef(n):null;if(o&&o.componentType&&o.componentType.createControl){const s=o.componentType;console.warn(`NgxFormly: '${s.name}::createControl' is deprecated since v5.0, use 'prePopulate' hook instead.`),e=s.createControl(r,n)}else e=n.fieldGroup?new Bi({},i):new vu(r,i)}Aw(n,e)}setValidators(n){let e=!1;if(n.key||!n.parent||!n.key&&!n.fieldGroup){const{formControl:r}=n,o=!!n.templateOptions&&n.templateOptions.disabled;n.key&&r&&(o&&r.enabled&&(r.disable({emitEvent:!1,onlySelf:!0}),r.parent?e=!0:nm(r)),!o&&r.disabled&&(r.enable({emitEvent:!1,onlySelf:!0}),r.parent?e=!0:nm(r))),r&&(null===r.validator||null===r.asyncValidator)&&(r.setValidators(()=>{const s=vl.compose(this.mergeValidators(n,"_validators"));return s?s(r):null}),r.setAsyncValidators(()=>{const s=vl.composeAsync(this.mergeValidators(n,"_asyncValidators"));return s?s(r):Ee(null)}),r.parent?e=!0:nm(r))}const i=e?[n]:[];return(n.fieldGroup||[]).forEach(r=>{const o=this.setValidators(r);e||i.push(...o)}),i}mergeValidators(n,e){const i=[],r=n.formControl;return r&&r._fields&&r._fields.length>1?r._fields.filter(o=>!o._hide).forEach(o=>i.push(...o[e])):n[e]&&i.push(...n[e]),n.fieldGroup&&n.fieldGroup.filter(o=>!o.key&&o.fieldGroup).forEach(o=>i.push(...this.mergeValidators(o,e))),i}}class aX{constructor(n){this.formlyConfig=n,this.formId=0}prePopulate(n){if(this.getFieldComponentInstance(n).prePopulate(),n.parent)return;const e=n.options&&n.options.fieldTransform||this.formlyConfig.extras.fieldTransform;(Array.isArray(e)?e:[e]).forEach(i=>{if(i&&(console.warn("NgxFormly: fieldTransform is deprecated since v5.0, use custom extension instead."),!i(n.fieldGroup,n.model,n.formControl,n.options)))throw new Error("fieldTransform must return an array of fields")})}onPopulate(n){this.initFieldOptions(n),this.getFieldComponentInstance(n).onPopulate(),n.fieldGroup&&n.fieldGroup.forEach((e,i)=>{Object.defineProperty(e,"parent",{get:()=>n,configurable:!0}),Object.defineProperty(e,"index",{get:()=>i,configurable:!0}),this.formId++})}postPopulate(n){this.getFieldComponentInstance(n).postPopulate()}initFieldOptions(n){const e=n.parent;if(e){if(Object.defineProperty(n,"form",{get:()=>e.formControl,configurable:!0}),Object.defineProperty(n,"options",{get:()=>e.options,configurable:!0}),Object.defineProperty(n,"model",{get:()=>n.key&&n.fieldGroup?em(n):e.model,configurable:!0}),Sh(n,{id:ZJ(`formly_${this.formId}`,n,n.index),hooks:{},modelOptions:{},templateOptions:n.type&&n.key?{label:"",placeholder:"",focus:!1,disabled:!1}:{}}),this.formlyConfig.extras.resetFieldOnHide&&!1!==n.resetOnHide&&(n.resetOnHide=!0),n.lifecycle&&console.warn("NgxFormly: 'lifecycle' is deprecated since v5.0, use 'hooks' instead."),"formly-template"!==n.type&&(n.template||n.expressionProperties&&n.expressionProperties.template)&&(n.type&&console.warn("NgxFormly: passing 'type' property is not allowed when 'template' is set."),n.type="formly-template"),!n.type&&n.fieldGroup&&(n.type="formly-group"),n.type&&this.formlyConfig.getMergedField(n),n.parent){let i=!tm(n.key)&&!tm(n.defaultValue)&&tm(em(n))&&(!n.resetOnHide||!(n.hide||n.hideExpression));if(i&&n.resetOnHide){let r=n.parent;for(;r&&!r.hideExpression&&!r.hide;)r=r.parent;i=!r||!(r.hideExpression||r.hide)}i&&Xf(n,n.defaultValue)}this.initFieldWrappers(n)}}initFieldWrappers(n){n.wrappers=n.wrappers||[];const e=Object.assign({preWrapper:[],postWrapper:[]},n.templateOptions.templateManipulators||{});n.wrappers=[...this.formlyConfig.templateManipulators.preWrapper.map(i=>i(n)),...e.preWrapper.map(i=>i(n)),...n.wrappers,...this.formlyConfig.templateManipulators.postWrapper.map(i=>i(n)),...e.postWrapper.map(i=>i(n))].filter((i,r,o)=>i&&r===o.indexOf(i))}getFieldComponentInstance(n){const e=this.formlyConfig.resolveFieldTypeRef(n),i=e?e.instance:{};return{prePopulate:()=>i.prePopulate&&i.prePopulate(n),onPopulate:()=>i.onPopulate&&i.onPopulate(n),postPopulate:()=>i.postPopulate&&i.postPopulate(n)}}}function LN(t){return{types:[{name:"formly-group",component:eX},{name:"formly-template",component:nX}],extensions:[{name:"core",extension:new aX(t)},{name:"field-validation",extension:new oX(t)},{name:"field-form",extension:new sX(t)},{name:"field-expression",extension:new rX}]}}let Nw=(()=>{class t{constructor(e,i=[]){!i||i.forEach(r=>e.addConfig(r))}static forRoot(e={}){return{ngModule:t,providers:[{provide:Th,multi:!0,useFactory:LN,deps:[or]},{provide:Th,useValue:e,multi:!0},{provide:qy,useValue:e,multi:!0},or,Uo]}}static forChild(e={}){return{ngModule:t,providers:[{provide:Th,multi:!0,useFactory:LN,deps:[or]},{provide:Th,useValue:e,multi:!0},{provide:qy,useValue:e,multi:!0},Uo]}}}return t.\u0275fac=function(e){return new(e||t)(P(or),P(Th,8))},t.\u0275mod=et({type:t}),t.\u0275inj=Te({imports:[[bi]]}),t})();function lX(t,n){if(1&t){const e=G();p(0,"div",5),A("click",function(){return h(e),b().onCancel()}),k(1," Cancel "),f()}}function cX(t,n){1&t&&(p(0,"div",6),O(1,"i",7),k(2," Submit * "),f())}function uX(t,n){1&t&&(p(0,"button",8),k(1," Submit "),f())}let zn=(()=>{class t{constructor(){this.form=new Bi({}),this.enctype="application/x-www-form-urlencoded",this.enableSubmitButtons=!0,this.formlySubmit=new q,this.formlyCancel=new q}onSubmit(){this.form.valid&&this.formlySubmit.emit(this.model)}onCancel(){this.formlyCancel.emit(this.model)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Y({type:t,selectors:[["app-formly-formcontainer"]],inputs:{model:"model",fields:"fields",enctype:"enctype",enableSubmitButtons:"enableSubmitButtons"},outputs:{formlySubmit:"formlySubmit",formlyCancel:"formlyCancel"},decls:5,vars:8,consts:[[3,"formGroup","enctype","submit"],[3,"form","fields","model"],["class","btn btn-dark mr-3",3,"click",4,"ngIf"],["class","btn btn-dark strikethrough","placement","top","ngbTooltip","The form is not yet correctly filled out!",4,"ngIf"],["type","submit","class","btn btn-primary",4,"ngIf"],[1,"btn","btn-dark","mr-3",3,"click"],["placement","top","ngbTooltip","The form is not yet correctly filled out!",1,"btn","btn-dark","strikethrough"],["aria-hidden","true",1,"fa","fa-lock","mr-2"],["type","submit",1,"btn","btn-primary"]],template:function(e,i){1&e&&(p(0,"form",0),A("submit",function(){return i.onSubmit()}),O(1,"formly-form",1),S(2,lX,2,0,"div",2),S(3,cX,3,0,"div",3),S(4,uX,2,0,"button",4),f()),2&e&&(xe("enctype",i.enctype),v("formGroup",i.form),g(1),v("form",i.form)("fields",i.fields)("model",i.model),g(1),v("ngIf",i.enableSubmitButtons),g(1),v("ngIf",!i.form.valid&&i.enableSubmitButtons),g(1),v("ngIf",i.form.valid&&i.enableSubmitButtons))},directives:[Vr,Ur,yl,Eh,le,Of],styles:[".strikethrough[_ngcontent-%COMP%]{text-decoration:line-through}"]}),t})(),Qv=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Y({type:t,selectors:[["app-spinner"]],decls:1,vars:0,consts:[["id","article-loader-spinner",1,"spinner-border"]],template:function(e,i){1&e&&O(0,"div",0)},styles:[""]}),t})();function dX(t,n){if(1&t&&O(0,"input",8),2&t){const e=b().$implicit,i=b();Is("custom-control mr-2 ",e.className,""),v("checked",i.modelCopy[e.key])}}function hX(t,n){1&t&&(p(0,"span"),k(1,"*"),f())}function pX(t,n){if(1&t&&(p(0,"div"),k(1),f()),2&t){const e=b().$implicit,i=b();Is("form-control ",e.className,""),g(1),Z(" ",i.modelCopy[e.key]," ")}}function fX(t,n){if(1&t&&O(0,"div",9),2&t){const e=b().$implicit,i=b();Is("custom-control mr-2 ",e.className,""),v("innerHTML",i.modelCopy[e.key],Or)}}const mX=function(t){return{"mb-0":t}};function gX(t,n){if(1&t&&(p(0,"div",1),p(1,"div",2),S(2,dX,1,4,"input",3),p(3,"label",4),k(4),S(5,hX,2,0,"span",5),f(),f(),S(6,pX,2,4,"div",6),S(7,fX,1,4,"div",7),f()),2&t){const e=n.$implicit;g(2),v("ngIf","checkbox"===e.type),g(1),v("ngClass",ht(6,mX,"checkbox"===e.type)),g(1),Z(" ",e.templateOptions.label," "),g(1),v("ngIf",e.templateOptions.required),g(1),v("ngIf","checkbox"!==e.type&&"tinymce"!==e.type),g(1),v("ngIf","tinymce"===e.type)}}let _X=(()=>{class t{constructor(){}ngOnInit(){this.modelCopy=JSON.parse(JSON.stringify(this.model)),this.formlyFields.forEach(e=>Et(this,void 0,void 0,function*(){"select"===e.type&&(this.modelCopy[`${e.key}`]=yield this.getSelectedOptionValue(e,this.modelCopy))}))}getSelectedOptionValue(e,i){return Et(this,void 0,void 0,function*(){if("select"!==e.type)return;const r=`${e.key}`,o=i[r];if("Observable"===e.templateOptions.options.constructor.name){const d=(yield e.templateOptions.options.toPromise()).filter(m=>m.pk===o)[0];return null==d?void 0:d.name_full}return i[r]})}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Y({type:t,selectors:[["app-display-form-container"]],inputs:{formlyFields:"formlyFields",model:"model"},decls:1,vars:1,consts:[["class","form-group",4,"ngFor","ngForOf"],[1,"form-group"],[1,"d-flex","align-items-center"],["type","checkbox","disabled","",3,"class","checked",4,"ngIf"],[3,"ngClass"],[4,"ngIf"],[3,"class",4,"ngIf"],[3,"class","innerHTML",4,"ngIf"],["type","checkbox","disabled","",3,"checked"],[3,"innerHTML"]],template:function(e,i){1&e&&S(0,gX,8,8,"div",0),2&e&&v("ngForOf",i.formlyFields)},directives:[je,le,Yt],styles:[".form-control[_ngcontent-%COMP%]{color:var(--white);background-color:transparent;border-color:var(--white);overflow:hidden;white-space:nowrap}"]}),t})();function vX(t,n){1&t&&O(0,"hr",9)}const $N=function(t){return{"col-sm-6":t}};let br=(()=>{class t{constructor(){this.isVisibleSubject=new ln(!1),this.displayVertically=!1,this.updateSubmit=new q,this.cancel=new q}ngOnInit(){this.markFieldMismatches()}markFieldMismatches(){const e=this.formlyFields.map(i=>i.key.toString());for(let i of e)this.modelFromUser[i]!=this.modelFromServer[i]&&(this.formlyFields.find(l=>l.key===i).className="updated")}onCancel(){this.cancel.emit(null)}onSubmit(){this.modelFromUser.update_datetime=this.modelFromServer.update_datetime,this.updateSubmit.emit(null)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Y({type:t,selectors:[["app-compare-form-container"]],inputs:{formlyFields:"formlyFields",modelFromUser:"modelFromUser",modelFromServer:"modelFromServer",isVisibleSubject:"isVisibleSubject",displayVertically:"displayVertically"},outputs:{updateSubmit:"updateSubmit",cancel:"cancel"},decls:17,vars:11,consts:[[1,"container","p-0","mw-100"],["compareFormContainer",""],[1,"alert","alert-info"],[1,"fa","fa-info-circle"],[1,"row"],[1,"col-12",3,"ngClass"],[3,"model","formlyFields"],["class","white-separator",4,"ngIf"],[3,"model","fields","formlySubmit","formlyCancel"],[1,"white-separator"]],template:function(e,i){1&e&&(p(0,"div",0,1),p(2,"div",2),O(3,"span",3),k(4," While you were updating this article, somebody else went ahead and updated it as well. Please include their changes in your update before submitting. "),f(),p(5,"div",4),p(6,"div",5),p(7,"div"),p(8,"h3"),k(9," Server Version "),f(),O(10,"app-display-form-container",6),f(),f(),S(11,vX,1,0,"hr",7),p(12,"div",5),p(13,"div"),p(14,"h3"),k(15," Your Version "),f(),p(16,"app-formly-formcontainer",8),A("formlySubmit",function(){return i.onSubmit()})("formlyCancel",function(){return i.onCancel()}),f(),f(),f(),f(),f()),2&e&&(g(6),v("ngClass",ht(7,$N,!i.displayVertically)),g(4),v("model",i.modelFromServer)("formlyFields",i.formlyFields),g(1),v("ngIf",i.displayVertically),g(1),v("ngClass",ht(9,$N,!i.displayVertically)),g(4),v("model",i.modelFromUser)("fields",i.formlyFields))},directives:[Yt,_X,le,zn],styles:[""]}),t})();function yX(t,n){1&t&&Zi(0,8),2&t&&(b(),v("ngTemplateOutlet",ie(6)))}function bX(t,n){1&t&&Zi(0,8),2&t&&(b(),v("ngTemplateOutlet",ie(8)))}function CX(t,n){1&t&&Zi(0,8),2&t&&(b(),v("ngTemplateOutlet",ie(10)))}function wX(t,n){1&t&&Zi(0,8),2&t&&(b(),v("ngTemplateOutlet",ie(12)))}function SX(t,n){if(1&t&&(p(0,"div",18),O(1,"img",19),f()),2&t){const e=b(),i=e.$implicit,r=e.index,o=b(3);v("title",i.name),g(1),Po("alt","Image ",r," of the character"),v("src",o.constants.wikiUrl+i.image,li)}}function TX(t,n){1&t&&S(0,SX,2,3,"ng-template",17),2&t&&v("id","imageIndex-"+n.index)}function EX(t,n){if(1&t){const e=G();Vt(0),p(1,"ngb-carousel",14,15),A("slide",function(r){return h(e),b(2).onSlide(r)}),S(3,TX,1,1,void 0,16),f(),Bt()}if(2&t){const e=b(2);g(1),v("showNavigationArrows",e.images.length>1)("showNavigationIndicators",e.images.length>1),g(2),v("ngForOf",e.images)}}function kX(t,n){if(1&t){const e=G();p(0,"i",20),A("click",function(){return h(e),b(2).toggleCreateState()}),f()}}function DX(t,n){if(1&t){const e=G();p(0,"i",21),A("click",function(){return h(e),b(2).toggleEditState()}),f()}}function xX(t,n){if(1&t){const e=G();p(0,"i",22),A("click",function(){return h(e),b(2).toggleDeleteState()}),f()}}function MX(t,n){if(1&t&&(S(0,EX,4,3,"ng-container",9),p(1,"div",10),S(2,kX,1,0,"i",11),S(3,DX,1,0,"i",12),S(4,xX,1,0,"i",13),f()),2&t){const e=b(),i=ie(16);v("ngIf",(null==e.images?null:e.images.length)>0)("ngIfElse",i),g(2),v("ngIf",e.hasCreatePermission),g(1),v("ngIf",(null==e.images?null:e.images.length)>0&&e.hasUpdatePermission),g(1),v("ngIf",(null==e.images?null:e.images.length)>1&&e.hasDeletePermission)}}function IX(t,n){1&t&&O(0,"app-spinner")}function PX(t,n){if(1&t){const e=G();p(0,"div",23),p(1,"h5",24),k(2," Updating this image: "),S(3,IX,1,0,"app-spinner",25),f(),p(4,"div",26),O(5,"img",27),f(),p(6,"app-formly-formcontainer",28),A("formlySubmit",function(){return h(e),b().onSubmit()})("formlyCancel",function(){return h(e),b().onCancel()}),f(),f()}if(2&t){const e=b();g(3),v("ngIf",e.isLoading),g(2),v("src",e.constants.wikiUrl+e.getCurrentMainImage().image,li),g(1),v("model",e.userModel)("fields",e.formlyFields)("enctype","multipart/form-data")}}function AX(t,n){1&t&&O(0,"app-spinner")}function OX(t,n){if(1&t){const e=G();p(0,"div",23),p(1,"h5",24),k(2," Upload new image "),S(3,AX,1,0,"app-spinner",25),f(),p(4,"app-formly-formcontainer",28),A("formlySubmit",function(){return h(e),b().onSubmit()})("formlyCancel",function(){return h(e),b().onCancel()}),f(),f()}if(2&t){const e=b();g(3),v("ngIf",e.isLoading),g(1),v("model",e.userModel)("fields",e.formlyFields)("enctype","multipart/form-data")}}function NX(t,n){1&t&&O(0,"app-spinner")}function FX(t,n){if(1&t){const e=G();p(0,"div",23),p(1,"h5",24),k(2," Deleting this image: "),S(3,NX,1,0,"app-spinner",25),f(),p(4,"div",26),O(5,"img",27),f(),p(6,"div",29),k(7," Do you really want to delete this image? "),p(8,"div",30),A("click",function(){return h(e),b().onCancel()}),k(9,"No"),f(),p(10,"div",31),A("click",function(){return h(e),b().deleteCurrentMainImage()}),k(11,"Yes"),f(),f(),f()}if(2&t){const e=b();g(3),v("ngIf",e.isLoading),g(2),v("src",e.constants.wikiUrl+e.getCurrentMainImage().image,li)}}function RX(t,n){if(1&t){const e=G();p(0,"app-compare-form-container",32),A("updateSubmit",function(){return h(e),b().onSubmit()})("cancel",function(){return h(e),b().onCancel()}),f()}if(2&t){const e=b();v("formlyFields",e.formlyFields)("modelFromUser",e.userModel)("modelFromServer",e.serverModel)("displayVertically",!0)}}function LX(t,n){if(1&t&&(p(0,"div",35),O(1,"img",36),p(2,"div",37),p(3,"p"),k(4,"This article doesn't have an image yet"),f(),f(),f()),2&t){const e=b(2);g(1),v("src",e.constants.defaultImageUrl,li)}}function $X(t,n){1&t&&(p(0,"ngb-carousel",33),S(1,LX,5,1,"ng-template",34),f()),2&t&&v("showNavigationArrows",!1)("showNavigationIndicators",!1)}let im=(()=>{class t extends ji{constructor(e,i,r,o,s,l){super(l,s),this.imageUploadService=e,this.formlyService=i,this.warnings=r,this.routingService=o,this.constants=$,this.FormState=Br,this.formState=Br.READ,this.isLoading=!1,this.currentImageIndex=0,this.formlyFields=[this.formlyService.genericInput({key:"name",required:!1}),this.formlyService.genericInput({key:"character_article",label:"Character Article",hide:!0,isNumberInput:!0,required:!1}),this.formlyService.genericInput({key:"location_article",label:"Location Article",hide:!0,isNumberInput:!0,required:!1}),this.formlyService.genericInput({key:"creature_article",label:"Creature Article",hide:!0,isNumberInput:!0,required:!1}),this.formlyService.genericInput({key:"organization_article",label:"Organization Article",hide:!0,isNumberInput:!0,required:!1}),this.formlyService.genericInput({key:"encounter_article",label:"Encounter Article",hide:!0,isNumberInput:!0,required:!1}),this.formlyService.genericInput({key:"item_article",label:"Item Article",hide:!0,isNumberInput:!0,required:!1}),this.formlyService.singleFileField({key:"image"})]}getCurrentMainImage(){return this.images[this.currentImageIndex]}onSlide(e){const r=e.current.replace("imageIndex-","");this.currentImageIndex=parseInt(r,10)}resetImageModel(){this.userModel=new RJ}toggleDeleteState(){this.formState=Br.DELETE}toggleCreateState(){this.formState=Br.CREATE,this.resetImageModel(),this.userModel.article_type=this.article_type,this.userModel[`${this.article_type}_article`]=this.article_pk}toggleEditState(){this.formState=Br.UPDATE,this.userModel=this.images[this.currentImageIndex]}onCancel(){this.formState=Br.READ}onSubmit(){if(this.formState===Br.CREATE)this.createImage();else{if(this.formState!==Br.UPDATE&&this.formState!==Br.UPDATEOUTDATED)throw`Submitted form while Image-Gallery Component was in invalid state ${this.formState}`;this.updateImage()}}updateImage(){return Et(this,void 0,void 0,function*(){let i;this.isLoading=!0,i="string"!==this.userModel.image.constructor.name.toLowerCase()?this.imageUploadService.update(this.userModel.pk,this.userModel):this.imageUploadService.patch(this.userModel.pk,{pk:this.userModel.pk,name:this.userModel.name}),i.pipe(re()).subscribe(r=>{r.image=r.image.replace($.wikiUrl,""),this.images[this.currentImageIndex]=r,this.resetImageModel(),this.formState=Br.READ,this.isLoading=!1},r=>this.warnings.showWarning(r))})}createImage(){this.isLoading=!0,this.imageUploadService.create(this.userModel).pipe(re()).subscribe(e=>{this.images.push(e),this.resetImageModel(),this.formState=Br.READ,this.isLoading=!1},e=>this.warnings.showWarning(e))}deleteCurrentMainImage(){this.isLoading=!0;const e=this.getCurrentMainImage();this.imageUploadService.delete(e.pk).pipe(re()).subscribe(i=>{this.images.splice(this.currentImageIndex,1),this.currentImageIndex===this.images.length&&(this.currentImageIndex=this.images.length-1),this.formState=Br.READ,this.isLoading=!1},i=>this.warnings.showWarning(i))}}return t.\u0275fac=function(e){return new(e||t)(C(LJ),C(mn),C(Ze),C(ce),C(Me),C(ke))},t.\u0275cmp=Y({type:t,selectors:[["app-image-carousel"]],inputs:{images:"images",article_type:"article_type",article_pk:"article_pk"},features:[oe],decls:17,vars:5,consts:[[3,"ngSwitch"],[3,"ngTemplateOutlet",4,"ngSwitchCase"],["displayState",""],["updateState",""],["createState",""],["deleteState",""],["outdatedUpdateState",""],["defaultImage",""],[3,"ngTemplateOutlet"],[4,"ngIf","ngIfElse"],[1,"edit-image-buttons","mt-2"],["class","fa fa-plus-square-o fa-2x icon mx-4","aria-hidden","true",3,"click",4,"ngIf"],["class","fa fa-pencil fa-2x icon mx-4","aria-hidden","true",3,"click",4,"ngIf"],["class","fa fa-trash fa-2x icon mx-4","aria-hidden","true",3,"click",4,"ngIf"],["interval","false",3,"showNavigationArrows","showNavigationIndicators","slide"],["imageCarousel",""],[4,"ngFor","ngForOf"],["ngbSlide","",3,"id"],[1,"image-container",3,"title"],[3,"src","alt"],["aria-hidden","true",1,"fa","fa-plus-square-o","fa-2x","icon","mx-4",3,"click"],["aria-hidden","true",1,"fa","fa-pencil","fa-2x","icon","mx-4",3,"click"],["aria-hidden","true",1,"fa","fa-trash","fa-2x","icon","mx-4",3,"click"],[1,"card","p-4","m-2"],[1,"text-center"],[4,"ngIf"],[1,"image-container"],["title","None","alt","",1,"gallery-image",3,"src"],[3,"model","fields","enctype","formlySubmit","formlyCancel"],[1,"text-center","mt-3"],[1,"btn","btn-dark","mr-3",3,"click"],[1,"btn","btn-danger",3,"click"],[1,"d-flex","justify-content-center",3,"formlyFields","modelFromUser","modelFromServer","displayVertically","updateSubmit","cancel"],[3,"showNavigationArrows","showNavigationIndicators"],["ngbSlide",""],[1,"image-container","default-image"],["alt","Default Image stand in since this article has none",3,"src"],[1,"image-caption"]],template:function(e,i){1&e&&(Vt(0,0),S(1,yX,1,1,"ng-container",1),S(2,bX,1,1,"ng-container",1),S(3,CX,1,1,"ng-container",1),S(4,wX,1,1,"ng-container",1),Bt(),S(5,MX,5,5,"ng-template",null,2,se),S(7,PX,7,5,"ng-template",null,3,se),S(9,OX,5,4,"ng-template",null,4,se),S(11,FX,12,2,"ng-template",null,5,se),S(13,RX,1,4,"ng-template",null,6,se),S(15,$X,2,2,"ng-template",null,7,se)),2&e&&(v("ngSwitch",i.formState),g(1),v("ngSwitchCase",i.FormState.READ),g(1),v("ngSwitchCase",i.FormState.UPDATE),g(1),v("ngSwitchCase",i.FormState.CREATE),g(1),v("ngSwitchCase",i.FormState.DELETE))},directives:[ih,a_,ro,le,J2,je,V0,zn,Qv,br],styles:[".image-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{object-fit:contain;width:100%;max-height:18rem}@media only screen and (max-width: 768px){.image-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:10rem}}.image-caption[_ngcontent-%COMP%]{background:var(--wiki-background-1);width:50%;text-align:center;position:absolute;bottom:20%;margin-left:auto;margin-right:auto;left:0;right:0}.image-caption[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.edit-image-buttons[_ngcontent-%COMP%]{display:flex;align-items:center;align-content:center;justify-content:center;transition:opacity .2s;opacity:0}.mouseoverVisible[_ngcontent-%COMP%]{opacity:0;transition:opacity .2s}.defaultImage[_ngcontent-%COMP%]{position:relative}app-image-carousel:hover[_nghost-%COMP%]   .edit-image-buttons[_ngcontent-%COMP%], app-image-carousel:hover   [_nghost-%COMP%]   .edit-image-buttons[_ngcontent-%COMP%], app-image-carousel:hover[_nghost-%COMP%]   .mouseoverVisible[_ngcontent-%COMP%], app-image-carousel:hover   [_nghost-%COMP%]   .mouseoverVisible[_ngcontent-%COMP%]{opacity:1}@media (hover: none){.edit-image-buttons[_ngcontent-%COMP%], .mouseoverVisible[_ngcontent-%COMP%]{opacity:1}}"]}),t})();class Fw{constructor(n){n&&Object.assign(this,n)}}class Rw{constructor(n){n&&Object.assign(this,n)}}let UX=(()=>{class t extends Oa{constructor(e){super(e),this.baseUrl=`${$.wikiApiUrl}/quoteconnection`}}return t.\u0275fac=function(e){return new(e||t)(P(zt))},t.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function VX(t,n){if(1&t&&(Vt(0),p(1,"div",2),O(2,"i",3),k(3),f(),Bt()),2&t){const e=b();g(3),Z(" ",e.labelText," ")}}function BX(t,n){if(1&t&&(Vt(0),p(1,"a",4),O(2,"i",3),k(3),f(),Bt()),2&t){const e=b();g(1),xe("routerLink",e.link),g(2),Z(" ",e.labelText," ")}}var kh=(()=>(function(t){t[t.Link=0]="Link",t[t.Text=1]="Text"}(kh||(kh={})),kh))();let rm=(()=>{class t{constructor(){this.styles=kh}ngOnInit(){this.badgeStyle=null==this.link?kh.Text:kh.Link}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Y({type:t,selectors:[["app-inline-create-button"]],inputs:{link:"link",labelText:"labelText"},decls:3,vars:3,consts:[[3,"ngSwitch"],[4,"ngSwitchCase"],[1,"badge","badge-primary","pointer","p-2","no-underline","ml-2"],[1,"fa","fa-plus","mx-1"],[1,"badge","badge-primary","p-2","no-underline","ml-2",3,"routerLink"]],template:function(e,i){1&e&&(Vt(0,0),S(1,VX,4,1,"ng-container",1),S(2,BX,4,2,"ng-container",1),Bt()),2&e&&(v("ngSwitch",i.badgeStyle),g(1),v("ngSwitchCase",i.styles.Text),g(1),v("ngSwitchCase",i.styles.Link))},directives:[ih,a_,Ht],styles:[".full-sized[_nghost-%COMP%]   .badge[_ngcontent-%COMP%], .full-sized   [_nghost-%COMP%]   .badge[_ngcontent-%COMP%]{font-size:100%}"]}),t})();function HX(t,n){1&t&&O(0,"span",8),2&t&&v("innerHTML","- "+b(4).quote.description,Or)}function jX(t,n){if(1&t&&(p(0,"span"),k(1),f()),2&t){const e=b(4);g(1),Z(" - ",e.character.name,"")}}function zX(t,n){if(1&t){const e=G();p(0,"i",21),A("click",function(){h(e);const r=b().$implicit;return b(4).deleteQuoteConnection(r)}),f()}}function GX(t,n){if(1&t&&(p(0,"span",18),p(1,"a",19),k(2),f(),S(3,zX,1,0,"i",20),f()),2&t){const e=n.$implicit,i=n.index,r=b(4);g(1),xe("routerLink",r.connectedCharacterURLs[i]),g(1),Z(" ",e.character_details.name," "),g(1),v("ngIf",r.hasDeletePermission)}}function WX(t,n){if(1&t&&(p(0,"option",28),k(1),f()),2&t){const e=n.$implicit,i=b(5);xe("value",e.pk),Ct("disabled",!!i.hasConnection(e)||null),g(1),Z(" ",e.name," ")}}function qX(t,n){if(1&t){const e=G();p(0,"form",22),A("submit",function(){return h(e),b(4).createQuoteConnection()}),p(1,"select",23),A("ngModelChange",function(r){return h(e),b(4).baseQuoteConnection.character=r}),S(2,WX,2,3,"option",24),f(),p(3,"i",25),A("click",function(){return h(e),b(4).toggleQuoteConnectionCreateState()}),f(),p(4,"button",26),O(5,"i",27),f(),f()}if(2&t){const e=b(4);g(1),v("ngModel",e.baseQuoteConnection.character),g(1),v("ngForOf",e.characters)}}function QX(t,n){if(1&t){const e=G();p(0,"app-inline-create-button",29),A("click",function(){return h(e),b(4).toggleQuoteConnectionCreateState()}),f()}2&t&&v("labelText","Add Character")}function ZX(t,n){if(1&t&&(p(0,"blockquote"),O(1,"div",8),p(2,"div",9),S(3,HX,1,1,"span",10),S(4,jX,2,1,"span",5),f(),O(5,"hr",11),p(6,"div",12),p(7,"span",13),k(8," Characters: "),f(),p(9,"span",14),S(10,GX,4,3,"span",15),S(11,qX,6,2,"form",16),S(12,QX,1,1,"app-inline-create-button",17),f(),f(),f()),2&t){const e=b(3);g(1),v("innerHTML",e.quote.quote,Or),g(2),v("ngIf",e.quote.description),g(1),v("ngIf",!e.quote.description),g(6),v("ngForOf",e.quote.connections),g(1),v("ngIf",e.inQuoteConnectionCreateState),g(1),v("ngIf",e.hasCreatePermission&&!e.inQuoteConnectionCreateState)}}function KX(t,n){1&t&&O(0,"i",37),2&t&&xe("routerLink",b(4).quoteOverviewUrl)}const Zv=function(t){return{"d-none":t}};function YX(t,n){if(1&t){const e=G();p(0,"div",30),p(1,"i",31),A("click",function(){return h(e),b(3).getNextRandomQuote()}),f(),p(2,"i",32),A("click",function(){return h(e),b(3).toggleEditState()}),f(),p(3,"i",33),A("click",function(){return h(e),b(3).toggleCreateState()}),f(),p(4,"i",34),A("click",function(){return h(e),b(3).inDeleteState=!0}),f(),p(5,"i",35),A("click",function(){return h(e),b(3).copyQuoteToClipboard()}),f(),S(6,KX,1,1,"i",36),f()}if(2&t){const e=b(3);g(1),v("ngClass",ht(5,Zv,!e.enableRandomQuotes)),g(1),v("ngClass",ht(7,Zv,!e.hasUpdatePermission)),g(1),v("ngClass",ht(9,Zv,!e.hasCreatePermission||!e.enableCreatingQuotes)),g(1),v("ngClass",ht(11,Zv,!e.hasDeletePermission)),g(2),v("ngIf",e.enableLinkToOverview)}}function JX(t,n){if(1&t&&(p(0,"div"),S(1,ZX,13,6,"blockquote",6),S(2,YX,7,13,"div",7),f()),2&t){const e=b(2),i=ie(2),r=ie(6);g(1),v("ngIf",!e.isLoadingNextQuote)("ngIfElse",i),g(1),v("ngIf",!e.inDeleteState)("ngIfElse",r)}}function XX(t,n){if(1&t&&(p(0,"div",4),S(1,JX,3,4,"div",5),f()),2&t){const e=b();g(1),v("ngIf",e.quote.pk)}}function eee(t,n){1&t&&O(0,"app-spinner")}function tee(t,n){if(1&t&&(p(0,"span"),k(1),f()),2&t){const e=b(2);g(1),Z("Create Quote for ",e.character.name,"")}}function nee(t,n){if(1&t&&(p(0,"span"),k(1),f()),2&t){const e=b(2);g(1),Z("Updating Quote ",e.quote.pk,"")}}function iee(t,n){if(1&t){const e=G();p(0,"blockquote"),p(1,"h5",38),S(2,tee,2,1,"span",5),S(3,nee,2,1,"span",5),f(),p(4,"form",39),A("submit",function(){return h(e),b().onSubmit()}),O(5,"formly-form",40),p(6,"div",41),A("click",function(){return h(e),b().onCancel()}),k(7,"Cancel"),f(),p(8,"button",42),k(9,"Submit"),f(),f(),f()}if(2&t){const e=b();g(2),v("ngIf",e.inCreateState),g(1),v("ngIf",e.inEditState),g(1),v("formGroup",e.form),g(1),v("form",e.form)("fields",e.fields)("model",e.model)}}function ree(t,n){if(1&t){const e=G();p(0,"div"),k(1," Delete this quote? "),p(2,"div",43),A("click",function(){return h(e),b().deleteQuote()}),k(3,"Yes"),f(),p(4,"div",44),A("click",function(){return h(e),b().inDeleteState=!1}),k(5,"No"),f(),f()}}let UN=(()=>{class t extends ji{constructor(e,i,r,o,s,l,c,d){super(d,c),this.quoteService=e,this.formlyService=i,this.quoteConnectionservice=r,this.overviewService=o,this.warningsService=s,this.routingService=l,this.connectedCharacterURLs=[],this.constants=$,this.enableRandomQuotes=!1,this.enableLinkToOverview=!1,this.enableCreatingQuotes=!1,this.inCreateState=!1,this.delete=new q,this.create=new q,this.inDeleteState=!1,this.inEditState=!1,this.isLoadingNextQuote=!1,this.baseQuoteConnection=new Rw,this.inQuoteConnectionCreateState=!1,this.form=new Bi({})}ngOnInit(){var e;(this.inCreateState||this.isEmptyQuote(this.quote))&&(this.quote=new Fw,this.quote.connections=[],this.toggleCreateState()),this.fields=this.getFormlyFieldConfigurations(this.campaign),this.updateDynamicVariables(this.campaign,this.character,null===(e=this.quote)||void 0===e?void 0:e.connections)}getFormlyFieldConfigurations(e){return[this.formlyService.genericTextField({key:"quote",required:!0}),this.formlyService.genericInput({key:"description",required:!0}),this.formlyService.genericSelect({key:"session",overviewType:Ie.Session,required:!0,campaign:e.name}),this.formlyService.genericSelect({key:"encounter",overviewType:Ie.Encounter,required:!1,campaign:e.name})]}updateDynamicVariables(e,i,r){null!=r&&(this.connectedCharacterURLs=r.map(o=>this.routingService.getRoutePath("character",{name:o.character_details.name,campaign:e.name}))),this.quoteOverviewUrl=this.routingService.getRoutePath("quote-overview",{name:i.name,campaign:e.name})}ngOnChanges(){this.inCreateState&&this.toggleCreateState()}isEmptyQuote(e){return null==(null==e?void 0:e.pk)}getNextRandomQuote(){this.isLoadingNextQuote=!0,this.quoteService.getRandomQuote(this.campaign.name,this.character.name).pipe(re()).subscribe(e=>{(null==e?void 0:e.quote)&&(this.quote=e),this.isLoadingNextQuote=!1},e=>this.warningsService.showWarning(e))}onSubmit(){return Et(this,void 0,void 0,function*(){const e=this.inCreateState?this.quoteService.create(this.model):this.quoteService.update(this.model.pk,this.model);try{if(this.quote=yield e.toPromise(),this.model=this.quote,this.inCreateState){const i={quote:this.quote.pk,character:this.character.pk},r=yield this.quoteConnectionservice.create(i).toPromise();this.quote.connections=[r],this.inCreateState=!1,this.create.emit(this.quote)}else this.inEditState=!1}catch(i){this.warningsService.showWarning(i)}})}onCancel(){this.inCreateState&&this.delete.emit(),this.inCreateState=!1,this.inEditState=!1}toggleCreateState(){this.inCreateState=!0,this.model=new Fw,this.model.encounter=null}toggleEditState(){this.inEditState=!0,this.model=this.quote}toggleQuoteConnectionCreateState(){this.inQuoteConnectionCreateState=!this.inQuoteConnectionCreateState,this.characters||this.overviewService.getCampaignOverviewItems(this.campaign.name,Ie.Character).pipe(re()).subscribe(e=>this.characters=e,e=>this.warningsService.showWarning(e))}createQuoteConnection(){this.baseQuoteConnection.quote=this.quote.pk,this.quoteConnectionservice.create(this.baseQuoteConnection).pipe(re()).subscribe(e=>{this.quote.connections.push(e),this.inQuoteConnectionCreateState=!1,this.resetBaseQuoteConnection()},e=>this.warningsService.showWarning(e))}deleteQuoteConnection(e){this.quoteConnectionservice.delete(e.pk).pipe(re()).subscribe(i=>{const r=this.quote.connections.indexOf(e);this.quote.connections.splice(r,1)},i=>this.warningsService.showWarning(i))}hasConnection(e){for(let i of this.quote.connections)if(i.character_details.pk===e.pk)return!0;return!1}resetBaseQuoteConnection(){this.baseQuoteConnection=new Rw}copyQuoteToClipboard(){bN(`${this.quote.quote.split("<br />").map(l=>`>${l.trim().trimStart()}`).join("<br />")}\n>- ${this.quote.description} `)}deleteQuote(){this.quoteService.delete(this.quote.pk).pipe(re()).subscribe(e=>{this.inDeleteState=!1,this.delete.emit(this.quote)},e=>this.warningsService.showWarning(e))}}return t.\u0275fac=function(e){return new(e||t)(C(Gv),C(mn),C(UX),C(Yf),C(Ze),C(ce),C(Me),C(ke))},t.\u0275cmp=Y({type:t,selectors:[["app-quotefield"]],inputs:{quote:"quote",character:"character",campaign:"campaign",enableRandomQuotes:"enableRandomQuotes",enableLinkToOverview:"enableLinkToOverview",enableCreatingQuotes:"enableCreatingQuotes",inCreateState:"inCreateState"},outputs:{delete:"delete",create:"create"},features:[oe,St],decls:7,vars:2,consts:[["class","mb-3",4,"ngIf","ngIfElse"],["loading",""],["quoteForm",""],["deleteRequest",""],[1,"mb-3"],[4,"ngIf"],[4,"ngIf","ngIfElse"],["class","icon-container hide-icon mt-1",4,"ngIf","ngIfElse"],[3,"innerHTML"],[1,"mb-3","ml-4"],[3,"innerHTML",4,"ngIf"],[1,"white-line"],[1,"quote-connections","d-inline","icon-container"],[1,"tag-label","mr-2"],[1,"d-inline-flex","align-items-center","flex-wrap"],["class","badge badge-secondary p-2 mr-2 text-center vanish-container",4,"ngFor","ngForOf"],["class","d-flex align-items-center",3,"submit",4,"ngIf"],[3,"labelText","click",4,"ngIf"],[1,"badge","badge-secondary","p-2","mr-2","text-center","vanish-container"],[3,"routerLink"],["class","fa fa-trash icon vanish-icon ml-2",3,"click",4,"ngIf"],[1,"fa","fa-trash","icon","vanish-icon","ml-2",3,"click"],[1,"d-flex","align-items-center",3,"submit"],["name","character","id","character",1,"form-control",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"fa","icon","mx-2","fa-times","fa-1-5x",3,"click"],["type","submit",1,"mx-2"],[1,"fa","icon","fa-check","fa-1-5x"],[3,"value"],[3,"labelText","click"],[1,"icon-container","hide-icon","mt-1"],["title","Load new quote",1,"fa","fa-refresh","fa-1-5x","icon","mx-3",3,"ngClass","click"],["title","Edit Quote",1,"fa","fa-pencil","fa-1-5x","icon","mx-3",3,"ngClass","click"],["title","Create Quote",1,"fa","fa-plus","fa-1-5x","icon","mx-3",3,"ngClass","click"],["title","Delete Quote",1,"fa","fa-trash","fa-1-5x","icon","mx-3",3,"ngClass","click"],["title","Copy Quote to Clipboard",1,"fas","fa-copy","fa-1-5x","icon","mx-3",3,"click"],["class","fa fa-th-list fa-1-5x icon mr-3","title","See all quotes",3,"routerLink",4,"ngIf"],["title","See all quotes",1,"fa","fa-th-list","fa-1-5x","icon","mr-3",3,"routerLink"],[1,"border-white","border-bottom"],[3,"formGroup","submit"],[3,"form","fields","model"],[1,"btn","btn-secondary","mr-3",3,"click"],["type","submit",1,"btn","btn-primary"],[1,"btn","btn-danger","mr-2",3,"click"],[1,"btn","btn-secondary","mr-2",3,"click"]],template:function(e,i){if(1&e&&(S(0,XX,2,1,"div",0),S(1,eee,1,0,"ng-template",null,1,se),S(3,iee,10,6,"ng-template",null,2,se),S(5,ree,6,0,"ng-template",null,3,se)),2&e){const r=ie(4);v("ngIf",!i.inCreateState&&!i.inEditState)("ngIfElse",r)}},directives:[le,je,Ht,Vr,Ur,Fo,Ro,Si,Us,as,ls,rm,Yt,us,Qv,yl,Eh],styles:[".hide-icon[_ngcontent-%COMP%]{opacity:0;transition:opacity .2s}.icon-container[_ngcontent-%COMP%]:hover   .hide-icon[_ngcontent-%COMP%]{opacity:1}.vanish-icon[_ngcontent-%COMP%]{display:none}.vanish-container[_ngcontent-%COMP%]:hover   .vanish-icon[_ngcontent-%COMP%]{display:inline-block}.fa-trash[_ngcontent-%COMP%]:hover{color:red}.tag-label[_ngcontent-%COMP%]{font-size:.9rem}.badge.badge-secondary[_ngcontent-%COMP%]{padding:.35rem}.white-line[_ngcontent-%COMP%]{background-color:#fff}blockquote[_ngcontent-%COMP%]:hover ~ .icon-container[_ngcontent-%COMP%], .icon-container[_ngcontent-%COMP%]:hover{opacity:1}@media (max-width: 768px){.icon-container[_ngcontent-%COMP%]{opacity:1}.vanish-icon[_ngcontent-%COMP%]{display:inline}}"]}),t})();function oee(t,n){if(1&t){const e=G();p(0,"div"),p(1,"app-quotefield",2),A("delete",function(){return h(e),b().onQuoteDelete()}),f(),f()}if(2&t){const e=b();g(1),v("character",e.character)("quote",e.quote)("campaign",e.campaign)("enableCreatingQuotes",!0)("enableLinkToOverview",!0)("enableRandomQuotes",!0)("inCreateState",e.inCreateState)}}const see=function(t){return{"d-none":t}};function aee(t,n){if(1&t){const e=G();p(0,"div",3),p(1,"div",4),A("click",function(){return h(e),b().toggleCreateState()}),k(2," Add Quote "),f(),f()}if(2&t){const e=b();g(1),v("ngClass",ht(1,see,!e.hasCreatePermission))}}let lee=(()=>{class t extends ji{constructor(e,i,r,o,s){super(s,o),this.quoteService=e,this.warningsService=i,this.routingService=r,this.constants=$,this.isLoadingNextQuote=!1,this.inCreateState=!1,this.inDeleteState=!1,this.inEditState=!1}ngOnInit(){this.getNextRandomQuote()}getNextRandomQuote(){this.isLoadingNextQuote=!0,this.quoteService.getRandomQuote(this.campaign.name,this.character.name).pipe(re()).subscribe(e=>{(null==e?void 0:e.quote)&&(this.quote=e),this.isLoadingNextQuote=!1},e=>this.quote=null)}toggleCreateState(){this.inCreateState=!this.inCreateState}onQuoteDelete(){this.getNextRandomQuote(),this.inCreateState=!1}}return t.\u0275fac=function(e){return new(e||t)(C(Gv),C(Ze),C(ce),C(Me),C(ke))},t.\u0275cmp=Y({type:t,selectors:[["app-quote-gallery"]],inputs:{character:"character",campaign:"campaign"},features:[oe],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["addNewQuoteButton",""],[3,"character","quote","campaign","enableCreatingQuotes","enableLinkToOverview","enableRandomQuotes","inCreateState","delete"],[1,"row"],[1,"btn","btn-secondary","col-md-3",3,"ngClass","click"]],template:function(e,i){if(1&e&&(S(0,oee,2,7,"div",0),S(1,aee,3,3,"ng-template",null,1,se)),2&e){const r=ie(2);v("ngIf",i.campaign&&i.quote&&i.quote.pk||i.inCreateState)("ngIfElse",r)}},directives:[le,UN,Yt],styles:[".hide-icon[_ngcontent-%COMP%]{opacity:0;transition:opacity .2s}.vanish-icon[_ngcontent-%COMP%]{display:none}.icon-container[_ngcontent-%COMP%]:hover   .hide-icon[_ngcontent-%COMP%]{opacity:1}.vanish-container[_ngcontent-%COMP%]:hover   .vanish-icon[_ngcontent-%COMP%]{display:inline-block}.fa-trash[_ngcontent-%COMP%]:hover{color:red}.tag-label[_ngcontent-%COMP%]{font-size:.9rem}.badge.badge-secondary[_ngcontent-%COMP%]{padding:.35rem}.white-line[_ngcontent-%COMP%]{background-color:#fff}blockquote[_ngcontent-%COMP%]:hover ~ .icon-container[_ngcontent-%COMP%], .icon-container[_ngcontent-%COMP%]:hover{opacity:1}@media (max-width: 768px){.icon-container[_ngcontent-%COMP%]{opacity:1}.vanish-icon[_ngcontent-%COMP%]{display:inline}}"]}),t})(),VN=(()=>{class t{constructor(e){this.sanitized=e}transform(e){return this.sanitized.bypassSecurityTrustHtml(e)}}return t.\u0275fac=function(e){return new(e||t)(C(pf,16))},t.\u0275pipe=Ve({name:"safeHtml",type:t,pure:!0}),t})();function cee(t,n){if(1&t){const e=G();p(0,"i",9),A("click",function(){return h(e),b(3).enableEdit()}),f()}}function uee(t,n){if(1&t){const e=G();p(0,"i",10),A("click",function(){return h(e),b(3).cancelEdit()}),f()}}function dee(t,n){if(1&t){const e=G();p(0,"i",11),A("click",function(){return h(e),b(3).finishEdit()}),f()}}function hee(t,n){if(1&t&&(p(0,"h4",5),S(1,cee,1,0,"i",6),S(2,uee,1,0,"i",7),S(3,dee,1,0,"i",8),f()),2&t){const e=b(2);g(1),v("ngIf",e.isInDisplayState()&&e.allowEdit),g(1),v("ngIf",e.isInUpdateState()),g(1),v("ngIf",e.isInUpdateState())}}function pee(t,n){if(1&t&&(p(0,"div"),O(1,"h4",3),S(2,hee,4,3,"h4",4),f()),2&t){const e=b();g(1),v("innerHTML",e.heading,Or),g(1),v("ngIf",e.hasUpdatePermission)}}function fee(t,n){if(1&t){const e=G();p(0,"div"),p(1,"form",12),A("submit",function(){return h(e),b().finishEdit()}),p(2,"editor",13),A("ngModelChange",function(r){return h(e),b().textModel=r}),f(),p(3,"div",14),A("click",function(){return h(e),b().cancelEdit()}),O(4,"span",15),k(5," Cancel "),f(),p(6,"button",16),O(7,"span",17),k(8," Submit "),f(),f(),f()}if(2&t){const e=b();g(2),v("init",e.constants.tinyMCESettings)("ngModel",e.textModel)}}function mee(t,n){if(1&t){const e=G();p(0,"div"),p(1,"div",18),O(2,"span",19),k(3," While you were updating this article, somebody else went ahead and updated it as well. Please include their changes in your update before submitting. "),f(),p(4,"div",20),p(5,"div"),p(6,"h3"),k(7," Server Version "),f(),O(8,"div",21),Lt(9,"safeHtml"),f(),O(10,"hr",22),p(11,"form",12),A("submit",function(){return h(e),b().finishEdit()}),p(12,"h3"),k(13," Your Version "),f(),p(14,"editor",13),A("ngModelChange",function(r){return h(e),b().textModel=r}),f(),p(15,"div",23),A("click",function(){return h(e),b().cancelEdit()}),O(16,"span",15),k(17," Cancel "),f(),p(18,"button",16),O(19,"span",17),k(20," Submit "),f(),f(),f(),f()}if(2&t){const e=b();g(8),v("innerHTML",yn(9,3,e.initialText),Or),g(6),v("init",e.constants.tinyMCESettings)("ngModel",e.textModel)}}function gee(t,n){1&t&&(O(0,"div",21),Lt(1,"safeHtml")),2&t&&v("innerHTML",yn(1,1,b().textModel),Or)}let El=(()=>{class t extends ji{constructor(e,i){super(i,e),this.allowEdit=!0,this.formStateSubject=new ln($.displayState),this.updateText=new q,this.constants=$}ngOnInit(){this.initialText=null==this.initialText?"":this.initialText,this.textModel=this.initialText}isInUpdateState(){return this.formStateSubject.value===$.updateState}isInOutdatedUpdateState(){return this.formStateSubject.value===$.outdatedUpdateState}isInDisplayState(){return this.formStateSubject.value===$.displayState}enableEdit(){!this.allowEdit||this.formStateSubject.next($.updateState)}finishEdit(){!this.allowEdit||(this.formStateSubject.next($.displayState),this.updateText.emit(this.textModel))}cancelEdit(){!this.allowEdit||(this.formStateSubject.next($.displayState),this.textModel=this.initialText)}}return t.\u0275fac=function(e){return new(e||t)(C(Me),C(ke))},t.\u0275cmp=Y({type:t,selectors:[["app-textfield"]],inputs:{initialText:"initialText",heading:"heading",allowEdit:"allowEdit",formStateSubject:"formStateSubject"},outputs:{updateText:"updateText"},features:[oe],decls:6,vars:4,consts:[[4,"ngIf"],[1,"mt-2"],[3,"innerHTML",4,"ngIf"],[1,"d-inline",3,"innerHTML"],["class","d-inline",4,"ngIf"],[1,"d-inline"],["class","fa icon fa-pencil ml-2",3,"click",4,"ngIf"],["class","fa icon fa-times ml-2",3,"click",4,"ngIf"],["class","fa icon fa-check ml-2",3,"click",4,"ngIf"],[1,"fa","icon","fa-pencil","ml-2",3,"click"],[1,"fa","icon","fa-times","ml-2",3,"click"],[1,"fa","icon","fa-check","ml-2",3,"click"],[3,"submit"],["name","textEditField",1,"mb-2",3,"init","ngModel","ngModelChange"],[1,"btn","btn-secondary","mx-2",3,"click"],[1,"fa","icon","fa-times"],["type","submit",1,"btn","btn-primary"],[1,"fa","fa-check"],[1,"alert","alert-info"],[1,"fa","fa-info-circle"],[1,"flex-column","card","p-4"],[3,"innerHTML"],[1,"white-separator"],[1,"btn","btn-dark","mx-2",3,"click"]],template:function(e,i){1&e&&(S(0,pee,3,2,"div",0),p(1,"form",1),p(2,"div"),S(3,fee,9,2,"div",0),S(4,mee,21,5,"div",0),S(5,gee,2,3,"div",2),f(),f()),2&e&&(v("ngIf",i.heading),g(3),v("ngIf",i.isInUpdateState()&&i.hasUpdatePermission),g(1),v("ngIf",i.isInOutdatedUpdateState()&&i.hasUpdatePermission),g(1),v("ngIf",i.isInDisplayState()||!i.userHasUpdatePermission))},directives:[le,Vr,Ur,Fo,X0,Si,Us],pipes:[VN],styles:["i.fa-pencil[_ngcontent-%COMP%]:hover{color:gray}i.fa-check[_ngcontent-%COMP%]:hover{color:#368949}i.fa-times[_ngcontent-%COMP%]:hover{color:#9c1e2a}"]}),t})();function _ee(t,n){if(1&t&&(Vt(0),k(1),Bt()),2&t){const e=b().$implicit;g(1),Z(" (",e.role,") ")}}function vee(t,n){if(1&t&&(p(0,"li"),p(1,"a",2),k(2),S(3,_ee,2,1,"ng-container",3),f(),f()),2&t){const e=n.$implicit,i=b();g(1),n1("routerLink","",i.constants.wikiUrlFrontendPrefix,"/",i.articleType,"/",i.campaign,"/",e.name,""),g(1),Z(" ",e.name," "),g(1),v("ngIf",!!e.role)}}const yee=function(t){return{"d-none":t}};let Lw=(()=>{class t extends ji{constructor(e,i){super(i,e),this.constants=$,this.createLink="",this.campaign=this.route.snapshot.params.campaign}ngOnInit(){""===this.createLink&&(this.createLink=`${$.wikiUrlFrontendPrefix}/${this.articleType}/create`)}}return t.\u0275fac=function(e){return new(e||t)(C(Me),C(ke))},t.\u0275cmp=Y({type:t,selectors:[["app-object-list"]],inputs:{heading:"heading",items:"items",articleType:"articleType",createLink:"createLink"},features:[oe],decls:6,vars:6,consts:[[1,"fa","fa-plus","icon","ml-1",3,"routerLink","ngClass"],[4,"ngFor","ngForOf"],[3,"routerLink"],[4,"ngIf"]],template:function(e,i){1&e&&(p(0,"div"),p(1,"h4"),k(2),O(3,"i",0),f(),p(4,"ul"),S(5,vee,4,6,"li",1),f(),f()),2&e&&(g(2),Z(" ",i.heading," "),g(1),xe("routerLink",i.createLink),v("ngClass",ht(4,yee,!i.hasCreatePermission)),g(2),v("ngForOf",i.items))},directives:[us,Yt,je,Ht,le],styles:[""]}),t})();class Kv{}let BN=(()=>{class t extends Oa{constructor(e){super(e),this.baseUrl=`${$.wikiApiUrl}/encounterconnection`}}return t.\u0275fac=function(e){return new(e||t)(P(zt))},t.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),$w=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Y({type:t,selectors:[["app-tooltip-infocircle"]],inputs:{tooltipMessage:"tooltipMessage"},decls:1,vars:1,consts:[[1,"fas","fa-info-circle","icon",3,"ngbTooltip"]],template:function(e,i){1&e&&O(0,"sup",0),2&e&&v("ngbTooltip",i.tooltipMessage)},directives:[Of],styles:[""]}),t})();const bee=["toggle"];function Cee(t,n){1&t&&Zi(0)}function wee(t,n){if(1&t){const e=G();p(0,"div",5),A("click",function(){return h(e),b().toggleState()}),wa(1),f()}}function See(t,n){if(1&t){const e=G();p(0,"div",6),p(1,"span",7),p(2,"strong"),k(3),f(),f(),p(4,"div",8),A("click",function(){return h(e),b().emitConfirmationEvent()}),k(5," Yes "),f(),p(6,"div",9),A("click",function(){return h(e),b().toggleState()}),k(7," No "),f(),f()}if(2&t){const e=b();g(3),Le(e.message)}}const Tee=[[["inactiveButton"]]],Eee=["inactiveButton"];let HN=(()=>{class t{constructor(){this.isActive=!1,this.confirmationEmission=null,this.confirmationEvent=new q}toggleState(){this.isActive=!this.isActive,hi(this.toggleElement.nativeElement,"flipInY")}emitConfirmationEvent(){this.isActive&&this.confirmationEvent.emit(this.confirmationEmission),this.isActive=!1}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Y({type:t,selectors:[["app-animated-toggle"]],viewQuery:function(e,i){if(1&e&&pt(bee,5),2&e){let r;ye(r=be())&&(i.toggleElement=r.first)}},inputs:{isActive:"isActive",confirmationEmission:"confirmationEmission",message:"message"},outputs:{confirmationEvent:"confirmationEvent"},ngContentSelectors:Eee,decls:7,vars:3,consts:[[1,"fit-content"],["toggle",""],[4,"ngIf","ngIfThen","ngIfElse"],["inactiveToggle",""],["activeToggle",""],[3,"click"],[1,"delete-request","float-right"],[1,"mr-3"],[1,"btn","btn-danger","float-right","mr-2",3,"click"],[1,"btn","btn-secondary","float-right",3,"click"]],template:function(e,i){if(1&e&&(Ca(Tee),p(0,"div",0,1),S(2,Cee,1,0,"ng-container",2),f(),S(3,wee,2,0,"ng-template",null,3,se),S(5,See,8,1,"ng-template",null,4,se)),2&e){const r=ie(4),o=ie(6);g(2),v("ngIf",i.isActive)("ngIfThen",o)("ngIfElse",r)}},directives:[le],styles:[".fit-content[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content}"]}),t})();function kee(t,n){if(1&t){const e=G();Vt(0),p(1,"app-animated-toggle",1),A("confirmationEvent",function(){return h(e),b().emitDeleteEvent()}),p(2,"inactiveButton"),p(3,"div",2),O(4,"i",3),f(),f(),f(),Bt()}if(2&t){const e=b();g(1),v("message",e.deleteMessage)}}let Ic=(()=>{class t extends ji{constructor(e,i){super(e,i),this.deleteEventEmission=null,this.deleteMessage="Delete this object?",this.deleteEvent=new q}emitDeleteEvent(){this.deleteEvent.emit(this.deleteEventEmission)}}return t.\u0275fac=function(e){return new(e||t)(C(ke),C(Me))},t.\u0275cmp=Y({type:t,selectors:[["app-delete-toggle"]],inputs:{deleteEventEmission:"deleteEventEmission",deleteMessage:"deleteMessage"},outputs:{deleteEvent:"deleteEvent"},features:[oe],decls:1,vars:1,consts:[[4,"ngIf"],[1,"float-right",3,"message","confirmationEvent"],[1,"btn","btn-outline-danger"],[1,"fa","fa-trash"]],template:function(e,i){1&e&&S(0,kee,5,1,"ng-container",0),2&e&&v("ngIf",i.hasDeletePermission)},directives:[le,HN],styles:[""]}),t})();const Dee=function(t,n){return{"fa float-right icon":!0,"fa-chevron-down":t,"fa-chevron-up":n}};function xee(t,n){if(1&t&&(p(0,"div",11),O(1,"span",12),O(2,"i",13),f()),2&t){const e=b(),i=e.$implicit,r=e.index,o=b(2);g(1),v("innerHTML",i.name,Or),g(1),v("ngClass",Bn(2,Dee,!o.panelIsOpen(r),o.panelIsOpen(r)))}}function Mee(t,n){if(1&t){const e=G();p(0,"i",29),A("click",function(){h(e);const r=b().$implicit,o=b(2).$implicit;return b(2).deleteEncounterConnection(o,r)}),f()}}function Iee(t,n){if(1&t&&(p(0,"span",26),p(1,"a",27),k(2),f(),S(3,Mee,1,0,"i",28),f()),2&t){const e=n.$implicit,i=n.index,r=b(2).index,o=b(2);g(1),xe("routerLink",o.encounterConnectionUrls[r][i]),g(1),Z(" ",e.character_details.name," "),g(1),v("ngIf",o.hasDeletePermission)}}function Pee(t,n){if(1&t&&(p(0,"option",36),k(1),f()),2&t){const e=n.$implicit;xe("value",e.pk),g(1),Le(e.name)}}function Aee(t,n){if(1&t){const e=G();p(0,"form",30),A("submit",function(){h(e);const r=b(2).$implicit;return b(2).createEncounterConnection(r)}),p(1,"select",31),A("ngModelChange",function(r){return h(e),b(4).baseEncounterConnection.character=r}),S(2,Pee,2,2,"option",32),f(),p(3,"i",33),A("click",function(){return h(e),b(4).toggleEncounterConnectionCreationState()}),f(),p(4,"button",34),O(5,"i",35),f(),f()}if(2&t){const e=b(4);g(1),v("ngModel",e.baseEncounterConnection.character),g(1),v("ngForOf",e.characters)}}function Oee(t,n){if(1&t){const e=G();p(0,"i",37),A("click",function(){return h(e),b(4).toggleEncounterConnectionCreationState()}),f()}}const Nee=function(t){return{"d-none":t}};function Fee(t,n){if(1&t){const e=G();p(0,"div",14),A("click",function(){h(e);const r=b().$implicit;return b(2).fullEditEncounter(r)}),O(1,"i",15),f(),p(2,"div",16),p(3,"app-textfield",17),A("updateText",function(r){h(e);const o=b().index;return b(2).onEncounterUpdate(r,o)}),f(),f(),O(4,"hr",18),p(5,"div",19),p(6,"span",20),k(7," Characters: "),f(),p(8,"div",21),S(9,Iee,4,3,"span",22),S(10,Aee,6,2,"form",23),S(11,Oee,1,0,"i",24),f(),f(),p(12,"app-delete-toggle",25),A("deleteEvent",function(){return h(e),b(3).deleteEncounter()}),f()}if(2&t){const e=b().$implicit,i=b(2);v("ngClass",ht(8,Nee,!i.hasUpdatePermission)),g(3),v("initialText",e.description)("heading",e.title)("allowEdit",!1),g(6),v("ngForOf",e.encounterConnections),g(1),v("ngIf",i.inEncounterConnectionCreationState&&i.hasCreatePermission),g(1),v("ngIf",!i.inEncounterConnectionCreationState&&i.hasCreatePermission),g(1),v("deleteMessage","Delete this encounter?")}}function Ree(t,n){1&t&&(p(0,"ngb-panel",8),S(1,xee,3,5,"ng-template",9),S(2,Fee,13,10,"ng-template",10),f()),2&t&&Po("id","static-",n.index,"")}function Lee(t,n){if(1&t){const e=G();p(0,"div",5),p(1,"ngb-accordion",6),A("panelChange",function(r){return h(e),b().onPanelChange(r)}),S(2,Ree,3,1,"ngb-panel",7),f(),f()}if(2&t){const e=b();g(1),v("closeOthers",!0)("animation",!0),g(1),v("ngForOf",e.encounters)}}function $ee(t,n){if(1&t){const e=G();p(0,"app-formly-formcontainer",42),A("formlySubmit",function(){h(e);const r=b(2);return r.updateEncounter(r.userModel)})("formlyCancel",function(){h(e);const r=b(2);return r.formState=r.constants.displayState}),f()}if(2&t){const e=b(2);v("model",e.userModel)("fields",e.formlyFields)}}function Uee(t,n){if(1&t){const e=G();p(0,"app-compare-form-container",43),A("updateSubmit",function(){h(e);const r=b(2);return r.updateEncounter(r.userModel)})("cancel",function(){h(e);const r=b(2);return r.formState=r.constants.displayState}),f()}if(2&t){const e=b(2);v("formlyFields",e.formlyFields)("modelFromUser",e.userModel)("modelFromServer",e.serverModel)("displayVertically",!0)}}function Vee(t,n){if(1&t&&(p(0,"div",38),O(1,"h4",39),S(2,$ee,1,2,"app-formly-formcontainer",40),S(3,Uee,1,4,"app-compare-form-container",41),f()),2&t){const e=b();g(1),v("innerHTML",e.userModel.title,Or),g(1),v("ngIf",e.isInUpdateState()),g(1),v("ngIf",e.isInOutdatedUpdateState())}}let Bee=(()=>{class t extends ji{constructor(e,i,r,o,s,l,c,d){super(d,c),this.overviewService=e,this.encounterService=i,this.encounterConnectionService=r,this.formlyService=o,this.warnings=s,this.routingService=l,this.constants=$,this.campaign=this.route.snapshot.params.campaign,this.formState=$.displayState,this.inEncounterConnectionCreationState=!1,this.baseEncounterConnection=new Kv,this.formlyFields=[this.formlyService.genericInput({key:"title"}),this.formlyService.genericSelect({key:"location",label:"Encounter Location",sortProp:"name_full",overviewType:Ie.Location,campaign:this.campaign}),this.formlyService.genericTextField({key:"description",required:!0})]}ngOnInit(){this.isOpen={},this.encounterConnectionUrls=[],this.encounters.forEach((e,i)=>{this.isOpen[`static-${i}`]=!1;const s=e.encounterConnections.map(l=>this.routingService.getRoutePath("character",{name:l.character_details.name,campaign:this.campaign}));this.encounterConnectionUrls.push(s)})}isInCreateState(){return this.formState===$.createState}isInUpdateState(){return this.formState===$.updateState}isInOutdatedUpdateState(){return this.formState===$.outdatedUpdateState}isInDeleteState(){return this.formState===$.deleteState}isInDisplayState(){return this.formState===$.displayState}onEncounterUpdate(e,i){const r=this.encounters[i];r.description=e,this.encounterService.update(r.pk,r).pipe(re()).subscribe(o=>this.encounters[i]=o,o=>this.warnings.showWarning(o))}fullEditEncounter(e){this.userModel=JSON.parse(JSON.stringify(e)),this.formState=$.updateState}updateEncounter(e,i){this.encounterService.update(e.pk,e).pipe(re()).subscribe(r=>{this.encounters[i]=r,this.formState=$.displayState},r=>this.onEncounterUpdateError(r))}onEncounterUpdateError(e){409===(null==e?void 0:e.status)?(this.serverModel=e.error,this.formState=$.outdatedUpdateState):this.warnings.showWarning(e)}deleteEncounter(e,i){this.encounterService.delete(e.pk).pipe(re()).subscribe(r=>{this.encounters.splice(i,1)},r=>this.warnings.showWarning(r))}resetEncounterForm(){this.userModel=new js}onPanelChange({panelId:e}){for(const i in this.isOpen)this.isOpen[i]=!(i!==e||this.isOpen[i])}panelIsOpen(e){return this.isOpen[`static-${e}`]}toggleEncounterConnectionCreationState(){this.inEncounterConnectionCreationState=!this.inEncounterConnectionCreationState,this.characters||this.overviewService.getCampaignOverviewItems(this.campaign,Ie.Character).pipe(re()).subscribe(e=>this.characters=e.filter(i=>!i.player_character),e=>this.warnings.showWarning(e))}createEncounterConnection(e){this.baseEncounterConnection.encounter=e.pk,this.encounterConnectionService.create(this.baseEncounterConnection).pipe(re()).subscribe(i=>{e.encounterConnections.push(i),this.resetBaseEncounterConnection(),this.inEncounterConnectionCreationState=!1},i=>this.warnings.showWarning(i))}deleteEncounterConnection(e,i){this.encounterConnectionService.delete(i.pk).pipe(re()).subscribe(r=>{const o=e.encounterConnections.indexOf(i);o>-1&&e.encounterConnections.splice(o,1)},r=>this.warnings.showWarning(r))}resetBaseEncounterConnection(){this.baseEncounterConnection=new Kv}}return t.\u0275fac=function(e){return new(e||t)(C(Yf),C(Hv),C(BN),C(mn),C(Ze),C(ce),C(Me),C(ke))},t.\u0275cmp=Y({type:t,selectors:[["app-encounter-accordion"]],inputs:{encounters:"encounters",articleCharacter:"articleCharacter"},features:[oe],decls:7,vars:4,consts:[[1,"row"],[1,"col"],[3,"tooltipMessage"],["class","encounter-list mb-5 mt-3",4,"ngIf","ngIfElse"],["EncounterForm",""],[1,"encounter-list","mb-5","mt-3"],[3,"closeOthers","animation","panelChange"],[3,"id",4,"ngFor","ngForOf"],[3,"id"],["ngbPanelTitle",""],["ngbPanelContent",""],[1,"d-flex","align-items-center","justify-content-between","panel-title"],[1,"encounter-title",3,"innerHTML"],[3,"ngClass"],[1,"btn","btn-secondary","float-right",3,"ngClass","click"],[1,"fa","fa-pencil"],[1,"mb-1"],[3,"initialText","heading","allowEdit","updateText"],[1,"white-line"],[1,"encounter-connections","d-inline-flex"],[1,"mr-4","tag-label"],[1,"d-inline-flex","align-items-center","flex-wrap"],["class","badge badge-secondary mr-2 p-2",4,"ngFor","ngForOf"],["class","d-flex align-items-center",3,"submit",4,"ngIf"],["class","fa icon mx-2 fa-plus fa-1-5x",3,"click",4,"ngIf"],[1,"col-md-9","float-right","px-0",3,"deleteMessage","deleteEvent"],[1,"badge","badge-secondary","mr-2","p-2"],[3,"routerLink"],["class","fa fa-trash icon ml-1",3,"click",4,"ngIf"],[1,"fa","fa-trash","icon","ml-1",3,"click"],[1,"d-flex","align-items-center",3,"submit"],["name","character","id","character",1,"form-control",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"fa","icon","mx-2","fa-times","fa-1-5x",3,"click"],["type","submit"],[1,"fa","icon","fa-check","fa-1-5x"],[3,"value"],[1,"fa","icon","mx-2","fa-plus","fa-1-5x",3,"click"],[1,"my-3","py-3","px-3","card"],[3,"innerHTML"],[3,"model","fields","formlySubmit","formlyCancel",4,"ngIf"],[3,"formlyFields","modelFromUser","modelFromServer","displayVertically","updateSubmit","cancel",4,"ngIf"],[3,"model","fields","formlySubmit","formlyCancel"],[3,"formlyFields","modelFromUser","modelFromServer","displayVertically","updateSubmit","cancel"]],template:function(e,i){if(1&e&&(p(0,"div",0),p(1,"h4",1),k(2),O(3,"app-tooltip-infocircle",2),f(),f(),S(4,Lee,3,3,"div",3),S(5,Vee,4,3,"ng-template",null,4,se)),2&e){const r=ie(6);g(2),Z(" ",i.encounters.length," Encounters "),g(1),v("tooltipMessage","List of all encounters with "+i.articleCharacter.name+". Starts with the most recent encounter and ends with the latest."),g(1),v("ngIf",i.isInDisplayState())("ngIfElse",r)}},directives:[$w,le,tv,je,Ef,X_,ev,Yt,El,Ic,Ht,Vr,Ur,Fo,Ro,Si,Us,as,ls,zn,br],styles:[".encounter-title[_ngcontent-%COMP%]{color:#fff;width:100%;font-size:18px}.encounter-connections[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-start;font-size:16px}.badge[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{border-bottom:none}.badge[_ngcontent-%COMP%]{background-color:var(--wiki-background-2)}.badge[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:var(--link-blue)!important}.badge[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{transition:display .2s;display:none}.badge[_ngcontent-%COMP%]:hover   .icon[_ngcontent-%COMP%]{display:inline}.encounter-connections[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{opacity:0;transition:opacity .2s}.encounter-connections[_ngcontent-%COMP%]:hover   .icon[_ngcontent-%COMP%]{opacity:1}.fa-check[_ngcontent-%COMP%]:hover{color:green}.fa-times[_ngcontent-%COMP%]:hover{color:red}.badge[_ngcontent-%COMP%]   .fa-trash[_ngcontent-%COMP%]:hover{color:red}#encounter-delete[_ngcontent-%COMP%]{background-color:var(--wiki-background-2)!important}.panel-title[_ngcontent-%COMP%]   .encounter-title[_ngcontent-%COMP%], .panel-title[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{transition:color .2s;color:#fff}.panel-title[_ngcontent-%COMP%]:hover   .encounter-title[_ngcontent-%COMP%], .panel-title[_ngcontent-%COMP%]:hover   .icon[_ngcontent-%COMP%]{color:gray}h4[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{opacity:0;transition:opacity .2s}h4[_ngcontent-%COMP%]:hover   .icon[_ngcontent-%COMP%]{opacity:1}.white-line[_ngcontent-%COMP%]{background-color:#fff}.tag-label[_ngcontent-%COMP%]{font-size:14px}.btn-secondary[_ngcontent-%COMP%]{background-color:var(--wiki-background-2)}.btn-outline-secondary[_ngcontent-%COMP%]{border-color:var(--wiki-background-2);color:#fff}.btn-outline-secondary[_ngcontent-%COMP%]:hover{background-color:var(--wiki-background-2)}.delete-request[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]{background-color:#393e41}"]}),t})();function Hee(t,n){if(1&t){const e=G();p(0,"a",5),A("click",function(){return h(e),b().onClick()}),k(1),f()}if(2&t){const e=b();xe("routerLink",e.link),g(1),Z(" ",e.label," ")}}function jee(t,n){if(1&t){const e=G();p(0,"app-delete-toggle",6),A("deleteEvent",function(){return h(e),b().onDelete()}),f()}2&t&&v("deleteMessage",b().deleteMessage)}function zee(t,n){if(1&t){const e=G();p(0,"a",7),A("click",function(){return h(e),b().onClick()}),k(1),f()}if(2&t){const e=b();g(1),Z(" ",e.label," ")}}let Ws=(()=>{class t{constructor(){this.showDelete=!0,this.buttonClick=new q,this.delete=new q}ngOnInit(){if(!this.label)throw"You did not provide a label for a grid-button"}onClick(){this.clickEmissionValue&&this.buttonClick.emit(this.clickEmissionValue),this.buttonClick.emit()}onDelete(){this.delete.emit()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Y({type:t,selectors:[["app-article-footer"]],inputs:{link:"link",label:"label",clickEmissionValue:"clickEmissionValue",deleteMessage:"deleteMessage",showDelete:"showDelete"},outputs:{buttonClick:"buttonClick",delete:"delete"},decls:6,vars:3,consts:[[1,"row"],[1,"col-md-3"],["class","btn btn-secondary w-100",3,"routerLink","click",4,"ngIf","ngIfElse"],["class","col-md-9 float-right",3,"deleteMessage","deleteEvent",4,"ngIf"],["nonLinkButton",""],[1,"btn","btn-secondary","w-100",3,"routerLink","click"],[1,"col-md-9","float-right",3,"deleteMessage","deleteEvent"],[1,"col-md-3","btn","btn-secondary",3,"click"]],template:function(e,i){if(1&e&&(p(0,"div",0),p(1,"div",1),S(2,Hee,2,2,"a",2),f(),S(3,jee,1,1,"app-delete-toggle",3),f(),S(4,zee,2,1,"ng-template",null,4,se)),2&e){const r=ie(5);g(2),v("ngIf",i.link)("ngIfElse",r),g(1),v("ngIf",i.showDelete)}},directives:[le,Ht,Ic],styles:[""]}),t})();const Gee=function(t,n){return{fa:!0,"fa-pencil":t,"fa-times":n}};function Wee(t,n){if(1&t&&(p(0,"a",1),O(1,"i",2),f()),2&t){const e=b();xe("routerLink",e.link),g(1),v("ngClass",Bn(2,Gee,!e.isInUpdateState,e.isInUpdateState))}}let On=(()=>{class t extends ji{constructor(e,i){super(i,e),this.link="update",this.isInUpdateState=!1}}return t.\u0275fac=function(e){return new(e||t)(C(Me),C(ke))},t.\u0275cmp=Y({type:t,selectors:[["app-edit-toggle"]],inputs:{link:"link",isInUpdateState:"isInUpdateState"},features:[oe],decls:1,vars:1,consts:[["class","btn btn-secondary float-right",3,"routerLink",4,"ngIf"],[1,"btn","btn-secondary","float-right",3,"routerLink"],["id","edit-article",3,"ngClass"]],template:function(e,i){1&e&&S(0,Wee,2,5,"a",0),2&e&&v("ngIf",i.hasUpdatePermission)},directives:[le,Ht,Yt],styles:[""]}),t})();function qee(t,n){1&t&&(p(0,"div",4),p(1,"div",18),O(2,"app-edit-toggle",19),f(),f()),2&t&&(g(2),v("isInUpdateState",!1)("link","update"))}function Qee(t,n){if(1&t&&(p(0,"span"),k(1),f()),2&t){const e=b();g(1),Z("",e.articleData.title," - ")}}function Zee(t,n){1&t&&(p(0,"span"),k(1," (\u2020) "),f())}function Kee(t,n){if(1&t&&(p(0,"span"),k(1),f()),2&t){const e=b();g(1),Le(e.articleData.gender)}}function Yee(t,n){if(1&t&&(Vt(0),p(1,"div",4),p(2,"div",8),k(3),p(4,"a",21),p(5,"strong"),k(6),f(),f(),f(),f(),Bt()),2&t){const e=n.$implicit,i=n.index,r=b(2);g(3),Z(" ",e.role," of "),g(1),xe("routerLink",r.organizationUrls[i]),g(2),Le(e.name)}}function Jee(t,n){if(1&t&&(Vt(0),S(1,Yee,7,3,"ng-container",20),Bt()),2&t){const e=b();g(1),v("ngForOf",e.articleData.organizations)}}function Xee(t,n){if(1&t&&(p(0,"div",8),k(1," Last known location: "),p(2,"a",21),p(3,"strong"),k(4),f(),f(),f()),2&t){const e=b();g(2),xe("routerLink",e.locationUrl),g(2),Z(" ",e.articleData.current_location_details.name," ")}}let ete=(()=>{class t extends Hs{constructor(e,i,r,o,s,l){super(e,i,o,r,s,l),this.route=i,this.warnings=r,this.routing=o,this.deleteRoute={routeName:"character-overview",params:{campaign:null}},this.queryParameterName="name",this.quoteCreateState=!1}ngOnInit(){super.ngOnInit(),this.articleData.items.sort((e,i)=>e.name>i.name?1:-1)}updateDynamicVariables(e,i,r){this.updateRouteLinks(e,i,r),this.playerClassString=this.createPlayerClassString(i)}updateRouteLinks(e,i,r){var o,s;this.characterOverviewUrl=this.routing.getRoutePath("character-overview",{campaign:e.name}),this.itemCreateUrl=this.routing.getRoutePath("item-character-create",{character_name:i.name,campaign:e.name}),this.locationUrl=this.routing.getRoutePath("location",{name:null===(o=i.current_location_details)||void 0===o?void 0:o.name,parent_name:null===(s=i.current_location_details)||void 0===s?void 0:s.parent_location,campaign:e.name}),this.organizationUrls=i.organizations.map(l=>this.routing.getRoutePath("organization",{name:l.name,campaign:e.name}))}createPlayerClassString(e){return e.player_class_connections.map(i=>i.player_class_details.name).join(", ")}}return t.\u0275fac=function(e){return new(e||t)(C(ir),C(Me),C(Ze),C(ce),C($e),C(ke))},t.\u0275cmp=Y({type:t,selectors:[["app-character-article"]],features:[oe],decls:26,vars:26,consts:[[1,"main"],["article",""],[1,"container"],["class","row",4,"ngIf"],[1,"row"],[1,"text-center","subheading","col"],[4,"ngIf"],[1,"text-center","mb-3","subheading"],[1,"col"],["class","col",4,"ngIf"],[3,"article_type","article_pk","images"],[1,"mb-3"],[3,"character","campaign"],[1,"mb-5"],[3,"initialText","heading","formStateSubject","updateText"],[3,"articleType","createLink","heading","items"],[3,"encounters","articleCharacter"],[3,"link","label","deleteMessage","delete"],[1,"col-12"],[3,"isInUpdateState","link"],[4,"ngFor","ngForOf"],[3,"routerLink"]],template:function(e,i){1&e&&(p(0,"div",0,1),p(2,"article",2),S(3,qee,3,2,"div",3),p(4,"div",4),p(5,"h1",5),S(6,Qee,2,1,"span",6),k(7),S(8,Zee,2,0,"span",6),f(),f(),p(9,"div",7),p(10,"div",4),p(11,"div",8),S(12,Kee,2,1,"span",6),k(13),f(),f(),S(14,Jee,2,1,"ng-container",6),p(15,"div",4),S(16,Xee,5,2,"div",9),f(),f(),O(17,"app-image-carousel",10),p(18,"div",11),O(19,"app-quote-gallery",12),f(),p(20,"div",13),p(21,"app-textfield",14),A("updateText",function(o){return i.onDescriptionUpdate(o)}),f(),f(),p(22,"div",13),O(23,"app-object-list",15),f(),O(24,"app-encounter-accordion",16),p(25,"app-article-footer",17),A("delete",function(){return i.deleteArticle()}),f(),f(),f()),2&e&&(g(3),v("ngIf",i.hasUpdatePermission),g(3),v("ngIf",i.articleData.title),g(1),Z(" ",i.articleData.name," "),g(1),v("ngIf",!i.articleData.alive),g(4),v("ngIf","Other"!==i.articleData.gender),g(1),uc(" ",i.articleData.race," ",i.playerClassString," "),g(1),v("ngIf",(null==i.articleData.organizations?null:i.articleData.organizations.length)>0),g(2),v("ngIf",i.articleData.current_location),g(1),v("article_type","character")("article_pk",i.articleData.pk)("images",i.articleData.images),g(2),v("character",i.articleData)("campaign",i.campaign),g(2),v("initialText",i.articleData.description)("heading","Description")("formStateSubject",i.textfieldFormStateSubject),g(2),v("articleType","item")("createLink",i.itemCreateUrl)("heading","Items of Note")("items",i.articleData.items),g(1),v("encounters",i.articleData.encounters)("articleCharacter",i.articleData),g(1),v("link",i.characterOverviewUrl)("label","Back to Characters")("deleteMessage","Delete "+i.articleData.name+"?"))},directives:[le,im,lee,El,Lw,Bee,Ws,On,je,Ht],styles:[""]}),t})();const tte=function(t,n){return{"fa float-right icon":!0,"fa-chevron-down":t,"fa-chevron-up":n}};function nte(t,n){if(1&t&&(p(0,"span",6),p(1,"a",7),k(2),f(),f(),O(3,"i",8)),2&t){const e=b(),i=e.index,r=e.$implicit,o=b();g(1),xe("routerLink",o.locationUrls[i]),g(1),Z(" ",r.name," "),g(1),v("ngClass",Bn(3,tte,!o.panelIsOpen(i),o.panelIsOpen(i)))}}function ite(t,n){if(1&t&&(p(0,"span",16),p(1,"a",7),k(2),f(),f()),2&t){const e=n.$implicit,i=n.index,r=b(3).index,o=b();g(1),xe("routerLink",o.locationCharacterUrls[r][i]),g(1),Z(" ",e.name," ")}}function rte(t,n){if(1&t&&(p(0,"div",12),p(1,"span",13),k(2," Characters: "),f(),p(3,"span",14),S(4,ite,3,2,"span",15),f(),f()),2&t){const e=b(2).$implicit;g(4),v("ngForOf",e.characters)}}function ote(t,n){if(1&t){const e=G();p(0,"div",9),p(1,"app-textfield",10),A("updateText",function(r){h(e);const o=b().index;return b().onSublocationUpdate(r,o)}),f(),f(),S(2,rte,5,1,"div",11)}if(2&t){const e=b(),i=e.$implicit,r=e.index,o=b();g(1),v("initialText",i.description)("heading",i.name)("formStateSubject",o.sublocationDescriptionFormStates[r]),g(1),v("ngIf",i.characters.length>0)}}function ste(t,n){1&t&&(p(0,"ngb-panel",3),S(1,nte,4,6,"ng-template",4),S(2,ote,3,4,"ng-template",5),f()),2&t&&Po("id","static-",n.index,"")}const ate=function(t){return{"d-none":t}};let lte=(()=>{class t extends ji{constructor(e,i,r,o,s){super(s,o),this.locationService=e,this.warnings=i,this.routingService=r,this.constants=$,this.campaignName=this.route.snapshot.params.campaign,this.sublocationDescriptionFormStates=[]}ngOnInit(){this.isOpen={},this.locationCharacterUrls=[],this.sublocations.forEach((e,i)=>{this.isOpen[`static-${i}`]=!1;const o=new ln($.displayState);this.sublocationDescriptionFormStates.push(o);const l=e.characters.map(c=>this.routingService.getRoutePath("character",{name:c.name,campaign:this.campaignName}));this.locationCharacterUrls.push(l)}),this.locationUrls=this.sublocations.map(e=>this.routingService.getRoutePath("location",{name:e.name,parent_name:e.parent_location_details.name,campaign:this.campaignName}))}onSublocationUpdate(e,i){const r=this.sublocations[i];r.description=e,this.locationService.update(r.pk,r).pipe(re()).subscribe(s=>{},s=>this.onDescriptionUpdateError(s,i))}onPanelChange({panelId:e}){for(const i in this.isOpen)this.isOpen[i]=!(i!==e||this.isOpen[i])}panelIsOpen(e){return this.isOpen[`static-${e}`]}onDescriptionUpdateError(e,i){if(409===(null==e?void 0:e.status)){const s=new Mu(e.error);this.sublocations[i]=s,this.sublocationDescriptionFormStates[i].next($.outdatedUpdateState)}else this.warnings.showWarning(e)}}return t.\u0275fac=function(e){return new(e||t)(C(wl),C(Ze),C(ce),C(Me),C(ke))},t.\u0275cmp=Y({type:t,selectors:[["app-location-accordion"]],inputs:{sublocations:"sublocations"},features:[oe],decls:5,vars:5,consts:[["routerLink","create",1,"fa","fa-plus","icon","ml-1",3,"ngClass"],[3,"closeOthers","panelChange"],[3,"id",4,"ngFor","ngForOf"],[3,"id"],["ngbPanelTitle","","class","button-container"],["ngbPanelContent",""],[1,"location-title"],[3,"routerLink"],[3,"ngClass"],[1,"mb-4"],[3,"initialText","heading","formStateSubject","updateText"],["class","location-character mb-1",4,"ngIf"],[1,"location-character","mb-1"],[1,"mr-4"],[1,"d-inline-flex","align-items-center","flex-wrap"],["class","badge badge-secondary mr-2 p-1 mb-1",4,"ngFor","ngForOf"],[1,"badge","badge-secondary","mr-2","p-1","mb-1"]],template:function(e,i){1&e&&(p(0,"h4"),k(1,"Locations of Interest "),O(2,"i",0),f(),p(3,"ngb-accordion",1),A("panelChange",function(o){return i.onPanelChange(o)}),S(4,ste,3,1,"ngb-panel",2),f()),2&e&&(g(2),v("ngClass",ht(3,ate,!i.hasCreatePermission)),g(1),v("closeOthers",!0),g(1),v("ngForOf",i.sublocations))},directives:[us,Yt,tv,je,Ef,X_,ev,Ht,El,le],styles:[".location-title[_ngcontent-%COMP%]{color:#fff;width:100%;font-size:18px;border-bottom:dotted 2px gray}.location-title[_ngcontent-%COMP%]:hover{border-bottom:solid 2px gray}.location-character[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-start}.badge[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{border-bottom:none}.badge[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:var(--link-blue)}.badge-secondary[_ngcontent-%COMP%]{background-color:#1b1f22}"]}),t})();function cte(t,n){1&t&&(p(0,"div",4),p(1,"div",18),O(2,"app-edit-toggle",19),f(),f()),2&t&&(g(2),v("isInUpdateState",!1)("link","update"))}function ute(t,n){if(1&t&&(p(0,"span"),p(1,"a",22),k(2),f(),O(3,"i",23),f()),2&t){const e=n.$implicit,i=n.index,r=b(2);g(1),xe("routerLink",r.parentLocationUrls[i]),g(1),Z(" ",e," ")}}function dte(t,n){if(1&t&&(p(0,"p",20),S(1,ute,4,2,"span",21),k(2),f()),2&t){const e=b();g(1),v("ngForOf",e.articleData.parent_location_list),g(1),Z(" ",e.articleData.name," ")}}function hte(t,n){if(1&t&&(p(0,"a",24),k(1),O(2,"i"),f()),2&t){const e=n.$implicit,i=n.index;xe("routerLink",b().markerUrls[i]),g(1),Z(" ",e.map," "),g(1),Is("mx-1 icon fas fa-",e.map_icon,"")}}function pte(t,n){if(1&t&&O(0,"app-inline-create-button",25),2&t){const e=b();v("labelText","Add Marker")("link",e.markerCreateUrl)}}let fte=(()=>{class t extends Hs{constructor(e,i,r,o,s,l){super(e,i,o,r,s,l),this.route=i,this.warnings=r,this.routingService=o,this.deleteRoute={routeName:"location-overview",params:{campaign:null}}}updateDynamicVariables(e,i,r){this.markerCreateUrl=this.routingService.getRoutePath("marker-create",{parent_location_name:i.parent_location_details.name,location_name:i.name,campaign:e.name}),this.parentLocationUrls=i.parent_location_list.map(o=>this.buildLocationUrl(o,i.parent_location_list)),this.markerUrls=i.marker_details.map(o=>this.routingService.getRoutePath("marker",{parent_location_name:i.parent_location_details.name,location_name:i.name,map_name:o.map,campaign:e.name})),this.characterCreateUrl=this.routingService.getRoutePath("character-create",{campaign:e.name}),this.locationOverviewUrl=this.routingService.getRoutePath("location-overview",{campaign:e.name})}getQueryParameter(e){return{locationName:e.name,parentLocationName:e.parent_name?e.parent_name:"None"}}buildLocationUrl(e,i){if(!i)throw"Tried building a route to a location in parent_location_list when there is no parent_location_list";const r=i.indexOf(e);return this.routingService.getRoutePath("location",{parent_name:r>=0?"None":i[r-1],name:e,campaign:this.campaign.name})}}return t.\u0275fac=function(e){return new(e||t)(C(wl),C(Me),C(Ze),C(ce),C($e),C(ke))},t.\u0275cmp=Y({type:t,selectors:[["app-location-article"]],features:[oe],decls:21,vars:19,consts:[[1,"main"],["article",""],[1,"container"],["class","row",4,"ngIf"],[1,"row"],[1,"text-center","col-12"],["class","text-center font-italic col-12 mb-5",4,"ngIf"],[3,"article_type","article_pk","images"],[1,"mb-3"],["class","badge badge-secondary p-2 mx-2 no-underline",3,"routerLink",4,"ngFor","ngForOf"],[3,"labelText","link",4,"ngIf"],[1,"mb-5"],[3,"initialText","heading","formStateSubject","updateText"],[1,"mb-4"],[3,"heading","items","articleType","createLink"],[1,"encounter-list","mb-5","mt-3"],[3,"sublocations"],[3,"link","label","deleteMessage","delete"],[1,"col-12"],[3,"isInUpdateState","link"],[1,"text-center","font-italic","col-12","mb-5"],[4,"ngFor","ngForOf"],[3,"routerLink"],[1,"fa","fa-arrow-right","mx-1"],[1,"badge","badge-secondary","p-2","mx-2","no-underline",3,"routerLink"],[3,"labelText","link"]],template:function(e,i){1&e&&(p(0,"div",0,1),p(2,"article",2),S(3,cte,3,2,"div",3),p(4,"div",4),p(5,"h1",5),k(6),f(),S(7,dte,3,2,"p",6),f(),O(8,"app-image-carousel",7),p(9,"div",8),p(10,"i"),k(11," Marked on Maps:"),f(),S(12,hte,3,5,"a",9),S(13,pte,1,2,"app-inline-create-button",10),f(),p(14,"div",11),p(15,"app-textfield",12),A("updateText",function(o){return i.onDescriptionUpdate(o)}),f(),f(),p(16,"div",13),O(17,"app-object-list",14),f(),p(18,"div",15),O(19,"app-location-accordion",16),f(),p(20,"app-article-footer",17),A("delete",function(){return i.deleteArticle()}),f(),f(),f()),2&e&&(g(3),v("ngIf",i.hasUpdatePermission),g(3),Z(" ",i.articleData.name," "),g(1),v("ngIf",i.articleData.parent_location_list.length>0),g(1),v("article_type","location")("article_pk",i.articleData.pk)("images",i.articleData.images),g(4),v("ngForOf",i.articleData.marker_details),g(1),v("ngIf",i.hasCreatePermission),g(2),v("initialText",i.articleData.description)("heading","Description")("formStateSubject",i.textfieldFormStateSubject),g(2),v("heading","Characters of Interest")("items",i.articleData.characters)("articleType","character")("createLink",i.characterCreateUrl),g(2),v("sublocations",i.articleData.sublocations),g(1),v("link",i.locationOverviewUrl)("label","Back to Locations")("deleteMessage","Delete "+i.articleData.name+"?"))},directives:[le,im,je,El,Lw,lte,Ws,On,Ht,rm],styles:["h4[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%], h1[_ngcontent-%COMP%]   .icon.fa-plus[_ngcontent-%COMP%]{opacity:0;transition:opacity .2s}h4[_ngcontent-%COMP%]:hover   .icon[_ngcontent-%COMP%], h1[_ngcontent-%COMP%]:hover   .icon.fa-plus[_ngcontent-%COMP%]{opacity:1}"]}),t})(),Yv=(()=>{class t extends ji{constructor(e,i,r,o){super(o,r),this.warnings=e,this.articleService=i,this.constants=$,this.isOpen=!1,this.validFormStates=[$.displayState,$.createState,$.updateState,$.deleteState,$.outdatedUpdateState]}ngOnInit(){this.determineCardStateOnInit(),this.formlyFields=this.getFormlyFieldConfigurations(this.campaign),this.isInCreateState()&&(this.isOpen=!0,this.createUserModel()),this.updateDynamicVariables(this.campaign,this.cardData,this.route.snapshot.params)}updateDynamicVariables(e,i,r){}determineCardStateOnInit(){this.formState=null==this.cardData.pk?this.constants.createState:this.constants.displayState}getFormlyFieldConfigurations(e){return this.formlyFields}createUserModel(){this.userModel=new this.userModelClass,this.userModel.campaign=this.campaign.pk}isInCreateState(){return this.formState===$.createState}isInUpdateState(){return this.formState===$.updateState}isInOutdatedUpdateState(){return this.formState===$.outdatedUpdateState}isInDisplayState(){return this.formState===$.displayState}toggleEditState(){this.formState=this.isInDisplayState()?$.updateState:$.displayState,this.isInUpdateState()&&this.resetModel()}toggleFormState(){this.isInDisplayState()?(this.formState=$.updateState,this.resetModel()):this.isInUpdateState()||this.isInOutdatedUpdateState()?this.formState=$.displayState:this.isInCreateState()&&this.removeCard(this)}resetModel(){this.userModel=JSON.parse(JSON.stringify(this.cardData))}toggleCreateState(){this.formState=this.isInDisplayState()?$.createState:$.displayState}toggleCard(){this.isOpen=!this.isOpen}onSubmit(){this.isInUpdateState()||this.isInOutdatedUpdateState()?this.articleUpdate(this.userModel):this.isInCreateState()&&this.articleCreate(this.userModel)}articleUpdate(e){if(null==e.pk)throw"Invalid userModel Exception. The userModel provided here does not have a primary\n        key defined. This primary key is necessary to update the correct article in the database. Please contact the developer";const i=this;this.articleService.update(e.pk,e).pipe(re()).subscribe(r=>this.onUpdateSuccess(r,i),r=>this.onUpdateError(r,i))}articleCreate(e){const i=this;this.articleService.create(e).pipe(re()).subscribe(r=>this.onCreationSuccess(r,i),r=>this.onCreationError(r,i))}articleDelete(e){const i=this;this.articleService.delete(e.pk).pipe(re()).subscribe(r=>this.onDeletionSuccess(r,i),r=>this.onDeletionError(r,i))}onUpdateSuccess(e,i){i.cardData=e,i.formState=$.displayState}onUpdateError(e,i){i.baseErrorCallback(e)}onCreationSuccess(e,i){i.cardData=e,i.formState=$.displayState}onCreationError(e,i){i.baseErrorCallback(e)}onDeletionSuccess(e,i){i.removeCard(i)}onDeletionError(e,i){i.baseErrorCallback(e)}baseErrorCallback(e){409===(null==e?void 0:e.status)?(this.serverModel=e.error,this.formState=$.outdatedUpdateState):(this.warnings.showWarning(e),this.formState=$.displayState)}onCancel(e){(e=null==this.cardData?e:this).isInCreateState()?e.removeCard(e):e.formState=$.displayState}removeCard(e){hi(e.card.nativeElement,"fadeOutDown").then(()=>e.cardDelete.emit(e.index))}}return t.\u0275fac=function(e){Ud()},t.\u0275dir=te({type:t,inputs:{isOpen:"isOpen",cardData:"cardData",index:"index",campaign:"campaign"},outputs:{cardDelete:"cardDelete"},features:[oe]}),t})();const mte=["card"];function gte(t,n){if(1&t&&(p(0,"a",22),k(1),f()),2&t){const e=b(3);xe("routerLink",e.cardData.getAbsoluteLocationRouterUrl()),g(1),Z(" ",e.cardData.location_details.name," ")}}function _te(t,n){if(1&t&&(p(0,"i",3),p(1,"span",19),k(2,"Location:"),f(),p(3,"span",20),S(4,gte,2,2,"a",21),f(),f()),2&t){const e=b(2);g(4),v("ngIf",e.cardData.location_details)}}function vte(t,n){if(1&t){const e=G();p(0,"app-textfield",23),A("updateText",function(r){return h(e),b(2).onSubmit(r)}),f()}2&t&&v("initialText",b(2).cardData.description)("allowEdit",!1)}function yte(t,n){if(1&t){const e=G();p(0,"app-formly-formcontainer",24),A("formlySubmit",function(){return h(e),b(2).onSubmit()})("formlyCancel",function(){return h(e),b(2).onCancel()}),f()}if(2&t){const e=b(2);v("model",e.userModel)("fields",e.formlyFields)}}function bte(t,n){if(1&t){const e=G();p(0,"app-compare-form-container",25),A("updateSubmit",function(){return h(e),b(2).onSubmit()})("cancel",function(){return h(e),b(2).onCancel()}),f()}if(2&t){const e=b(2);v("formlyFields",e.formlyFields)("modelFromUser",e.userModel)("modelFromServer",e.serverModel)("displayVertically",!0)}}function Cte(t,n){1&t&&O(0,"hr",26)}function wte(t,n){if(1&t){const e=G();p(0,"i",35),A("click",function(){h(e);const r=b().$implicit,o=b(3);return o.deleteEncounterConnection(o.cardData,r)}),f()}}function Ste(t,n){if(1&t&&(p(0,"span",33),p(1,"a",22),k(2),f(),S(3,wte,1,0,"i",34),f()),2&t){const e=n.$implicit,i=n.index,r=b(3);g(1),xe("routerLink",r.connectedCharacterUrls[i]),g(1),Z(" ",e.character_details.name," "),g(1),v("ngIf",r.hasDeletePermission)}}function Tte(t,n){if(1&t&&(p(0,"option",42),k(1),f()),2&t){const e=n.$implicit;xe("value",e.pk),g(1),Z(" ",e.name," ")}}function Ete(t,n){if(1&t){const e=G();p(0,"form",36),A("submit",function(){h(e);const r=b(3);return r.createEncounterConnection(r.cardData)}),p(1,"select",37),A("ngModelChange",function(r){return h(e),b(3).baseEncounterConnection.character=r}),S(2,Tte,2,2,"option",38),f(),p(3,"i",39),A("click",function(){return h(e),b(3).toggleEncounterConnectionCreationState()}),f(),p(4,"button",40),O(5,"i",41),f(),f()}if(2&t){const e=b(3);g(1),v("ngModel",e.baseEncounterConnection.character),g(1),v("ngForOf",e.characterOptions)}}function kte(t,n){if(1&t){const e=G();p(0,"app-inline-create-button",43),A("click",function(){return h(e),b(3).toggleEncounterConnectionCreationState()}),f()}2&t&&v("labelText","Add Character")}function Dte(t,n){if(1&t&&(p(0,"div",27),p(1,"span",28),k(2," Characters: "),f(),p(3,"div",29),S(4,Ste,4,3,"span",30),S(5,Ete,6,2,"form",31),S(6,kte,1,1,"app-inline-create-button",32),f(),f()),2&t){const e=b(2);g(4),v("ngForOf",e.cardData.encounterConnections),g(1),v("ngIf",e.inEncounterConnectionCreationState),g(1),v("ngIf",e.hasCreatePermission&&!e.inEncounterConnectionCreationState)}}function xte(t,n){if(1&t){const e=G();p(0,"app-delete-toggle",44),A("deleteEvent",function(){h(e);const r=b(2);return r.articleDelete(r.cardData)}),f()}2&t&&v("deleteMessage","Delete this encounter?")}function Mte(t,n){if(1&t){const e=G();p(0,"div",45),p(1,"i",46),A("click",function(){return h(e),b(2).decreaseEncounterOrderIndex()}),f(),p(2,"i",47),A("click",function(){return h(e),b(2).increaseEncounterOrderIndex()}),f(),f()}}const Ite=function(t,n,e){return{"highlight encounter":t,"mb-3":n,isBeingCutOut:e}},Pte=function(t,n){return{"d-none":t,"d-flex":n}},Ate=function(t,n){return{"fa-pencil":t,"fa-times":n}},Ote=function(t){return{"d-none":t}},Nte=function(t,n){return{"col-sm-11 pr-2":t,"col-12":n}};function Fte(t,n){if(1&t){const e=G();p(0,"div",1,2),p(2,"div",3),p(3,"h4",4),k(4),p(5,"div",5),p(6,"div",6),A("click",function(){return h(e),b().toggleCutState()}),O(7,"i",7),f(),p(8,"div",8),A("click",function(){return h(e),b().toggleFormState()}),O(9,"i",9),f(),f(),f(),p(10,"div",1),S(11,_te,5,1,"i",10),f(),f(),p(12,"div",3),p(13,"div",11),S(14,vte,1,2,"app-textfield",12),S(15,yte,1,2,"app-formly-formcontainer",13),S(16,bte,1,4,"app-compare-form-container",14),S(17,Cte,1,0,"hr",15),S(18,Dte,7,3,"div",16),S(19,xte,1,1,"app-delete-toggle",17),f(),S(20,Mte,3,0,"div",18),f(),f()}if(2&t){const e=b();v("ngClass",au(14,Ite,!e.diaryEntryView,e.diaryEntryView,e.cutEncounterIndex===e.index)),g(4),Z(" ",e.cardData.title," "),g(1),v("ngClass",Bn(18,Pte,e.hasUpdatePermission||e.diaryEntryView,e.hasUpdatePermission&&!e.diaryEntryView)),g(4),v("ngClass",Bn(21,Ate,e.isInDisplayState(),!e.isInDisplayState())),g(1),v("ngClass",ht(24,Ote,e.diaryEntryView)),g(1),v("ngIf",!e.isInCreateState()),g(2),v("ngClass",Bn(26,Nte,!e.diaryEntryView,e.diaryEntryView)),g(1),v("ngIf",e.isInDisplayState()),g(1),v("ngIf",e.isInCreateState()||e.isInUpdateState()),g(1),v("ngIf",e.isInOutdatedUpdateState()),g(1),v("ngIf",!e.diaryEntryView&&!e.isInCreateState()),g(1),v("ngIf",!e.diaryEntryView&&!e.isInCreateState()),g(1),v("ngIf",!e.diaryEntryView),g(1),v("ngIf",!e.diaryEntryView)}}let Rte=(()=>{class t extends Yv{constructor(e,i,r,o,s,l,c,d){super(i,e,c,d),this.encounterService=e,this.warning=i,this.routingService=r,this.characterService=o,this.encounterConnectionService=s,this.formlyService=l,this.userModelClass=js,this.cardDelete=new q,this.formlyFields=[],this.encounterOrderIncrease=new q,this.encounterOrderDecrease=new q,this.cardCreate=new q,this.excisionStart=new q,this.excisionCancel=new q,this.inEncounterConnectionCreationState=!1,this.baseEncounterConnection=new Kv}updateDynamicVariables(e,i,r){this.connectedCharacterUrls=i.encounterConnections.map(o=>this.routingService.getRoutePath("character",{name:o.character_details.name,campaign:e.name}))}getFormlyFieldConfigurations(e){return[this.formlyService.genericInput({key:"title"}),this.formlyService.genericSelect({key:"location",label:"Encounter Location",sortProp:"name_full",overviewType:Ie.Location,required:!1,campaign:e.name}),this.formlyService.genericTextField({key:"description",required:!0})]}createUserModel(){this.userModel=new js,this.userModel.campaign=this.campaign.pk,this.userModel.diaryentry=this.cardData.diaryentry,this.userModel.order_index=this.cardData.nextOrderIndex()}onCreationSuccess(e,i){super.onCreationSuccess(e,i),this.cardCreate.emit(e)}onDeletionSuccess(e,i){super.onDeletionSuccess(e,i),this.cardDelete.emit(this.index)}toggleCutState(){this.cutEncounterIndex===this.index?this.excisionCancel.emit():this.excisionStart.emit()}increaseEncounterOrderIndex(){this.encounterOrderIncrease.emit(this.index)}decreaseEncounterOrderIndex(){this.encounterOrderDecrease.emit(this.index)}articleCreate(e){const i=this;this.encounterService.createForDiaryentry(this.campaign.name,e).subscribe(r=>this.onCreationSuccess(r,i),r=>this.onCreationError(r,i))}toggleEncounterConnectionCreationState(){this.inEncounterConnectionCreationState=!this.inEncounterConnectionCreationState,this.characterOptions||this.characterService.getNonPlayerCharacters(this.campaign.name).pipe(re()).subscribe(e=>this.characterOptions=e,e=>this.warning.showWarning(e))}createEncounterConnection(e){this.baseEncounterConnection.encounter=e.pk,this.baseEncounterConnection.campaign=this.campaign.pk,this.encounterConnectionService.create(this.baseEncounterConnection).pipe(re()).subscribe(i=>{e.encounterConnections.push(i),this.resetBaseEncounterConnection(),this.inEncounterConnectionCreationState=!1},i=>this.warning.showWarning(i))}deleteEncounterConnection(e,i){this.encounterConnectionService.delete(i.pk).pipe(re()).subscribe(r=>{const o=e.encounterConnections.indexOf(i);o>-1&&e.encounterConnections.splice(o,1)},r=>this.warning.showWarning(r))}resetBaseEncounterConnection(){this.baseEncounterConnection=new Kv}}return t.\u0275fac=function(e){return new(e||t)(C(Hv),C(Ze),C(ce),C(ir),C(BN),C(mn),C(Me),C(ke))},t.\u0275cmp=Y({type:t,selectors:[["app-diary-entry-encounter"]],viewQuery:function(e,i){if(1&e&&pt(mte,5),2&e){let r;ye(r=be())&&(i.card=r.first)}},inputs:{diaryEntryView:"diaryEntryView",cutEncounterIndex:"cutEncounterIndex"},outputs:{encounterOrderIncrease:"encounterOrderIncrease",encounterOrderDecrease:"encounterOrderDecrease",cardCreate:"cardCreate",excisionStart:"excisionStart",excisionCancel:"excisionCancel"},features:[oe],decls:1,vars:1,consts:[["class","container",3,"ngClass",4,"ngIf"],[1,"container",3,"ngClass"],["card",""],[1,"row"],[1,"heading","col-12"],[1,"float-right","flex-row",3,"ngClass"],["title","Cut Encounter",1,"btn","btn-secondary","encounter-hidden","mr-2",3,"click"],[1,"fas","fa-cut"],[1,"btn","btn-secondary","encounter-hidden",3,"click"],[1,"fa",3,"ngClass"],["class","row",4,"ngIf"],[3,"ngClass"],[3,"initialText","allowEdit","updateText",4,"ngIf"],[3,"model","fields","formlySubmit","formlyCancel",4,"ngIf"],["class","d-flex justify-content-center",3,"formlyFields","modelFromUser","modelFromServer","displayVertically","updateSubmit","cancel",4,"ngIf"],["class","white-line mt-4",4,"ngIf"],["class","encounter-connections d-flex align-items-center",4,"ngIf"],["class","float-right px-0",3,"deleteMessage","deleteEvent",4,"ngIf"],["class","\n        d-flex\n        flex-column\n        order-arrows\n        justify-content-start\n        align-items-end\n        col-sm-1\n      ",4,"ngIf"],[1,"col-2"],[1,"col-10"],[3,"routerLink",4,"ngIf"],[3,"routerLink"],[3,"initialText","allowEdit","updateText"],[3,"model","fields","formlySubmit","formlyCancel"],[1,"d-flex","justify-content-center",3,"formlyFields","modelFromUser","modelFromServer","displayVertically","updateSubmit","cancel"],[1,"white-line","mt-4"],[1,"encounter-connections","d-flex","align-items-center"],[1,"mr-4","tag-label"],[1,"d-inline-flex","align-items-center","flex-wrap"],["class","badge badge-secondary p-2 mr-2",4,"ngFor","ngForOf"],["class","d-flex align-items-center",3,"submit",4,"ngIf"],[3,"labelText","click",4,"ngIf"],[1,"badge","badge-secondary","p-2","mr-2"],["class","fa fa-trash icon ml-1",3,"click",4,"ngIf"],[1,"fa","fa-trash","icon","ml-1",3,"click"],[1,"d-flex","align-items-center",3,"submit"],["name","character","id","character",1,"form-control",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"fa","icon","mx-2","fa-times","fa-1-5x",3,"click"],["type","submit",1,"mx-2"],[1,"fa","icon","fa-check","fa-1-5x"],[3,"value"],[3,"labelText","click"],[1,"float-right","px-0",3,"deleteMessage","deleteEvent"],[1,"d-flex","flex-column","order-arrows","justify-content-start","align-items-end","col-sm-1"],[1,"fa","fa-3x","my-2","icon","fa-long-arrow-up",3,"click"],[1,"fa","fa-3x","my-2","icon","fa-long-arrow-down",3,"click"]],template:function(e,i){1&e&&S(0,Fte,21,29,"div",0),2&e&&v("ngIf",i.campaign)},directives:[le,Yt,Ht,El,zn,br,je,Vr,Ur,Fo,Ro,Si,Us,as,ls,rm,Ic],styles:[".heading[_ngcontent-%COMP%]{margin-bottom:0}.encounter[_ngcontent-%COMP%]{padding-top:1.5rem;padding-bottom:1.5rem}.encounter[_ngcontent-%COMP%]   .encounter-hidden[_ngcontent-%COMP%]{display:block}.encounter-connections[_ngcontent-%COMP%]{flex-direction:row;justify-content:flex-start;font-size:16px;padding-bottom:1rem}.badge[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{border-bottom:none}.badge-secondary[_ngcontent-%COMP%]{background-color:var(--wiki-background-2)}.badge[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:var(--link-blue)}.badge[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{transition:display .2s;display:none}.badge[_ngcontent-%COMP%]:hover   .icon[_ngcontent-%COMP%]{display:inline}.fa-check[_ngcontent-%COMP%]:hover{color:green}.fa-times[_ngcontent-%COMP%]:hover{color:red}.badge[_ngcontent-%COMP%]   .fa-trash[_ngcontent-%COMP%]:hover{color:red}.white-line[_ngcontent-%COMP%]{background-color:#fff;margin:.3rem 0}.tag-label[_ngcontent-%COMP%]{font-size:14px}.btn-secondary[_ngcontent-%COMP%]{background-color:var(--wiki-background-2)}.btn-outline-secondary[_ngcontent-%COMP%]{border-color:var(--wiki-background-2);color:#fff}.btn-outline-secondary[_ngcontent-%COMP%]:hover{background-color:var(--wiki-background-2)}.delete-request[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]{background-color:#393e41}.order-arrows[_ngcontent-%COMP%]   .fa[_ngcontent-%COMP%]{border-color:#393e41;background-color:var(--wiki-background-2);border-radius:.25rem;padding:.33rem .5rem}.encounter[_ngcontent-%COMP%]   .order-arrows[_ngcontent-%COMP%]   .fa[_ngcontent-%COMP%]{display:inline-block}.isBeingCutOut[_ngcontent-%COMP%]{opacity:.5}@media (max-width: 768px){.edit-image-buttons[_ngcontent-%COMP%]{opacity:1}}@media (max-width: 576px){div.order-arrows.flex-column[_ngcontent-%COMP%]{flex-direction:row!important}div.order-arrows.justify-content-start[_ngcontent-%COMP%]{justify-content:center!important}div.order-arrows[_ngcontent-%COMP%]   .fa[_ngcontent-%COMP%]{margin:0 2rem}}"]}),t})();const Lte=["encounters"],jN=function(t){return{disabled:t}};function $te(t,n){if(1&t){const e=G();p(0,"div",4),p(1,"div",5),A("click",function(){return h(e),b().toggleEncounterCreateState(-1)}),O(2,"i",6),k(3," Add First Encounter "),f(),p(4,"div",7),A("click",function(){return h(e),b().insertExcisedEncounter(0)}),O(5,"i",8),k(6," Insert Cut Encounter "),f(),f()}if(2&t){const e=b();g(4),v("ngClass",ht(1,jN,null==e.cutEncounterIndex))}}function Ute(t,n){if(1&t){const e=G();p(0,"app-diary-entry-encounter",12,13),A("cardDelete",function(){h(e);const r=b().index;return b().deleteEncounter(r)})("cardCreate",function(r){return h(e),b(2).onEncounterCreate(r)})("encounterOrderIncrease",function(){h(e);const r=b().index;return b().onEncounterOrderIncrease(r)})("encounterOrderDecrease",function(){h(e);const r=b().index;return b().onEncounterOrderDecrease(r)})("excisionStart",function(){h(e);const r=b().index;return b().onExcisionStart(r)})("excisionCancel",function(){h(e);const r=b().index;return b().onExcisionCancel(r)}),f()}if(2&t){const e=b(),i=e.$implicit,r=e.index,o=b();v("cardData",i)("index",r)("cutEncounterIndex",o.cutEncounterIndex)("diaryEntryView",o.diaryEntryView)("campaign",o.campaign)}}function Vte(t,n){if(1&t){const e=G();p(0,"div",14),p(1,"div",5),A("click",function(){h(e);const r=b().index;return b().toggleEncounterCreateState(r)}),O(2,"i",6),k(3," Add Encounter "),f(),p(4,"div",7),A("click",function(){h(e);const r=b().index;return b().insertExcisedEncounter(r)}),O(5,"i",8),k(6," Insert Cut Encounter "),f(),f()}if(2&t){const e=b(2);g(4),v("ngClass",ht(1,jN,null==e.cutEncounterIndex))}}function Bte(t,n){if(1&t&&(p(0,"div",9),S(1,Ute,2,5,"app-diary-entry-encounter",10),S(2,Vte,7,3,"div",11),f()),2&t){const e=n.index,i=b();g(1),v("ngIf",!i.isEncounterUpdating[e]&&i.campaign)("ngIfElse",i.waiting),g(1),v("ngIf",!i.diaryEntryView)}}let Hte=(()=>{class t extends ji{constructor(e,i,r,o,s){super(s,o),this.warning=e,this.routingService=i,this.encounterService=r,this.constants=$,this.encounters=[],this.isEncounterUpdating=[],this.isUpdating=!1}ngOnInit(){this.diaryEntryView=!(null!=this.route.snapshot.params.displayMode)||"diaryEntry"===this.route.snapshot.params.displayMode;for(const i of this.diaryEntry.encounters){const r=new js(i);this.encounters.push(r),this.isEncounterUpdating.push(!1)}this.sortEncounters()}ngAfterViewInit(){this.scrollToEncounterInQueryList(this.encounterElements,this.route.snapshot.params.encounterTitle)}scrollToEncounterInQueryList(e,i){if(null==i)return;i=i.toLowerCase();const r=e.find(s=>s.cardData.title.toLowerCase()==i);null!=r&&r.card.nativeElement.scrollIntoView()}toggleEncounterCreateState(e){const i=this.getOrderIndexForNewEncounter(e),o=new js({description:null,diaryentry:this.diaryEntry.pk,location:null,title:"New Encounter",getAbsoluteRouterUrl:null,order_index:i,encounterConnections:[]});this.insertEncounter(o,e<0?0:e+1)}insertEncounter(e,i){this.encounters.splice(i,0,e)}getOrderIndexForNewEncounter(e){const r=0===this.encounters.length;let s;return s=r?0:e<0&&!r?this.encounters[0].priorOrderIndex():this.encounters[e].getShiftedOrderIndex(),s}onEncounterCreate(e){this.encounters=e}deleteEncounter(e){this.encounters.splice(e,1)}sortEncounters(){this.encounters.sort((e,i)=>{const r=e.order_index,o=i.order_index;return null==r&&null==o?0:null==r?1:null==o?-1:r-o})}onEncounterOrderIncrease(e){e!==this.encounters.length-1&&this.swapEncounters(e,e+1)}onEncounterOrderDecrease(e){0!==e&&this.swapEncounters(e,e-1)}swapEncounters(e,i){return Et(this,void 0,void 0,function*(){this.isEncounterUpdating[e]=!0,this.isEncounterUpdating[i]=!0;const r=this.encounters[e],o=this.encounters[i];try{const s=yield this.swapEncountersInDb(r.pk,o.pk),l=s.find(d=>d.pk===r.pk),c=s.find(d=>d.pk===o.pk);this.encounters[e]=l,this.encounters[i]=c}catch(s){this.warning.showWarning(s)}this.isEncounterUpdating[e]=!1,this.isEncounterUpdating[i]=!1,this.sortEncounters()})}swapEncountersInDb(e,i){return Et(this,void 0,void 0,function*(){return this.encounterService.swapEncounterOrder(this.campaign.name,e,i).toPromise()})}onExcisionStart(e){this.cutEncounterIndex=e}onExcisionCancel(e){this.cutEncounterIndex===e&&(this.cutEncounterIndex=null)}insertExcisedEncounter(e){return Et(this,void 0,void 0,function*(){if(null==this.cutEncounterIndex)return;const i=this.encounters[this.cutEncounterIndex],r=this.encounters[e].order_index;this.isUpdating=!0,this.encounterService.cutInsertEncounter(this.campaign.name,i,r).pipe(re()).subscribe(o=>{this.encounters=o,this.isUpdating=!1,this.cutEncounterIndex=null},o=>this.warning.showWarning(o))})}}return t.\u0275fac=function(e){return new(e||t)(C(Ze),C(ce),C(Hv),C(Me),C(ke))},t.\u0275cmp=Y({type:t,selectors:[["app-diary-entry-encounter-list"]],viewQuery:function(e,i){if(1&e&&pt(Lte,5),2&e){let r;ye(r=be())&&(i.encounterElements=r)}},inputs:{diaryEntry:"diaryEntry",campaign:"campaign",diaryEntryView:"diaryEntryView"},features:[oe],decls:4,vars:2,consts:[[1,"container","px-0"],["class","d-flex mb-4 justify-content-center row",4,"ngIf"],[1,"row"],["class","w-100",4,"ngFor","ngForOf"],[1,"d-flex","mb-4","justify-content-center","row"],[1,"col-md-4","col-6","btn","btn-lg","btn-primary",3,"click"],["title","Add Encounter to Diaryentry",1,"fa","fa-plus","pointer"],[1,"col-md-4","col-6","btn","btn-lg","btn-secondary",3,"ngClass","click"],["title","Insert Cut Encounter",1,"fas","fa-file-import","pointer"],[1,"w-100"],[3,"cardData","index","cutEncounterIndex","diaryEntryView","campaign","cardDelete","cardCreate","encounterOrderIncrease","encounterOrderDecrease","excisionStart","excisionCancel",4,"ngIf","ngIfElse"],["class","d-flex my-4 justify-content-center",4,"ngIf"],[3,"cardData","index","cutEncounterIndex","diaryEntryView","campaign","cardDelete","cardCreate","encounterOrderIncrease","encounterOrderDecrease","excisionStart","excisionCancel"],["encounters",""],[1,"d-flex","my-4","justify-content-center"]],template:function(e,i){1&e&&(p(0,"div",0),S(1,$te,7,3,"div",1),p(2,"div",2),S(3,Bte,3,3,"div",3),f(),f()),2&e&&(g(1),v("ngIf",!i.diaryEntryView&&i.hasUpdatePermission&&i.hasDeletePermission&&i.userHasCreatePermission),g(2),v("ngForOf",i.encounters))},directives:[le,je,Yt,Rte],styles:[".expand[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{transition:visibility .2s;visibility:hidden}.expand[_ngcontent-%COMP%]:hover   .btn[_ngcontent-%COMP%]{visibility:visible;padding:.75rem 1.5rem}.expand[_ngcontent-%COMP%]{transition:height .2s;display:flex;align-items:center;height:2rem}.expand[_ngcontent-%COMP%]:hover{height:8rem}"]}),t})();function jte(t,n){1&t&&(p(0,"span"),O(1,"span",17),k(2," Edit Encounters "),f())}function zte(t,n){1&t&&(p(0,"span"),O(1,"span",18),k(2," Read Diaryentry "),f())}function Gte(t,n){if(1&t){const e=G();p(0,"div",4),p(1,"div",13),O(2,"app-edit-toggle",14),p(3,"div",15),A("click",function(){h(e);const r=b();return r.diaryentryDisplayMode=!r.diaryentryDisplayMode}),S(4,jte,3,0,"span",16),S(5,zte,3,0,"span",16),f(),f(),f()}if(2&t){const e=b();g(2),v("isInUpdateState",!1)("link","update"),g(2),v("ngIf",e.diaryentryDisplayMode),g(1),v("ngIf",!e.diaryentryDisplayMode)}}function Wte(t,n){1&t&&(p(0,"a",19),O(1,"i",20),k(2," Next "),f()),2&t&&xe("routerLink",b().nextDiaryentryUrl)}function qte(t,n){1&t&&(p(0,"a",19),k(1," Back "),O(2,"i",21),f()),2&t&&xe("routerLink",b().priorDiaryentryUrl)}function Qte(t,n){1&t&&(p(0,"a",19),O(1,"i",20),k(2," Next "),f()),2&t&&xe("routerLink",b().nextDiaryentryUrl)}function Zte(t,n){1&t&&(p(0,"a",19),k(1," Prior "),O(2,"i",21),f()),2&t&&xe("routerLink",b().priorDiaryentryUrl)}let zN=(()=>{class t extends Hs{constructor(e,i,r,o,s,l){super(e,i,o,r,s,l),this.route=i,this.warning=r,this.routingService=o,this.diaryentryDisplayMode=!0,this.deleteRoute={routeName:"diaryentry-overview",params:{campaign:null}}}getQueryParameter(e){return{isMainSession:parseInt(e.isMainSession),sessionNumber:parseInt(e.sessionNumber),authorName:e.authorName}}updateDynamicVariables(e,i,r){this.diaryentryOverviewUrl=this.routingService.getRoutePath("diaryentry-overview",{campaign:e.name}),this.priorDiaryentryUrl=this.createDiaryentryURL(i.adjacent_diaryentries.prior_diaryentry),this.nextDiaryentryUrl=this.createDiaryentryURL(i.adjacent_diaryentries.next_diaryentry)}onDescriptionUpdate(){throw"InvalidFunctionUseException. This functionality does not exist on diaryentry-article"}createDiaryentryURL(e){return null==e?"":this.routingService.getRoutePath("diaryentry",{sessionNumber:e.session_details.session_number,isMainSession:e.session_details.is_main_session_int,authorName:e.author_details.name,campaign:this.campaign.name})}}return t.\u0275fac=function(e){return new(e||t)(C(Gs),C(Me),C(Ze),C(ce),C($e),C(ke))},t.\u0275cmp=Y({type:t,selectors:[["app-diaryentry-article"]],features:[oe],decls:27,vars:18,consts:[[1,"main"],["article",""],[1,"container"],["class","row",4,"ngIf"],[1,"row"],[1,"text-center","col"],["id","authors",1,"row","mb-2"],[1,"text-center","col-12"],[1,"row","mb-3","d-flex","align-items-center","justify-content-between"],[1,"col-lg-2","col-md-4","col-5"],["class","btn btn-secondary w-100",3,"routerLink",4,"ngIf"],[3,"diaryEntry","diaryEntryView","campaign"],[3,"link","label","deleteMessage","delete"],[1,"col-12","d-flex","align-items-end","flex-column"],[3,"isInUpdateState","link"],[1,"btn","btn-secondary","mt-2",3,"click"],[4,"ngIf"],[1,"fa","fa-pencil"],[1,"fa","fa-times"],[1,"btn","btn-secondary","w-100",3,"routerLink"],[1,"fa","fa-arrow-left","mr-1"],[1,"fa","fa-arrow-right","ml-1"]],template:function(e,i){1&e&&(p(0,"div",0,1),p(2,"article",2),S(3,Gte,6,4,"div",3),p(4,"div",4),p(5,"h1",5),k(6),O(7,"br"),k(8),f(),f(),p(9,"div",6),p(10,"p",7),k(11),O(12,"br"),k(13),Lt(14,"date"),f(),f(),p(15,"div",8),p(16,"div",9),S(17,Wte,3,1,"a",10),f(),p(18,"div",9),S(19,qte,3,1,"a",10),f(),f(),O(20,"app-diary-entry-encounter-list",11),p(21,"div",8),p(22,"div",9),S(23,Qte,3,1,"a",10),f(),p(24,"div",9),S(25,Zte,3,1,"a",10),f(),f(),p(26,"app-article-footer",12),A("delete",function(){return i.deleteArticle()}),f(),f(),f()),2&e&&(g(3),v("ngIf",i.hasUpdatePermission),g(3),Z(" Diary Entry # ",i.articleData.session_details.session_number," "),g(2),Z(" ",i.articleData.title," "),g(3),Z(" Written by: ",i.articleData.author_details.name," "),g(2),Z(" on ",ka(14,15,i.articleData.session_details.session_date,"longDate")," "),g(4),v("ngIf",i.articleData.adjacent_diaryentries.next_diaryentry),g(2),v("ngIf",i.articleData.adjacent_diaryentries.prior_diaryentry),g(1),v("diaryEntry",i.articleData)("diaryEntryView",i.diaryentryDisplayMode)("campaign",i.campaign),g(3),v("ngIf",i.articleData.adjacent_diaryentries.next_diaryentry),g(2),v("ngIf",i.articleData.adjacent_diaryentries.prior_diaryentry),g(1),v("link",i.diaryentryOverviewUrl)("label","Back to Diaryentries")("deleteMessage","Delete this Diaryentry?"))},directives:[le,Hte,Ws,On,Ht],pipes:[l_],styles:[".encounter[_ngcontent-%COMP%]{padding:.5rem 0;transition:.2s padding}.encounter[_ngcontent-%COMP%]:hover{padding:.5rem 3rem}@media (max-width: 576px){#authors.mb-5[_ngcontent-%COMP%]{margin-bottom:.5rem!important}}"]}),t})();function Kte(t,n){1&t&&(p(0,"div",4),p(1,"div",10),O(2,"app-edit-toggle",11),f(),f()),2&t&&(g(2),v("isInUpdateState",!1)("link","update"))}let Yte=(()=>{class t extends Hs{constructor(e,i,r,o,s,l){super(e,i,o,r,s,l),this.warnings=r,this.routingService=o,this.deleteRoute={routeName:"creature-overview",params:{campaign:null}},this.queryParameterName="name"}updateDynamicVariables(e,i,r){this.creatureOverviewUrl=this.routingService.getRoutePath("creature-overview",{campaign:e.name})}}return t.\u0275fac=function(e){return new(e||t)(C(Zf),C(Me),C(Ze),C(ce),C($e),C(ke))},t.\u0275cmp=Y({type:t,selectors:[["app-creature-article"]],features:[oe],decls:11,vars:11,consts:[[1,"main"],["article",""],[1,"container"],["class","row",4,"ngIf"],[1,"row"],[1,"text-center","col"],[3,"article_type","article_pk","images"],[1,"mb-5"],[3,"initialText","heading","formStateSubject","updateText"],[3,"link","label","deleteMessage","delete"],[1,"col-12"],[3,"isInUpdateState","link"]],template:function(e,i){1&e&&(p(0,"div",0,1),p(2,"article",2),S(3,Kte,3,2,"div",3),p(4,"div",4),p(5,"h1",5),k(6),f(),f(),O(7,"app-image-carousel",6),p(8,"div",7),p(9,"app-textfield",8),A("updateText",function(o){return i.onDescriptionUpdate(o)}),f(),f(),p(10,"app-article-footer",9),A("delete",function(){return i.deleteArticle()}),f(),f(),f()),2&e&&(g(3),v("ngIf",i.hasUpdatePermission),g(3),Z(" ",i.articleData.name," "),g(1),v("article_type","creature")("article_pk",i.articleData.pk)("images",i.articleData.images),g(2),v("initialText",i.articleData.description)("heading","Description")("formStateSubject",i.textfieldFormStateSubject),g(1),v("link",i.creatureOverviewUrl)("label","Back to Creatures")("deleteMessage","Delete "+i.articleData.name+"?"))},directives:[le,im,El,Ws,On],styles:[""]}),t})();function Jte(t,n){1&t&&(p(0,"div",4),p(1,"div",15),O(2,"app-edit-toggle",16),f(),f()),2&t&&(g(2),v("isInUpdateState",!1)("link","update"))}function Xte(t,n){if(1&t&&(p(0,"a",17),k(1),f()),2&t){const e=b();xe("routerLink",e.organizationLeaderUrl),g(1),Z(" ",e.articleData.leader," ")}}function ene(t,n){1&t&&k(0,"Unknown")}function tne(t,n){if(1&t&&(p(0,"a",17),k(1),f()),2&t){const e=b();xe("routerLink",e.headquartersUrl),g(1),Z(" ",e.articleData.headquarter_details.name_full," ")}}let nne=(()=>{class t extends Hs{constructor(e,i,r,o,s,l){super(e,i,o,r,s,l),this.route=i,this.warnings=r,this.routingService=o,this.deleteRoute={routeName:"organization-overview",params:{campaign:null}},this.queryParameterName="name"}ngOnInit(){super.ngOnInit(),this.articleData.members=this.articleData.members.sort((e,i)=>e.name>i.name?1:-1)}updateDynamicVariables(e,i,r){this.organizationOverviewUrl=this.routingService.getRoutePath("organization-overview",{campaign:e.name}),this.characterCreateUrl=this.routingService.getRoutePath("character-create",{campaign:e.name}),this.headquartersUrl=this.routingService.getRoutePath("location",{name:i.headquarter_details.name,parent_name:i.headquarter_details.parent_name,campaign:e.name}),this.organizationLeaderUrl=this.routingService.getRoutePath("character",{name:i.leader,campaign:e.name})}}return t.\u0275fac=function(e){return new(e||t)(C(wh),C(Me),C(Ze),C(ce),C($e),C(ke))},t.\u0275cmp=Y({type:t,selectors:[["app-organization-article"]],features:[oe],decls:22,vars:19,consts:[[1,"main"],["article",""],[1,"container"],["class","row",4,"ngIf"],[1,"row"],[1,"text-center","col"],[1,"text-center","subheading","mb-1","col-12"],["class","ml-1",3,"routerLink",4,"ngIf","ngIfElse"],["Unknown",""],[1,"text-center","mb-3","subheading","col-12"],[3,"article_type","article_pk","images"],[1,"mb-5"],[3,"initialText","heading","formStateSubject","updateText"],[3,"heading","items","createLink","articleType"],[3,"link","label","deleteMessage","delete"],[1,"col-12"],[3,"isInUpdateState","link"],[1,"ml-1",3,"routerLink"]],template:function(e,i){if(1&e&&(p(0,"div",0,1),p(2,"article",2),S(3,Jte,3,2,"div",3),p(4,"div",4),p(5,"h1",5),k(6),f(),f(),p(7,"div",4),p(8,"div",6),k(9," Leader: "),S(10,Xte,2,2,"a",7),S(11,ene,1,0,"ng-template",null,8,se),f(),p(13,"div",9),k(14," Headquarters: "),S(15,tne,2,2,"a",7),f(),f(),O(16,"app-image-carousel",10),p(17,"div",11),p(18,"app-textfield",12),A("updateText",function(o){return i.onDescriptionUpdate(o)}),f(),f(),p(19,"div",11),O(20,"app-object-list",13),f(),p(21,"app-article-footer",14),A("delete",function(){return i.deleteArticle()}),f(),f(),f()),2&e){const r=ie(12);g(3),v("ngIf",i.hasUpdatePermission),g(3),Z(" ",i.articleData.name," "),g(4),v("ngIf",i.articleData.leader)("ngIfElse",r),g(5),v("ngIf",i.articleData.headquarter_details)("ngIfElse",r),g(1),v("article_type","organization")("article_pk",i.articleData.pk)("images",i.articleData.images),g(2),v("initialText",i.articleData.description)("heading","Description")("formStateSubject",i.textfieldFormStateSubject),g(2),v("heading","Members")("items",i.articleData.members)("createLink",i.characterCreateUrl)("articleType","character"),g(1),v("link",i.organizationOverviewUrl)("label","Back to Organizations")("deleteMessage","Delete "+i.articleData.name+"?")}},directives:[le,im,El,Lw,Ws,On,Ht],styles:[""]}),t})();function ine(t,n){1&t&&(p(0,"div",4),p(1,"div",11),O(2,"app-edit-toggle",12),f(),f()),2&t&&(g(2),v("isInUpdateState",!1)("link","update"))}function rne(t,n){if(1&t&&(p(0,"p",13),k(1," Owned by: "),p(2,"a",14),k(3),f(),f()),2&t){const e=b();g(2),xe("routerLink",e.ownerUrl),g(1),Z(" ",e.articleData.owner_details.name," ")}}let one=(()=>{class t extends Hs{constructor(e,i,r,o,s,l){super(e,i,o,r,s,l),this.route=i,this.warnings=r,this.routingService=o,this.deleteRoute={routeName:"item-overview",params:{campaign:null}},this.queryParameterName="name"}updateDynamicVariables(e,i,r){var o;this.ownerUrl=this.routingService.getRoutePath("character",{name:null===(o=i.owner_details)||void 0===o?void 0:o.name,campaign:e.name}),this.itemOverviewUrl=this.routingService.getRoutePath("item-overview",{campaign:e.name})}}return t.\u0275fac=function(e){return new(e||t)(C(Kf),C(Me),C(Ze),C(ce),C($e),C(ke))},t.\u0275cmp=Y({type:t,selectors:[["app-item-article"]],features:[oe],decls:13,vars:12,consts:[[1,"main"],["article",""],[1,"container"],["class","row",4,"ngIf"],[1,"row"],[1,"text-center","col"],["class","text-center col mb-5",4,"ngIf"],[3,"article_type","article_pk","images"],[1,"mb-5"],[3,"initialText","heading","formStateSubject","updateText"],[3,"link","label","deleteMessage","delete"],[1,"col-12"],[3,"isInUpdateState","link"],[1,"text-center","col","mb-5"],[3,"routerLink"]],template:function(e,i){1&e&&(p(0,"div",0,1),p(2,"article",2),S(3,ine,3,2,"div",3),p(4,"div",4),p(5,"h1",5),k(6),f(),f(),p(7,"div",4),S(8,rne,4,2,"p",6),f(),O(9,"app-image-carousel",7),p(10,"div",8),p(11,"app-textfield",9),A("updateText",function(o){return i.onDescriptionUpdate(o)}),f(),f(),p(12,"app-article-footer",10),A("delete",function(){return i.deleteArticle()}),f(),f(),f()),2&e&&(g(3),v("ngIf",i.hasUpdatePermission),g(3),Z(" ",i.articleData.name," "),g(2),v("ngIf",i.articleData.owner_details),g(1),v("article_type","item")("article_pk",i.articleData.pk)("images",i.articleData.images),g(2),v("initialText",i.articleData.description)("heading","Description")("formStateSubject",i.textfieldFormStateSubject),g(1),v("link",i.itemOverviewUrl)("label","Back to Items")("deleteMessage","Delete "+i.articleData.name+"?"))},directives:[le,im,El,Ws,On,Ht],styles:[""]}),t})();const sne=["listArticle"],ane=["articles"];let Jv=(()=>{class t extends ji{constructor(e,i,r,o,s,l){super(l,i),this.articleService=e,this.routingService=r,this.warnings=o,this.globalUrlParams=s,this.constants=$,this.isLoadingArticles=!1,this.articleStarterTitle="New Article Item",this.articlesSortProperty="name",this.isReverseSort=!1,this.articlesInitialScrollParameter="articleTitle"}ngOnInit(){this.campaign=this.route.snapshot.data.campaign;const e=this.route.snapshot.data.articleList,i=e.sort((r,o)=>r[this.articlesSortProperty]<o[this.articlesSortProperty]?-1:1);this.articles=this.isReverseSort?i.reverse():i,this.showArticleArray=this.articles.map(r=>!0),this.updateDynamicVariables(this.campaign,e,this.route.snapshot.params)}ngAfterViewInit(){this.scrollToArticleInQueryList(this.articleElements,this.route.snapshot.params[this.articlesInitialScrollParameter]),this.animateListArticle()}animateListArticle(){var e;!(null===(e=this.listArticleElement)||void 0===e?void 0:e.nativeElement)||hi(this.listArticleElement.nativeElement,"fadeIn").then(i=>this.onInitAnimationEnd())}onInitAnimationEnd(){}scrollToArticleInQueryList(e,i){if(null==i)return;i=i.toLowerCase();const r=e.find(o=>{var s;return(null===(s=this.getArticleTitle(o))||void 0===s?void 0:s.toLowerCase())==i});null!=r&&r.card.nativeElement.scrollIntoView()}getArticleTitle(e){return e.cardData.title}updateDynamicVariables(e,i,r){}addArticle(){const e=new this.articleModelClass;e.name=this.articleStarterTitle,this.articles.unshift(e)}onArticleDelete(e){this.articles.splice(e,1)}}return t.\u0275fac=function(e){Ud()},t.\u0275dir=te({type:t,viewQuery:function(e,i){if(1&e&&(pt(sne,5),pt(ane,5)),2&e){let r;ye(r=be())&&(i.listArticleElement=r.first),ye(r=be())&&(i.articleElements=r)}},features:[oe]}),t})();const lne=["card"],cne=function(t,n){return{"fa icon":!0,"fa-chevron-down":t,"fa-chevron-up":n}};function une(t,n){if(1&t){const e=G();p(0,"h5",14),A("click",function(){return h(e),b().toggleCard()}),p(1,"span"),k(2),f(),O(3,"i",15),f()}if(2&t){const e=b();g(2),Le(e.cardData.name),g(1),v("ngClass",Bn(2,cne,!e.isOpen,e.isOpen))}}function dne(t,n){1&t&&O(0,"hr",16)}function hne(t,n){1&t&&O(0,"i",20)}function pne(t,n){1&t&&O(0,"i",21)}function fne(t,n){if(1&t){const e=G();p(0,"div",17),A("click",function(){return h(e),b().toggleFormState()}),S(1,hne,1,0,"i",18),S(2,pne,1,0,"i",19),f()}if(2&t){const e=b();g(1),v("ngIf",e.isInDisplayState()),g(1),v("ngIf",!e.isInDisplayState())}}function mne(t,n){1&t&&O(0,"div",22),2&t&&v("innerHTML",b().cardData.description,Or)}function gne(t,n){if(1&t){const e=G();p(0,"app-formly-formcontainer",23),A("formlySubmit",function(){return h(e),b().onSubmit()})("formlyCancel",function(){return h(e),b().onCancel()}),f()}if(2&t){const e=b();v("model",e.userModel)("fields",e.formlyFields)}}function _ne(t,n){if(1&t){const e=G();p(0,"app-compare-form-container",24),A("updateSubmit",function(){return h(e),b().onSubmit()})("cancel",function(){return h(e),b().onCancel()}),f()}if(2&t){const e=b();v("formlyFields",e.formlyFields)("modelFromUser",e.userModel)("modelFromServer",e.serverModel)("displayVertically",!0)}}function vne(t,n){if(1&t){const e=G();p(0,"div",25),p(1,"app-formly-formcontainer",23),A("formlySubmit",function(){return h(e),b().onSubmit()})("formlyCancel",function(){return h(e),b().onCancel()}),f(),f()}if(2&t){const e=b();g(1),v("model",e.userModel)("fields",e.formlyFields)}}const yne=function(t){return{"animate__animated animate__fadeInUp":t}};let bne=(()=>{class t extends Yv{constructor(e,i,r,o,s,l){super(r,e,s,l),this.formlyService=i,this.warnings=r,this.element=o,this.userModelClass=Vv,this.cardDelete=new q,this.formlyFields=[this.formlyService.genericInput({key:"name",isNameInput:!0}),this.formlyService.genericTextField({key:"description"})]}}return t.\u0275fac=function(e){return new(e||t)(C(jv),C(mn),C(Ze),C(Ye),C(Me),C(ke))},t.\u0275cmp=Y({type:t,selectors:[["app-rule"]],viewQuery:function(e,i){if(1&e&&pt(lne,5),2&e){let r;ye(r=be())&&(i.card=r.first)}},inputs:{cardData:"cardData"},features:[oe],decls:16,vars:12,consts:[[1,"card","row","mb-3","px-4","pt-3","pb-1",3,"ngClass"],["card",""],["class","pointer col-12 justify-content-between d-flex align-items-center",3,"click",4,"ngIf"],[1,"mb-3","w-100",3,"ngbCollapse"],[1,"col-12"],["class","white-separator mb-2",4,"ngIf"],[1,"mb-3"],[1,"d-inline"],["class","btn btn-secondary float-right",3,"click",4,"ngIf"],[3,"innerHTML",4,"ngIf"],[3,"model","fields","formlySubmit","formlyCancel",4,"ngIf"],["class","d-flex justify-content-center",3,"formlyFields","modelFromUser","modelFromServer","displayVertically","updateSubmit","cancel",4,"ngIf"],[3,"deleteMessage","deleteEvent"],["formField",""],[1,"pointer","col-12","justify-content-between","d-flex","align-items-center",3,"click"],[3,"ngClass"],[1,"white-separator","mb-2"],[1,"btn","btn-secondary","float-right",3,"click"],["class","fa fa-pencil",4,"ngIf"],["class","fa fa-times",4,"ngIf"],[1,"fa","fa-pencil"],[1,"fa","fa-times"],[3,"innerHTML"],[3,"model","fields","formlySubmit","formlyCancel"],[1,"d-flex","justify-content-center",3,"formlyFields","modelFromUser","modelFromServer","displayVertically","updateSubmit","cancel"],["id","edit-section"]],template:function(e,i){1&e&&(p(0,"div",0,1),S(2,une,4,5,"h5",2),p(3,"div",3),p(4,"div",4),S(5,dne,1,0,"hr",5),p(6,"div",6),p(7,"h4",7),k(8),f(),S(9,fne,3,2,"div",8),f(),S(10,mne,1,1,"div",9),S(11,gne,1,2,"app-formly-formcontainer",10),S(12,_ne,1,4,"app-compare-form-container",11),p(13,"app-delete-toggle",12),A("deleteEvent",function(){return i.articleDelete(i.cardData)}),f(),f(),f(),f(),S(14,vne,2,2,"ng-template",null,13,se)),2&e&&(v("ngClass",ht(10,yne,i.isInCreateState())),g(2),v("ngIf",!i.isInOutdatedUpdateState()),g(1),v("ngbCollapse",!i.isOpen),g(2),v("ngIf",!i.isInOutdatedUpdateState()),g(3),Z(" ",i.cardData.name,""),g(1),v("ngIf",i.hasUpdatePermission),g(1),v("ngIf",i.isInDisplayState()),g(1),v("ngIf",i.isInCreateState()||i.isInUpdateState()),g(1),v("ngIf",i.isInOutdatedUpdateState()),g(1),v("deleteMessage","Delete this rule ?"))},directives:[Yt,le,B0,Ic,zn,br],styles:[".btn-secondary[_ngcontent-%COMP%]{background-color:var(--wiki-background-2)}"]}),t})();const Cne=["ruleElements"];function wne(t,n){if(1&t){const e=G();p(0,"div",9),p(1,"a",10),A("click",function(){return h(e),b().addArticle()}),O(2,"i",11),k(3," Add Rule "),f(),f()}}function Sne(t,n){if(1&t){const e=G();p(0,"div"),p(1,"app-rule",12,13),A("cardDelete",function(){const o=h(e).index;return b().onArticleDelete(o)}),f(),f()}if(2&t){const e=n.$implicit,i=n.index,r=b();g(1),v("cardData",e)("campaign",r.campaign)("index",i)}}let GN=(()=>{class t extends Jv{constructor(e,i,r,o,s,l){super(e,o,i,s,l,r),this.routingService=i,this.articleModelClass=Vv,this.articleStarterTitle="New Rule",this.articlesInitialScrollParameter="name"}updateDynamicVariables(e,i,r){this.homeUrl=this.routingService.getRoutePath("home2",{campaign:e.name})}}return t.\u0275fac=function(e){return new(e||t)(C(jv),C(ce),C(ke),C(Me),C(Ze),C($e))},t.\u0275cmp=Y({type:t,selectors:[["app-rules"]],viewQuery:function(e,i){if(1&e&&pt(Cne,5),2&e){let r;ye(r=be())&&(i.articleElements=r)}},features:[oe],decls:11,vars:3,consts:[[1,"main"],["listArticle",""],[1,"container"],[1,"row"],[1,"text-center","col"],["class","mb-3 row",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"row","mt-5"],[1,"btn","btn-secondary","col-md-3",3,"routerLink"],[1,"mb-3","row"],[1,"btn","btn-primary","col-lg-2","col-sm-3",3,"click"],[1,"fa","fa-plus"],[3,"cardData","campaign","index","cardDelete"],["ruleElements",""]],template:function(e,i){1&e&&(p(0,"div",0,1),p(2,"article",2),p(3,"div",3),p(4,"h1",4),k(5,"Rules"),f(),f(),S(6,wne,4,0,"div",5),S(7,Sne,3,3,"div",6),p(8,"div",7),p(9,"a",8),k(10," Back To Frontpage "),f(),f(),f(),f()),2&e&&(g(6),v("ngIf",i.tokenService.isAdmin()),g(1),v("ngForOf",i.articles),g(2),xe("routerLink",i.homeUrl))},directives:[le,je,Ht,bne],styles:[""]}),t})(),Vo=(()=>{class t extends ji{constructor(e,i,r,o,s,l,c,d){super(d,c),this.router=e,this.routingService=i,this.warnings=r,this.articleService=o,this.campaignService=s,this.globalUrlParam=l,this.route=c,this.constants=$,this.campaign=this.route.snapshot.data.campaign;const m=this.router.url.includes("update");this.formState=m?$.updateState:$.createState}ngOnInit(){this.userModel=this.route.snapshot.data.modelData,this.updateRouterLinks(this.campaign.name,this.userModel,this.route.snapshot.params)}getQueryParameters(e){return{name:e.name}}updateRouterLinks(e,i,r){}forceFieldRefresh(){this.userModel=Object.assign({},this.userModel)}isInCreateState(){return this.formState===$.createState}isInUpdateState(){return this.formState===$.updateState}isInOutdatedUpdateState(){return this.formState===$.outdatedUpdateState}onSubmit(){this.isInUpdateState()||this.isInOutdatedUpdateState()?this.articleUpdate(this.userModel):this.isInCreateState()&&this.articleCreate(this.userModel)}articleUpdate(e){if(null==e.pk)throw"Invalid userModel Exception. The userModel provided here does not have a primary\n        key defined. This primary key is necessary to update the correct article in the database. Please contact the developer";const i=this;this.articleService.update(e.pk,e).pipe(re()).subscribe(r=>this.onUpdateSuccess(r,i),r=>this.onUpdateError(r,i))}articleCreate(e){const i=this;this.articleService.create(e).pipe(re()).subscribe(r=>this.onCreationSuccess(r,i),r=>this.onCreationError(r,i))}onUpdateSuccess(e,i){i.routingService.routeToApiObject(e)}onUpdateError(e,i){i.baseErrorCallback(e)}onCreationSuccess(e,i){i.routingService.routeToApiObject(e)}onCreationError(e,i){i.baseErrorCallback(e)}baseErrorCallback(e){409===(null==e?void 0:e.status)?(this.serverModel=e.error,this.formState=$.outdatedUpdateState):this.warnings.showWarning(e)}onCancel(e){const r=(e=null==this.routingService?e:this).router;e.isInUpdateState()||e.isInOutdatedUpdateState()?r.navigateByUrl(e.updateCancelUrl):r.navigateByUrl(e.creationCancelUrl)}}return t.\u0275fac=function(e){Ud()},t.\u0275dir=te({type:t,features:[oe]}),t})(),Uw=(()=>{class t extends Oa{constructor(e){super(e),this.baseUrl=`${$.wikiApiUrl}/player_class`}}return t.\u0275fac=function(e){return new(e||t)(P(zt))},t.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Tne=(()=>{class t extends Oa{constructor(e){super(e),this.baseUrl=`${$.wikiApiUrl}/characterplayerclassconnection`}}return t.\u0275fac=function(e){return new(e||t)(P(zt))},t.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Ene=(()=>{class t extends nr{constructor(e){super(e,zf),this.baseUrl=`${$.wikiApiUrl}/character/organizationmemberships`}}return t.\u0275fac=function(e){return new(e||t)(P(zt))},t.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function kne(t,n){if(1&t&&(p(0,"div"),O(1,"app-edit-toggle",13),p(2,"h2",14),k(3),f(),f()),2&t){const e=b();g(1),v("isInUpdateState",!0)("link",e.updateCancelUrl),g(2),Z(" Updating Character ",e.userModel.name," ")}}function Dne(t,n){if(1&t){const e=G();p(0,"span",19),k(1),p(2,"span",20),A("click",function(){const o=h(e).$implicit;return b(3).deletePlayerClassConnection(o)}),f(),f()}if(2&t){const e=n.$implicit;g(1),Z(" ",e.player_class_details.name," ")}}function xne(t,n){if(1&t){const e=G();p(0,"app-inline-create-button",21),A("click",function(){return h(e),b(3).toggleConnectionCreateState()}),f()}2&t&&v("labelText","Add Class")}function Mne(t,n){if(1&t&&(p(0,"div",16),S(1,Dne,3,1,"span",17),S(2,xne,1,1,"app-inline-create-button",18),f()),2&t){const e=b(2),i=ie(13);g(1),v("ngForOf",e.userModel.player_class_connections),g(1),v("ngIf",!e.isCharacterConnectionCreationState)("ngIfElse",i)}}function Ine(t,n){if(1&t&&(p(0,"div"),p(1,"h4",5),k(2," Classes "),f(),O(3,"hr",6),S(4,Mne,3,3,"div",15),f()),2&t){const e=b();g(4),v("ngIf",e.userModel)}}function Pne(t,n){1&t&&(Vt(0),k(1," Organization Memberships "),Bt())}function Ane(t,n){if(1&t){const e=G();p(0,"span",19),k(1),p(2,"span",20),A("click",function(){const o=h(e).$implicit;return b(4).deleteOrganizationMembership(o)}),f(),f()}if(2&t){const e=n.$implicit;g(1),Z(" ",e.name," ")}}function One(t,n){if(1&t){const e=G();p(0,"div",23),S(1,Ane,3,1,"span",17),p(2,"app-inline-create-button",21),A("click",function(){return h(e),b(3).toggleOrganizationMembershipCreateState()}),f(),f()}if(2&t){const e=b(3);g(1),v("ngForOf",e.userModel.organizations),g(1),v("labelText","Add Membership")}}function Nne(t,n){if(1&t&&(Vt(0),S(1,One,3,2,"div",22),Bt()),2&t){const e=b(2);g(1),v("ngIf",e.userModel)}}function Fne(t,n){if(1&t&&(p(0,"div",1),p(1,"h4",5),S(2,Pne,2,0,"ng-container",2),f(),O(3,"hr",6),S(4,Nne,2,1,"ng-container",2),f()),2&t){const e=b(),i=ie(15),r=ie(17);g(2),v("ngIf",!e.isOrganizationMembershipCreationState)("ngIfElse",i),g(2),v("ngIf",!e.isOrganizationMembershipCreationState)("ngIfElse",r)}}function Rne(t,n){if(1&t){const e=G();p(0,"app-formly-formcontainer",24),A("formlySubmit",function(){return h(e),b().onSubmit()})("formlyCancel",function(){return h(e),b().onCancel()}),f()}if(2&t){const e=b();v("model",e.userModel)("fields",e.formlyFields)}}function Lne(t,n){if(1&t){const e=G();p(0,"app-compare-form-container",25),A("updateSubmit",function(){return h(e),b().onSubmit()})("cancel",function(){return h(e),b().onCancel()}),f()}if(2&t){const e=b();v("formlyFields",e.formlyFields)("modelFromUser",e.userModel)("modelFromServer",e.serverModel)}}function $ne(t,n){if(1&t&&(O(0,"app-edit-toggle",13),p(1,"h2",14),k(2," Creating a new character "),f()),2&t){const e=b();v("isInUpdateState",!0)("link",e.creationCancelUrl)}}function Une(t,n){if(1&t&&(p(0,"option",32),k(1),f()),2&t){const e=n.$implicit,i=b(2);xe("value",e.pk),Ct("disabled",!!i.hasConnection(e)||null),g(1),Z(" ",e.name," ")}}function Vne(t,n){if(1&t){const e=G();p(0,"form",26),A("submit",function(){h(e);const r=b();return r.createPlayerClassConnection(r.connectionModel)}),p(1,"select",27),A("ngModelChange",function(r){return h(e),b().connectionModel.player_class=r}),S(2,Une,2,3,"option",28),f(),p(3,"i",29),A("click",function(){return h(e),b().toggleConnectionCreateState()}),f(),p(4,"button",30),O(5,"i",31),f(),f()}if(2&t){const e=b();g(1),v("ngModel",e.connectionModel.player_class),g(1),v("ngForOf",e.playerClasses)}}function Bne(t,n){1&t&&k(0," Create Organization Membership\n")}function Hne(t,n){if(1&t){const e=G();p(0,"app-formly-formcontainer",24),A("formlySubmit",function(){h(e);const r=b();return r.createOrganizationMembership(r.membershipModel)})("formlyCancel",function(){return h(e),b().toggleOrganizationMembershipCreateState()}),f()}if(2&t){const e=b();v("model",e.membershipModel)("fields",e.organizationFormlyFields)}}let WN=(()=>{class t extends Vo{constructor(e,i,r,o,s,l,c,d,m,_,w,E,D){super(i,l,s,e,w,E,o,D),this.formlyService=r,this.warnings=s,this.routingService=l,this.playerClassService=c,this.characterConnectionService=d,this.organizationService=m,this.organizationMembershipService=_,this.userModelClass=zf,this.formlyFields=[this.formlyService.genericCheckbox({key:"player_character",label:"Player Character",defaultValue:!1}),this.formlyService.genericCheckbox({key:"alive",defaultValue:!0}),this.formlyService.genericInput({key:"name",isNameInput:!0}),this.formlyService.genericInput({key:"title",required:!1}),this.formlyService.customStringSelect({key:"gender",label:"Sex",options:["Other","Female","Male"]}),this.formlyService.genericInput({key:"race"}),this.formlyService.genericSelect({key:"current_location",sortProp:"name_full",label:"Location",overviewType:Ie.Location,campaign:this.campaign.name,required:!1})],this.organizationFormlyFields=[this.formlyService.genericInput({key:"role",isNameInput:!0,required:!1}),this.formlyService.genericDisableSelect({key:"organization_id",sortProp:"name_full",label:"Organization",overviewType:Ie.Organization,campaign:this.campaign.name,disabledExpression:N=>!!this.hasMembership(N)||null,tooltipMessage:"The organization or group this character is a member of",warningMessage:null})],this.isCharacterConnectionCreationState=!1,this.isOrganizationMembershipCreationState=!1}updateRouterLinks(e,i,r){this.updateCancelUrl=this.routingService.getRoutePath("character",{campaign:e,name:i.name}),this.creationCancelUrl=this.routingService.getRoutePath("character-overview",{campaign:e})}toggleConnectionCreateState(){this.playerClasses||this.playerClassService.list().pipe(re()).subscribe(e=>this.playerClasses=e,e=>this.warnings.showWarning(e)),this.isCharacterConnectionCreationState=!this.isCharacterConnectionCreationState,this.resetConnectionModel()}deletePlayerClassConnection(e){this.characterConnectionService.delete(e.pk).pipe(re()).subscribe(i=>{const r=this.userModel.player_class_connections.indexOf(e);this.userModel.player_class_connections.splice(r,1)},i=>this.warnings.showWarning(i))}createPlayerClassConnection(e){e.player_class=parseInt(e.player_class),this.characterConnectionService.create(e).pipe(re()).subscribe(i=>{this.userModel.player_class_connections.push(i),this.toggleConnectionCreateState()},i=>this.warnings.showWarning(i))}resetConnectionModel(){this.connectionModel={player_class:null,character:this.userModel.pk}}hasConnection(e){return this.userModel.player_class_connections.some(i=>i.player_class===e.pk)}toggleOrganizationMembershipCreateState(){this.organizations||this.organizationService.campaignList(this.campaign.name).pipe(re()).subscribe(e=>this.organizations=e,e=>this.warnings.showWarning(e)),this.isOrganizationMembershipCreationState=!this.isOrganizationMembershipCreationState,this.resetOrganizationMembershipModel()}resetOrganizationMembershipModel(){this.membershipModel={role:null,organization_id:null,member_id:this.userModel.pk}}deleteOrganizationMembership(e){this.organizationMembershipService.delete(e.pk).pipe(re()).subscribe(i=>{const r=this.userModel.organizations.findIndex(o=>o.pk===e.pk);this.userModel.organizations.splice(r,1)},i=>this.warnings.showWarning(i))}createOrganizationMembership(e){e.organization_id=parseInt(e.organization_id),this.organizationMembershipService.create(e).pipe(re()).subscribe(i=>{this.userModel=i,this.toggleOrganizationMembershipCreateState()},i=>this.warnings.showWarning(i))}hasMembership(e){return this.userModel.organizations.some(i=>i.organization_id===e.pk)}}return t.\u0275fac=function(e){return new(e||t)(C(ir),C(Ft),C(mn),C(Me),C(Ze),C(ce),C(Uw),C(Tne),C(wh),C(Ene),C(ki),C($e),C(ke))},t.\u0275cmp=Y({type:t,selectors:[["app-character-article-update"]],features:[oe],decls:18,vars:6,consts:[[1,"main"],[1,"mb-5"],[4,"ngIf","ngIfElse"],[4,"ngIf"],["class","mb-5",4,"ngIf"],[1,"mb-0"],[1,"white-separator"],[3,"model","fields","formlySubmit","formlyCancel",4,"ngIf"],[3,"formlyFields","modelFromUser","modelFromServer","updateSubmit","cancel",4,"ngIf"],["createState",""],["connectionForm",""],["createMembershipHeader",""],["createMembershipForm",""],[3,"isInUpdateState","link"],[1,"text-center"],["id","player-classes","class","mb-5",4,"ngIf"],["id","player-classes",1,"mb-5"],["class","badge badge-secondary mr-3",4,"ngFor","ngForOf"],["class","full-sized",3,"labelText","click",4,"ngIf","ngIfElse"],[1,"badge","badge-secondary","mr-3"],[1,"ml-2","fa","fa-trash","icon",3,"click"],[1,"full-sized",3,"labelText","click"],["id","organizations",4,"ngIf"],["id","organizations"],[3,"model","fields","formlySubmit","formlyCancel"],[3,"formlyFields","modelFromUser","modelFromServer","updateSubmit","cancel"],[1,"d-inline-flex","align-items-center",3,"submit"],["name","connection","id","connection",1,"form-control","d-inline-block",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"fa","fa-times","icon","mx-2","fa-1-5x",3,"click"],["type","submit"],[1,"fa","fa-check","icon","fa-1-5x"],[3,"value"]],template:function(e,i){if(1&e&&(p(0,"div",0),p(1,"article",1),S(2,kne,4,3,"div",2),S(3,Ine,5,1,"div",3),S(4,Fne,5,4,"div",4),p(5,"h4",5),k(6," Character Data "),f(),O(7,"hr",6),S(8,Rne,1,2,"app-formly-formcontainer",7),S(9,Lne,1,3,"app-compare-form-container",8),f(),f(),S(10,$ne,3,2,"ng-template",null,9,se),S(12,Vne,6,2,"ng-template",null,10,se),S(14,Bne,1,0,"ng-template",null,11,se),S(16,Hne,1,2,"ng-template",null,12,se)),2&e){const r=ie(11);g(2),v("ngIf",(i.isInUpdateState()||i.isInOutdatedUpdateState())&&i.userModel)("ngIfElse",r),g(1),v("ngIf",i.isInUpdateState()),g(1),v("ngIf",i.isInUpdateState()),g(4),v("ngIf",i.isInUpdateState()||i.isInCreateState()),g(1),v("ngIf",i.isInOutdatedUpdateState())}},directives:[le,On,je,rm,zn,br,Vr,Ur,Fo,Ro,Si,Us,as,ls],styles:[".badge[_ngcontent-%COMP%]{font-size:100%}"]}),t})();function jne(t,n){if(1&t&&(p(0,"div"),O(1,"app-edit-toggle",6),p(2,"h2",7),k(3),f(),f()),2&t){const e=b();g(1),v("isInUpdateState",!0)("link",e.updateCancelUrl),g(2),Z(" Updating Creature ",e.userModel.name," ")}}function zne(t,n){if(1&t&&(O(0,"app-edit-toggle",6),p(1,"h2",7),k(2," Adding a new Creature "),f()),2&t){const e=b();v("isInUpdateState",!0)("link",e.creationCancelUrl)}}function Gne(t,n){if(1&t){const e=G();p(0,"app-formly-formcontainer",8),A("formlySubmit",function(){return h(e),b().onSubmit()})("formlyCancel",function(){return h(e),b().onCancel()}),f()}if(2&t){const e=b();v("model",e.userModel)("fields",e.formlyFields)}}function Wne(t,n){if(1&t){const e=G();p(0,"app-compare-form-container",9),A("updateSubmit",function(){return h(e),b().onSubmit()})("cancel",function(){return h(e),b().onCancel()}),f()}if(2&t){const e=b();v("formlyFields",e.formlyFields)("modelFromUser",e.userModel)("modelFromServer",e.serverModel)}}let qN=(()=>{class t extends Vo{constructor(e,i,r,o,s,l,c,d,m){super(i,l,s,e,c,d,o,m),this.formlyService=r,this.warnings=s,this.routingService=l,this.campaignService=c,this.userModelClass=Rv,this.formlyFields=[this.formlyService.genericInput({key:"name",isNameInput:!0})]}updateRouterLinks(e,i,r){this.updateCancelUrl=this.routingService.getRoutePath("creature",{name:null==i?void 0:i.name,campaign:e}),this.creationCancelUrl=this.routingService.getRoutePath("creature-overview",{campaign:e})}}return t.\u0275fac=function(e){return new(e||t)(C(Zf),C(Ft),C(mn),C(Me),C(Ze),C(ce),C(ki),C($e),C(ke))},t.\u0275cmp=Y({type:t,selectors:[["app-creature-article-update"]],features:[oe],decls:7,vars:4,consts:[[1,"main"],[1,"mb-5"],[4,"ngIf","ngIfElse"],["createState",""],[3,"model","fields","formlySubmit","formlyCancel",4,"ngIf"],[3,"formlyFields","modelFromUser","modelFromServer","updateSubmit","cancel",4,"ngIf"],[3,"isInUpdateState","link"],[1,"text-center"],[3,"model","fields","formlySubmit","formlyCancel"],[3,"formlyFields","modelFromUser","modelFromServer","updateSubmit","cancel"]],template:function(e,i){if(1&e&&(p(0,"div",0),p(1,"article",1),S(2,jne,4,3,"div",2),S(3,zne,3,2,"ng-template",null,3,se),S(5,Gne,1,2,"app-formly-formcontainer",4),S(6,Wne,1,3,"app-compare-form-container",5),f(),f()),2&e){const r=ie(4);g(2),v("ngIf",(i.isInUpdateState()||i.isInOutdatedUpdateState())&&i.userModel)("ngIfElse",r),g(3),v("ngIf",i.isInUpdateState()||i.isInCreateState()),g(1),v("ngIf",i.isInOutdatedUpdateState())}},directives:[le,On,zn,br],styles:[""]}),t})();const qne={name:"time",message:"Time must have 'hh:mm:ss' pattern"},Qne={name:"required",message:"YOOOOOOOOO This field is required ma friend!"},Zne={name:"date",message:"This date does not follow the pattern: 'YYYY-MM-DD'. Sorry to be such a Nazi about it. The computer is forcing me."},Kne={name:"requiredIcon",message:"This field requires a fontawesome icon as input. Here is a list of them: https://fontawesome.com/v4.7.0/icons/"},Yne={name:"faPrefix",message:"Icons are stored without the 'fa-' from font-awesome prefix"},Jne={name:"notInteger",message:"Your input is not an integer. This field requires an integer number. No amount of revolution can overcome this."},Xne={name:"hasSpecialCharacters",message:'Your input includes one of the following invalid special characters: [ ] ( ) ? | \\ " % ~ # < >. If you need to rebel, please dont against this.'},eie={name:"fieldMatch",message:"Password Not Matching"},QN={name:"isInvalidSessionAuthorPair",message:"\n    The author you selected already has a diaryentry in the session you selected. You \n    can't have 2 diaryentries from the same author in the same session. Consider writing \n    your diaryentry as an encounter instead into the diaryentry at the spot you just considered."},nie={name:"time",validation:function(t){return/\d\d.[0-5]\d.[0-5]\d/.test(t.value)?null:{time:!0}}};function ZN(t){return t.value||0===t.value?null:{required:!0}}const iie={name:"required",validation:ZN},rie={name:"requiredIcon",validation:ZN},sie={name:"date",validation:function(t){return/[1-2]\d{3}-(0\d|1[0-2])-[0-3]\d/.test(t.value)?null:{date:!0}}},lie={name:"faPrefix",validation:function(t){return/fa-/.test(t.value)?{faPrefix:!0}:null}},uie={name:"notInteger",validation:function(t){return"number"==typeof t.value&&Number.isInteger(t.value)?null:{notInteger:!0}}},hie={name:"hasSpecialCharacters",validation:function(t){if("string"==typeof t.value){const e=["[","]","(",")","|","\\",'"',"%","~","#","<",">","?","/"];for(const i of e)if(t.value.includes(i))return{hasSpecialCharacters:!0}}return null}},fie={name:"fieldMatch",validation:function(t){const{password:n,passwordConfirm:e}=t.value;return e&&n&&e!==n?{passwordMatch:{message:"The passwords aren't matching"}}:null}},gie={name:"sessionAuthorPairUnique",validation:function(t){return Et(this,void 0,void 0,function*(){const{session:n,author:e}=t.value,s=(yield t.controls.session._fields[0].templateOptions.options.toPromise()).find(m=>m.pk===n);if(null==s)throw"WeirdError. You selected a session, its id got into the model and somehow that field is no longer among the options (?)";return s.author_ids.includes(e),null})}};function _ie(t,n){if(1&t&&(p(0,"div"),O(1,"app-edit-toggle",6),p(2,"h2",7),k(3),f(),f()),2&t){const e=b();g(1),v("isInUpdateState",!0)("link",e.updateCancelUrl),g(2),Z(' Updating Diaryentry "',e.userModel.title,'" ')}}function vie(t,n){if(1&t&&(O(0,"app-edit-toggle",6),p(1,"h2",7),k(2," Creating a new Diaryentry "),f()),2&t){const e=b();v("isInUpdateState",!0)("link",e.creationCancelUrl)}}function yie(t,n){if(1&t){const e=G();p(0,"app-formly-formcontainer",8),A("formlySubmit",function(){return h(e),b().onSubmit()})("formlyCancel",function(){return h(e),b().onCancel()}),f()}if(2&t){const e=b();v("model",e.userModel)("fields",e.formlyFields)}}function bie(t,n){if(1&t){const e=G();p(0,"app-compare-form-container",9),A("updateSubmit",function(){return h(e),b().onSubmit()})("cancel",function(){return h(e),b().onCancel()}),f()}if(2&t){const e=b();v("formlyFields",e.formlyFields)("modelFromUser",e.userModel)("modelFromServer",e.serverModel)}}let KN=(()=>{class t extends Vo{constructor(e,i,r,o,s,l,c,d,m){super(r,l,s,i,c,d,o,m),this.formlyService=e,this.routingService=l,this.userModelClass=Gf,this.formlyFields=[this.formlyService.genericInput({key:"title",isNameInput:!0}),{asyncValidators:{validation:[{name:"sessionAuthorPairUnique",options:{errorPath:"session"}}]},fieldGroup:[this.formlyService.genericSelect({key:"author",labelProp:"username",sortProp:"username",overviewType:Ie.User,campaign:this.campaign.name}),this.formlyService.genericDisableSelect({key:"session",overviewType:Ie.Session,campaign:this.campaign.name,disabledExpression:this.hasDiaryentryForAuthor,tooltipMessage:"Sessions may be impossible to select if the selected author already has a diaryentry for that session.",warningMessage:QN.message,wrappers:["session-update-wrapper"],showWrapperLabel:!1})]}]}updateRouterLinks(e,i,r){var o,s,l;this.updateCancelUrl=this.routingService.getRoutePath("diaryentry",{campaign:e,isMainSession:null===(o=i.session_details)||void 0===o?void 0:o.is_main_session_int,sessionNumber:null===(s=i.session_details)||void 0===s?void 0:s.session_number,authorName:null===(l=i.author_details)||void 0===l?void 0:l.name}),this.creationCancelUrl=this.routingService.getRoutePath("diaryentry-overview",{campaign:e})}hasDiaryentryForAuthor(e,i,r,o){return!(o.pristine&&r.session===e.pk)&&e.author_ids.includes(r.author)}onCreationSuccess(e){this.routingService.routeToPath("diaryentry",{sessionNumber:e.session_details.session_number,isMainSession:e.session_details.is_main_session_int,authorName:e.author_details.name,campaign:this.campaign.name,displayMode:"encounter"})}}return t.\u0275fac=function(e){return new(e||t)(C(mn),C(Gs),C(Ft),C(Me),C(Ze),C(ce),C(ki),C($e),C(ke))},t.\u0275cmp=Y({type:t,selectors:[["app-diaryentry-article-update"]],features:[oe],decls:7,vars:4,consts:[[1,"main"],[1,"mb-5"],[4,"ngIf","ngIfElse"],["createState",""],[3,"model","fields","formlySubmit","formlyCancel",4,"ngIf"],[3,"formlyFields","modelFromUser","modelFromServer","updateSubmit","cancel",4,"ngIf"],[3,"isInUpdateState","link"],[1,"text-center"],[3,"model","fields","formlySubmit","formlyCancel"],[3,"formlyFields","modelFromUser","modelFromServer","updateSubmit","cancel"]],template:function(e,i){if(1&e&&(p(0,"div",0),p(1,"article",1),S(2,_ie,4,3,"div",2),S(3,vie,3,2,"ng-template",null,3,se),S(5,yie,1,2,"app-formly-formcontainer",4),S(6,bie,1,3,"app-compare-form-container",5),f(),f()),2&e){const r=ie(4);g(2),v("ngIf",(i.isInUpdateState()||i.isInOutdatedUpdateState())&&i.userModel)("ngIfElse",r),g(3),v("ngIf",i.isInUpdateState()||i.isInCreateState()),g(1),v("ngIf",i.isInOutdatedUpdateState())}},directives:[le,On,zn,br],styles:[""]}),t})();function Cie(t,n){if(1&t&&(p(0,"div"),O(1,"app-edit-toggle",6),p(2,"h2",7),k(3),f(),f()),2&t){const e=b();g(1),v("isInUpdateState",!0)("link",e.updateCancelUrl),g(2),Z(" Updating Item ",e.userModel.name," ")}}function wie(t,n){if(1&t&&(O(0,"app-edit-toggle",6),p(1,"h2",7),k(2," Creating a new Item "),f()),2&t){const e=b();v("isInUpdateState",!0)("link",e.creationCancelUrl)}}function Sie(t,n){if(1&t){const e=G();p(0,"app-formly-formcontainer",8),A("formlySubmit",function(){return h(e),b().onSubmit()})("formlyCancel",function(){return h(e),b().onCancel()}),f()}if(2&t){const e=b();v("model",e.userModel)("fields",e.formlyFields)}}function Tie(t,n){if(1&t){const e=G();p(0,"app-compare-form-container",9),A("updateSubmit",function(){return h(e),b().onSubmit()})("cancel",function(){return h(e),b().onCancel()}),f()}if(2&t){const e=b();v("formlyFields",e.formlyFields)("modelFromUser",e.userModel)("modelFromServer",e.serverModel)}}let Vw=(()=>{class t extends Vo{constructor(e,i,r,o,s,l,c,d,m,_){super(r,c,l,e,d,m,o,_),this.characterService=i,this.formlyService=s,this.campaignService=d,this.userModelClass=Wf,this.formlyFields=[this.formlyService.genericInput({key:"name",isNameInput:!0}),this.formlyService.genericSelect({key:"owner",overviewType:Ie.Character,campaign:this.campaign.name,required:!1})]}updateRouterLinks(e,i,r){this.updateCancelUrl=this.routingService.getRoutePath("item",{campaign:e,name:r.name}),this.creationCancelUrl=this.routingService.getRoutePath("item-overview",{campaign:e})}onCancel(){this.isForAssociatedObjectCreation()?this.routingService.routeToPath("character",{name:this.route.snapshot.params.character_name,campaign:this.campaign.name}):Vo.prototype.onCancel(this)}isForAssociatedObjectCreation(){return this.routingService.routeNameMatches(this.route,"item-character-create")}}return t.\u0275fac=function(e){return new(e||t)(C(Kf),C(ir),C(Ft),C(Me),C(mn),C(Ze),C(ce),C(ki),C($e),C(ke))},t.\u0275cmp=Y({type:t,selectors:[["app-item-article-update"]],features:[oe],decls:7,vars:4,consts:[[1,"main"],[1,"mb-5"],[4,"ngIf","ngIfElse"],["createState",""],[3,"model","fields","formlySubmit","formlyCancel",4,"ngIf"],[3,"formlyFields","modelFromUser","modelFromServer","updateSubmit","cancel",4,"ngIf"],[3,"isInUpdateState","link"],[1,"text-center"],[3,"model","fields","formlySubmit","formlyCancel"],[3,"formlyFields","modelFromUser","modelFromServer","updateSubmit","cancel"]],template:function(e,i){if(1&e&&(p(0,"div",0),p(1,"article",1),S(2,Cie,4,3,"div",2),S(3,wie,3,2,"ng-template",null,3,se),S(5,Sie,1,2,"app-formly-formcontainer",4),S(6,Tie,1,3,"app-compare-form-container",5),f(),f()),2&e){const r=ie(4);g(2),v("ngIf",(i.isInUpdateState()||i.isInOutdatedUpdateState())&&i.userModel)("ngIfElse",r),g(3),v("ngIf",i.isInUpdateState()||i.isInCreateState()),g(1),v("ngIf",i.isInOutdatedUpdateState())}},directives:[le,On,zn,br],styles:[""]}),t})();function Eie(t,n){if(1&t&&(p(0,"div"),O(1,"app-edit-toggle",6),p(2,"h2",7),k(3),f(),f()),2&t){const e=b();g(1),v("isInUpdateState",!0)("link",e.updateCancelUrl),g(2),Z(" Updating Location ",e.userModel.name," ")}}function kie(t,n){if(1&t&&(O(0,"app-edit-toggle",6),p(1,"h2",7),k(2," Adding a new Location "),f()),2&t){const e=b();v("isInUpdateState",!0)("link",e.creationCancelUrl)}}function Die(t,n){if(1&t){const e=G();p(0,"app-formly-formcontainer",8),A("formlySubmit",function(){return h(e),b().onSubmit()})("formlyCancel",function(){return h(e),b().onCancel()}),f()}if(2&t){const e=b();v("model",e.userModel)("fields",e.formlyFields)}}function xie(t,n){if(1&t){const e=G();p(0,"app-compare-form-container",9),A("updateSubmit",function(){return h(e),b().onSubmit()})("cancel",function(){return h(e),b().onCancel()}),f()}if(2&t){const e=b();v("formlyFields",e.formlyFields)("modelFromUser",e.userModel)("modelFromServer",e.serverModel)}}let Bw=(()=>{class t extends Vo{constructor(e,i,r,o,s,l,c,d,m){super(r,l,s,i,c,d,o,m),this.formlyService=e,this.userModelClass=Mu,this.formlyFields=[this.formlyService.genericInput({key:"name",isNameInput:!0}),this.formlyService.genericDisableSelect({key:"parent_location",label:"Parent Location",overviewType:Ie.Location,sortProp:"name_full",campaign:this.campaign.name,required:!1,disabledExpression:_=>this.isSameLocation(_,this.userModel)||this.isChildLocation(this.userModel,_),tooltipMessage:"The location that contains this new location, e.g. the location 'Mayor's House' within the location 'Small city Lundorf'",warningMessage:"The location you selected can't have the same name as the location that is trying to contain it! That would mean that this location contained itself!"})]}isSameLocation(e,i){return e.name===i.name}isChildLocation(e,i){return i.parent_location===e.pk}updateRouterLinks(e,i,r){var o;this.updateCancelUrl=this.routingService.getRoutePath("location",{name:i.name,parent_name:null===(o=i.parent_location_details)||void 0===o?void 0:o.name,campaign:e}),this.creationCancelUrl=this.routingService.getRoutePath("location-overview",{campaign:e})}onCancel(){this.isForAssociatedObjectCreation()?this.routingService.routeToPath("location",{name:this.userModel.parent_location_details.name,parent_name:this.userModel.parent_location_details.parent_location}):Vo.prototype.onCancel(this)}isForAssociatedObjectCreation(){return this.routingService.routeNameMatches(this.route,"location-parentlocation-create")}}return t.\u0275fac=function(e){return new(e||t)(C(mn),C(wl),C(Ft),C(Me),C(Ze),C(ce),C(ki),C($e),C(ke))},t.\u0275cmp=Y({type:t,selectors:[["app-location-article-update"]],features:[oe],decls:7,vars:4,consts:[[1,"main"],[1,"mb-5"],[4,"ngIf","ngIfElse"],["createState",""],[3,"model","fields","formlySubmit","formlyCancel",4,"ngIf"],[3,"formlyFields","modelFromUser","modelFromServer","updateSubmit","cancel",4,"ngIf"],[3,"isInUpdateState","link"],[1,"text-center"],[3,"model","fields","formlySubmit","formlyCancel"],[3,"formlyFields","modelFromUser","modelFromServer","updateSubmit","cancel"]],template:function(e,i){if(1&e&&(p(0,"div",0),p(1,"article",1),S(2,Eie,4,3,"div",2),S(3,kie,3,2,"ng-template",null,3,se),S(5,Die,1,2,"app-formly-formcontainer",4),S(6,xie,1,3,"app-compare-form-container",5),f(),f()),2&e){const r=ie(4);g(2),v("ngIf",(i.isInUpdateState()||i.isInOutdatedUpdateState())&&i.userModel)("ngIfElse",r),g(3),v("ngIf",i.isInUpdateState()||i.isInCreateState()),g(1),v("ngIf",i.isInOutdatedUpdateState())}},directives:[le,On,zn,br],styles:[""]}),t})();function Mie(t,n){if(1&t&&(p(0,"div"),O(1,"app-edit-toggle",6),p(2,"h2",7),k(3),f(),f()),2&t){const e=b();g(1),v("isInUpdateState",!0)("link",".."),g(2),Z(" Updating Organization ",e.userModel.name," ")}}function Iie(t,n){if(1&t&&(O(0,"app-edit-toggle",6),p(1,"h2",7),k(2," Creating a new Organization "),f()),2&t){const e=b();v("isInUpdateState",!0)("link",e.creationCancelUrl)}}function Pie(t,n){if(1&t){const e=G();p(0,"app-formly-formcontainer",8),A("formlySubmit",function(){return h(e),b().onSubmit()})("formlyCancel",function(){return h(e),b().onCancel()}),f()}if(2&t){const e=b();v("model",e.userModel)("fields",e.formlyFields)}}function Aie(t,n){if(1&t){const e=G();p(0,"app-compare-form-container",9),A("updateSubmit",function(){return h(e),b().onSubmit()})("cancel",function(){return h(e),b().onCancel()}),f()}if(2&t){const e=b();v("formlyFields",e.formlyFields)("modelFromUser",e.userModel)("modelFromServer",e.serverModel)}}let YN=(()=>{class t extends Vo{constructor(e,i,r,o,s,l,c,d,m){super(i,l,s,e,c,d,r,m),this.formlyService=o,this.warnings=s,this.routingService=l,this.userModelClass=Lv,this.formlyFields=[this.formlyService.genericInput({key:"name",isNameInput:!0}),this.formlyService.genericSelect({key:"leader",valueProp:"name",overviewType:Ie.Character,campaign:this.campaign.name,required:!1}),this.formlyService.genericSelect({key:"headquarter",sortProp:"name_full",overviewType:Ie.Location,campaign:this.campaign.name,required:!1})]}updateRouterLinks(e,i,r){this.creationCancelUrl=this.routingService.getRoutePath("organization-overview",{campaign:e}),this.updateCancelUrl=this.routingService.getRoutePath("organization",{campaign:e,name:r.name})}}return t.\u0275fac=function(e){return new(e||t)(C(wh),C(Ft),C(Me),C(mn),C(Ze),C(ce),C(ki),C($e),C(ke))},t.\u0275cmp=Y({type:t,selectors:[["app-organization-article-update"]],features:[oe],decls:7,vars:4,consts:[[1,"main"],[1,"mb-5"],[4,"ngIf","ngIfElse"],["createState",""],[3,"model","fields","formlySubmit","formlyCancel",4,"ngIf"],[3,"formlyFields","modelFromUser","modelFromServer","updateSubmit","cancel",4,"ngIf"],[3,"isInUpdateState","link"],[1,"text-center"],[3,"model","fields","formlySubmit","formlyCancel"],[3,"formlyFields","modelFromUser","modelFromServer","updateSubmit","cancel"]],template:function(e,i){if(1&e&&(p(0,"div",0),p(1,"article",1),S(2,Mie,4,3,"div",2),S(3,Iie,3,2,"ng-template",null,3,se),S(5,Pie,1,2,"app-formly-formcontainer",4),S(6,Aie,1,3,"app-compare-form-container",5),f(),f()),2&e){const r=ie(4);g(2),v("ngIf",(i.isInUpdateState()||i.isInOutdatedUpdateState())&&i.userModel)("ngIfElse",r),g(3),v("ngIf",i.isInUpdateState()||i.isInCreateState()),g(1),v("ngIf",i.isInOutdatedUpdateState())}},directives:[le,On,zn,br],styles:[""]}),t})();function Oie(t,n){1&t&&(p(0,"div",17),p(1,"div",18),O(2,"app-edit-toggle",19),f(),f()),2&t&&(g(2),v("isInUpdateState",!1)("link","update"))}function Nie(t,n){if(1&t&&(p(0,"span"),k(1),f()),2&t){const e=b();g(1),Z(" ",e.articleData.end_session_details.name," ")}}function Fie(t,n){1&t&&k(0,"Ongoing")}function Rie(t,n){if(1&t&&(p(0,"a",20),k(1),f()),2&t){const e=b();xe("routerLink",e.questGiverUrl),g(1),Z(" ",e.articleData.giver_details.name," ")}}function Lie(t,n){1&t&&k(0," None ")}let $ie=(()=>{class t extends Hs{constructor(e,i,r,o,s,l){super(e,i,o,r,s,l),this.route=i,this.warnings=r,this.routingService=o,this.queryParameterName="name",this.deleteRoute={routeName:"quest-overview",params:{campaign:this.campaign}}}updateDynamicVariables(e,i,r){this.questGiverUrl=this.routingService.getRoutePath("character",{name:i.giver_details.name,campaign:e.name}),this.questOverviewUrl=this.routingService.getRoutePath("quest-overview",{campaign:e.name})}}return t.\u0275fac=function(e){return new(e||t)(C(ds),C(Me),C(Ze),C(ce),C($e),C(ke))},t.\u0275cmp=Y({type:t,selectors:[["app-quest-article"]],features:[oe],decls:30,vars:14,consts:[[1,"main"],["article",""],[1,"container"],["class","row",4,"ngIf"],[1,"row","mb-3"],[1,"text-center","col"],[1,"subheading","row"],[1,"col-5"],[1,"col-7"],[4,"ngIf","ngIfElse"],["class","d-inline"],["Ongoing",""],[3,"routerLink",4,"ngIf","ngIfElse"],["NoQuestGiver",""],[1,"my-5"],[3,"initialText","heading","formStateSubject","updateText"],[3,"link","label","deleteMessage","delete"],[1,"row"],[1,"col-12"],[3,"isInUpdateState","link"],[3,"routerLink"]],template:function(e,i){if(1&e&&(p(0,"div",0,1),p(2,"article",2),S(3,Oie,3,2,"div",3),p(4,"div",4),p(5,"h1",5),k(6),f(),f(),p(7,"div",6),p(8,"span",7),k(9,"Status:"),f(),p(10,"span",8),k(11),f(),f(),p(12,"div",6),p(13,"div",7),k(14,"Start - End:"),f(),p(15,"div",8),k(16),S(17,Nie,2,1,"span",9),S(18,Fie,1,0,"ng-template",10,11,se),f(),f(),p(20,"div",6),p(21,"span",7),k(22,"Quest Giver:"),f(),p(23,"span",8),S(24,Rie,2,2,"a",12),f(),S(25,Lie,1,0,"ng-template",null,13,se),f(),p(27,"div",14),p(28,"app-textfield",15),A("updateText",function(o){return i.onDescriptionUpdate(o)}),f(),f(),p(29,"app-article-footer",16),A("delete",function(){return i.deleteArticle()}),f(),f(),f()),2&e){const r=ie(19),o=ie(26);g(3),v("ngIf",i.hasUpdatePermission),g(3),Z(" ",i.articleData.name," "),g(5),Le(i.articleData.status),g(5),Z(" ",i.articleData.start_session_details.name," - "),g(1),v("ngIf",i.articleData.end_session_details)("ngIfElse",r),g(7),v("ngIf",i.articleData.giver_details)("ngIfElse",o),g(4),v("initialText",i.articleData.description)("heading","Description")("formStateSubject",i.textfieldFormStateSubject),g(1),v("link",i.questOverviewUrl)("label","Back to Quest Overview")("deleteMessage","Delete Quest ?")}},directives:[le,El,Ws,On,Ht],styles:["h4[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{opacity:0;transition:opacity .2s}h4[_ngcontent-%COMP%]:hover   .icon[_ngcontent-%COMP%]{opacity:1}"]}),t})();function Uie(t,n){if(1&t&&(p(0,"div"),O(1,"app-edit-toggle",6),p(2,"h2",7),k(3),f(),f()),2&t){const e=b();g(1),v("isInUpdateState",!0)("link",e.updateCancelUrl),g(2),Z(" Updating Quest ",e.userModel.name," ")}}function Vie(t,n){if(1&t&&(O(0,"app-edit-toggle",6),p(1,"h2",7),k(2," Creating a new Quest "),f()),2&t){const e=b();v("isInUpdateState",!0)("link",e.creationCancelUrl)}}function Bie(t,n){if(1&t){const e=G();p(0,"app-formly-formcontainer",8),A("formlySubmit",function(){return h(e),b().onSubmit()})("formlyCancel",function(){return h(e),b().onCancel()}),f()}if(2&t){const e=b();v("model",e.userModel)("fields",e.formlyFields)}}function Hie(t,n){if(1&t){const e=G();p(0,"app-compare-form-container",9),A("updateSubmit",function(){return h(e),b().onSubmit()})("cancel",function(){return h(e),b().onCancel()}),f()}if(2&t){const e=b();v("formlyFields",e.formlyFields)("modelFromUser",e.userModel)("modelFromServer",e.serverModel)}}let JN=(()=>{class t extends Vo{constructor(e,i,r,o,s,l,c,d,m){super(i,l,s,e,c,d,r,m),this.questService=e,this.formlyService=o,this.warnings=s,this.routingService=l,this.userModelClass=$v,this.formlyFields=[this.formlyService.genericInput({key:"name",placeholder:"Quest Name",isNameInput:!0}),{key:"status",type:"select",templateOptions:{label:"Quest Status",labelProp:"label",valueProp:"value",options:this.questService.getQuestStates(),required:!0}},this.formlyService.genericSelect({key:"giver",label:"Quest Giver",overviewType:Ie.Character,campaign:this.campaign.name}),{key:"taker",type:"select",templateOptions:{label:"Quest Taker",labelProp:"name",valueProp:"pk",options:this.questService.getQuestTakers(this.campaign.name)}},this.formlyService.genericSelect({key:"start_session",label:"Start Session",overviewType:Ie.Session,campaign:this.campaign.name}),this.formlyService.genericSelect({key:"end_session",label:"End Session",overviewType:Ie.Session,campaign:this.campaign.name,required:!1}),this.formlyService.genericInput({key:"abstract",placeholder:"Quest Summary...",required:!1,maxLength:65})]}updateRouterLinks(e,i,r){this.updateCancelUrl=this.routingService.getRoutePath("quest",{campaign:e,name:i.name}),this.creationCancelUrl=this.routingService.getRoutePath("quest-overview",{campaign:e})}}return t.\u0275fac=function(e){return new(e||t)(C(ds),C(Ft),C(Me),C(mn),C(Ze),C(ce),C(ki),C($e),C(ke))},t.\u0275cmp=Y({type:t,selectors:[["app-quest-article-update"]],features:[oe],decls:7,vars:4,consts:[[1,"main"],[1,"mb-5"],[4,"ngIf","ngIfElse"],["createState",""],[3,"model","fields","formlySubmit","formlyCancel",4,"ngIf"],[3,"formlyFields","modelFromUser","modelFromServer","updateSubmit","cancel",4,"ngIf"],[3,"isInUpdateState","link"],[1,"text-center"],[3,"model","fields","formlySubmit","formlyCancel"],[3,"formlyFields","modelFromUser","modelFromServer","updateSubmit","cancel"]],template:function(e,i){if(1&e&&(p(0,"div",0),p(1,"article",1),S(2,Uie,4,3,"div",2),S(3,Vie,3,2,"ng-template",null,3,se),S(5,Bie,1,2,"app-formly-formcontainer",4),S(6,Hie,1,3,"app-compare-form-container",5),f(),f()),2&e){const r=ie(4);g(2),v("ngIf",(i.isInUpdateState()||i.isInOutdatedUpdateState())&&i.userModel)("ngIfElse",r),g(3),v("ngIf",i.isInUpdateState()||i.isInCreateState()),g(1),v("ngIf",i.isInOutdatedUpdateState())}},directives:[le,On,zn,br],styles:[""]}),t})();const jie=["overviewMainCard"];function zie(t,n){if(1&t&&(p(0,"option",22),k(1),f()),2&t){const e=n.$implicit;xe("value",e),g(1),Z(" ",e," ")}}const Gie=function(t){return{"d-none":t}},Wie=function(t,n,e){return{"completed bg-success":t,"on-hold bg-warning":n,"failed bg-danger":e}},qie=function(t,n,e,i){return{fa:!0,"fa-check-square-o":t,"fa-hourglass-half":n,"fa-times":e,"fa-spinner":i}};function Qie(t,n){if(1&t&&(p(0,"tr",23),p(1,"td"),p(2,"a",24),p(3,"strong"),k(4),f(),f(),f(),p(5,"td",25),k(6),f(),p(7,"td",23),O(8,"i",26),f(),f()),2&t){const e=n.$implicit,i=b().$implicit,r=b();v("ngClass",ht(7,Gie,r.isFilteredOut(r.filterStates[i.key],e.status))),g(2),Po("id","quest",e.pk,""),xe("routerLink",e.getAbsoluteRouterUrl()),g(2),Le(e.name),g(2),Z(" ",e.abstract,""),g(1),v("ngClass",au(9,Wie,"Completed"===e.status,"On Hold"===e.status,"Failed"===e.status)),g(1),v("ngClass",x1(13,qie,"Completed"===e.status,"On Hold"===e.status,"Failed"===e.status,"In progress"===e.status))}}function Zie(t,n){if(1&t){const e=G();p(0,"div",10),p(1,"div",11),p(2,"div",3),p(3,"h4",12),k(4),f(),p(5,"select",13),A("ngModelChange",function(r){const s=h(e).$implicit;return b().filterStates[s.key]=r}),p(6,"option",14),k(7,"Default"),f(),p(8,"option",15),k(9,"All"),f(),S(10,zie,2,2,"option",16),f(),f(),f(),p(11,"table",17),p(12,"thead"),p(13,"tr"),p(14,"th",18),k(15,"Name"),f(),p(16,"th",19),k(17," Description "),f(),p(18,"th",18),k(19,"Status"),f(),f(),f(),p(20,"tbody",20),S(21,Qie,9,18,"tr",21),f(),f(),f()}if(2&t){const e=n.$implicit,i=b();g(4),Z(" ",e.key,"'s Quests "),g(1),v("ngModel",i.filterStates[e.key]),g(5),v("ngForOf",i.filterStateTypes),g(10),Po("id","",e.key,"-quests"),g(1),v("ngForOf",e.value)}}let Kie=(()=>{class t extends ji{constructor(e,i,r){super(r,i),this.routingService=e,this.constants=$}ngOnInit(){this.campaign=this.route.snapshot.data.campaign;const e=this.route.snapshot.data.overviewList;this.quests=this.groupQuestsByTaker(e);const i=e.map(s=>s.taker_details.name),r=[...new Set(i)];this.filterStates={},r.forEach(s=>this.filterStates[s]="Default");const o=e.map(s=>s.status);this.filterStateTypes=[...new Set(o)],this.updateDynamicVariables(this.campaign,e,this.route.snapshot.params)}updateDynamicVariables(e,i,r){this.homeUrl=this.routingService.getRoutePath("home1",{campaign:e.name})}ngAfterViewInit(){var e;!(null===(e=this.articleElement)||void 0===e?void 0:e.nativeElement)||hi(this.articleElement.nativeElement,"fadeIn")}groupQuestsByTaker(e){const r=e.reduce((c,d)=>{const m=d.taker_details.name;return c.hasOwnProperty(m)?c[m].push(d):c[m]=[d],c},{}),s=Object.keys(r).map(c=>({key:c,value:r[c]})).sort((c,d)=>"Group"===c.key?-1:"Group"===d.key||c.key>d.key?1:c.key===d.key?0:-1),l={"In progress":1,"On Hold":2,Completed:3,Failed:4};for(const[c,d]of s.entries())s[c].value=d.value.sort((m,_)=>m.status!==_.status?l[m.status]-l[_.status]:m.name>_.name?1:m.name<_.name?-1:void 0);return s}isFilteredOut(e,i){return!("All"===e||i===e||"Default"===e&&("In progress"===i||"On Hold"===i))}capitalizeString(e){return e.charAt(0).toUpperCase()+e.slice(1)}}return t.\u0275fac=function(e){return new(e||t)(C(ce),C(Me),C(ke))},t.\u0275cmp=Y({type:t,selectors:[["app-quest-overview"]],viewQuery:function(e,i){if(1&e&&pt(jie,5),2&e){let r;ye(r=be())&&(i.articleElement=r.first)}},features:[oe],decls:14,vars:2,consts:[[1,"main"],["overviewMainCard",""],[1,"container"],[1,"row"],[1,"major","col","mb-4","pb-1","border-bottom"],[1,"row","mb-3"],["routerLink","create",1,"col-md-3","btn","btn-primary"],[1,"fas","fa-plus"],["class","row mb-5",4,"ngFor","ngForOf"],[1,"btn","btn-secondary","col-md-3",3,"routerLink"],[1,"row","mb-5"],[1,"mb-3","col-12"],[1,"col-md-9","my-auto","px-0"],["name","quest-status",1,"col-md-3",3,"ngModel","ngModelChange"],["selected","","value","Default"],["value","All"],[3,"value",4,"ngFor","ngForOf"],[1,"table","table-dark","table-striped","mytable","pb-2"],["scope","col"],["scope","col",1,"hide-on-mobile"],[3,"id"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"value"],[3,"ngClass"],[3,"id","routerLink"],[1,"hide-on-mobile"],["title","quest.status",3,"ngClass"]],template:function(e,i){1&e&&(p(0,"div",0,1),p(2,"article",2),p(3,"div",3),p(4,"h2",4),k(5,"Quests"),f(),f(),p(6,"div",5),p(7,"div",6),O(8,"span",7),k(9," Add quest "),f(),f(),S(10,Zie,22,5,"div",8),p(11,"div",3),p(12,"div",9),k(13," Back To Frontpage "),f(),f(),f(),f()),2&e&&(g(10),v("ngForOf",i.quests),g(2),xe("routerLink",i.homeUrl))},directives:[us,je,Ro,Si,Us,as,ls,Yt,Ht],styles:[".mytable[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%], .mytable[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > th[_ngcontent-%COMP%], .mytable[_ngcontent-%COMP%] > tfoot[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%], .mytable[_ngcontent-%COMP%] > tfoot[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > th[_ngcontent-%COMP%], .mytable[_ngcontent-%COMP%] > thead[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%], .mytable[_ngcontent-%COMP%] > thead[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > th[_ngcontent-%COMP%]{padding-left:1rem;padding-right:1rem}select[_ngcontent-%COMP%]{background-color:#4c4c4c;height:calc(1.5em + .75rem + 2px);font-size:.9375rem;line-height:1.5;background-clip:padding-box;border:1px solid #222;border-radius:.25rem;transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out;color:#fff}.bg-warning[_ngcontent-%COMP%]{background-color:#ffc8244d!important}.bg-success[_ngcontent-%COMP%]{background-color:#93c47d4d!important}.bg-danger[_ngcontent-%COMP%]{background-color:#ce0a0a4d!important}.form-control[_ngcontent-%COMP%]{max-width:20%;min-width:8rem}"]}),t})(),Yie=(()=>{class t extends Oa{constructor(e){super(e),this.baseUrl=`${$.wikiApiUrl}/spellclassconnection`}}return t.\u0275fac=function(e){return new(e||t)(P(zt))},t.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const Jie=["spellCard"];function Xie(t,n){1&t&&(p(0,"span",20),k(1,"(C)"),f())}function ere(t,n){1&t&&(p(0,"span",20),k(1,"(R)"),f())}function tre(t,n){if(1&t){const e=G();p(0,"span",21),A("click",function(r){const s=h(e).$implicit;return b().emitClassSelectEvent(r,s.player_class_details.name)}),k(1),f()}if(2&t){const e=n.$implicit;g(1),Z(" ",e.player_class_details.name," ")}}const nre=function(t,n){return{"fa-pencil":t,"fa-times":n}};function ire(t,n){if(1&t){const e=G();p(0,"div",22),A("click",function(){return h(e),b().toggleFormState()}),O(1,"i",23),f()}if(2&t){const e=b();g(1),v("ngClass",Bn(1,nre,e.isInDisplayState(),!e.isInDisplayState()))}}function rre(t,n){if(1&t&&(p(0,"div",32),k(1),f()),2&t){const e=b(2);g(1),Z(" ",e.cardData.spell_level," ")}}function ore(t,n){1&t&&(p(0,"div",33),k(1," Placeholder "),f())}function sre(t,n){if(1&t&&(p(0,"div",32),k(1),f()),2&t){const e=b(2);g(1),Z(" ",e.cardData.casting_time," ")}}function are(t,n){1&t&&(p(0,"div",33),k(1," Placeholder "),f())}function lre(t,n){if(1&t&&(p(0,"div",32),k(1),f()),2&t){const e=b(2);g(1),Z(" ",e.cardData.range," ")}}function cre(t,n){1&t&&(p(0,"div",33),k(1," Placeholder "),f())}function ure(t,n){if(1&t&&(p(0,"div",32),k(1),f()),2&t){const e=b(2);g(1),Z(" ",e.cardData.components," ")}}function dre(t,n){1&t&&(p(0,"div",33),k(1," Placeholder "),f())}function hre(t,n){if(1&t&&(p(0,"div",32),k(1),f()),2&t){const e=b(2);g(1),Z(" ",e.cardData.duration," ")}}function pre(t,n){1&t&&(p(0,"div",33),k(1," Placeholder "),f())}function fre(t,n){if(1&t&&(p(0,"div",32),k(1),f()),2&t){const e=b(2);g(1),Z(" ",e.cardData.school," ")}}function mre(t,n){1&t&&(p(0,"div",33),k(1," Placeholder "),f())}function gre(t,n){if(1&t&&(p(0,"div",32),k(1),f()),2&t){const e=b(2);g(1),Z(" ",e.cardData.saving_throw," ")}}function _re(t,n){1&t&&(p(0,"div",33),k(1," Placeholder "),f())}function vre(t,n){if(1&t&&(p(0,"div",32),k(1),f()),2&t){const e=b(2);g(1),Z(" ",e.cardData.damage," ")}}function yre(t,n){1&t&&(p(0,"div",33),k(1," Placeholder "),f())}function bre(t,n){if(1&t&&(p(0,"div",24),p(1,"div",25),p(2,"div",26),p(3,"strong",27),k(4,"SPELL LEVEL"),f(),S(5,rre,2,1,"div",28),S(6,ore,2,0,"div",29),f(),p(7,"div",26),p(8,"strong",27),k(9,"CASTING TIME"),f(),S(10,sre,2,1,"div",28),S(11,are,2,0,"div",29),f(),p(12,"div",26),p(13,"strong",27),k(14,"RANGE/AREA"),f(),S(15,lre,2,1,"div",28),S(16,cre,2,0,"div",29),f(),p(17,"div",26),p(18,"strong",27),k(19,"COMPONENTS"),f(),S(20,ure,2,1,"div",28),S(21,dre,2,0,"div",29),f(),p(22,"div",26),p(23,"strong",27),k(24,"DURATION"),f(),S(25,hre,2,1,"div",28),S(26,pre,2,0,"div",29),f(),p(27,"div",26),p(28,"strong",27),k(29,"SCHOOL"),f(),S(30,fre,2,1,"div",28),S(31,mre,2,0,"div",29),f(),p(32,"div",26),p(33,"strong",27),k(34,"ATTACK/SAVE"),f(),S(35,gre,2,1,"div",28),S(36,_re,2,0,"div",29),f(),p(37,"div",26),p(38,"strong",27),k(39,"EFFECT"),f(),S(40,vre,2,1,"div",28),S(41,yre,2,0,"div",29),f(),p(42,"div",30),p(43,"strong",27),k(44,"DESCRIPTION"),f(),O(45,"div",31),f(),f(),f()),2&t){const e=b();g(5),v("ngIf",e.cardData.spell_level),g(1),v("ngIf",!e.cardData.spell_level),g(4),v("ngIf",e.cardData.casting_time),g(1),v("ngIf",!e.cardData.casting_time),g(4),v("ngIf",e.cardData.range),g(1),v("ngIf",!e.cardData.range),g(4),v("ngIf",e.cardData.components),g(1),v("ngIf",!e.cardData.components),g(4),v("ngIf",e.cardData.duration),g(1),v("ngIf",!e.cardData.duration),g(4),v("ngIf",e.cardData.school),g(1),v("ngIf",!e.cardData.school),g(4),v("ngIf",e.cardData.saving_throw),g(1),v("ngIf",!e.cardData.saving_throw),g(4),v("ngIf",e.cardData.damage),g(1),v("ngIf",!e.cardData.damage),g(4),v("innerHTML",e.cardData.description,Or)}}function Cre(t,n){if(1&t){const e=G();p(0,"span",36),A("click",function(){h(e);const r=b().$implicit;return b().deleteSpellPlayerClassConnection(r)}),f()}}function wre(t,n){if(1&t){const e=G();p(0,"span",34),A("click",function(r){const s=h(e).$implicit;return b().emitClassSelectEvent(r,s.player_class_details.name)}),k(1),S(2,Cre,1,0,"span",35),f()}if(2&t){const e=n.$implicit,i=b();g(1),Z(" ",e.player_class_details.name," "),g(1),v("ngIf",i.tokenService.isAdmin())}}function Sre(t,n){if(1&t){const e=G();p(0,"app-inline-create-button",38),A("click",function(){return h(e),b(2).toggleConnectionCreateState()}),f()}2&t&&v("labelText","Add Class")}function Tre(t,n){if(1&t&&(Vt(0),S(1,Sre,1,1,"app-inline-create-button",37),Bt()),2&t){const e=b(),i=ie(29);g(1),v("ngIf",!e.isSpellConnectionCreateState)("ngIfElse",i)}}function Ere(t,n){if(1&t){const e=G();p(0,"app-formly-formcontainer",39),A("formlySubmit",function(){return h(e),b().onSubmit()})("formlyCancel",function(){return h(e),b().onCancel()}),f()}if(2&t){const e=b();v("model",e.userModel)("fields",e.formlyFields)}}function kre(t,n){if(1&t){const e=G();p(0,"app-compare-form-container",40),A("updateSubmit",function(){return h(e),b().onSubmit()})("cancel",function(){return h(e),b().onCancel()}),f()}if(2&t){const e=b();v("formlyFields",e.formlyFields)("modelFromUser",e.userModel)("modelFromServer",e.serverModel)("displayVertically",!0)}}function Dre(t,n){1&t&&O(0,"div",41)}function xre(t,n){if(1&t&&(p(0,"option",48),k(1),f()),2&t){const e=n.$implicit,i=b(2);xe("value",e.pk),Ct("disabled",!!i.hasConnection(e)||null),g(1),Z(" ",e.name," ")}}function Mre(t,n){if(1&t){const e=G();p(0,"form",42),A("submit",function(){h(e);const r=b();return r.createSpellPlayerClassConnection(r.connectionModel)}),p(1,"select",43),A("ngModelChange",function(r){return h(e),b().connectionModel.player_class=r}),S(2,xre,2,3,"option",44),f(),p(3,"i",45),A("click",function(){return h(e),b().toggleConnectionCreateState()}),f(),p(4,"button",46),O(5,"i",47),f(),f()}if(2&t){const e=b();g(1),v("ngModel",e.connectionModel.player_class),g(1),v("ngForOf",e.playerClasses)}}const Ire=function(t){return{"animate__animated animate__fadeInUp":t}},Pre=function(t,n){return{"fa-chevron-down":t,"fa-chevron-up":n}};let Are=(()=>{class t extends Yv{constructor(e,i,r,o,s,l,c,d,m){super(r,e,m,c),this.formlyService=i,this.warnings=r,this.routingService=o,this.spellConnectionService=s,this.playerClassService=l,this.element=d,this.userModelClass=Uv,this.classSelect=new q,this.cardDelete=new q,this.isSpellConnectionCreateState=!1,this.formlyFields=[this.formlyService.genericCheckbox({key:"concentration",label:"Concentration",defaultValue:!1}),this.formlyService.genericCheckbox({key:"ritual",defaultValue:!1}),this.formlyService.genericInput({key:"name",isNameInput:!0}),this.formlyService.customSelect({key:"spell_level",label:"Spell Level",options:$.spellLevelOptions}),this.formlyService.customSelect({key:"casting_time",label:"Casting Time",options:$.castingTimeOptions}),this.formlyService.customSelect({key:"duration",options:$.durationOptions}),this.formlyService.customSelect({key:"range",options:$.rangeOptions}),this.formlyService.customSelect({key:"components",options:$.componentOptions}),this.formlyService.customSelect({key:"school",options:$.schoolOptions}),this.formlyService.customSelect({key:"saving_throw",label:"Saving Throw",options:$.savingThrowOptions,required:!1}),this.formlyService.genericInput({key:"damage",label:"Effect",maxLength:40,required:!1}),this.formlyService.genericTextField({key:"description"})]}toggleSpellCard(e){var i,r,o;const s=e.target.classList.contains("badge"),l="FORM"===e.target.tagName||"FORM"===(null===(i=e.target.parentElement)||void 0===i?void 0:i.tagName)||"FORM"===(null===(o=null===(r=e.target.parentElement)||void 0===r?void 0:r.parentElement)||void 0===o?void 0:o.tagName);s||l||this.toggleCard()}emitClassSelectEvent(e,i){e.target.classList.contains("icon")||this.classSelect.emit(i)}toggleConnectionCreateState(){this.playerClasses||this.playerClassService.list().pipe(re()).subscribe(e=>this.playerClasses=e,e=>this.warnings.showWarning(e)),this.isSpellConnectionCreateState=!this.isSpellConnectionCreateState,this.resetConnectionModel()}deleteSpellPlayerClassConnection(e){this.spellConnectionService.delete(e.pk).pipe(re()).subscribe(i=>{const r=this.cardData.player_class_connections.indexOf(e);this.cardData.player_class_connections.splice(r,1)},i=>this.warnings.showWarning(i))}createSpellPlayerClassConnection(e){e.player_class=parseInt(`${e.player_class}`),this.spellConnectionService.create(e).pipe(re()).subscribe(i=>{this.cardData.player_class_connections.push(i),this.toggleConnectionCreateState()},i=>this.warnings.showWarning(i))}resetConnectionModel(){this.connectionModel={player_class:null,spell:this.cardData.pk}}hasConnection(e){return this.cardData.player_class_connections.some(i=>i.player_class===e.pk)}}return t.\u0275fac=function(e){return new(e||t)(C(zv),C(mn),C(Ze),C(ce),C(Yie),C(Uw),C(ke),C(Ye),C(Me))},t.\u0275cmp=Y({type:t,selectors:[["app-spell"]],viewQuery:function(e,i){if(1&e&&pt(Jie,5),2&e){let r;ye(r=be())&&(i.card=r.first)}},inputs:{cardData:"cardData"},outputs:{classSelect:"classSelect"},features:[oe],decls:30,vars:20,consts:[[1,"card","mb-3","px-4","pt-3","pb-1",3,"ngClass"],["spellCard",""],[1,"pointer","col-12","justify-content-between","d-flex","align-items-center","spell-title",3,"click"],["class","ml-2",4,"ngIf"],[1,"d-inline-flex","flex-wrap","align-items-center","ml-3"],["class","badge badge-secondary badge-sm mr-3",3,"click",4,"ngFor","ngForOf"],[1,"fa","icon",3,"ngClass"],[1,"mb-3",3,"ngbCollapse"],[1,"col-12"],[1,"white-separator","mb-2"],[1,"w-100","mb-4","d-flex","justify-content-between"],["class","btn btn-secondary max-content",3,"click",4,"ngIf"],["class","container",4,"ngIf"],["class","badge badge-secondary badge-lg p-2 mr-3 pointer",3,"click",4,"ngFor","ngForOf"],[4,"ngIf"],[3,"model","fields","formlySubmit","formlyCancel",4,"ngIf"],["class","d-flex justify-content-center",3,"formlyFields","modelFromUser","modelFromServer","displayVertically","updateSubmit","cancel",4,"ngIf"],[3,"deleteMessage","deleteEvent"],["formField",""],["connectionForm",""],[1,"ml-2"],[1,"badge","badge-secondary","badge-sm","mr-3",3,"click"],[1,"btn","btn-secondary","max-content",3,"click"],[1,"fa",3,"ngClass"],[1,"container"],[1,"row"],[1,"col-md-3","col-6","d-flex","flex-column","spell"],[1,"border-bottom-grey","column-heading"],["class","column-body",4,"ngIf"],["class","column-body placeholder",4,"ngIf"],[1,"col-12","d-flex","flex-column","spell"],[1,"column-body",3,"innerHTML"],[1,"column-body"],[1,"column-body","placeholder"],[1,"badge","badge-secondary","badge-lg","p-2","mr-3","pointer",3,"click"],["class","fa fa-trash ml-2",3,"click",4,"ngIf"],[1,"fa","fa-trash","ml-2",3,"click"],[3,"labelText","click",4,"ngIf","ngIfElse"],[3,"labelText","click"],[3,"model","fields","formlySubmit","formlyCancel"],[1,"d-flex","justify-content-center",3,"formlyFields","modelFromUser","modelFromServer","displayVertically","updateSubmit","cancel"],["id","edit-section"],[1,"d-inline-flex","align-items-center",3,"submit"],["name","connection","id","connection",1,"form-control","d-inline-block",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"fa","fa-times","icon","mx-2","fa-1-5x",3,"click"],["type","submit",1,"mx-2"],[1,"fa","fa-check","icon","fa-1-5x"],[3,"value"]],template:function(e,i){1&e&&(p(0,"div",0,1),p(2,"h5",2),A("click",function(o){return i.toggleSpellCard(o)}),p(3,"strong"),p(4,"span"),k(5),f(),S(6,Xie,2,0,"span",3),S(7,ere,2,0,"span",3),p(8,"span",4),S(9,tre,2,1,"span",5),f(),f(),O(10,"i",6),f(),p(11,"div",7),p(12,"div",8),O(13,"hr",9),p(14,"div",10),p(15,"h4"),k(16),f(),S(17,ire,2,4,"div",11),f(),S(18,bre,46,17,"div",12),p(19,"div"),k(20," Classes: "),S(21,wre,3,2,"span",13),S(22,Tre,2,2,"ng-container",14),f(),S(23,Ere,1,2,"app-formly-formcontainer",15),S(24,kre,1,4,"app-compare-form-container",16),p(25,"app-delete-toggle",17),A("deleteEvent",function(){return i.articleDelete(i.cardData)}),f(),f(),f(),f(),S(26,Dre,1,0,"ng-template",null,18,se),S(28,Mre,6,2,"ng-template",null,19,se)),2&e&&(v("ngClass",ht(15,Ire,i.isInCreateState())),g(5),Le(i.cardData.name),g(1),v("ngIf",i.cardData.concentration),g(1),v("ngIf",i.cardData.ritual),g(2),v("ngForOf",i.cardData.player_class_connections),g(1),v("ngClass",Bn(17,Pre,!i.isOpen,i.isOpen)),g(1),v("ngbCollapse",!i.isOpen),g(5),Le(i.cardData.name),g(1),v("ngIf",i.hasUpdatePermission),g(1),v("ngIf",i.isInDisplayState()),g(3),v("ngForOf",i.cardData.player_class_connections),g(1),v("ngIf",i.tokenService.isAdmin()),g(1),v("ngIf",i.isInCreateState()||i.isInUpdateState()),g(1),v("ngIf",i.isInOutdatedUpdateState()),g(1),v("deleteMessage","Delete this Spell ?"))},directives:[Yt,le,je,B0,Ic,rm,zn,br,Vr,Ur,Fo,Ro,Si,Us,as,ls],styles:["button.btn.btn-link[_ngcontent-%COMP%]:hover{text-decoration:none!important}button.btn.btn-link[_ngcontent-%COMP%]:focus{text-decoration:none!important;box-shadow:none!important}.card[_ngcontent-%COMP%]   button.btn.btn-link[_ngcontent-%COMP%]{width:100%;text-align:left}.form-control[_ngcontent-%COMP%]{height:2.75rem;font-size:1.2rem}input.form-control[_ngcontent-%COMP%]{background-color:transparent!important;color:#fff!important;border:solid white 1px!important}input.form-control[_ngcontent-%COMP%]:focus{box-shadow:3px #00f;color:#fff}select.form-control[_ngcontent-%COMP%]{color:#fff!important;background-color:#4c4c4c!important}select[_ngcontent-%COMP%]:focus{background-color:#4c4c4c;box-shadow:3px #00f;color:#fff}option[_ngcontent-%COMP%]{background-color:#1b1f22;color:#fff;font-size:18px}.custom-control.custom-checkbox[_ngcontent-%COMP%]{transform:scale(1.2);transform-origin:0}table[_ngcontent-%COMP%]{background-color:transparent}.card[_ngcontent-%COMP%]{background-color:#1b1f22f2!important;border-color:gray}.card-title[_ngcontent-%COMP%]{font-size:1.3rem}.column-heading[_ngcontent-%COMP%]{background-color:#ffffff0d;padding:.75rem}.column-body[_ngcontent-%COMP%]{background-color:#1b1f22f2;padding:.75rem}.spell[_ngcontent-%COMP%]{padding:0}.placeholder[_ngcontent-%COMP%]{color:transparent}.border-bottom-grey[_ngcontent-%COMP%]{border-bottom:1px grey solid}.badge-secondary[_ngcontent-%COMP%]   .fa-trash[_ngcontent-%COMP%]:hover{color:#bf4044}.badge[_ngcontent-%COMP%]{height:min-content}.badge-lg[_ngcontent-%COMP%]{padding:.4em .8em}.badge-secondary[_ngcontent-%COMP%]:hover{background-color:var(--dark);color:var(--link-blue)}@media (max-width: 768px){.column-heading[_ngcontent-%COMP%]{font-size:medium}}#edit-section[_ngcontent-%COMP%]{margin-bottom:1rem}"]}),t})();const Ore=["spellElements"];function Nre(t,n){if(1&t){const e=G();p(0,"span",9),A("click",function(){const o=h(e).index;return b().selectedClasses.splice(o,1)}),k(1),O(2,"i",10),f()}if(2&t){const e=n.$implicit;g(1),Z(" ",e," ")}}function Fre(t,n){if(1&t){const e=G();p(0,"div",11),p(1,"a",12),A("click",function(){return h(e),b().addArticle()}),O(2,"i",13),k(3," Add Spell "),f(),f()}}function Rre(t,n){if(1&t){const e=G();p(0,"app-spell",15,16),A("cardDelete",function(){h(e);const r=b().index;return b().onArticleDelete(r)})("classSelect",function(r){return h(e),b(2).selectClass(r)}),f()}if(2&t){const e=b(),i=e.$implicit,r=e.index,o=b();v("id",i.name.replaceAll(" ","-").replaceAll("'",""))("index",r)("cardData",i)("campaign",o.campaign)}}function Lre(t,n){if(1&t&&(p(0,"div",7),S(1,Rre,2,4,"app-spell",14),f()),2&t){const e=n.$implicit,i=b();g(1),v("ngIf",i.hasSelectedClasses(e))}}const $re=function(t){return{campaign:t}};let XN=(()=>{class t extends Jv{constructor(e,i,r,o,s,l){super(e,o,i,s,l,r),this.articleModelClass=Uv,this.articleStarterTitle="New Spell",this.selectedClasses=[],this.articlesInitialScrollParameter="name"}getArticleTitle(e){return e.cardData.name}selectClass(e){this.selectedClasses.includes(e)||this.selectedClasses.push(e)}hasSelectedClasses(e){return 0===this.selectedClasses.length||e.player_class_connections.some(o=>this.selectedClasses.includes(o.player_class_details.name))}}return t.\u0275fac=function(e){return new(e||t)(C(zv),C(ce),C(ke),C(Me),C(Ze),C($e))},t.\u0275cmp=Y({type:t,selectors:[["app-spells"]],viewQuery:function(e,i){if(1&e&&pt(Ore,5),2&e){let r;ye(r=be())&&(i.articleElements=r)}},features:[oe],decls:11,vars:6,consts:[[1,"main"],["listArticle",""],[1,"container"],[1,"text-center","mb-3"],["class","badge badge-secondary pointer",3,"click",4,"ngFor","ngForOf"],["class","mb-3 row",4,"ngIf"],["class","row",4,"ngFor","ngForOf"],[1,"row"],[1,"col-lg-2","col-md-3","btn","btn-secondary",3,"routerLink"],[1,"badge","badge-secondary","pointer",3,"click"],[1,"fa","fa-times"],[1,"mb-3","row"],[1,"btn","btn-primary","col-lg-2","col-sm-3",3,"click"],[1,"fa","fa-plus"],["class","flex-1",3,"id","index","cardData","campaign","cardDelete","classSelect",4,"ngIf"],[1,"flex-1",3,"id","index","cardData","campaign","cardDelete","classSelect"],["spellElements",""]],template:function(e,i){1&e&&(p(0,"div",0,1),p(2,"article",2),p(3,"h1",3),k(4," Spells "),S(5,Nre,3,1,"span",4),f(),S(6,Fre,4,0,"div",5),S(7,Lre,2,1,"div",6),p(8,"div",7),p(9,"a",8),k(10," Back To Frontpage "),f(),f(),f(),f()),2&e&&(g(5),v("ngForOf",i.selectedClasses),g(1),v("ngIf",i.hasCreatePermission),g(1),v("ngForOf",i.articles),g(2),xe("routerLink",i.routingService.getRoutePath("home1",ht(4,$re,i.campaign.name))))},directives:[je,le,Ht,Are],styles:["table[_ngcontent-%COMP%]{background-color:transparent}.card-title[_ngcontent-%COMP%]{font-size:1.3rem}.whiteline[_ngcontent-%COMP%]{background-color:#fff;margin:0 0 1rem}.column-heading[_ngcontent-%COMP%]{background-color:#ffffff0d;padding:.75rem}.column-body[_ngcontent-%COMP%]{background-color:#1b1f22f2;padding:.75rem}.spell[_ngcontent-%COMP%]{padding:0}.placeholder[_ngcontent-%COMP%]{color:transparent}.border-bottom-grey[_ngcontent-%COMP%]{border-bottom:1px grey solid}@media (max-width: 768px){.column-heading[_ngcontent-%COMP%]{font-size:medium}}.badge-secondary[_ngcontent-%COMP%]:hover{background-color:var(--dark);color:var(--link-blue)}"]}),t})(),Ure=(()=>{class t{constructor(){this.searchPreferenceKey="AldruneSearchPreferences"}getStoredSearchPreferences(){return this.getStoredPreferences(this.searchPreferenceKey)}storeSearchPreferences(e){this.storePreferences(e,this.searchPreferenceKey)}getStoredPreferences(e){const i=localStorage.getItem(e);return JSON.parse(i)}storePreferences(e,i){const r=JSON.stringify(e);localStorage.setItem(i,r)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function Vre(t,n){1&t&&O(0,"i",6)}const Bre=function(t,n){return{"hover-highlight pointer":t,highlight:n}};function Hre(t,n){if(1&t){const e=G();p(0,"div",2),A("click",function(){const o=h(e).$implicit;return b().selectArticleOption(o)}),p(1,"div",3),p(2,"span",4),k(3),Lt(4,"titlecase"),f(),f(),S(5,Vre,1,0,"i",5),f()}if(2&t){const e=n.$implicit,i=b();v("ngClass",Bn(6,Bre,i.interactable,i.filterSettings[e])),g(1),v("ngClass",i.coloredSidebar(e.toLowerCase())),g(2),Z(" ",yn(4,4,e)," "),g(2),v("ngIf",i.filterSettings[e])}}let jre=(()=>{class t{constructor(e){this.preferenceService=e,this.defaultSearchPreferences={character:!1,creature:!1,diaryentry:!1,encounter:!1,item:!1,location:!1,map:!1,organization:!1,quest:!1,recording:!1,rules:!1,spell:!1},this.interactable=!1,this.onFilterOptionSelect=new q}ngOnInit(){if(this.interactable){const e=this.preferenceService.getStoredSearchPreferences();this.filterSettings=null==e?this.defaultSearchPreferences:e,this.emitCurrentActiveFilters()}else this.filterSettings=this.defaultSearchPreferences}getArticleOptionNames(){return Object.keys(this.filterSettings)}selectArticleOption(e){!this.interactable||(this.filterSettings[e]=!this.filterSettings[e],this.emitCurrentActiveFilters())}emitCurrentActiveFilters(){const r=this.getArticleOptionNames().filter(o=>this.filterSettings[o]).map(o=>"recording"===o?"sessionaudio":o);this.onFilterOptionSelect.emit(r)}coloredSidebar(e){return`sidebar ${$.articleTypeSidebarColorMapping[e]}`}ngOnDestroy(){this.interactable&&this.preferenceService.storeSearchPreferences(this.filterSettings)}}return t.\u0275fac=function(e){return new(e||t)(C(Ure))},t.\u0275cmp=Y({type:t,selectors:[["app-colored-sidebar-legend"]],inputs:{interactable:"interactable"},outputs:{onFilterOptionSelect:"onFilterOptionSelect"},decls:2,vars:1,consts:[[1,"row"],["class","col-lg-2 col-sm-3 col-6 py-2 d-flex align-items-center justify-content-between",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"col-lg-2","col-sm-3","col-6","py-2","d-flex","align-items-center","justify-content-between",3,"ngClass","click"],[1,"sidebar-border",3,"ngClass"],[1,"mx-1"],["class","fa fa-times",4,"ngIf"],[1,"fa","fa-times"]],template:function(e,i){1&e&&(p(0,"div",0),S(1,Hre,6,9,"div",1),f()),2&e&&(g(1),v("ngForOf",i.getArticleOptionNames()))},directives:[je,Yt,le],pipes:[lf],styles:[".sidebar-border[_ngcontent-%COMP%]{border-left:solid 10px}.yellow[_ngcontent-%COMP%]{border-left-color:#ff0}.lightgreen[_ngcontent-%COMP%]{border-left-color:#90ee90}.lightpink[_ngcontent-%COMP%]{border-left-color:#ee8600}.brown[_ngcontent-%COMP%]{border-left-color:#b7410e}.blue[_ngcontent-%COMP%]{border-left-color:#4169e1}.black[_ngcontent-%COMP%]{border-left-color:#000}.gray[_ngcontent-%COMP%]{border-left-color:gray}.white[_ngcontent-%COMP%]{border-left-color:#fff}.green[_ngcontent-%COMP%]{border-left-color:#006400}.darkgreen[_ngcontent-%COMP%]{border-left-color:#2f4a36}.orange[_ngcontent-%COMP%]{border-left-color:orange}.violet[_ngcontent-%COMP%]{border-left-color:#9871d2}.purple[_ngcontent-%COMP%]{border-left-color:#5d3754}.beige[_ngcontent-%COMP%]{border-left-color:var(--beige)}.teal[_ngcontent-%COMP%]{border-left-color:#1cd2c0}.darkpink[_ngcontent-%COMP%]{border-left-color:#b03060}.red[_ngcontent-%COMP%]{border-left-color:#bc0f0f}.darkred[_ngcontent-%COMP%]{border-left-color:#92000a}.darkyellow[_ngcontent-%COMP%]{border-left-color:#e6ae25}"]}),t})();const zre=function(t){return{"d-none":t}};function Gre(t,n){if(1&t&&(p(0,"a",10),p(1,"div",11),p(2,"h5",12),p(3,"strong"),k(4),f(),f(),f(),p(5,"div",13),k(6),f(),f()),2&t){const e=n.$implicit,i=b(2);Is("card flex-row align-items-center sidebar-border py-2 row mh-60px ",i.sidebarColor(e.article_type),""),xe("routerLink",e.getAbsoluteRouterUrl()),v("ngClass",ht(7,zre,i.hasActiveFilter()&&!i.filterOptions.includes(e.article_type))),g(4),Le(e.name),g(2),Z(" ",e.description," ")}}function Wre(t,n){if(1&t&&(p(0,"div",8),S(1,Gre,7,9,"a",9),f()),2&t){const e=b();g(1),v("ngForOf",e.articles)}}function qre(t,n){if(1&t&&(p(0,"div",14),p(1,"h2",12),k(2),f(),p(3,"i"),k(4),f(),f()),2&t){const e=b();g(2),Z("We couldn't find any hits for '",e.searchString,"'"),g(2),Z(" ",e.emptySearchSubtitle,"")}}let Qre=(()=>{class t{constructor(e,i){this.route=e,this.routingService=i,this.filterOptions=[],this.constants=$}ngOnInit(){this.campaign=this.route.snapshot.data.campaign,this.searchString=this.route.snapshot.params.searchString;const e=this.route.snapshot.data.searchResults;this.articles=e.articles,this.emptySearchSubtitle=e.empty_response,this.onAfterArticleLoadFinished(this.campaign.name,e.articles,null)}onAfterArticleLoadFinished(e,i,r){this.homeUrl=this.routingService.getRoutePath("home1",{campaign:e})}sidebarColor(e){return $.articleTypeSidebarColorMapping[e]}filterSearchResults(e){this.filterOptions=e}hasActiveFilter(){return this.filterOptions.length>0}}return t.\u0275fac=function(e){return new(e||t)(C(Me),C(ce))},t.\u0275cmp=Y({type:t,selectors:[["app-search"]],decls:12,vars:4,consts:[[1,"main"],[1,"container"],[1,"row"],[1,"text-center","col"],[3,"interactable","onFilterOptionSelect"],["class","my-3",4,"ngIf","ngIfElse"],[1,"btn","btn-secondary","col-md-3",3,"routerLink"],["noSearchResults",""],[1,"my-3"],[3,"routerLink","class","ngClass",4,"ngFor","ngForOf"],[3,"routerLink","ngClass"],[1,"col-md-4","text-center"],[1,"mb-0"],[1,"col-md-8","font-size-16"],[1,"my-5","d-flex","align-items-center","flex-column"]],template:function(e,i){if(1&e&&(p(0,"div",0),p(1,"article",1),p(2,"div",2),p(3,"h1",3),k(4,"Search Results"),f(),f(),p(5,"app-colored-sidebar-legend",4),A("onFilterOptionSelect",function(o){return i.filterOptions=o}),f(),S(6,Wre,2,1,"div",5),p(7,"div",2),p(8,"div",6),k(9," Back To Frontpage "),f(),f(),f(),f(),S(10,qre,5,2,"ng-template",null,7,se)),2&e){const r=ie(11);g(5),v("interactable",!0),g(1),v("ngIf",i.articles.length>0)("ngIfElse",r),g(2),xe("routerLink",i.homeUrl)}},directives:[jre,le,us,je,Ht,Yt],styles:["h5[_ngcontent-%COMP%]{font-size:18px}.font-size-16[_ngcontent-%COMP%]{font-size:16px}.card[_ngcontent-%COMP%]{background-color:#1f1e1f!important}.card[_ngcontent-%COMP%]:hover{background-color:#ffffff13!important;border:none}.h-2rem[_ngcontent-%COMP%]{height:2rem}"]}),t})();new er({"Content-Type":"application/json"});class kl extends nr{constructor(n){super(n,Qf),this.baseUrl=`${$.wikiApiUrl}/timestamp`}getTimestamps(n,e,i){return this.http.get(`${this.baseUrl}/${n}/${e}/${i}/`)}}kl.\u0275fac=function(n){return new(n||kl)(P(zt))},kl.\u0275prov=B({token:kl,factory:kl.\u0275fac,providedIn:"root"}),Cn([Bv(Qf)],kl.prototype,"getTimestamps",null);const Zre=["timestampDeleteElement"],Kre=function(t){return{"d-none":t}};function Yre(t,n){if(1&t){const e=G();p(0,"div",2),p(1,"a",3),A("click",function(){h(e);const r=b();return r.vimePlayer.currentTime=r.timestamp.time}),k(2),f(),p(3,"div",4),k(4),f(),p(5,"div",5),p(6,"i",6),A("click",function(){return h(e),b().toggleDeleteState()}),f(),f(),f()}if(2&t){const e=b();g(2),Z(" ",e.timeString," "),g(2),Le(e.timestamp.name),g(2),v("ngClass",ht(3,Kre,!e.hasDeletePermission))}}const Jre=function(t){return{animate__slideInRight:t}};function Xre(t,n){if(1&t){const e=G();p(0,"div",7,8),O(2,"div",9),p(3,"div",10),p(4,"span",11),k(5,"Delete Timestamp?"),f(),p(6,"div",12),A("click",function(){return h(e),b().deleteTimestamp()}),k(7,"Delete"),f(),p(8,"div",13),A("click",function(){return h(e),b().onCancelClick()}),k(9,"Cancel"),f(),f(),f()}if(2&t){const e=b();v("ngClass",ht(1,Jre,e.isInDeleteState))}}let eoe=(()=>{class t extends ji{constructor(e,i,r){super(r,i),this.timestampService=e,this.timestampDelete=new q,this.isInDeleteState=!1}ngOnInit(){this.timeString=this.timeToString(this.timestamp.time)}timeToString(e){const i=Math.floor(e/3600),r=Math.floor((e-3600*i)/60),o=Math.floor(e-3600*i-60*r);return`${i.toString().padStart(2,"0")}:${r.toString().padStart(2,"0")}:${o.toString().padStart(2,"0")}`}toggleDeleteState(){this.isInDeleteState=!this.isInDeleteState}onCancelClick(){this.isInDeleteState?hi(this.timestampDeleteElementRef.nativeElement,"slideOutRight").then(()=>this.toggleDeleteState()):this.toggleDeleteState()}deleteTimestamp(){this.timestampService.delete(this.timestamp.pk).pipe(re()).subscribe(e=>{this.isInDeleteState=!1,this.timestampDelete.emit(this.timestamp)})}}return t.\u0275fac=function(e){return new(e||t)(C(kl),C(Me),C(ke))},t.\u0275cmp=Y({type:t,selectors:[["app-timestamp"]],viewQuery:function(e,i){if(1&e&&pt(Zre,5),2&e){let r;ye(r=be())&&(i.timestampDeleteElementRef=r.first)}},inputs:{timestamp:"timestamp",vimePlayer:"vimePlayer"},outputs:{timestampDelete:"timestampDelete"},features:[oe],decls:3,vars:2,consts:[["class","row ml-auto mw-85",4,"ngIf","ngIfElse"],["deleteRequest",""],[1,"row","ml-auto","mw-85"],[1,"timestamp","pointer","col-lg-2","col-3","px-0",3,"click"],[1,"col-lg-9","col-8","px-0"],[1,"col-1","px-0"],[1,"icon","fa","fa-trash","delete-timestamp",3,"ngClass","click"],[1,"row","animate__animated",3,"ngClass"],["timestampDeleteElement",""],[1,"col-lg-2","col-0"],[1,"col-lg-7","col-12","timestamp-box"],[1,"ml-2"],[1,"btn","btn-danger","btn-sm","mx-3",3,"click"],[1,"btn","btn-secondary","btn-sm",3,"click"]],template:function(e,i){if(1&e&&(S(0,Yre,7,5,"div",0),S(1,Xre,10,3,"ng-template",null,1,se)),2&e){const r=ie(2);v("ngIf",!i.isInDeleteState)("ngIfElse",r)}},directives:[le,Yt],styles:[".animate__animated.animate__slideInRight[_ngcontent-%COMP%]{--animate-duration: .2s}.delete-timestamp[_ngcontent-%COMP%]{transition:opacity .2s;opacity:0}.timestamp[_ngcontent-%COMP%]{font-weight:bold;color:#1e66b3!important;border-bottom:none}.row[_ngcontent-%COMP%]:hover   .delete-timestamp[_ngcontent-%COMP%]{opacity:1}.timestamp-box[_ngcontent-%COMP%]{background-color:#1b1f22;border-radius:5px;border:1px solid red;padding:.5rem 0}.mw-85[_ngcontent-%COMP%]{max-width:85%}@media (max-width: 768px){.row[_ngcontent-%COMP%]{margin-bottom:1rem;line-height:1.2}.mw-85[_ngcontent-%COMP%]{max-width:100%}.row.ml-auto[_ngcontent-%COMP%]{margin-left:0!important}}"]}),t})();function toe(t,n){if(1&t){const e=G();p(0,"form",3),A("submit",function(){return h(e),b().createTimestamp()}),O(1,"formly-form",4),p(2,"div",5),p(3,"div",6),p(4,"i",7),A("click",function(){return h(e),b().cancelTimestampCreateState()}),f(),p(5,"button",8),O(6,"i",9),f(),f(),f(),f()}if(2&t){const e=b();v("formGroup",e.timestampForm),g(1),v("form",e.timestampForm)("fields",e.timestampFields)("model",e.timestampModel)}}function noe(t,n){if(1&t){const e=G();p(0,"app-timestamp",10),A("timestampDelete",function(r){return h(e),b().deleteTimestamp(r)}),f()}if(2&t){const e=n.$implicit,i=b();v("timestamp",e)("vimePlayer",i.vimePlayer)}}let ioe=(()=>{class t{constructor(e,i,r){this.timestampService=e,this.formlyService=i,this.warningsService=r,this.timestampClick=new q,this.timestampCreate=new q,this.timestampModel=new Qf,this.timestampForm=new Bi({}),this.timestampFields=[this.formlyService.genericInput({key:"time",maxLength:8,minLength:8,className:"timestamp-input black-background px-0 col-lg-2 col-3",validators:["time"],required:!0}),this.formlyService.genericInput({key:"name",label:"Title",className:"timestamp-input black-background px-0 col-lg-10 col-9",required:!0})],this.timestampCreateState=!1}ngOnInit(){this.subject_subscription=this.createTimestampEventSubject.subscribe(e=>{this.timestampCreateState=!this.timestampCreateState,this.timestampCreateState&&(this.timestampModel=new Qf,this.timestampModel.time=this.timeToString(e),this.timestampModel.session_audio=this.sessionAudio.pk)})}timeToString(e){const i=Math.floor(e/3600),r=Math.floor((e-3600*i)/60),o=Math.floor(e-3600*i-60*r);return`${i.toString().padStart(2,"0")}:${r.toString().padStart(2,"0")}:${o.toString().padStart(2,"0")}`}stringToTime(e){return 3600*parseInt(e.substr(0,2))+60*parseInt(e.substr(3,2))+parseInt(e.substr(6,2))}createTimestamp(){if("number"==typeof this.timestampModel.time)throw`Error during creation of request to create timestamp. The input ${this.timestampModel.time} is not the expected time-string`;this.timestampModel.time=this.stringToTime(this.timestampModel.time),this.timestampService.create(this.timestampModel).pipe(re()).subscribe(e=>{this.timestamps.unshift(e),this.timestampCreateState=!1,this.timestampCreate.emit()},e=>this.warningsService.showWarning(e))}cancelTimestampCreateState(){this.timestampCreateState=!1}deleteTimestamp(e){const i=this.timestamps.indexOf(e);this.timestamps.splice(i,1)}ngOnDestroy(){this.subject_subscription&&this.subject_subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(C(kl),C(mn),C(Ze))},t.\u0275cmp=Y({type:t,selectors:[["app-timestamp-list"]],inputs:{sessionAudio:"sessionAudio",timestamps:"timestamps",vimePlayer:"vimePlayer",createTimestampEventSubject:"createTimestampEventSubject"},outputs:{timestampClick:"timestampClick",timestampCreate:"timestampCreate"},decls:4,vars:2,consts:[["class","row mt-1 mb-4 ml-auto mw-85 animate__animated animate__flipInX",3,"formGroup","submit",4,"ngIf"],[1,"timestamp-box","my-1"],[3,"timestamp","vimePlayer","timestampDelete",4,"ngFor","ngForOf"],[1,"row","mt-1","mb-4","ml-auto","mw-85","animate__animated","animate__flipInX",3,"formGroup","submit"],[1,"d-flex","col-lg-10","col-10","px-0",3,"form","fields","model"],[1,"col-2","d-flex","align-items-center","px-0"],[1,"d-flex","mt-custom"],[1,"icon","hover-red","fa","fa-1-5x","fa-times","mx-1",3,"click"],["type","submit"],[1,"icon","hover-green","fa","fa-1-5x","fa-check","mx-1"],[3,"timestamp","vimePlayer","timestampDelete"]],template:function(e,i){1&e&&(p(0,"div"),S(1,toe,7,4,"form",0),p(2,"div",1),S(3,noe,1,2,"app-timestamp",2),f(),f()),2&e&&(g(1),v("ngIf",i.timestampCreateState),g(2),v("ngForOf",i.timestamps))},directives:[le,je,Vr,Ur,yl,Eh,eoe],styles:[".mh-20rem[_ngcontent-%COMP%]{max-height:20rem}.black-background[_ngcontent-%COMP%]{background-color:#000}.timestamp-input[_ngcontent-%COMP%]{background-color:#1b1f22;font-weight:bolder;color:#fff;border:none}.time-input[_ngcontent-%COMP%]{max-width:6.5rem}.title-input[_ngcontent-%COMP%]{max-width:13rem}.timestamp[_ngcontent-%COMP%]{font-weight:bold;color:#1e66b3!important;border-bottom:none}.delete-timestamp[_ngcontent-%COMP%]{transition:opacity .2s;opacity:0}.timestamp-box[_ngcontent-%COMP%]:hover   .delete-timestamp[_ngcontent-%COMP%]{opacity:1}.timestamp-box[_ngcontent-%COMP%]{font-size:1.2rem}.hover-green[_ngcontent-%COMP%]{transition:color .2s}.hover-green[_ngcontent-%COMP%]:hover{color:green}.hover-red[_ngcontent-%COMP%]:hover{color:red}.mt-custom[_ngcontent-%COMP%]{margin-top:2rem}.mw-85[_ngcontent-%COMP%]{max-width:85%}@media (max-width: 768px){.mw-85[_ngcontent-%COMP%]{max-width:100%}.row.ml-auto[_ngcontent-%COMP%]{margin-left:0!important}form[_ngcontent-%COMP%]   .fa-times[_ngcontent-%COMP%]{color:red}form[_ngcontent-%COMP%]   .fa-check[_ngcontent-%COMP%]{color:green}}"]}),t})();const eF=["audioSource"],roe=["vimePlayer"],ooe=["playerSection"],soe=["article"];function aoe(t,n){1&t&&(p(0,"div",4),p(1,"div",25),O(2,"app-edit-toggle",26),f(),f()),2&t&&(g(2),v("isInUpdateState",!1)("link","update"))}function loe(t,n){if(1&t&&(p(0,"a",27),O(1,"i",28),k(2),f()),2&t){const e=b();xe("routerLink",e.nextSessionAudioUrl),g(2),Z(" Session ",e.articleData.sessionAudioNeighbours.nextSessionAudio.sessionNumber," ")}}function coe(t,n){if(1&t&&(p(0,"a",29),k(1),O(2,"i",30),f()),2&t){const e=b();xe("routerLink",e.priorSessionAudioUrl),g(1),Z(" Session ",e.articleData.sessionAudioNeighbours.priorSessionAudio.sessionNumber," ")}}function uoe(t,n){if(1&t){const e=G();p(0,"div",31),A("click",function(){h(e);const r=b(),o=ie(13);return r.createTimestampEventSubject.next(o.currentTime)}),k(1," Add Timestamp "),O(2,"i",32),f()}}let doe=(()=>{class t extends Hs{constructor(e,i,r,o,s,l,c){super(r,e,s,o,l,c),this.router=i,this.constants=$,this.sessionAudioKeyControlMapping={Space:this.togglePlayer,Enter:this.togglePlayer,KeyM:this.toggleSound,ArrowRight:this.seekForwards,ArrowLeft:this.seekBackwards},this.deleteRoute={routeName:"sessionaudio-overview",params:{campaign:null}},this.createTimestampEventSubject=new Fe,this.isInTimestampCreateState=!1}ngOnInit(){super.ngOnInit(),this.create_timestamp_event_subscription=this.createTimestampEventSubject.subscribe(e=>this.toggleTimestampCreateState()),this.timestamps=this.route.snapshot.data.timestamps}ngAfterViewInit(){var e;!(null===(e=this.articleElement)||void 0===e?void 0:e.nativeElement)||hi(this.articleElement.nativeElement,"fadeIn")}updateDynamicVariables(e,i,r){this.sessionAudioOverviewUrl=this.routingService.getRoutePath("sessionaudio-overview",{campaign:e.name}),this.priorSessionAudioUrl=this.createSessionAudioUrl(i.sessionAudioNeighbours.priorSessionAudio),this.nextSessionAudioUrl=this.createSessionAudioUrl(i.sessionAudioNeighbours.nextSessionAudio)}createSessionAudioUrl(e){if(null==e)return null;if(null==e.isMainSessionInt||null==e.sessionNumber)throw new Error(`Invalid URL Building exception. Trying to build a URL with incomplete parameters ${e}`);return this.routingService.getRoutePath("sessionaudio",{campaign:this.campaign.name,isMainSession:e.isMainSessionInt,sessionNumber:e.sessionNumber})}routeToSessionAudio(e){const i=this.createSessionAudioUrl(e);this.router.navigateByUrl(i),this.router.routeReuseStrategy.shouldReuseRoute=function(){return!1}}playerControls(e){this.keyAffectsPlayer(e)&&(this.sessionAudioKeyControlMapping[e.code](this.vimePlayer.nativeElement),e.preventDefault())}keyAffectsPlayer(e){const i="search"===document.activeElement.id,r=!this.isInTimestampCreateState&&!i,o=this.sessionAudioKeyControlMapping.hasOwnProperty(e.code);return r&&o}toggleTimestampCreateState(){this.isInTimestampCreateState=!this.isInTimestampCreateState}togglePlayer(e){e.playing?e.pause():e.play()}toggleSound(e){e.muted=!e.muted}seekForwards(e){let i=e.currentTime+5;i>e.duration?i=e.duration:i<0&&(i=0),e.currentTime=i}seekBackwards(e){let i=e.currentTime-5;i>e.duration?i=e.duration:i<0&&(i=0),e.currentTime=i}increaseSound(e){const i=e.volume+5;e.volume=i>100?100:i}decreaseSound(e){const i=e.volume-5;e.volume=i<0?0:i}ngOnDestroy(){super.ngOnDestroy(),this.create_timestamp_event_subscription&&this.create_timestamp_event_subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(C(Me),C(Ft),C(ps),C(Ze),C(ce),C($e),C(ke))},t.\u0275cmp=Y({type:t,selectors:[["app-session-audio"]],contentQueries:function(e,i,r){if(1&e&&En(r,eF,5),2&e){let o;ye(o=be())&&(i.audioSourceChild=o.first)}},viewQuery:function(e,i){if(1&e&&(pt(eF,5),pt(roe,5),pt(ooe,5),pt(soe,5)),2&e){let r;ye(r=be())&&(i.audioSourceChild2=r.first),ye(r=be())&&(i.vimePlayer=r.first),ye(r=be())&&(i.playerSection=r.first),ye(r=be())&&(i.articleElement=r.first)}},hostBindings:function(e,i){1&e&&A("keydown",function(o){return i.playerControls(o)},!1,jT)},features:[oe],decls:28,vars:14,consts:[[1,"main"],["article",""],[1,"container"],["class","row",4,"ngIf"],[1,"row"],[1,"text-center","col-lg-12"],[1,"fa","fa-volume-up"],[1,"mt-4","mb-1","row","mx-0"],["playerSection",""],[1,"black-background","col-12","px-0",3,"click"],[1,"mw-100",3,"src"],["theme","dark",1,"w-100",2,"--vm-player-theme","var(--primary)"],["vimePlayer",""],["cross-origin",""],["type","audio/mp3","crossorigin","anonymous",3,"src"],["audioSource",""],[1,"mb-3","row","justify-content-between"],[1,"col-lg-3","col-6"],["class","btn btn-secondary",3,"routerLink",4,"ngIf"],["class","btn btn-secondary float-right",3,"routerLink",4,"ngIf"],[1,"mb-3","row","justify-content-center","mx-0"],["class","btn btn-primary col-lg-4",3,"click",4,"ngIf"],[1,"mb-4"],[3,"timestamps","sessionAudio","vimePlayer","createTimestampEventSubject","timestampCreate"],[3,"link","label","deleteMessage","delete"],[1,"col-12"],[3,"isInUpdateState","link"],[1,"btn","btn-secondary",3,"routerLink"],[1,"fa","fa-arrow-left","mr-1"],[1,"btn","btn-secondary","float-right",3,"routerLink"],[1,"fa","fa-arrow-right","ml-1"],[1,"btn","btn-primary","col-lg-4",3,"click"],[1,"fa","fa-clock-o","ml-1"]],template:function(e,i){if(1&e){const r=G();p(0,"div",0,1),p(2,"article",2),S(3,aoe,3,2,"div",3),p(4,"div",4),p(5,"h1",5),k(6),O(7,"i",6),f(),f(),p(8,"div",7,8),p(10,"div",9),A("click",function(){h(r);const s=ie(13);return i.togglePlayer(s)}),O(11,"img",10),f(),p(12,"vm-player",11,12),p(14,"vm-audio",13),O(15,"source",14,15),f(),O(17,"vm-default-ui"),f(),f(),p(18,"div",16),p(19,"div",17),S(20,loe,3,2,"a",18),f(),p(21,"div",17),S(22,coe,3,2,"a",19),f(),f(),p(23,"div",20),S(24,uoe,3,0,"div",21),f(),p(25,"div",22),p(26,"app-timestamp-list",23),A("timestampCreate",function(){return i.toggleTimestampCreateState()}),f(),f(),p(27,"app-article-footer",24),A("delete",function(){return i.deleteArticle()}),f(),f(),f()}if(2&e){const r=ie(13);g(3),v("ngIf",i.hasUpdatePermission),g(3),Z(" ",i.articleData.session_details.name," "),g(5),xe("src",i.constants.audioImageUrl,li),g(4),v("src",i.constants.wikiUrl+"/"+i.articleData.audio_file,li),g(5),v("ngIf",i.nextSessionAudioUrl),g(2),v("ngIf",i.priorSessionAudioUrl),g(2),v("ngIf",i.hasCreatePermission),g(2),v("timestamps",i.timestamps)("sessionAudio",i.articleData)("vimePlayer",r)("createTimestampEventSubject",i.createTimestampEventSubject),g(1),v("link",i.sessionAudioOverviewUrl)("label","Back to SessionAudio Overview")("deleteMessage","Delete recording?")}},directives:[le,ioe,Ws,On,Ht],styles:[".mh-20rem[_ngcontent-%COMP%]{max-height:20rem}.black-background[_ngcontent-%COMP%]{background-color:#000}.timestamp-input[_ngcontent-%COMP%]{background-color:#1b1f22;font-weight:bolder;color:#fff;border:none}.time-input[_ngcontent-%COMP%]{max-width:6.5rem}.title-input[_ngcontent-%COMP%]{max-width:13rem}.timestamp[_ngcontent-%COMP%]{font-weight:bold;color:#1e66b3!important;border-bottom:none}.delete-timestamp[_ngcontent-%COMP%]{transition:opacity .2s;opacity:0}.timestamp-box[_ngcontent-%COMP%]:hover   .delete-timestamp[_ngcontent-%COMP%]{opacity:1}.timestamp-box[_ngcontent-%COMP%]{font-size:1.2rem}.hover-green[_ngcontent-%COMP%]{transition:color .2s}.hover-green[_ngcontent-%COMP%]:hover{color:green}.hover-red[_ngcontent-%COMP%]:hover{color:red}"]}),t})();const hoe=["overviewMainCard"];function poe(t,n){1&t&&(p(0,"div",9),p(1,"a",10),O(2,"i",11),k(3," Add Recording "),f(),f())}function foe(t,n){if(1&t&&(p(0,"div",12),p(1,"div",13),p(2,"div",14),p(3,"h4",15),k(4),f(),f(),p(5,"div",16),p(6,"a",17),O(7,"span",18),p(8,"strong"),k(9," Stream "),f(),f(),p(10,"a",19),O(11,"span",20),p(12,"strong"),k(13," Download "),f(),f(),f(),f(),f()),2&t){const e=n.$implicit,i=n.index,r=b();g(4),Le(e.name),g(2),xe("routerLink",r.sessionAudioURLs[i]),g(4),Cg("href","",r.constants.wikiUrl,"/",r.sessionAudioFiles[i].download_url,"",li)}}let moe=(()=>{class t extends ji{constructor(e,i,r,o,s){super(o,r),this.overviewService=e,this.routingService=i,this.globalUrlParams=s,this.constants=$}ngOnInit(){this.campaign=this.route.snapshot.data.campaign,this.sessionAudioFiles=this.route.snapshot.data.overviewList,this.updateDynamicVariables(this.campaign,this.sessionAudioFiles)}updateDynamicVariables(e,i){this.homeUrl=this.routingService.getRoutePath("home1",{campaign:e.name}),this.sessionAudioURLs=i.map(r=>this.routingService.getRoutePath("sessionaudio",{campaign:e.name,isMainSession:r.session_details.is_main_session_int,sessionNumber:r.session_details.session_number}))}ngAfterViewInit(){var e;!(null===(e=this.articleElement)||void 0===e?void 0:e.nativeElement)||hi(this.articleElement.nativeElement,"fadeIn")}}return t.\u0275fac=function(e){return new(e||t)(C(Yf),C(ce),C(Me),C(ke),C($e))},t.\u0275cmp=Y({type:t,selectors:[["app-session-audio-overview"]],viewQuery:function(e,i){if(1&e&&pt(hoe,5),2&e){let r;ye(r=be())&&(i.articleElement=r.first)}},features:[oe],decls:11,vars:3,consts:[[1,"main"],["overviewMainCard",""],[1,"container"],[1,"text-center"],["class","mb-3 row mx-0",4,"ngIf"],[1,"row"],["class","col-md-4 col-sm-6",4,"ngFor","ngForOf"],[1,"row","mx-0"],[1,"col-md-3","mt-5","btn","btn-secondary",3,"routerLink"],[1,"mb-3","row","mx-0"],["routerLink","create",1,"btn","btn-primary","col-lg-2","col-sm-3"],[1,"fa","fa-plus"],[1,"col-md-4","col-sm-6"],[1,"card","my-3"],[1,"card-header"],[1,"text-center","card-title","mb-0"],[1,"card-body","d-flex","justify-content-center","flex-column"],[1,"text-center","btn","btn-primary","mb-2",3,"routerLink"],[1,"fas","fa-desktop"],["target","_blank",1,"text-center","btn","btn-dark",3,"href"],[1,"fas","fa-download"]],template:function(e,i){1&e&&(p(0,"div",0,1),p(2,"article",2),p(3,"h1",3),k(4,"Session Audio Files"),f(),S(5,poe,4,0,"div",4),p(6,"div",5),S(7,foe,14,4,"div",6),f(),p(8,"div",7),p(9,"div",8),k(10," Back To Frontpage "),f(),f(),f(),f()),2&e&&(g(5),v("ngIf",i.hasCreatePermission),g(2),v("ngForOf",i.sessionAudioFiles),g(2),xe("routerLink",i.homeUrl))},directives:[le,je,us,Ht],styles:[".h-82[_ngcontent-%COMP%]{height:82%}.add-icon-card[_ngcontent-%COMP%]:hover   .icon[_ngcontent-%COMP%]{color:gray}"]}),t})();function goe(t,n){if(1&t&&(p(0,"div"),O(1,"app-edit-toggle",5),p(2,"h2",6),k(3),f(),f()),2&t){const e=b();g(1),v("isInUpdateState",!0)("link",e.updateCancelUrl),g(2),Z(" Updating SessionAudio ",e.userModel.session_details.name," ")}}function _oe(t,n){if(1&t){const e=G();p(0,"div"),p(1,"app-formly-formcontainer",7),A("formlySubmit",function(){return h(e),b().onSubmit()})("formlyCancel",function(){return h(e),b().onCancel()}),f(),f()}if(2&t){const e=b();g(1),v("model",e.userModel)("fields",e.formlyFields)}}function voe(t,n){if(1&t&&(O(0,"app-edit-toggle",5),p(1,"h2",6),k(2," Uploading Session Audio File "),f()),2&t){const e=b();v("isInUpdateState",!0)("link",e.creationCancelUrl)}}function yoe(t,n){if(1&t&&(p(0,"h4",6),k(1,"File Upload Progress"),f(),p(2,"div",8),p(3,"div",9),k(4),Lt(5,"number"),f(),f()),2&t){const e=b();g(3),to("width",e.fileUploadProgress,"%"),Ct("aria-valuenow",e.fileUploadProgress),g(1),Z(" ",ka(5,4,e.fileUploadProgress,"1.0-1"),"% ")}}let tF=(()=>{class t extends Vo{constructor(e,i,r,o,s,l,c,d,m){super(r,l,s,i,c,d,o,m),this.formlyService=e,this.audioService=i,this.warnings=s,this.routingService=l,this.userModelClass=qf,this.formlyFields=[this.formlyService.genericDisableSelect({key:"session",overviewType:Ie.Session,campaign:this.campaign.name,wrappers:["session-update-wrapper"],disabledExpression:_=>{var w;const E=_.pk===(null===(w=this.userModel.session_details)||void 0===w?void 0:w.pk);return _.has_recording&&!E},tooltipMessage:"All sessions that already have a recording are disabled.",warningMessage:"The session you selected already has a recording attached to it! Uploading this file will not work!",showWrapperLabel:!1}),this.formlyService.singleFileField({key:"audio_file",label:"Audio File",required:this.isInCreateState()})],this.isWaitingForResponse=!1}updateRouterLinks(e,i,r){var o,s;this.creationCancelUrl=this.routingService.getRoutePath("sessionaudio-overview",{campaign:e}),this.updateCancelUrl=this.routingService.getRoutePath("sessionaudio",{campaign:e,sessionNumber:null===(o=i.session_details)||void 0===o?void 0:o.session_number,isMainSession:null===(s=i.session_details)||void 0===s?void 0:s.is_main_session_int})}onSubmit(){const e="string"===this.userModel.audio_file.constructor.name.toLowerCase();if((this.isInUpdateState()||this.isInOutdatedUpdateState())&&e)return delete this.userModel.audio_file,void this.articleService.patch(this.userModel.pk,this.userModel).pipe(re()).subscribe(r=>this.routeToSessionAudio(r),r=>this.warnings.showWarning(r));let i;if(this.isInUpdateState())i=this.articleService.update(this.userModel.pk,this.userModel);else{const r=this.userModel.audio_file[0],o=r.name.replaceAll($.prologueForbiddenCharacters,"");i=this.audioService.uploadFile(o,r)}this.file_subscription=i.subscribe(r=>this.handleFileUpload(r),r=>this.warnings.showWarning(r))}handleFileUpload(e){const r=e.type===Yn.Response;e.type===Yn.UploadProgress?this.fileUploadProgress=e.loaded/e.total*100:r&&(this.file_subscription.unsubscribe(),this.isInCreateState()?(this.userModel.audio_file=e.body,this.articleService.create(this.userModel).pipe(re()).subscribe(s=>this.routeToSessionAudio(s),s=>this.warnings.showWarning(s))):this.routeToSessionAudio(e.body))}routeToSessionAudio(e){this.routingService.routeToPath("sessionaudio",{isMainSession:e.session_details.is_main_session_int,sessionNumber:e.session_details.session_number,campaign:this.campaign.name})}ngOnDestroy(){this.file_subscription&&this.file_subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(C(mn),C(ps),C(Ft),C(Me),C(Ze),C(ce),C(ki),C($e),C(ke))},t.\u0275cmp=Y({type:t,selectors:[["app-session-audio-update"]],features:[oe],decls:8,vars:4,consts:[[1,"main"],[1,"mb-5"],[4,"ngIf","ngIfElse"],["createState",""],["uploadBar",""],[3,"isInUpdateState","link"],[1,"text-center"],[3,"model","fields","formlySubmit","formlyCancel"],[1,"progress"],["role","progressbar","aria-valuemin","0","aria-valuemax","100",1,"progress-bar"]],template:function(e,i){if(1&e&&(p(0,"div",0),p(1,"article",1),S(2,goe,4,3,"div",2),S(3,_oe,2,2,"div",2),f(),f(),S(4,voe,3,2,"ng-template",null,3,se),S(6,yoe,6,7,"ng-template",null,4,se)),2&e){const r=ie(5),o=ie(7);g(2),v("ngIf",(i.isInUpdateState()||i.isInOutdatedUpdateState())&&i.userModel)("ngIfElse",r),g(1),v("ngIf",!i.fileUploadProgress)("ngIfElse",o)}},directives:[le,On,zn],pipes:[_I],styles:[".progress[_ngcontent-%COMP%]{font-size:1rem;height:2rem;font-weight:bold}"]}),t})();function boe(t,n){if(1&t&&(p(0,"span"),k(1),f()),2&t){const e=b();g(1),Le(e.articleData.icon)}}function Coe(t,n){if(1&t&&(p(0,"span"),k(1),p(2,"span",10),k(3," (from marker type) "),f(),f()),2&t){const e=b();g(1),Z(" ",e.articleData.type_details.icon," ")}}function woe(t,n){if(1&t&&(p(0,"span"),k(1),f()),2&t){const e=b();g(1),Le(e.articleData.color)}}function Soe(t,n){if(1&t&&(p(0,"span"),k(1),p(2,"span",10),k(3," (from marker type) "),f(),f()),2&t){const e=b();g(1),Z(" ",e.articleData.type_details.color," ")}}let Toe=(()=>{class t extends Hs{constructor(e,i,r,o,s,l){super(i,e,o,r,s,l),this.route=e,this.warnings=r,this.routingService=o,this.deleteRoute={routeName:"location",params:{name:null,parent_name:null,campaign:null}}}updateDynamicVariables(e,i,r){this.locationUrl=this.routingService.getRoutePath("location",{parent_name:i.location_details.parent_location_name,name:i.location_details.name,campaign:e.name})}updateOnDeleteRouteParameters(e,i){super.updateOnDeleteRouteParameters(e,i);const r=i.parent_location_name;this.deleteRoute.params.name=i.location_name,this.deleteRoute.params.parent_name=r}}return t.\u0275fac=function(e){return new(e||t)(C(Me),C($o),C(Ze),C(ce),C($e),C(ke))},t.\u0275cmp=Y({type:t,selectors:[["app-marker"]],features:[oe],decls:43,vars:11,consts:[[1,"main"],[1,"container"],[1,"row"],[1,"text-center","col"],[1,"col-md-4","col-0"],[1,"col-3"],[1,"col-md-5","col-9"],[4,"ngIf"],[1,"mb-5"],[3,"link","label","deleteMessage","delete"],[1,"text-muted","ml-3"]],template:function(e,i){1&e&&(p(0,"div",0),p(1,"article",1),O(2,"app-edit-toggle"),p(3,"div",2),p(4,"h1",3),k(5),f(),f(),p(6,"div",2),p(7,"h3",3),k(8," Properties "),f(),f(),p(9,"div",2),O(10,"div",4),p(11,"strong",5),k(12,"Longitude: "),f(),p(13,"span",6),k(14),f(),f(),p(15,"div",2),O(16,"div",4),p(17,"strong",5),k(18,"Latitude: "),f(),p(19,"span",6),k(20),f(),f(),p(21,"div",2),O(22,"div",4),p(23,"strong",5),k(24,"Marker type: "),f(),p(25,"span",6),k(26),f(),f(),p(27,"div",2),O(28,"div",4),p(29,"strong",5),k(30,"Icon: "),f(),p(31,"span",6),S(32,boe,2,1,"span",7),S(33,Coe,4,1,"span",7),f(),f(),p(34,"div",2),O(35,"div",4),p(36,"strong",5),k(37,"Color: "),f(),p(38,"span",6),S(39,woe,2,1,"span",7),S(40,Soe,4,1,"span",7),f(),f(),O(41,"div",8),p(42,"app-article-footer",9),A("delete",function(){return i.deleteArticle()}),f(),f(),f()),2&e&&(g(5),Z("Marker on ",i.articleData.map_details.name,""),g(9),Le(i.articleData.longitude),g(6),Le(i.articleData.latitude),g(6),Le(i.articleData.type_details.name),g(6),v("ngIf",i.articleData.icon),g(1),v("ngIf",!i.articleData.icon),g(6),v("ngIf",i.articleData.color),g(1),v("ngIf",!i.articleData.color),g(2),v("link",i.locationUrl)("label","Back to "+i.articleData.location_details.name)("deleteMessage","Delete Marker?"))},directives:[On,le,Ws],styles:[""]}),t})();function Eoe(t,n){if(1&t&&(p(0,"div"),O(1,"app-edit-toggle",6),p(2,"h2",7),k(3),f(),f()),2&t){const e=b();g(1),v("isInUpdateState",!0)("link",e.updateCancelUrl),g(2),uc(" Updating Marker for ",e.userModel.location_details.name," on ",e.userModel.map_details.name," ")}}function koe(t,n){if(1&t&&(O(0,"app-edit-toggle",6),p(1,"h2",7),k(2," Adding a new Marker "),f()),2&t){const e=b();v("isInUpdateState",!0)("link",e.creationCancelUrl)}}function Doe(t,n){if(1&t){const e=G();p(0,"app-formly-formcontainer",8),A("formlySubmit",function(){return h(e),b().onSubmit()})("formlyCancel",function(){return h(e),b().onCancel()}),f()}if(2&t){const e=b();v("model",e.userModel)("fields",e.formlyFields)}}function xoe(t,n){if(1&t){const e=G();p(0,"app-compare-form-container",9),A("updateSubmit",function(){return h(e),b().onSubmit()})("cancel",function(){return h(e),b().onCancel()}),f()}if(2&t){const e=b();v("formlyFields",e.formlyFields)("modelFromUser",e.userModel)("modelFromServer",e.serverModel)}}let nF=(()=>{class t extends Vo{constructor(e,i,r,o,s,l,c,d,m,_){super(r,c,l,e,d,m,o,_),this.locationService=i,this.formlyService=s,this.warnings=l,this.routingService=c,this.userModelClass=Pu,this.formlyFields=[this.formlyService.genericInput({key:"latitude",isNumberInput:!0}),this.formlyService.genericInput({key:"longitude",isNumberInput:!0}),this.formlyService.genericSelect({key:"location",sortProp:"name_full",overviewType:Ie.Location,campaign:this.campaign.name}),this.formlyService.genericSelect({key:"map",overviewType:Ie.Map,campaign:this.campaign.name}),this.formlyService.genericSelect({key:"type",label:"Marker Type",labelProp:"name",valueProp:"id",overviewType:Ie.MarkerTypeType,campaign:this.campaign.name}),this.formlyService.genericInput({key:"color",label:"Custom Color",required:!1}),this.formlyService.genericInput({key:"icon",label:"Custom Icon",required:!1})]}updateRouterLinks(e,i,r){var o;this.creationCancelUrl=this.routingService.getRoutePath("location",{parent_name:i.location_details.parent_location_name,name:i.location_details.name,campaign:e}),this.updateCancelUrl=this.routingService.getRoutePath("marker",{campaign:e,parent_location_name:i.location_details.parent_location_name,location_name:i.location_details.name,map_name:null===(o=i.map_details)||void 0===o?void 0:o.name})}}return t.\u0275fac=function(e){return new(e||t)(C($o),C(wl),C(Ft),C(Me),C(mn),C(Ze),C(ce),C(ki),C($e),C(ke))},t.\u0275cmp=Y({type:t,selectors:[["app-marker-update"]],features:[oe],decls:7,vars:4,consts:[[1,"main"],[1,"mb-5"],[4,"ngIf","ngIfElse"],["createState",""],[3,"model","fields","formlySubmit","formlyCancel",4,"ngIf"],[3,"formlyFields","modelFromUser","modelFromServer","updateSubmit","cancel",4,"ngIf"],[3,"isInUpdateState","link"],[1,"text-center"],[3,"model","fields","formlySubmit","formlyCancel"],[3,"formlyFields","modelFromUser","modelFromServer","updateSubmit","cancel"]],template:function(e,i){if(1&e&&(p(0,"div",0),p(1,"article",1),S(2,Eoe,4,4,"div",2),S(3,koe,3,2,"ng-template",null,3,se),S(5,Doe,1,2,"app-formly-formcontainer",4),S(6,xoe,1,3,"app-compare-form-container",5),f(),f()),2&e){const r=ie(4);g(2),v("ngIf",(i.isInOutdatedUpdateState()||i.isInUpdateState())&&i.userModel)("ngIfElse",r),g(3),v("ngIf",i.isInUpdateState()||i.isInCreateState()),g(1),v("ngIf",i.isInOutdatedUpdateState())}},directives:[le,On,zn,br],styles:[""]}),t})();var qs=ne(216);ne(232),qs.icon({iconUrl:`${$.wikiMediaUrl}/leaflet/marker-icon.png`,shadowUrl:`${$.wikiMediaUrl}/leaflet/marker-shadow.png`,iconSize:[24,36],iconAnchor:[12,36]});let Moe=(()=>{class t{constructor(e,i){this.router=e,this.routingService=i,this.hideCoordinatesState=!0}ngAfterContentInit(){setTimeout(()=>this.initMap(),0)}initMap(){this.leafletMap=qs.map("leafletMapDiv",{crs:qs.CRS.Simple,minZoom:-1,maxZoom:2}),this.addMapImage(),this.addMarkers(),this.setMapEventListeners()}setMapEventListeners(){this.leafletMap.on("mousemove",e=>{this.mouseLatitude=e.latlng.lat,this.mouseLongitude=e.latlng.lng}),this.leafletMap.on("click",e=>{const i=parseInt(e.latlng.lat),r=parseInt(e.latlng.lng),o=this.makeFreePopupContentHTML(r,i);qs.popup().setLatLng([i,r]).setContent(o).openOn(this.leafletMap)})}makeFreePopupContentHTML(e,i){return`\n      <div class="mb-2 pointer"> \n        <a href="${this.routingService.getRoutePath("marker-map-create",{latitude:i,longitude:e,map_name:this.map.name,campaign:this.campaign.name})}">\n          <i class="fa fa-map-marker"></i> Add Marker\n        </a>\n      </div>\n\n      <div class="pointer"> \n        <a href="${this.routingService.getRoutePath("location-map-create",{latitude:i,longitude:e,map_name:this.map.name,campaign:this.campaign.name})}">\n          <i class="fa fa-home"></i> Add Marker and Location\n        </a>\n      </div>\n    `}addMapImage(){const e=[[200,140],[800,1160]];qs.imageOverlay($.wikiUrl+this.map.image,e).addTo(this.leafletMap),this.leafletMap.fitBounds(e)}addMarkers(){const e={};for(let i of this.map.markers){const r=i.type_details.name,o=e.hasOwnProperty(r)?e[r]:qs.layerGroup();e[r]=o,(i.type_details.is_text_marker?this.createTextMarker(i):this.createAwesomeMarker(i)).addTo(o)}for(const i in e)e[i].addTo(this.leafletMap);qs.control.layers(null,e,{sortLayers:!0}).addTo(this.leafletMap)}createTextMarker(e){const i=this.getMarkerColor(e),r=["beige","lightgreen"].includes(i)?"black":"white";return qs.marker([e.latitude,e.longitude],{icon:qs.divIcon({html:`\n        <div class="leaflet-text-marker bg-color-${i} text-color-${r}">\n          <strong>${e.location_details.name}</strong>\n        </div>\n        `})}).bindPopup(this.getPopupText(e)).bindTooltip(e.location_details.name)}getMarkerColor(e){return e.color?e.color:e.type_details.color?e.type_details.color:"grey"}getPopupText(e){return`${this.makeLocationHeading(e)} <br> ${this.makeLocationDescription(e)} <br> ${this.makeSublocationList(e)}`}makeLocationHeading(e){return`<a href="${this.routingService.getRoutePath("location",{campaign:this.campaign.name,parent_name:e.location_details.parent_location_name,name:e.location_details.name})}"> <b>${e.location_details.name}</b> </a>`}makeLocationDescription(e){let i=e.location_details.description;return null==i?"":i.split(" ").length>=35?`${i.split(" ").slice(0,35)} ...`:i}makeSublocationList(e){if(e.location_details.sublocations.length>0){const i='<h5 class="popup-heading"> Locations of Interest: </h5>';let r=" <ul>";for(let o of e.location_details.sublocations)r+=`<li><a href="${this.routingService.getRoutePath("location",{parent_name:e.location_details.name,name:o,campaign:this.campaign.name})}"> ${o}</a></li>`;return r+="</ul>",`${i} ${r}`}return""}createAwesomeMarker(e){return qs.marker([e.latitude,e.longitude],{icon:this.divIcon(e)}).bindPopup(this.getPopupText(e)).bindTooltip(e.location_details.name)}divIcon(e){const l=e.color||e.type_details.color;return qs.divIcon({className:"custom-div-icon",html:`<div style='background-color:${l};' class='marker-pin'></div><i class='d-flex justify-content-center ${e.type_details.fontawesome_type} fa-${e.type_details.icon} awesome'>`,iconSize:[30,42],iconAnchor:[15,42],color:l})}}return t.\u0275fac=function(e){return new(e||t)(C(Ft),C(ce))},t.\u0275cmp=Y({type:t,selectors:[["app-leaflet-map"]],inputs:{map:"map",campaign:"campaign"},decls:1,vars:0,consts:[["id","leafletMapDiv"]],template:function(e,i){1&e&&O(0,"div",0)},styles:[".map-frame[_ngcontent-%COMP%]{border:2px solid black;height:600px;width:100%;margin:0 auto 2rem}#leafletMapDiv[_ngcontent-%COMP%]{height:600px;width:100%;margin:0 auto}.w-15[_ngcontent-%COMP%]{width:15%}"]}),t})();const Ioe=["mapChoice"];function Poe(t,n){if(1&t&&(p(0,"div",13),p(1,"div",14),O(2,"app-edit-toggle",15),f(),f()),2&t){const e=b();g(2),v("isInUpdateState",!1)("link",e.updateMapUrl)}}function Aoe(t,n){if(1&t&&(p(0,"option",21),k(1),f()),2&t){const e=n.$implicit;xe("value",e.name),g(1),Le(e.name)}}function Ooe(t,n){if(1&t){const e=G();p(0,"div",16),p(1,"h3",17),k(2," Map of "),p(3,"select",18,19),A("change",function(r){return h(e),b().onMapChange(r)}),S(5,Aoe,2,2,"option",20),f(),f(),f()}if(2&t){const e=b();g(5),v("ngForOf",e.maps)}}function Noe(t,n){if(1&t&&(p(0,"div",23),O(1,"app-leaflet-map",24),f()),2&t){const e=b(2);g(1),v("map",e.articleData)("campaign",e.campaign)}}function Foe(t,n){if(1&t&&(p(0,"div",13),S(1,Noe,2,2,"div",22),f()),2&t){const e=b();g(1),v("ngIf",e.articleData)("ngIfElse",e.loading)}}function Roe(t,n){if(1&t){const e=G();p(0,"app-article-footer",25),A("delete",function(){return h(e),b().deleteMap()}),f()}if(2&t){const e=b();v("link",e.homeUrl)("label","Back to Frontpage")("deleteMessage","Delete Map of "+e.articleData.name+"?")}}function Loe(t,n){if(1&t&&(p(0,"div",27),p(1,"p",28),p(2,"strong"),k(3," There's no map yet! Want to add one? "),f(),f(),p(4,"a",29),O(5,"span",8),k(6," Add Map "),f(),f()),2&t){const e=b(2);g(4),xe("routerLink",e.createMapUrl)}}function $oe(t,n){if(1&t&&S(0,Loe,7,1,"div",26),2&t){const e=b(),i=ie(15);v("ngIf",e.hasCreatePermission)("ngIfElse",i)}}function Uoe(t,n){if(1&t&&(p(0,"div",27),p(1,"p",28),p(2,"strong"),k(3," There's no map yet, but maybe there will be in the future! "),f(),f(),p(4,"a",30),k(5," Back to home page "),f(),f()),2&t){const e=b();g(4),xe("routerLink",e.homeUrl)}}let iF=(()=>{class t extends Hs{constructor(e,i,r,o,s,l,c){super(i,e,o,r,s,l),this.route=e,this.warnings=r,this.routingService=o,this.router=c,this.deleteRoute={routeName:"character-overview",params:{campaign:null}}}ngOnInit(){return Et(this,void 0,void 0,function*(){this.campaign=this.route.snapshot.data.campaign;const e=this.route.snapshot.data.article;this.articleData=e.mapData,this.maps=e.maps,this.updateDynamicVariables(this.campaign,this.articleData,null)})}updateDynamicVariables(e,i,r){this.createMapUrl=this.routingService.getRoutePath("map-create",{campaign:e.name}),this.homeUrl=this.routingService.getRoutePath("home1",{campaign:e.name}),this.updateMapUrl=this.routingService.getRoutePath("map-update",{campaign:e.name,name:null==i?void 0:i.name})}ngAfterViewInit(){super.ngAfterViewInit(),this.setInitialMapChoiceValue()}setInitialMapChoiceValue(){var e;let r=this.route.snapshot.params.name;if(null==r&&(r=null===(e=this.campaign.default_map_details)||void 0===e?void 0:e.name),null==r)return;const o=this.getMapOptionIndex(r);this.getMapChoiceElement().selectedIndex=o}getMapChoiceElement(){return this.mapChoice.first.nativeElement}getMapOptionIndex(e){const i=this.getMapChoiceElement().options;for(let r=0;r<i.length;r++)if(i[r].value===e)return r;throw`${e} is not a valid map name. There is no map with this name on the page!`}routeToMap(e){const i=this.routingService.getRoutePath("map",{name:e,campaign:this.campaign.name});this.router.navigateByUrl(i)}onMapChange(e){this.routeToMap(e.target.value)}deleteMap(){this.articleService.delete(this.articleData.pk).pipe(re()).subscribe(e=>{const i=this.maps.findIndex(o=>this.articleData.name===o.name);this.maps.splice(i,1);const r=this.getSecondaryMapChoice();null!=r?this.routeToMap(r):this.routingService.routeToPath("default-map",{campaign:this.campaign.name})},e=>this.warnings.showWarning(e))}getSecondaryMapChoice(){var e;if(0===this.maps.length)return;const i=null===(e=this.campaign.default_map_details)||void 0===e?void 0:e.name;return null!=i?i:this.maps[0].name}}return t.\u0275fac=function(e){return new(e||t)(C(Me),C(Hr),C(Ze),C(ce),C($e),C(ke),C(Ft))},t.\u0275cmp=Y({type:t,selectors:[["app-map"]],viewQuery:function(e,i){if(1&e&&pt(Ioe,5),2&e){let r;ye(r=be())&&(i.mapChoice=r)}},features:[oe],decls:16,vars:6,consts:[[1,"main"],["article",""],[1,"container"],["class","row",4,"ngIf"],["class","row text-center",4,"ngIf"],[1,"row","mb-3"],[1,"col-md-3",3,"routerLink"],[1,"btn","btn-primary","w-100"],[1,"fas","fa-plus"],["class","row",4,"ngIf","ngIfElse"],[3,"link","label","deleteMessage","delete",4,"ngIf"],["noMapMessage",""],["noMapMessageGuest",""],[1,"row"],[1,"col-12"],[3,"isInUpdateState","link"],[1,"row","text-center"],[1,"icon-container","col"],["name","map","id","map",1,"mw-100",3,"change"],["mapChoice",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["class","mb-5 col",4,"ngIf","ngIfElse"],[1,"mb-5","col"],[3,"map","campaign"],[3,"link","label","deleteMessage","delete"],["class","row justify-content-center align-items-center flex-column mt-5",4,"ngIf","ngIfElse"],[1,"row","justify-content-center","align-items-center","flex-column","mt-5"],[1,"h4"],[1,"mt-3","btn","btn-lg","btn-primary","col-sm-4",3,"routerLink"],[1,"mt-3","btn","btn-lg","btn-secondary",3,"routerLink"]],template:function(e,i){if(1&e&&(p(0,"div",0,1),p(2,"article",2),S(3,Poe,3,2,"div",3),S(4,Ooe,6,1,"div",4),p(5,"div",5),p(6,"div",6),p(7,"div",7),O(8,"span",8),k(9," Add Map "),f(),f(),f(),S(10,Foe,2,2,"div",9),S(11,Roe,1,3,"app-article-footer",10),f(),f(),S(12,$oe,1,2,"ng-template",null,11,se),S(14,Uoe,6,1,"ng-template",null,12,se)),2&e){const r=ie(13);g(3),v("ngIf",i.hasUpdatePermission),g(1),v("ngIf",i.maps.length>0),g(2),xe("routerLink",i.createMapUrl),g(4),v("ngIf",i.maps.length>0)("ngIfElse",r),g(1),v("ngIf",i.articleData)}},directives:[le,us,On,je,as,ls,Moe,Ws,Ht],styles:[".icon-container[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{opacity:0;transition:opacity .2s}.icon-container[_ngcontent-%COMP%]:hover   .icon[_ngcontent-%COMP%]{opacity:1}select[_ngcontent-%COMP%]{background-color:#4c4c4c;background-clip:padding-box;border:1px solid #222;border-radius:.25rem;transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out;color:#fff;font-weight:bold;padding-left:.5rem;padding-right:.5rem}.main[_ngcontent-%COMP%]{max-width:75rem}"]}),t})();function Voe(t,n){if(1&t&&(p(0,"div"),O(1,"app-edit-toggle",6),p(2,"h2",7),k(3),f(),f()),2&t){const e=b();g(1),v("isInUpdateState",!0)("link",e.updateCancelUrl),g(2),Z(" Updating Map ",e.userModel.name," ")}}function Boe(t,n){if(1&t&&(O(0,"app-edit-toggle",6),p(1,"h2",7),k(2," Adding a new Map "),f()),2&t){const e=b();v("isInUpdateState",!0)("link",e.creationCancelUrl)}}function Hoe(t,n){if(1&t){const e=G();p(0,"app-formly-formcontainer",8),A("formlySubmit",function(){return h(e),b().onSubmit()})("formlyCancel",function(){return h(e),b().onCancel()}),f()}if(2&t){const e=b();v("model",e.userModel)("fields",e.formlyFields)}}function joe(t,n){if(1&t){const e=G();p(0,"app-compare-form-container",9),A("updateSubmit",function(){return h(e),b().onSubmit()})("cancel",function(){return h(e),b().onCancel()}),f()}if(2&t){const e=b();v("formlyFields",e.formlyFields)("modelFromUser",e.userModel)("modelFromServer",e.serverModel)}}let rF=(()=>{class t extends Vo{constructor(e,i,r,o,s,l,c,d,m){super(r,l,s,i,c,d,o,m),this.formlyService=e,this.warnings=s,this.routingService=l,this.userModelClass=Ch,this.formlyFields=[this.formlyService.genericInput({key:"name",isNameInput:!0,required:!0}),this.formlyService.genericInput({key:"icon",label:"Map Icon",validators:["faPrefix"],required:!1}),this.formlyService.singleFileField({key:"image",label:"Map Image",required:this.isInCreateState()})]}ngOnInit(){super.ngOnInit(),this.userModel.icon=this.extractIconNameFromPath(this.userModel.icon)}extractIconNameFromPath(e){const i=e.split("/");return i[i.length-1]}updateRouterLinks(e,i,r){this.updateCancelUrl=this.routingService.getRoutePath("map",{name:i.name,campaign:e}),this.creationCancelUrl=this.routingService.getRoutePath("default-map",{campaign:e})}articleUpdate(e){this.hasImageSelected(e.image)||delete e.image,super.articleUpdate(e)}hasImageSelected(e){return"FileList"===e.constructor.name}}return t.\u0275fac=function(e){return new(e||t)(C(mn),C(Hr),C(Ft),C(Me),C(Ze),C(ce),C(ki),C($e),C(ke))},t.\u0275cmp=Y({type:t,selectors:[["app-map-update"]],features:[oe],decls:7,vars:4,consts:[[1,"main"],[1,"mb-5"],[4,"ngIf","ngIfElse"],["createState",""],[3,"model","fields","formlySubmit","formlyCancel",4,"ngIf"],[3,"formlyFields","modelFromUser","modelFromServer","updateSubmit","cancel",4,"ngIf"],[3,"isInUpdateState","link"],[1,"text-center"],[3,"model","fields","formlySubmit","formlyCancel"],[3,"formlyFields","modelFromUser","modelFromServer","updateSubmit","cancel"]],template:function(e,i){if(1&e&&(p(0,"div",0),p(1,"article",1),S(2,Voe,4,3,"div",2),S(3,Boe,3,2,"ng-template",null,3,se),S(5,Hoe,1,2,"app-formly-formcontainer",4),S(6,joe,1,3,"app-compare-form-container",5),f(),f()),2&e){const r=ie(4);g(2),v("ngIf",(i.isInUpdateState()||i.isInOutdatedUpdateState())&&i.userModel)("ngIfElse",r),g(3),v("ngIf",i.isInUpdateState()||i.isInCreateState()),g(1),v("ngIf",i.isInOutdatedUpdateState())}},directives:[le,On,zn,br],styles:[""]}),t})(),zoe=(()=>{class t{constructor(e,i,r,o,s,l,c){this.markerService=e,this.mapService=i,this.route=r,this.formlyService=o,this.warnings=s,this.routingService=l,this.globalUrlParams=c,this.campaign=this.route.snapshot.params.campaign,this.constants=$,this.form=new Bi({}),this.fields=[this.formlyService.genericInput({key:"latitude",isNumberInput:!0}),this.formlyService.genericInput({key:"longitude",isNumberInput:!0}),this.formlyService.genericSelect({key:"location",sortProp:"name_full",overviewType:Ie.Location,campaign:this.campaign}),this.formlyService.genericSelect({key:"map",overviewType:Ie.Map,campaign:this.campaign}),this.formlyService.genericSelect({key:"type",valueProp:"id",labelProp:"name",label:"Marker Type",overviewType:Ie.MarkerTypeType,campaign:this.campaign}),this.formlyService.genericInput({key:"color",label:"Custom Color",required:!1}),this.formlyService.genericInput({key:"icon",label:"Custom Icon",required:!1})]}ngOnInit(){this.parameter_subscription=this.route.params.subscribe(e=>{const i=parseInt(e.longitude),r=parseInt(e.latitude);this.mapName=e.map_name,this.createUserModel(r,i),this.updateRouterLinks(this.campaign,e)})}updateRouterLinks(e,i){this.mapUrl=this.routingService.getRoutePath("map",{name:i.map_name,campaign:e})}createUserModel(e,i){this.mapService.readByParam(this.campaign,{name:this.mapName}).pipe(re()).subscribe(r=>{this.model=new Pu,this.model.map=r.pk,this.model.latitude=e,this.model.longitude=i},r=>this.routingService.routeToErrorPage(r))}onSubmit(){this.markerService.create(this.model).pipe(re()).subscribe(e=>this.routingService.routeToPath("map",{name:e.map_details.name,campaign:this.campaign}),e=>this.warnings.showWarning(e))}onCancel(){this.routingService.routeToPath("map",{name:this.mapName,campaign:this.campaign})}ngOnDestroy(){this.parameter_subscription&&this.parameter_subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(C($o),C(Hr),C(Me),C(mn),C(Ze),C(ce),C($e))},t.\u0275cmp=Y({type:t,selectors:[["app-marker-map-create"]],decls:6,vars:4,consts:[[1,"main"],[1,"mb-5"],[3,"isInUpdateState","link"],[1,"text-center"],[3,"model","fields","formlySubmit","formlyCancel"]],template:function(e,i){1&e&&(p(0,"div",0),p(1,"article",1),O(2,"app-edit-toggle",2),p(3,"h2",3),k(4," Adding a new Marker "),f(),p(5,"app-formly-formcontainer",4),A("formlySubmit",function(){return i.onSubmit()})("formlyCancel",function(){return i.onCancel()}),f(),f(),f()),2&e&&(g(2),v("isInUpdateState",!0)("link",i.mapUrl),g(3),v("model",i.model)("fields",i.fields))},directives:[On,zn],styles:[""]}),t})(),Goe=(()=>{class t{constructor(e,i,r,o,s,l,c,d,m){this.markerService=e,this.mapService=i,this.locationService=r,this.route=o,this.formlyService=s,this.warnings=l,this.routingService=c,this.campaignService=d,this.globalUrlParams=m,this.constants=$,this.campaign=this.route.snapshot.params.campaign,this.locationForm=new Bi({}),this.markerForm=new Bi({}),this.location_fields=[this.formlyService.genericInput({key:"name",isNameInput:!0}),this.formlyService.genericSelect({key:"parent_location",label:"Parent Location",overviewType:Ie.Location,sortProp:"name_full",campaign:this.campaign,required:!1})],this.marker_fields=[this.formlyService.genericInput({key:"latitude",isNumberInput:!0}),this.formlyService.genericInput({key:"longitude",isNumberInput:!0}),this.formlyService.genericSelect({key:"map",overviewType:Ie.Map,campaign:this.campaign}),this.formlyService.genericSelect({key:"type",labelProp:"name",valueProp:"id",label:"Marker Type",overviewType:Ie.MarkerTypeType,campaign:this.campaign}),this.formlyService.genericInput({key:"color",label:"Custom Color",required:!1}),this.formlyService.genericInput({key:"icon",label:"Custom Icon",required:!1})]}ngOnInit(){this.markerModel=this.route.snapshot.data.markerModelData,this.locationModel=this.route.snapshot.data.locationModelData,this.updateRouterLinks(this.campaign,this.route.snapshot.params)}updateRouterLinks(e,i){this.mapUrl=this.routingService.getRoutePath("map",{name:i.map_name,campaign:e})}onSubmit(){this.locationService.create(this.locationModel).pipe(re()).subscribe(e=>{this.markerModel.location=e.pk,this.markerService.create(this.markerModel).pipe(re()).subscribe(i=>this.routingService.routeToApiObject(e),i=>this.warnings.showWarning(i))},e=>this.warnings.showWarning(e))}onCancel(){this.routingService.routeToPath("map",{name:this.mapName,campaign:this.campaign})}ngOnDestroy(){this.parameter_subscription&&this.parameter_subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(C($o),C(Hr),C(wl),C(Me),C(mn),C(Ze),C(ce),C(ki),C($e))},t.\u0275cmp=Y({type:t,selectors:[["app-location-article-map-create"]],decls:18,vars:9,consts:[[1,"main"],[1,"mb-5"],[3,"isInUpdateState","link"],[1,"text-center"],[3,"formGroup","submit"],[1,"mb-0"],[3,"form","fields","model"],[1,"btn","btn-dark","mr-3",3,"click"],["type","submit",1,"btn","btn-secondary"]],template:function(e,i){1&e&&(p(0,"div",0),p(1,"article",1),O(2,"app-edit-toggle",2),p(3,"h2",3),k(4," Adding Location and Marker "),f(),p(5,"form",4),A("submit",function(){return i.onSubmit()}),p(6,"div",1),p(7,"h5",5),k(8," Location Fields "),f(),O(9,"formly-form",6),f(),p(10,"div"),p(11,"h5",5),k(12," Marker Fields "),f(),O(13,"formly-form",6),f(),p(14,"div",7),A("click",function(){return i.onCancel()}),k(15,"Cancel"),f(),p(16,"button",8),k(17,"Submit"),f(),f(),f(),f()),2&e&&(g(2),v("isInUpdateState",!0)("link",i.mapUrl),g(3),v("formGroup",i.locationForm),g(4),v("form",i.locationForm)("fields",i.location_fields)("model",i.locationModel),g(4),v("form",i.markerForm)("fields",i.marker_fields)("model",i.markerModel))},directives:[On,Vr,Ur,yl,Eh],styles:[""]}),t})(),Woe=(()=>{class t{constructor(e){this.http=e,this.mailUrl=`${$.wikiApiUrl}/mail`}send_error_notification(e){return this.http.post(`${this.mailUrl}/error`,e)}requestPasswordReset(e){return this.http.post(`${this.mailUrl}/reset`,{username:e})}}return t.\u0275fac=function(e){return new(e||t)(P(zt))},t.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const qoe=["loginMainCard"];function Qoe(t,n){if(1&t){const e=G();p(0,"article"),p(1,"h1"),k(2,"Log In"),f(),p(3,"div",4),k(4),f(),p(5,"form",5),A("submit",function(){return h(e),b().onSubmit()}),O(6,"formly-form",6),p(7,"div"),p(8,"span",7),A("click",function(){return h(e),b().togglePasswordResetView()}),k(9," Forgot your password?"),f(),f(),p(10,"button",8),k(11,"Login"),f(),f(),f()}if(2&t){const e=b();g(4),Le(e.extraMessage),g(2),v("model",e.model)("fields",e.fields)("form",e.form)}}function Zoe(t,n){if(1&t){const e=G();p(0,"h1"),k(1," Password Reset "),f(),p(2,"p"),k(3," Forgot your account\u2019s password? Enter your account name and we\u2019ll send you a randomized new password to your email address."),f(),p(4,"form",5),A("submit",function(){return h(e),b().requestPasswordReset()}),O(5,"formly-form",6),p(6,"div",9),A("click",function(){return h(e),b().togglePasswordResetView()}),k(7,"I do have a password !"),f(),p(8,"button",10),k(9,"Reset Password "),f(),f()}if(2&t){const e=b();g(5),v("model",e.recoveryModel)("fields",e.recoveryFields)("form",e.recoveryForm)}}let oF=(()=>{class t{constructor(e,i,r,o,s,l,c){this.formlyService=e,this.tokenService=i,this.route=r,this.warnings=o,this.routingService=s,this.mailService=l,this.globalUrlParams=c,this.form=new Bi({}),this.fields=[this.formlyService.genericInput({key:"username",placeholder:"Username"}),this.formlyService.genericPasswordInput({key:"password",className:"mb-0",fieldGroupClassName:"mb-0"})],this.recoveryForm=new Bi({}),this.recoveryFields=[this.formlyService.genericInput({key:"username",placeholder:"Username"})],this.hasConfirmedLogin=!1,this.isRequestingPasswordReset=!1}ngOnInit(){this.globalUrlParams.unsetCurrentlySelectedCampaign(),this.parameter_subscription=this.route.params.subscribe(e=>{this.campaign=e.campaign,this.state=e.state,this.extraMessage=$.loginMessageForState[this.state]}),this.model={username:null,password:null}}ngAfterViewInit(){hi(this.loginMainCard.nativeElement,"backInUp")}onSubmit(){this.tokenService.login(this.model).pipe(re()).subscribe(e=>this.onLoginSuccess(e),e=>this.onLoginFailure(e))}onLoginSuccess(e){this.tokenService.setUserData(e),this.globalUrlParams.autoUpdateCampaignSet(),hi(this.loginMainCard.nativeElement,"zoomOutDown").then(()=>this.routingService.routeToPath("campaign-overview"))}onLoginFailure(e){401===e.status?this.routingService.routeToPath("login-state",{state:"invalid-login"}):this.warnings.showWarning(e),this.resetModel()}resetModel(){this.model={username:null,password:null}}togglePasswordResetView(){this.isRequestingPasswordReset=!this.isRequestingPasswordReset,this.recoveryModel={username:null},hi(this.loginMainCard.nativeElement,"flip")}requestPasswordReset(){this.mailService.requestPasswordReset(this.recoveryModel.username).pipe(re()).subscribe(e=>this.togglePasswordResetView(),e=>this.warnings.showWarning(e))}ngOnDestroy(){this.parameter_subscription&&this.parameter_subscription.unsubscribe(),this.reset_subscription&&this.reset_subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(C(mn),C(ke),C(Me),C(Ze),C(ce),C(Woe),C($e))},t.\u0275cmp=Y({type:t,selectors:[["app-login"]],viewQuery:function(e,i){if(1&e&&pt(qoe,5),2&e){let r;ye(r=be())&&(i.loginMainCard=r.first)}},decls:5,vars:2,consts:[[1,"main"],["loginMainCard",""],[4,"ngIf","ngIfElse"],["passwordResetView",""],[1,"mb-3","text-warning"],[1,"d-flex","flex-column",3,"submit"],[3,"model","fields","form"],[1,"pointer","pseudo-link",3,"click"],["type","submit",1,"btn","btn-primary","mt-4"],[1,"btn","btn-secondary","mb-3",3,"click"],["type","submit",1,"btn","btn-primary"]],template:function(e,i){if(1&e&&(p(0,"div",0,1),S(2,Qoe,12,4,"article",2),f(),S(3,Zoe,10,3,"ng-template",null,3,se)),2&e){const r=ie(4);g(2),v("ngIf",!i.isRequestingPasswordReset)("ngIfElse",r)}},directives:[le,Vr,Ur,Fo,Eh],styles:[".main[_ngcontent-%COMP%]{max-width:30rem}.animate__animated[_ngcontent-%COMP%]{--animate-duration: 1s}.animate__animated.animate__flipInY[_ngcontent-%COMP%], .animate__animated.animate__flipOutY[_ngcontent-%COMP%]{--animate-duration: .75s}.pseudo-link[_ngcontent-%COMP%]{border-bottom:1px dotted grey;font-size:.9rem}.pseudo-link[_ngcontent-%COMP%]:hover{color:#839cff;text-decoration:none!important;border-bottom:2px solid grey}"]}),t})(),Hw=(()=>{class t{constructor(e,i){this.routingService=e,this.tokenService=i}canActivate(){const e=this.isUserLoggedIn();return e||this.routingService.routeToPath("login"),e}isUserLoggedIn(){return this.tokenService.hasValidJWTToken()}}return t.\u0275fac=function(e){return new(e||t)(P(ce),P(ke))},t.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),om=(()=>{class t{constructor(e,i){this.tokenService=e,this.routingService=i}canActivate(e){if(!this.isUserLoggedIn())return this.routingService.routeToPath("login"),!1;const i=this.isGeneralAdmin();return i||this.routingService.routeToPath("campaign-overview"),i}isUserLoggedIn(){return this.tokenService.hasValidJWTToken()}isGeneralAdmin(){return this.tokenService.isSuperUser()||this.tokenService.isAdmin()}}return t.\u0275fac=function(e){return new(e||t)(P(ke),P(ce))},t.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Ae=(()=>{class t extends om{constructor(e,i){super(e,i)}canActivate(e){if(!this.isUserLoggedIn())return this.routingService.routeToPath("login"),!1;if(this.isGeneralAdmin())return!0;const i=e.params.campaign;if(null==i)throw"Invalid Route Exception. The campaign-route you're trying to access has no campaign name parameter";if(null==this.tokenService.getCampaignRole(i))return this.routingService.routeToPath("campaign-overview"),!1;const o=e.data.requiredRole;if(null==o)throw"Invalid Route Exception. The campaign-route you're trying to access has no defined minimum role needed to access it";return this.hasRoleOrBetter(i,o)}hasRoleOrBetter(e,i){const r=this.tokenService.isCampaignAdmin(e),o=this.tokenService.isCampaignMember(e),s=this.tokenService.isCampaignGuest(e);return i===ue.ADMIN?r:i===ue.MEMBER?r||o:i===ue.GUEST?r||o||s:void 0}}return t.\u0275fac=function(e){return new(e||t)(P(ke),P(ce))},t.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const Koe=function(t){return{campaign:t}};let sF=(()=>{class t{constructor(e){this.routingService=e,this.constants=$}}return t.\u0275fac=function(e){return new(e||t)(C(ce))},t.\u0275cmp=Y({type:t,selectors:[["app-wiki1-request"]],decls:13,vars:4,consts:[[1,"main","d-flex","flex-column"],[1,"text-center","mb-5"],["alt","",1,"center","mb-3",3,"src"],[1,"text-center"],[1,"btn","btn-secondary",3,"routerLink"]],template:function(e,i){1&e&&(p(0,"div",0),p(1,"h1",1),k(2," Wiki1 Request "),f(),O(3,"img",2),p(4,"p",3),k(5," Sorry, something in your cache went awry. You tried to call /wiki1 but your browser automatically redirected you to this page. "),O(6,"br"),k(7," If you want to visit /wiki1, please clear your cache. "),O(8,"br"),k(9," If you want the improved experience of /wiki2, please click on the button below. "),f(),p(10,"div"),p(11,"a",4),k(12," To Wiki2 Frontpage "),f(),f(),f()),2&e&&(g(3),v("src",i.constants.timeoutImageUrl,li),g(8),v("routerLink",i.routingService.getRoutePath("home1",ht(2,Koe,i.constants.defaultCampaign))))},directives:[Ht],styles:["img[_ngcontent-%COMP%]{max-height:24rem;max-width:100%}"]}),t})();function Yoe(t,n){if(1&t&&(p(0,"h4"),k(1),f()),2&t){const e=b().$implicit;g(1),Z(" Session ",e.session_details.session_number," ")}}function Joe(t,n){1&t&&(p(0,"h4"),k(1," Create Quote "),f())}function Xoe(t,n){if(1&t){const e=G();p(0,"div",9),S(1,Yoe,2,1,"h4",10),S(2,Joe,2,0,"h4",10),p(3,"app-quotefield",11),A("delete",function(){const o=h(e).index;return b().onArticleDelete(o)})("create",function(r){const s=h(e).index;return b().articles[s]=r}),f(),f()}if(2&t){const e=n.$implicit,i=b();g(1),v("ngIf",e.pk),g(1),v("ngIf",!e.pk),g(1),v("character",i.character)("campaign",i.campaign)("quote",e)}}let ese=(()=>{class t extends Jv{constructor(e,i,r,o,s,l){super(e,o,r,i,l,s),this.baseQuoteConnection=new Rw,this.inQuoteCreateState=!1,this.inQuoteConnectionCreateState=!1}ngOnInit(){this.character=this.route.snapshot.data.character,super.ngOnInit(),this.articles=this.articles.sort(this.sortQuotesBySession)}updateDynamicVariables(e,i,r){this.characterUrl=this.routingService.getRoutePath("character",{name:this.character.name,campaign:e.name})}sortQuotesBySession(e,i){return e.session_details.session_number>i.session_details.session_number?-1:e.session_details.session_number<i.session_details.session_number?1:0}addArticle(){const e=new Fw;this.articles.unshift(e)}onArticleDelete(e){this.articles.splice(e,1)}}return t.\u0275fac=function(e){return new(e||t)(C(ir),C(Ze),C(ce),C(Me),C(ke),C($e))},t.\u0275cmp=Y({type:t,selectors:[["app-quote-overview"]],features:[oe],decls:15,vars:5,consts:[[1,"main"],[1,"container"],[1,"text-center"],[3,"routerLink"],[1,"btn","btn-primary","my-3",3,"click"],[1,"fas","fa-plus"],["class","mb-5",4,"ngFor","ngForOf"],[1,"col-md-3","px-0"],[1,"btn","btn-secondary","w-100",3,"routerLink"],[1,"mb-5"],[4,"ngIf"],[3,"character","campaign","quote","delete","create"]],template:function(e,i){1&e&&(p(0,"div",0),p(1,"article",1),p(2,"h3",2),k(3," Quote Overview "),f(),p(4,"h5",2),k(5," Quotes of: "),p(6,"a",3),k(7),f(),f(),p(8,"div",4),A("click",function(){return i.addArticle()}),O(9,"span",5),k(10," Add Quote "),f(),S(11,Xoe,4,5,"div",6),p(12,"div",7),p(13,"a",8),k(14),f(),f(),f(),f()),2&e&&(g(6),xe("routerLink",i.characterUrl),g(1),Z(" ",i.character.name," "),g(4),v("ngForOf",i.articles),g(2),xe("routerLink",i.character.getAbsoluteRouterUrl()),g(1),Z(" Back to ",i.character.name," "))},directives:[Ht,je,le,UN],styles:[""]}),t})(),tse=(()=>{class t{constructor(e){this.http=e,this.adminUrl=`${$.wikiApiUrl}/admin`}clearDatabase(){return this.http.delete(`${this.adminUrl}/dbclear`)}downloadDatabase(){return this.http.get(`${this.adminUrl}/dbdownload`,{responseType:"blob"})}getStatistics(){return this.http.get(`${this.adminUrl}/statistics`)}}return t.\u0275fac=function(e){return new(e||t)(P(zt))},t.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),nse=(()=>{class t extends Oa{constructor(e){super(e),this.baseUrl=`${$.wikiApiUrl}/group`}}return t.\u0275fac=function(e){return new(e||t)(P(zt))},t.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const ise=["isSUInput"],rse=["isAdminInput"];function ose(t,n){1&t&&(p(0,"span",13),k(1," (\u2020) "),f())}function sse(t,n){if(1&t){const e=G();p(0,"span",14),k(1),p(2,"span",15),A("click",function(){const o=h(e).$implicit;return b(2).removeUserFromGroup(o)}),f(),f()}if(2&t){const e=n.$implicit,i=b(2);g(1),Z(" ",i.getGroupName(e)," ")}}function ase(t,n){if(1&t){const e=G();p(0,"i",16),A("click",function(){return h(e),b(2).toggleGroupAddState()}),f()}}function lse(t,n){if(1&t){const e=G();p(0,"span",19),A("click",function(){return h(e),b(3).toggleDeleteState()}),f()}2&t&&v("ngbTooltip","Delete user ?")}const cse=function(t,n){return{"col-1":t,"col-md-4 col-12":n}};function use(t,n){if(1&t&&(p(0,"div",17),S(1,lse,1,1,"span",18),f()),2&t){const e=b(2),i=ie(2);v("ngClass",Bn(3,cse,!e.isDeleteState,e.isDeleteState)),g(1),v("ngIf",!e.isDeleteState)("ngIfElse",i)}}const dse=function(t,n){return{"d-none":t,"d-flex":n}};function hse(t,n){if(1&t&&(p(0,"div",3),p(1,"div",4),p(2,"span",5),k(3),S(4,ose,2,0,"span",6),f(),f(),p(5,"div",7),S(6,sse,3,1,"span",8),S(7,ase,1,0,"i",9),f(),p(8,"div",10),p(9,"span",11),k(10),f(),f(),S(11,use,2,6,"div",12),f()),2&t){const e=b(),i=ie(4);g(3),Z(" ",e.user.username," "),g(1),v("ngIf",!e.user.is_active),g(2),v("ngForOf",e.user.groups),g(1),v("ngIf",!e.isAddGroupstate)("ngIfElse",i),g(1),v("ngClass",Bn(8,dse,e.isDeleteState,!e.isDeleteState)),g(2),Z(" ",e.user.email," "),g(1),v("ngIf",e.user.is_active)}}function pse(t,n){if(1&t){const e=G();p(0,"div",20),p(1,"div",21),p(2,"strong"),k(3),f(),f(),p(4,"div",22),p(5,"div",23),A("click",function(){return h(e),b().deleteUser()}),k(6," Yes "),f(),p(7,"div",24),A("click",function(){return h(e),b().toggleDeleteState()}),k(8," No "),f(),f(),f()}if(2&t){const e=b();g(3),Z("Delete ",e.user.username,"?")}}function fse(t,n){if(1&t&&(p(0,"option",34),k(1),f()),2&t){const e=n.$implicit,i=b(2);xe("value",e.id),Ct("disabled",!!i.isUserInGroup(e.id)||null),g(1),Z(" ",e.name," ")}}function mse(t,n){if(1&t){const e=G();p(0,"div",25),p(1,"form",26),A("submit",function(){h(e);const r=ie(3);return b().addUserToSelectedGroup(r.value)}),p(2,"select",27,28),A("ngModelChange",function(r){return h(e),b().newGroup=r}),S(4,fse,2,3,"option",29),f(),p(5,"div",30),p(6,"i",31),A("click",function(){return h(e),b().toggleGroupAddState()}),f(),p(7,"button",32),O(8,"i",33),f(),f(),f(),f()}if(2&t){const e=b();g(2),v("ngModel",e.newGroup),g(2),v("ngForOf",e.groups)}}let gse=(()=>{class t{constructor(e,i,r){this.userService=e,this.warnings=i,this.tokenService=r,this.delete=new q,this.isDeleteState=!1,this.isAddGroupstate=!1,this.newGroup=null}ngOnInit(){}updateUser(){this.userService.update(this.user.pk,this.user).pipe(re()).subscribe(e=>this.user=e,e=>this.warnings.showWarning(e))}isUserInGroup(e){return this.user.groups.includes(e)}getGroupName(e){const i=this.groups.filter(o=>o.id===e);return 0===i.length?"":i[0].name}removeUserFromGroup(e){const i=this.user.groups.indexOf(e);this.user.groups.splice(i,1),this.updateUserGroups()}addUserToSelectedGroup(e){e="string"==typeof e?parseInt(e):e,this.user.groups.push(e),this.updateUserGroups()}updateUserGroups(){this.userService.updateUserGroups(this.user).pipe(re()).subscribe(e=>{this.user=e,this.isAddGroupstate=!1},e=>this.warnings.showWarning(e))}toggleGroupAddState(){this.isAddGroupstate=!this.isAddGroupstate,this.isAddGroupstate&&(this.newGroup=null)}toggleDeleteState(){this.isDeleteState=!this.isDeleteState}deleteUser(){this.userService.delete(this.user.pk).pipe(re()).subscribe(e=>{this.delete.emit(this.index)},e=>this.warnings.showWarning(e))}}return t.\u0275fac=function(e){return new(e||t)(C(so),C(Ze),C(ke))},t.\u0275cmp=Y({type:t,selectors:[["app-user-row"]],viewQuery:function(e,i){if(1&e&&(pt(ise,5),pt(rse,5)),2&e){let r;ye(r=be())&&(i.suInput=r.first),ye(r=be())&&(i.adminInput=r.first)}},inputs:{user:"user",index:"index",groups:"groups"},outputs:{delete:"delete"},decls:5,vars:1,consts:[["class","py-2 row",4,"ngIf"],["userDelete",""],["addGroup",""],[1,"py-2","row"],[1,"col-md-3","col-4","p-0","d-flex","align-items-center"],[1,"ml-3"],["title","Deleted/Deactivated",4,"ngIf"],[1,"col-md-5","col-6","p-0","d-flex","flex-column","justify-content-center","hide-container"],["class","badge cursor-default bg-dark border-white vanish-container hide-overflow",4,"ngFor","ngForOf"],["class","fa fa-plus fa-1-5x icon hide-icon text-center",3,"click",4,"ngIf","ngIfElse"],[1,"col-md-3","p-0","align-items-center","hide-on-mobile",3,"ngClass"],[1,"d-block","text-break"],["class","d-flex p-0  align-items-center justify-content-center",3,"ngClass",4,"ngIf"],["title","Deleted/Deactivated"],[1,"badge","cursor-default","bg-dark","border-white","vanish-container","hide-overflow"],[1,"fa","fa-times","icon","vanish-icon",3,"click"],[1,"fa","fa-plus","fa-1-5x","icon","hide-icon","text-center",3,"click"],[1,"d-flex","p-0","align-items-center","justify-content-center",3,"ngClass"],["class","fa fa-trash icon","placement","top",3,"ngbTooltip","click",4,"ngIf","ngIfElse"],["placement","top",1,"fa","fa-trash","icon",3,"ngbTooltip","click"],[1,"delete-request","d-flex","animate__animated","animate__flipInY"],[1,"mr-3"],[1,"d-inline-flex"],[1,"btn","btn-danger","float-right","mr-2",3,"click"],[1,"btn","btn-secondary","float-right",3,"click"],[1,"mt-3"],[3,"submit"],["name","character","id","character",1,"form-control",3,"ngModel","ngModelChange"],["groupField",""],[3,"value",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-around"],[1,"fa","icon","fa-times","mx-2","fa-1-5x",3,"click"],["type","submit",1,"d-flex"],[1,"fa","icon","fa-check","fa-1-5x"],[3,"value"]],template:function(e,i){1&e&&(S(0,hse,12,11,"div",0),S(1,pse,9,1,"ng-template",null,1,se),S(3,mse,9,2,"ng-template",null,2,se)),2&e&&v("ngIf",i.user&&i.groups)},directives:[le,je,Yt,Of,Vr,Ur,Fo,Ro,Si,Us,as,ls],styles:[".hide-icon[_ngcontent-%COMP%]{opacity:0;transition:opacity .2s}.hide-container[_ngcontent-%COMP%]:hover   .hide-icon[_ngcontent-%COMP%]{opacity:1}.vanish-icon[_ngcontent-%COMP%]{display:none}.vanish-container[_ngcontent-%COMP%]:hover   .vanish-icon[_ngcontent-%COMP%]{display:inline-block}.badge[_ngcontent-%COMP%]{border-style:double}.cursor-default[_ngcontent-%COMP%]{cursor:default}.hide-overflow[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis}@media (max-width: 768px){.hide-on-mobile[_ngcontent-%COMP%]{display:none!important}}"]}),t})();const _se=["adminCard"];function vse(t,n){1&t&&(p(0,"span"),O(1,"span",30),k(2," Add User "),f())}function yse(t,n){1&t&&(p(0,"span"),O(1,"span",31),k(2," Cancel User Creation "),f())}function bse(t,n){if(1&t){const e=G();p(0,"div",32),p(1,"h4"),k(2,"Adding new User"),f(),p(3,"app-formly-formcontainer",33),A("formlySubmit",function(){return h(e),b().saveNewUser()})("formlyCancel",function(){return h(e),b().toggleUserCreateState()}),f(),f()}if(2&t){const e=b();g(3),v("model",e.userModel)("fields",e.userFields)}}const Cse=function(t){return{"light-row":t}};function wse(t,n){if(1&t){const e=G();p(0,"div",34),p(1,"app-user-row",35),A("delete",function(){const o=h(e).index;return b().removeDeletedUser(o)}),f(),f()}if(2&t){const e=n.$implicit,i=n.index,r=b();v("ngClass",ht(4,Cse,i%2==0)),g(1),v("index",i)("user",e)("groups",r.groups)}}function Sse(t,n){if(1&t&&(p(0,"div",14),p(1,"div",36),k(2),f(),p(3,"div",36),k(4),f(),f()),2&t){const e=n.$implicit;g(2),Z(" ",e.key,""),g(2),Z(" ",e.value,"")}}function Tse(t,n){1&t&&O(0,"i",37)}function Ese(t,n){1&t&&(p(0,"span"),O(1,"span",38),k(2," Add Campaign "),f())}function kse(t,n){1&t&&(p(0,"span"),O(1,"span",31),k(2," Cancel Campaign Creation "),f())}function Dse(t,n){if(1&t&&(p(0,"div",40),p(1,"div",41),O(2,"img",42),p(3,"strong"),k(4),f(),f(),p(5,"div",41),k(6),f(),p(7,"div",41),k(8),f(),p(9,"div",41),k(10),f(),f()),2&t){const e=n.$implicit;g(2),Po("alt","Icon of campaign ",e.name,""),v("src",e.icon,li),g(2),Z(" ",e.name," "),g(2),Z("Admins: ",e.admins.length,""),g(2),Z("Members: ",e.members.length,""),g(2),Z("Guest: ",e.guests.length,"")}}function xse(t,n){if(1&t&&(p(0,"div",25),S(1,Dse,11,6,"div",39),f()),2&t){const e=b();g(1),v("ngForOf",e.campaigns)}}function Mse(t,n){if(1&t){const e=G();p(0,"div",32),p(1,"h4"),k(2,"Adding new Campaign"),f(),p(3,"app-formly-formcontainer",33),A("formlySubmit",function(){return h(e),b().createNewCampaign()})("formlyCancel",function(){return h(e),b().toggleCampaignCreateState()}),f(),f()}if(2&t){const e=b();g(3),v("model",e.campaignModel)("fields",e.campaignFields)}}let Ise=(()=>{class t{constructor(e,i,r,o,s,l,c,d,m,_){this.userService=e,this.warnings=i,this.formlyService=r,this.adminService=o,this.routingService=s,this.groupService=l,this.tokenService=c,this.route=d,this.campaignService=m,this.globalUrlParams=_,this.isUserCreateState=!1,this.userFields=[this.formlyService.genericInput({key:"username",isNameInput:!0,required:!0}),this.formlyService.confirmedPasswordInput({}),this.formlyService.genericInput({key:"email",isNameInput:!0,required:!1})],this.databaseDeleteConfirmationCount=0,this.isCampaignCreateState=!1,this.isWaitingForCampaignCreation=!1,this.campaignFields=[this.formlyService.genericInput({key:"name",isNameInput:!0,required:!0,maxLength:40,placeholder:"Your campaign's name..."}),this.formlyService.genericInput({key:"subtitle",isNameInput:!1,required:!1,maxLength:400,placeholder:"The subtitle to show on the home page"}),this.formlyService.singleFileField({key:"background_image",required:!0}),this.formlyService.singleFileField({key:"icon",required:!0})],this.blobToFile=(w,E)=>{var D=w;return D.lastModifiedDate=new Date,D.name=E,w}}ngOnInit(){this.parameterSubscription=this.route.params.subscribe(e=>this.setRouterLinks(),e=>this.warnings.showWarning(e)),this.userService.list().pipe(re()).subscribe(e=>{this.users=e.sort((i,r)=>i.username.toLocaleLowerCase()<r.username.toLocaleLowerCase()?-1:1)},e=>this.warnings.showWarning(e)),this.groupService.list().pipe(re()).subscribe(e=>this.groups=e,e=>this.warnings.showWarning(e)),this.adminService.getStatistics().pipe(re()).subscribe(e=>this.statistics=e,e=>this.warnings.showWarning(e)),this.campaignService.list().pipe(re()).subscribe(e=>this.campaigns=e,e=>this.warnings.showWarning(e))}ngAfterViewInit(){hi(this.adminCard.nativeElement,"fadeIn")}setRouterLinks(){this.campaignOverviewUrl=this.routingService.getRoutePath("campaign-overview")}saveNewUser(){this.userService.create(this.userModel).pipe(re()).subscribe(e=>{this.users.push(e),this.isUserCreateState=!1},e=>this.warnings.showWarning(e))}toggleUserCreateState(){this.isUserCreateState=!this.isUserCreateState,this.isUserCreateState&&(this.userModel={username:null,email:""})}removeDeletedUser(e){this.users.splice(e,1)}startDatabaseDownload(){this.adminService.downloadDatabase().pipe(re()).subscribe(e=>{const i=document.createElement("a"),r=URL.createObjectURL(e);i.href=r,i.download="db.sqlite3",i.click(),URL.revokeObjectURL(r)},e=>this.warnings.showWarning(e))}toggleCampaignCreateState(){this.isCampaignCreateState=!this.isCampaignCreateState,this.isCampaignCreateState&&(this.campaignModel={name:null,subtitle:null,background_image:null,icon:null})}createNewCampaign(){this.campaignService.create(this.campaignModel).pipe(re()).subscribe(e=>{this.campaigns.push(e),this.isCampaignCreateState=!1,this.globalUrlParams.autoUpdateCampaignSet()},e=>this.warnings.showWarning(e))}ngOnDestroy(){this.parameterSubscription&&this.parameterSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(C(so),C(Ze),C(mn),C(tse),C(ce),C(nse),C(ke),C(Me),C(ki),C($e))},t.\u0275cmp=Y({type:t,selectors:[["app-admin"]],viewQuery:function(e,i){if(1&e&&pt(_se,5),2&e){let r;ye(r=be())&&(i.adminCard=r.first)}},decls:61,vars:17,consts:[[1,"main"],["adminCard",""],[1,"btn","btn-secondary","mb-3",3,"routerLink"],[1,"fas","fa-globe-americas"],[1,"mb-3"],[1,"d-flex","justify-content-between"],[1,"mb-0"],[1,"fa","fa-user"],[1,"align-self-end","position-relative","top1"],[1,"btn","btn-dark","border-white",3,"click"],[4,"ngIf"],[1,"white-separator"],["class","my-2 card p-3",4,"ngIf"],[1,"usertable"],[1,"row"],[1,"col-5","col-md-3","d-flex","flex-column"],["placement","top",1,"fa","fa-user-circle",3,"ngbTooltip"],[1,"col-6","col-md-5"],["placement","top",1,"fa","fa-group",3,"ngbTooltip"],[1,"col-3","hide-on-mobile"],["placement","top",1,"fa","fa-envelope-o",3,"ngbTooltip"],["class","",3,"ngClass",4,"ngFor","ngForOf"],[1,"mt-3"],[1,"fa","fa-database"],[1,"btn","btn-primary","border-white",3,"click"],[1,"container","mb-5"],["class","row",4,"ngFor","ngForOf"],[1,"fas","fa-dragon"],["class","ml-3 spinner-border",4,"ngIf"],["class","container mb-5",4,"ngIf"],[1,"fa","fa-user-plus"],[1,"fa","fa-times"],[1,"my-2","card","p-3"],[3,"model","fields","formlySubmit","formlyCancel"],[1,"",3,"ngClass"],[3,"index","user","groups","delete"],[1,"col-6","col-sm-3"],[1,"ml-3","spinner-border"],[1,"fa","fa-plus"],["class","row mb-4",4,"ngFor","ngForOf"],[1,"row","mb-4"],[1,"col-sm-3"],[1,"mr-3","campaign-icon",3,"src","alt"]],template:function(e,i){1&e&&(p(0,"div",0,1),p(2,"div",2),O(3,"span",3),k(4," Back To campaign overview "),f(),p(5,"article"),p(6,"div",4),p(7,"div",5),p(8,"h3",6),O(9,"span",7),k(10," Users "),f(),p(11,"div",8),p(12,"div",9),A("click",function(){return i.toggleUserCreateState()}),S(13,vse,3,0,"span",10),S(14,yse,3,0,"span",10),f(),f(),f(),O(15,"hr",11),S(16,bse,4,2,"div",12),p(17,"div",13),p(18,"div",14),p(19,"h4",15),p(20,"div"),O(21,"span",16),k(22," Name "),f(),f(),p(23,"h4",17),O(24,"span",18),k(25," Groups "),f(),p(26,"h4",19),O(27,"span",20),k(28," Email "),f(),f(),S(29,wse,2,6,"div",21),p(30,"div",22),k(31,"(\u2020): Deactivated/Deleted Account "),f(),f(),f(),p(32,"div",4),p(33,"div",5),p(34,"h3",6),O(35,"span",23),k(36," Database "),f(),p(37,"div",8),p(38,"div",24),A("click",function(){return i.startDatabaseDownload()}),O(39,"span",23),k(40," Download Database "),f(),f(),f(),O(41,"hr",11),p(42,"div",25),S(43,Sse,5,2,"div",26),Lt(44,"keyvalue"),f(),f(),p(45,"div",4),p(46,"div",5),p(47,"h3",6),O(48,"span",27),k(49," Campaigns "),S(50,Tse,1,0,"i",28),f(),p(51,"div",8),p(52,"div",24),A("click",function(){return i.toggleCampaignCreateState()}),S(53,Ese,3,0,"span",10),S(54,kse,3,0,"span",10),f(),f(),f(),O(55,"hr",11),S(56,xse,2,1,"div",29),S(57,Mse,4,2,"div",12),f(),p(58,"div",2),O(59,"span",3),k(60," Back To campaign overview "),f(),f(),f()),2&e&&(g(2),xe("routerLink",i.campaignOverviewUrl),g(11),v("ngIf",!i.isUserCreateState),g(1),v("ngIf",i.isUserCreateState),g(2),v("ngIf",i.isUserCreateState),g(5),v("ngbTooltip","Username"),g(3),v("ngbTooltip","Access-right groups"),g(3),v("ngbTooltip","Email-Address"),g(2),v("ngForOf",i.users),g(14),v("ngForOf",yn(44,15,i.statistics)),g(7),v("ngIf",i.isWaitingForCampaignCreation),g(3),v("ngIf",!i.isCampaignCreateState),g(1),v("ngIf",i.isCampaignCreateState),g(2),v("ngIf",!i.isCampaignCreateState&&!i.isWaitingForCampaignCreation),g(1),v("ngIf",i.isCampaignCreateState&&!i.isWaitingForCampaignCreation),g(1),xe("routerLink",i.campaignOverviewUrl))},directives:[us,le,Of,je,zn,Yt,gse],pipes:[c_],styles:[".usertable[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{line-height:1.2;margin-left:-15px;margin-right:-15px}.usertable[_ngcontent-%COMP%]   .fa-trash[_ngcontent-%COMP%]{justify-content:center;display:flex;margin:auto}.light-row[_ngcontent-%COMP%]{background-color:#272a2d}.small-text[_ngcontent-%COMP%]{font-size:.7rem}.warning[_ngcontent-%COMP%]{background-color:#936512!important}.campaign-icon[_ngcontent-%COMP%]{max-height:2rem}@media (max-width: 768px){.hide-on-mobile[_ngcontent-%COMP%]{display:none!important}}"]}),t})(),jw=(()=>{class t{constructor(e){this.tokenService=e,this.tokenRefreshInProgress=!1,this.refreshAccessTokenSubject=new ln(null)}refreshUserData(){return this.startWaitForRefreshState(),this.tokenService.refreshUserData().pipe(Zn(e=>{this.tokenService.setUserData(e)}),Zn(e=>{this.endWaitForRefreshState(e.accessToken.token)}))}startWaitForRefreshState(){this.tokenRefreshInProgress=!0,this.refreshAccessTokenSubject.next(null)}endWaitForRefreshState(e){this.tokenRefreshInProgress=!1,this.refreshAccessTokenSubject.next(e)}waitForAccessTokenRefresh(){return this.refreshAccessTokenSubject.pipe($t(e=>null!==e),re())}tokenNeedsRefresh(e){return this.tokenService.isTokenExpired(e)&&!this.tokenRefreshInProgress}hasToWaitForRefresh(e){return this.tokenService.isTokenExpired(e)&&this.tokenRefreshInProgress}}return t.\u0275fac=function(e){return new(e||t)(P(ke))},t.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const Pse=["profileCard"];function Ase(t,n){1&t&&(p(0,"span"),k(1," Edit Profile "),O(2,"i",18),f())}function Ose(t,n){1&t&&(p(0,"span"),k(1," Cancel Profile Edit "),O(2,"i",19),f())}function Nse(t,n){1&t&&(p(0,"span"),k(1,"Edit Password "),O(2,"i",18),f())}function Fse(t,n){1&t&&(p(0,"span"),k(1,"Cancel Password Edit "),O(2,"i",19),f())}function Rse(t,n){1&t&&Zi(0)}const Lse=function(t,n){return{campaignRole:t,index:n}},$se=function(t){return{$implicit:t}};function Use(t,n){if(1&t&&(p(0,"div",24),S(1,Rse,1,0,"ng-container",25),f()),2&t){const e=n.$implicit,i=n.index,r=b(2),o=ie(27),s=ie(25);g(1),v("ngTemplateOutlet",r.leaveCampaignStates[i]?o:s)("ngTemplateOutletContext",ht(5,$se,Bn(2,Lse,e,i)))}}function Vse(t,n){if(1&t&&(p(0,"div",20),p(1,"div",21),k(2,"Username"),f(),p(3,"div",21),k(4),f(),p(5,"div",21),k(6,"Email"),f(),p(7,"div",21),k(8),f(),p(9,"h5",22),k(10,"Campaign Memberships"),f(),S(11,Use,2,7,"div",23),f()),2&t){const e=b();g(4),Le(e.user.username),g(4),Le(e.user.email),g(3),v("ngForOf",e.campaignRolesList)}}function Bse(t,n){if(1&t){const e=G();p(0,"div",26),p(1,"app-formly-formcontainer",27),A("formlyCancel",function(){return h(e),b().togglePasswordEditState()})("formlySubmit",function(){return h(e),b().updatePassword()}),f(),f()}if(2&t){const e=b();g(1),v("model",e.passwordModel)("fields",e.passwordFields)}}function Hse(t,n){if(1&t){const e=G();Vt(0),p(1,"div",28),p(2,"app-animated-toggle",29),A("confirmationEvent",function(){return h(e),b().deleteThisUser()}),p(3,"inactiveButton"),p(4,"div",30),O(5,"i",31),f(),f(),f(),f(),Bt()}2&t&&(g(2),v("message","Delete your account?"))}function jse(t,n){if(1&t){const e=G();p(0,"div",32),p(1,"app-formly-formcontainer",27),A("formlyCancel",function(){return h(e),b().toggleProfileEditState()})("formlySubmit",function(){return h(e),b().updateProfile()}),f(),f()}if(2&t){const e=b();g(1),v("model",e.profileModel)("fields",e.profileFields)}}function zse(t,n){if(1&t){const e=G();p(0,"div",33),p(1,"div",34),k(2),Lt(3,"titlecase"),f(),p(4,"div",35),k(5),Lt(6,"titlecase"),f(),p(7,"div",36),p(8,"div",37),A("click",function(){const o=h(e).$implicit;return b().toggleLeaveCampaignState(o.index)}),O(9,"span",38),p(10,"span",39),k(11,"Leave Campaign"),f(),f(),f(),f()}if(2&t){const e=n.$implicit;g(2),Le(yn(3,2,e.campaignRole.campaignName)),g(3),Le(yn(6,4,e.campaignRole.role))}}function Gse(t,n){if(1&t){const e=G();p(0,"div",40),p(1,"div",41),p(2,"strong"),k(3),Lt(4,"titlecase"),f(),f(),p(5,"div",42),A("click",function(){h(e);const r=b();return r.leaveCampaign(r.campaignRole)}),k(6," Yes "),f(),p(7,"div",43),A("click",function(){const o=h(e).$implicit;return b().toggleLeaveCampaignState(o.index)}),k(8," No "),f(),f()}if(2&t){const e=n.$implicit;g(3),Z("Permanently leave '",yn(4,1,e.campaignRole.campaignName),"'?")}}let Wse=(()=>{class t{constructor(e,i,r,o,s,l,c,d){this.userService=e,this.routingService=i,this.formlyService=r,this.warnings=o,this.route=s,this.tokenService=l,this.refreshTokenService=c,this.campaignService=d,this.profileEditState=!1,this.passwordEditState=!1,this.hasProfileDeletePermission=!1,this.passwordFields=[this.formlyService.genericPasswordInput({key:"oldPassword",label:"Your old password"}),this.formlyService.confirmedPasswordInput({label:"New Password"})],this.profileFields=[this.formlyService.genericInput({key:"username"}),this.formlyService.genericInput({key:"email",required:!1})]}ngOnInit(){var e;return Et(this,void 0,void 0,function*(){this.campaign=null!==(e=this.route.snapshot.data.campaign)&&void 0!==e?e:{},this.user=this.route.snapshot.data.userData,this.hasProfileDeletePermission=this.tokenService.getCurrentUserPk()===this.user.pk;const i=this.tokenService.getCampaignMemberships(),r=Object.keys(i).map(o=>({campaignName:o,role:i[o]}));this.campaignRolesList=r,this.leaveCampaignStates=this.campaignRolesList.map(o=>!1),this.updateDynamicVariables(this.campaign)})}ngAfterViewInit(){hi(this.profileCard.nativeElement,"fadeIn")}updateDynamicVariables(e){this.campaignOverviewUrl=this.routingService.getRoutePath("campaign-overview")}toggleProfileEditState(){this.profileEditState=!this.profileEditState,this.profileEditState&&(this.profileModel={username:this.user.username,email:this.user.email})}togglePasswordEditState(){this.passwordEditState=!this.passwordEditState,this.passwordEditState&&(this.passwordModel={})}toggleLeaveCampaignState(e){this.leaveCampaignStates[e]=!this.leaveCampaignStates[e]}updatePassword(){this.userService.patchUser(this.user.pk,{password:this.passwordModel.password,oldPassword:this.passwordModel.oldPassword}).pipe(re()).subscribe(i=>{this.user=i,this.passwordEditState=!1},i=>this.warnings.showWarning(i))}updateProfile(){this.userService.patchUser(this.user.pk,this.profileModel).pipe(re()).subscribe(e=>{this.user=e,this.profileEditState=!1},e=>this.warnings.showWarning(e))}leaveCampaign(e){let i;switch(e.role){case ue.ADMIN:i=this.campaignService.removeAdmin(e.campaignName,this.user);break;case ue.MEMBER:case ue.GLOBALMEMBER:i=this.campaignService.removeMember(e.campaignName,this.user);break;case ue.GUEST:case ue.GLOBALGUEST:i=this.campaignService.removeGuest(e.campaignName,this.user)}i.pipe(re()).subscribe(r=>Et(this,void 0,void 0,function*(){const o=this.campaignRolesList.findIndex(l=>l.campaignName===e.campaignName);this.campaignRolesList.splice(o,1),yield this.refreshTokenService.refreshUserData().toPromise(),e.campaignName===this.campaign.name?this.routingService.routeToPath("campaign-overview"):this.ngOnInit()}))}deleteThisUser(){}}return t.\u0275fac=function(e){return new(e||t)(C(so),C(ce),C(mn),C(Ze),C(Me),C(ke),C(jw),C(ki))},t.\u0275cmp=Y({type:t,selectors:[["app-profile"]],viewQuery:function(e,i){if(1&e&&pt(Pse,5),2&e){let r;ye(r=be())&&(i.profileCard=r.first)}},decls:28,vars:9,consts:[[1,"main"],["profileCard",""],[1,"container"],[1,"d-flex","justify-content-between","row"],[1,"mb-0","col-12","col-sm-6"],[1,"fa","fa-user-circle"],[1,"position-relative","top1","col-12","col-sm-6","d-flex","align-self-end","justify-content-end"],[1,"btn","btn-secondary","border-white",3,"click"],[4,"ngIf"],[1,"white-separator"],["class","row","id","profile-data",4,"ngIf","ngIfElse"],["class","my-3 card p-3",4,"ngIf"],[1,"mt-5","row"],[1,"col-md-3"],[1,"btn","btn-secondary","w-100",3,"routerLink"],["profileForm",""],["displayCampaignForm",""],["leaveCampaignForm",""],[1,"fa","fa-pencil"],[1,"fa","fa-times"],["id","profile-data",1,"row"],[1,"col-6"],[1,"col-12","mb-0","mt-4"],["class","col-12",4,"ngFor","ngForOf"],[1,"col-12"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"my-3","card","p-3"],[3,"model","fields","formlyCancel","formlySubmit"],[1,"col-md-9"],[1,"float-right",3,"message","confirmationEvent"],[1,"btn","btn-outline-danger"],[1,"fa","fa-trash"],[1,"card","p-3","my-3"],[1,"row"],[1,"col-5"],[1,"col-4"],[1,"col-3","d-flex","justify-content-end"],[1,"btn","btn-secondary","btn-sm",3,"click"],[1,"fas","fa-sign-out-alt"],[1,"hide-on-mobile"],["id","leave-campaign-form",1,"alert","alert-danger","mx-0","w-100","row"],[1,"col-md-8"],[1,"btn","btn-danger","col-md-2",3,"click"],[1,"btn","btn-dark","col-md-2",3,"click"]],template:function(e,i){if(1&e&&(p(0,"div",0,1),p(2,"article",2),p(3,"div",3),p(4,"h3",4),O(5,"span",5),k(6," Profile "),f(),p(7,"div",6),p(8,"div",7),A("click",function(){return i.toggleProfileEditState()}),S(9,Ase,3,0,"span",8),S(10,Ose,3,0,"span",8),f(),p(11,"div",7),A("click",function(){return i.togglePasswordEditState()}),S(12,Nse,3,0,"span",8),S(13,Fse,3,0,"span",8),f(),f(),f(),O(14,"hr",9),S(15,Vse,12,3,"div",10),S(16,Bse,2,2,"div",11),p(17,"div",12),p(18,"div",13),p(19,"a",14),k(20," To Campaigns "),f(),f(),S(21,Hse,6,1,"ng-container",8),f(),f(),f(),S(22,jse,2,2,"ng-template",null,15,se),S(24,zse,12,6,"ng-template",null,16,se),S(26,Gse,9,3,"ng-template",null,17,se)),2&e){const r=ie(23);g(9),v("ngIf",!i.profileEditState),g(1),v("ngIf",i.profileEditState),g(2),v("ngIf",!i.passwordEditState),g(1),v("ngIf",i.passwordEditState),g(2),v("ngIf",!i.profileEditState)("ngIfElse",r),g(1),v("ngIf",i.passwordEditState),g(3),v("routerLink",i.campaignOverviewUrl),g(2),v("ngIf",i.hasProfileDeletePermission)}},directives:[le,Ht,je,ro,zn,HN],pipes:[lf],styles:[".header-buttons[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;position:relative;top:-1px}#profile-data[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{word-break:break-all}#profile-data[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   #leave-campaign-form[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{word-break:initial}@media (max-width: 576px){.header-buttons[_ngcontent-%COMP%]{justify-content:space-evenly}}"]}),t})();const qse=["adminCard"];function Qse(t,n){if(1&t&&(p(0,"span"),O(1,"span",15),k(2),f()),2&t){const e=b().$implicit;g(2),Z(" Add ",e.name," ")}}function Zse(t,n){if(1&t&&(p(0,"span"),O(1,"span",16),k(2),f()),2&t){const e=b().$implicit;g(2),Z(" Cancel ",e.name," creation ")}}function Kse(t,n){1&t&&(p(0,"div"),k(1," Load entries to see them"),f())}function Yse(t,n){if(1&t&&(p(0,"th",23),k(1),f()),2&t){const e=n.$implicit;g(1),Z(" ",e.key," ")}}function Jse(t,n){if(1&t&&(p(0,"td"),k(1),f()),2&t){const e=n.$implicit;g(1),Le(e.value)}}function Xse(t,n){if(1&t){const e=G();p(0,"tr"),p(1,"th",24),k(2),f(),S(3,Jse,2,1,"td",22),Lt(4,"keyvalue"),p(5,"td"),p(6,"app-delete-toggle",25),A("deleteEvent",function(){const o=h(e).index,s=b(3).index;return b().deleteTableEntry(s,o)}),f(),f(),f()}if(2&t){const e=n.$implicit;g(2),uc("",e.id," ",e.pk,""),g(1),v("ngForOf",yn(4,3,e))}}function eae(t,n){if(1&t&&(p(0,"table",19),p(1,"thead"),p(2,"tr"),p(3,"th",20),k(4,"#"),f(),S(5,Yse,2,1,"th",21),Lt(6,"keyvalue"),f(),f(),p(7,"tbody"),S(8,Xse,7,5,"tr",22),f(),f()),2&t){const e=b(2).$implicit;g(5),v("ngForOf",yn(6,2,e.entries[0])),g(3),v("ngForOf",e.entries)}}function tae(t,n){if(1&t&&(p(0,"div"),S(1,Kse,2,0,"div",10),p(2,"div",17),S(3,eae,9,4,"table",18),f(),f()),2&t){const e=b().$implicit;g(1),v("ngIf",0===e.entries.length),g(2),v("ngIf",e.entries.length>0)}}function nae(t,n){if(1&t){const e=G();p(0,"div",26),p(1,"h4"),k(2),f(),p(3,"app-formly-formcontainer",27),A("formlySubmit",function(){h(e);const r=b().index;return b().createNewTableEntry(r)})("formlyCancel",function(){h(e);const r=b().index,o=b();return o.createStateArray[r]=!o.createStateArray[r]}),f(),f()}if(2&t){const e=b().$implicit;g(2),Z("Adding new ",e.name,""),g(1),v("model",e.model)("fields",e.formFields)}}function iae(t,n){if(1&t){const e=G();p(0,"div",5),p(1,"div",6),p(2,"h3",7),O(3,"span"),k(4),f(),p(5,"div",8),p(6,"div",9),A("click",function(){const o=h(e).index,s=b();return s.createStateArray[o]=!s.createStateArray[o]}),S(7,Qse,3,1,"span",10),S(8,Zse,3,1,"span",10),f(),p(9,"div",11),A("click",function(){const o=h(e).index;return b().loadTableEntries(o)}),O(10,"span",12),k(11," Load table data "),f(),f(),f(),O(12,"hr",13),S(13,tae,4,2,"div",10),S(14,nae,4,3,"div",14),f()}if(2&t){const e=n.$implicit,i=n.index,r=b();g(3),Is("fa fa-",e.icon,""),g(1),Z(" ",e.name," "),g(3),v("ngIf",!r.createStateArray[i]),g(1),v("ngIf",r.createStateArray[i]),g(5),v("ngIf",!r.createStateArray[i]),g(1),v("ngIf",r.createStateArray[i])}}let rae=(()=>{class t{constructor(e,i,r,o,s){this.formlyService=e,this.markerTypeService=i,this.playerClassService=r,this.warnings=o,this.routingService=s,this.tables=[{name:"Marker Type",entries:[],icon:"tag",service:this.markerTypeService,model:{name:null,is_text_marker:!1,icon:null,color:null},formFields:[this.formlyService.genericInput({key:"name",isNameInput:!0}),this.formlyService.genericCheckbox({key:"is_text_marker",label:"Show name instead of Icon",defaultValue:!1}),this.formlyService.genericInput({key:"icon"}),this.formlyService.genericInput({key:"color"})]},{name:"Class",entries:[],icon:"user",service:this.playerClassService,model:{name:null},formFields:[this.formlyService.genericInput({key:"name",isNameInput:!0})]}],this.createStateArray=[],this.modelBackup=[]}ngOnInit(){for(let e of this.tables){const i=Object.assign({},e.model);this.modelBackup.push(i),this.createStateArray.push(!1)}this.updateRouterLinks()}updateRouterLinks(){this.campaignOverviewUrl=this.routingService.getRoutePath("campaign-overview")}ngAfterViewInit(){hi(this.article.nativeElement,"fadeIn")}resetModel(e){const r=Object.assign({},this.modelBackup[e]);this.tables[e].model=r}loadTableEntries(e){const i=this.tables[e];i.service.list().pipe(re()).subscribe(o=>i.entries=o.sort((s,l)=>null!=s.id&&null!=l.id?s.id-l.id:null!=s.pk&&null!=l.pk?s.pk-l.pk:void 0),o=>this.warnings.showWarning(o))}createNewTableEntry(e){const i=this.tables[e];i.service.create(i.model).pipe(re()).subscribe(o=>{i.entries.push(o),this.createStateArray[e]=!1},o=>this.warnings.showWarning(o))}deleteTableEntry(e,i){const r=this.tables[e],o=r.entries[i];r.service.delete(null==o.pk?o.id:o.pk).pipe(re()).subscribe(l=>r.entries.splice(i,1),l=>this.warnings.showWarning(l))}}return t.\u0275fac=function(e){return new(e||t)(C(mn),C(kN),C(Uw),C(Ze),C(ce))},t.\u0275cmp=Y({type:t,selectors:[["app-config-tables"]],viewQuery:function(e,i){if(1&e&&pt(qse,5),2&e){let r;ye(r=be())&&(i.article=r.first)}},decls:10,vars:3,consts:[[1,"main"],["adminCard",""],[1,"btn","btn-secondary","mb-3",3,"routerLink"],[1,"fas","fa-globe-americas"],["class","mb-3",4,"ngFor","ngForOf"],[1,"mb-3"],[1,"d-flex","justify-content-between"],[1,"mb-0"],[1,"align-self-end","position-relative","top1"],[1,"btn","btn-dark","border-white",3,"click"],[4,"ngIf"],[1,"btn","btn-primary","border-white",3,"click"],[1,"fa","fa-refresh"],[1,"white-separator"],["class","my-2 card p-3",4,"ngIf"],[1,"fa","fa-plus"],[1,"fa","fa-times"],[1,"scroll-sideways"],["class","table table-dark table-striped",4,"ngIf"],[1,"table","table-dark","table-striped"],["scope","col"],["scope","col","class","text-uppercase",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],["scope","col",1,"text-uppercase"],["scope","row"],[3,"deleteEvent"],[1,"my-2","card","p-3"],[3,"model","fields","formlySubmit","formlyCancel"]],template:function(e,i){1&e&&(p(0,"div",0,1),p(2,"article"),p(3,"div",2),O(4,"span",3),k(5," Back To campaign overview "),f(),S(6,iae,15,8,"div",4),p(7,"div",2),O(8,"span",3),k(9," Back To campaign overview "),f(),f(),f()),2&e&&(g(3),xe("routerLink",i.campaignOverviewUrl),g(3),v("ngForOf",i.tables),g(1),xe("routerLink",i.campaignOverviewUrl))},directives:[us,je,le,Ic,zn],pipes:[c_],styles:["table.table[_ngcontent-%COMP%]{display:block;overflow-x:auto;white-space:nowrap}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.75rem 1.5rem}"]}),t})();function oae(t,n){1&t&&Zi(0)}function sae(t,n){if(1&t&&(p(0,"a",8),k(1," Retry "),O(2,"span",9),f()),2&t){const e=b();v("routerLink",e.campaign?e.campaignHomeUrl:e.campaignOverviewUrl)}}function aae(t,n){1&t&&(p(0,"a",8),k(1," Log in again "),O(2,"span",9),f()),2&t&&v("routerLink",b().loginUrl)}let aF=(()=>{class t{constructor(e,i,r,o){this.routingService=e,this.route=i,this.globalUrlParams=r,this.tokenService=o,this.constants=$,this.errorContents={400:{htmlBody:"It appears you supplied some invalid inputs!",title:"400 Bad Request",image:$.badInputImageUrl},401:{htmlBody:"Sorry man, this is an invite-only club. Got to be logged in to get anything.",title:"401 Unauthorized",image:$.pageNotFoundImageUrl},403:{htmlBody:"Naughty naughty! You're not allowed to do what you just did!",title:"403 Forbidden",image:$.pageNotFoundImageUrl},404:{htmlBody:"We couldn't find the site you are looking for. <br> But a dragon found you !",title:"404 Not Found",image:$.pageNotFoundImageUrl},500:{htmlBody:"Something went seriously wrong on the server. <br> We'll be doing our best to force our Beholders to do better work!",title:"500 Server Error",image:$.serverErrorImageUrl},504:{htmlBody:"Your connection seems to be taking a short rest. <br>  Sadly, we need internet to show you a page you haven't recently visited and thus cached. <br> Please connect to the internet and try again.",title:"504 Gateway Timeout",image:$.timeoutImageUrl},0:{htmlBody:"Your connection seems to be taking a short rest. <br>  Sadly, we need internet to show you a page you haven't recently visited and thus cached. <br> Please connect to the internet and try again.",title:"504 Gateway Timeout",image:$.timeoutImageUrl}}}ngOnInit(){this.parameterSubscription=this.route.params.subscribe(e=>{const i=parseInt(e.errorStatus),r=this.errorContents.hasOwnProperty(i);this.errorStatus=r?i:404,this.hasTokenError=[401].includes(this.errorStatus),this.hasTokenError&&this.tokenService.removeJWTTokenFromLocalStorage()}),this.globalUrlParams.getCurrentCampaign().then(e=>{this.campaign=e,this.campaignHomeUrl=this.routingService.getRoutePath("home1",{campaign:this.campaign.name})}),this.loginUrl=this.routingService.getRoutePath("login"),this.campaignOverviewUrl=this.routingService.getRoutePath("campaign-overview")}ngOnDestroy(){this.parameterSubscription&&this.parameterSubscription.unsubscribe(),this.campaignSubscription&&this.campaignSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(C(ce),C(Me),C($e),C(ke))},t.\u0275cmp=Y({type:t,selectors:[["app-error"]],decls:12,vars:8,consts:[[1,"main","d-flex","flex-column"],[1,"text-center","mb-5"],["alt","",1,"center","mb-3",3,"src"],[1,"text-center",3,"innerHTML"],[1,"d-flex","justify-content-center"],[4,"ngIf","ngIfThen","ngIfElse"],["campaignLink",""],["loginLink",""],[1,"btn","btn-primary",3,"routerLink"],[1,"ml-2","fas","fa-redo-alt"]],template:function(e,i){if(1&e&&(p(0,"div",0),p(1,"h1",1),k(2),f(),O(3,"img",2),O(4,"p",3),Lt(5,"safeHtml"),p(6,"div",4),S(7,oae,1,0,"ng-container",5),f(),f(),S(8,sae,3,1,"ng-template",null,6,se),S(10,aae,3,1,"ng-template",null,7,se)),2&e){const r=ie(9),o=ie(11);g(2),Z(" ",i.errorContents[i.errorStatus].title," "),g(1),v("src",i.errorContents[i.errorStatus].image,li),g(1),v("innerHTML",yn(5,6,i.errorContents[i.errorStatus].htmlBody),Or),g(3),v("ngIf",i.hasTokenError)("ngIfThen",o)("ngIfElse",r)}},directives:[le,Ht],pipes:[VN],styles:["img[_ngcontent-%COMP%]{object-fit:cover;max-height:25rem}"]}),t})();class lae{constructor(n){n&&Object.assign(this,n)}getAbsoluteRouterUrl(){const n=this.article_type.toLowerCase();return new(0,EN[n])(this).getAbsoluteRouterUrl()}}let lF=(()=>{class t{constructor(e){this.http=e,this.recentlyUpdatedUrl=`${$.wikiApiUrl}/recentupdates`,this.searchUrl=`${$.wikiApiUrl}/search`}getRecentlyUpdatedArticle(e,i){return null==i&&(i=0),zs(this.http.get(`${this.recentlyUpdatedUrl}/${e}/${i}`),lae)}getGlobalSearchArticle(e){return this.http.get(`${this.searchUrl}/${e}`).pipe(he(o=>{const l=o.articles.map(c=>new Au(c));return o.articles=l,o}))}getCampaignSearchArticle(e,i){return this.http.get(`${this.searchUrl}/${e}/${i}`).pipe(he(s=>{const c=s.articles.map(d=>new Au(d));return s.articles=c,s}))}}return t.\u0275fac=function(e){return new(e||t)(P(zt))},t.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function cae(t,n){1&t&&O(0,"i",7)}function uae(t,n){if(1&t&&O(0,"img",19),2&t){const e=b().$implicit;Cg("src","",b().constants.wikiUrl,"",e.image_url,"",li)}}function dae(t,n){if(1&t&&O(0,"i"),2&t){const e=b().$implicit;Is("fa-4x ",b().getArticleTypeMetaData(e.article_type).iconClass,"")}}function hae(t,n){if(1&t&&(p(0,"span"),k(1),f()),2&t){const e=b().$implicit;g(1),Z(" ",null==e.author_details?null:e.author_details.name,"'s ")}}function pae(t,n){if(1&t&&(p(0,"div",8),p(1,"a",9),Lt(2,"titlecase"),p(3,"header",10),S(4,uae,1,2,"img",11),S(5,dae,1,3,"ng-template",null,12,se),f(),p(7,"div",13),p(8,"div",14),p(9,"strong"),k(10),f(),f(),p(11,"div",15),k(12),Lt(13,"date"),p(14,"div",16),S(15,hae,2,1,"span",17),k(16),f(),f(),p(17,"div",18),k(18),f(),f(),f(),f()),2&t){const e=n.$implicit,i=ie(6),r=b();g(1),xe("routerLink",e.getAbsoluteRouterUrl()),v("title",yn(2,9,e.article_type)),g(3),v("ngIf",e.image_url)("ngIfElse",i),g(6),Z(" ",r.getArticleName(e)," "),g(2),Z(" ",yn(13,11,e.update_datetime)," "),g(3),v("ngIf",r.isDiaryEntry(e)),g(1),Z(" ",e.article_type," "),g(2),Z(" ",e.description," ")}}function fae(t,n){1&t&&(p(0,"div",20),O(1,"app-spinner"),O(2,"div"),f())}let mae=(()=>{class t{constructor(e,i,r){this.recentUpdatesServices=e,this.routingService=i,this.warnings=r,this.constants=$,this.pageNumber=0,this.isLoadingNextPage=!1,this.hasLoadedAllArticles=!1}ngOnInit(){this.recentUpdatesServices.getRecentlyUpdatedArticle(this.campaign,this.pageNumber).pipe(re()).subscribe(e=>this.articles=e,e=>this.routingService.routeToErrorPage(e))}getArticleTypeMetaData(e){const r=$.articleTypeMetaData.filter(s=>{var l;return null===(l=s.article_types)||void 0===l?void 0:l.includes(e)});if(r.length>1)throw`ArticleTypeCollisionException. The article type ${e} is being used multiple times. Please fix this`;return r[0]}getArticleName(e){return this.isDiaryEntry(e)?`#${e.session_details.session_number} - ${e.name}`:"location"===e.article_type?e.name:e.name_full}isDiaryEntry(e){return"diaryentry"===e.article_type}onWindowScroll(e){this.isNearPageEnd()&&this.loadNextPage()}isNearPageEnd(){return document.documentElement.scrollHeight-document.documentElement.clientHeight-window.pageYOffset<$.maxDistanceToPageBottomForPaginationLoad}loadNextPage(){this.isLoadingNextPage||null==this.articles||this.hasLoadedAllArticles||(this.pageNumber+=1,this.isLoadingNextPage=!0,this.recentUpdatesServices.getRecentlyUpdatedArticle(this.campaign,this.pageNumber).pipe(re()).subscribe(e=>{this.articles=this.articles.concat(e),this.isLoadingNextPage=!1,0===e.length&&(this.hasLoadedAllArticles=!0)},e=>this.warnings.showWarning(e)))}}return t.\u0275fac=function(e){return new(e||t)(C(lF),C(ce),C(Ze))},t.\u0275cmp=Y({type:t,selectors:[["app-recently-updated-articles-list"]],hostBindings:function(e,i){1&e&&A("scroll",function(o){return i.onWindowScroll(o)},!1,HT)},inputs:{campaign:"campaign"},decls:8,vars:3,consts:[["id","news",1,"container"],[1,"row","justify-content-center","align-items-center"],[1,""],["class","ml-3 spinner-border",4,"ngIf"],[1,"row"],["class","mycolpadding col-6 col-md-4 col-lg-3 mb-4",4,"ngFor","ngForOf"],["class","mb-4",4,"ngIf"],[1,"ml-3","spinner-border"],[1,"mycolpadding","col-6","col-md-4","col-lg-3","mb-4"],[1,"card",3,"routerLink","title"],[1,"card-img-top","d-flex","align-items-center","justify-content-center"],["alt","article image","class","",3,"src",4,"ngIf","ngIfElse"],["defaultIcon",""],[1,"card-body"],[1,"card-title"],[1,"card-subtitle","mb-2"],[1,"text-muted"],[4,"ngIf"],[1,"card-text"],["alt","article image",1,"",3,"src"],[1,"mb-4"]],template:function(e,i){1&e&&(p(0,"div",0),p(1,"h3",1),p(2,"span",2),k(3,"Recent Updates"),f(),S(4,cae,1,0,"i",3),f(),p(5,"div",4),S(6,pae,19,13,"div",5),f(),f(),S(7,fae,3,0,"div",6)),2&e&&(g(4),v("ngIf",!i.articles),g(2),v("ngForOf",i.articles),g(1),v("ngIf",i.isLoadingNextPage))},directives:[le,je,Ht,Qv],pipes:[lf,l_],styles:[".card[_ngcontent-%COMP%]{line-height:1.25;height:18rem}.card-img-top[_ngcontent-%COMP%]{height:6rem}.card-img-top[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%;object-fit:cover;width:100%}.card-body[_ngcontent-%COMP%]{overflow:auto;padding:1rem}a[_ngcontent-%COMP%]:hover   .card-body[_ngcontent-%COMP%]{color:var(--link-blue)!important}.card-title[_ngcontent-%COMP%]{height:4rem;overflow:hidden;text-overflow:ellipsis}.card-subtitle[_ngcontent-%COMP%]{text-transform:capitalize}.card[_ngcontent-%COMP%]   .card-text[_ngcontent-%COMP%]{display:none}.card[_ngcontent-%COMP%]:hover   .card-text[_ngcontent-%COMP%]{display:block}.card[_ngcontent-%COMP%]:hover   header[_ngcontent-%COMP%], .card[_ngcontent-%COMP%]:hover   .card-title[_ngcontent-%COMP%], .card[_ngcontent-%COMP%]:hover   .card-subtitle[_ngcontent-%COMP%]{display:none!important}.mycolpadding[_ngcontent-%COMP%]{padding-left:5px;padding-right:5px}header[_ngcontent-%COMP%]{text-align:center}@media (max-width: 576px){.card-img-top[_ngcontent-%COMP%]{max-height:5rem}.card-title[_ngcontent-%COMP%]{height:6rem}}"]}),t})();const gae=["search"],_ae=["article"];let cF=(()=>{class t{constructor(e,i,r){this.routingService=e,this.globalUrlParams=i,this.route=r,this.constants=$}ngOnInit(){this.campaignData=this.route.snapshot.data.campaign}ngAfterViewInit(){this.animateHomePage()}animateHomePage(){var e;!(null===(e=this.articleElement)||void 0===e?void 0:e.nativeElement)||hi(this.articleElement.nativeElement,"fadeIn")}startSearch(){if(null!=this.searchString){const r=this.searchString.replace(/[^a-zA-Z0-9']/g," ").trim().replace(/\s\s+/g," ");this.searchString=r}null==this.searchString||""===this.searchString||this.routingService.routeToPath("campaignSearch",{campaign:this.campaignData.name,searchString:this.searchString})}ngOnDestroy(){this.campaignSubscription&&this.campaignSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(C(ce),C($e),C(Me))},t.\u0275cmp=Y({type:t,selectors:[["app-home2"]],viewQuery:function(e,i){if(1&e&&(pt(gae,5),pt(_ae,5)),2&e){let r;ye(r=be())&&(i.searchField=r.first),ye(r=be())&&(i.articleElement=r.first)}},decls:16,vars:6,consts:[[1,"main"],["article",""],[1,"mb-1"],[1,"d-flex","flex-column"],[1,"large","align-self-center",3,"src","alt"],[1,"hide-on-mobile",3,"innerHTML"],["id","search-area",1,"mb-4"],[1,"flex-1","p-1",3,"submit"],[1,"d-flex","searchbar"],["type","search","name","search","title","search","id","search","placeholder","Search For Articles...","aria-label","Search",1,"search-input","p-2",3,"ngModel","ngModelChange"],["search",""],["type","submit",1,"btn","btn-primary"],[1,"fa","fa-search","p-2"],[3,"campaign"]],template:function(e,i){1&e&&(p(0,"div",0,1),p(2,"header",2),p(3,"div",3),O(4,"img",4),p(5,"h1",2),k(6),f(),O(7,"strong",5),f(),f(),p(8,"div",6),p(9,"form",7),A("submit",function(){return i.startSearch()}),p(10,"div",8),p(11,"input",9,10),A("ngModelChange",function(o){return i.searchString=o}),f(),p(13,"button",11),O(14,"i",12),f(),f(),f(),f(),O(15,"app-recently-updated-articles-list",13),f()),2&e&&(g(4),v("src",i.constants.wikiUrl+(null==i.campaignData?null:i.campaignData.icon),li)("alt",i.constants.defaultCampaignIconUrl),g(2),Z(" ",i.campaignData.name," "),g(1),v("innerHTML",i.campaignData.subtitle,Or),g(4),v("ngModel",i.searchString),g(4),v("campaign",i.campaignData.name))},directives:[Vr,Ur,Fo,_l,Si,Us,mae],styles:[".main[_ngcontent-%COMP%]{padding-bottom:2.5rem}header[_ngcontent-%COMP%]{text-align:center}.aldrune-icon.large[_ngcontent-%COMP%]{background:url(https://www.aldrune.com/static/aldrune_icon/favicon-128x128.png);width:128px;height:128px}.search-input[_ngcontent-%COMP%]{background-color:#1f1e1f;border:none;outline:none;color:#fff;width:100%}input[type=search][_ngcontent-%COMP%]::-webkit-search-decoration, input[type=search][_ngcontent-%COMP%]::-webkit-search-cancel-button, input[type=search][_ngcontent-%COMP%]::-webkit-search-results-button, input[type=search][_ngcontent-%COMP%]::-webkit-search-results-decoration{display:none}.searchbar[_ngcontent-%COMP%]{background-color:#1f1e1f;color:#fff;display:flex;align-items:center;padding-left:.4rem;border-color:#717171;border:solid 1px white}"]}),t})();const vae=["campaignOverviewContainer"];function yae(t,n){if(1&t&&(Vt(0),p(1,"a",12),O(2,"span",13),k(3," General administration "),f(),p(4,"a",12),O(5,"i",14),p(6,"span"),k(7," Config Tables "),f(),f(),Bt()),2&t){const e=b();g(1),v("routerLink",e.generalAdminUrl),g(3),v("routerLink",e.configTableUrl)}}function bae(t,n){1&t&&O(0,"app-spinner")}const Cae=function(t,n,e){return{"col-sm-12":t,"col-sm-6":n,"col-sm-4":e}};function wae(t,n){if(1&t){const e=G();p(0,"a",15),A("click",function(){const o=h(e).$implicit;return b().routeToCampaign(o.name)}),p(1,"div",16),p(2,"h3",17),k(3),f(),f(),f()}if(2&t){const e=n.$implicit,i=b();to("background-image","url("+i.constants.wikiUrl+e.background_image+")"),v("ngClass",au(4,Cae,1===i.campaignData.length,2===i.campaignData.length||4===i.campaignData.length,3===i.campaignData.length||i.campaignData.length>=5)),g(3),Le(e.name)}}let Sae=(()=>{class t{constructor(e,i,r){this.routingService=e,this.globalUrlParams=i,this.tokenService=r,this.constants=$,this.isLoading=!1,this.generalAdminUrl=this.routingService.getRoutePath("admin"),this.configTableUrl=this.routingService.getRoutePath("config-tables")}ngOnInit(){return Et(this,void 0,void 0,function*(){this.isLoading=!0,this.profileUrl=this.routingService.getRoutePath("direct-profile",{username:this.tokenService.getCurrentUserName()}),this.globalUrlParamSubscription=this.globalUrlParams.getCampaigns().pipe($t(e=>null!=e)).subscribe(e=>{this.campaignData=this.sortCampaigns(e),this.onAfterCampaignDataRetrieved(e),this.isLoading=!1})})}logout(){this.tokenService.hasTokens()&&(this.tokenService.invalidateJWTToken(),this.tokenService.removeJWTTokenFromLocalStorage()),this.routingService.routeToPath("login-state",{state:"logged-out"})}sortCampaigns(e){return e.sort((i,r)=>i.name<r.name?-1:1)}onAfterCampaignDataRetrieved(e){this.isGlobalAdmin=this.tokenService.isAdmin()||this.tokenService.isSuperUser()}routeToCampaign(e){this.campaignOverviewContainer.nativeElement.style.setProperty("--animate-duration","0.5s"),this.globalUrlParams.updateCurrentlySelectedCampaign(e),hi(this.campaignOverviewContainer.nativeElement,"slideOutLeft").then(()=>this.routingService.routeToPath("home2",{campaign:e}))}ngOnDestroy(){this.globalUrlParamSubscription&&this.globalUrlParamSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(C(ce),C($e),C(ke))},t.\u0275cmp=Y({type:t,selectors:[["app-campaign-overview"]],viewQuery:function(e,i){if(1&e&&pt(vae,5),2&e){let r;ye(r=be())&&(i.campaignOverviewContainer=r.first)}},decls:18,vars:5,consts:[["id","container-overview",1,"container","bg-color-black"],["campaignOverviewContainer",""],["id","campaign-overview-heading",1,"row","mx-0"],["id","heading-buttons"],[1,"btn","btn-secondary","mx-2",3,"routerLink"],[1,"fa","fa-user"],[1,"btn","btn-secondary","mx-2",3,"click"],[1,"fas","fa-sign-out-alt"],[4,"ngIf"],[1,"flex-1","mb-0","text-center"],["id","campaign-overview-body",1,"row","flex-1","mx-0"],["class","px-0 campaign pointer",3,"ngClass","background-image","click",4,"ngFor","ngForOf"],[1,"btn","btn-info","mx-2",3,"routerLink"],[1,"fas","fa-user-cog"],[1,"fa","fa-table"],[1,"px-0","campaign","pointer",3,"ngClass","click"],[1,"campaign-overlay","overlay-heading","text-center"],[1,"mb-0","px-3"]],template:function(e,i){1&e&&(p(0,"div",0,1),p(2,"div",2),p(3,"div",3),p(4,"a",4),O(5,"i",5),p(6,"span"),k(7," Profile"),f(),f(),p(8,"a",6),A("click",function(){return i.logout()}),O(9,"i",7),p(10,"span"),k(11," Logout"),f(),f(),S(12,yae,8,2,"ng-container",8),f(),p(13,"h3",9),k(14," Choose your campaign "),S(15,bae,1,0,"app-spinner",8),f(),f(),p(16,"div",10),S(17,wae,4,8,"a",11),f(),f()),2&e&&(v("@slideInOut",void 0),g(4),v("routerLink",i.profileUrl),g(8),v("ngIf",i.isGlobalAdmin),g(3),v("ngIf",i.isLoading),g(2),v("ngForOf",i.campaignData))},directives:[Ht,le,je,Qv,Yt],styles:["#container-overview[_ngcontent-%COMP%]{width:100vw;min-height:100vh;max-width:unset!important;padding:0!important;display:flex;flex-direction:column}.campaign[_ngcontent-%COMP%]{position:relative;display:flex;justify-content:center;background-size:cover;background-position:center;min-height:30vh;opacity:.75;transition:opacity .2s ease-in-out}.campaign[_ngcontent-%COMP%]:hover{opacity:1;border-bottom:none}.campaign-overlay[_ngcontent-%COMP%]{position:absolute;background-color:var(--wiki-background-1);z-index:1}.campaign-overlay.overlay-heading[_ngcontent-%COMP%]{width:100%;min-height:4rem;line-break:anywhere;display:flex;justify-content:center;align-items:center}.campaign[_ngcontent-%COMP%]:hover   .campaign-overlay[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:var(--link-blue);transform:scale(1.2)}.campaign[_ngcontent-%COMP%]   .campaign-overlay[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{transition:transform .2s ease-in-out}.background-image[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;opacity:.5;transition:opacity .2s ease-in-out}.campaign[_ngcontent-%COMP%]:hover   .background-image[_ngcontent-%COMP%]{opacity:1}#campaign-overview-heading[_ngcontent-%COMP%]{background-color:var(--wiki-background-1);align-items:center;justify-content:center;height:10%}#campaign-overview-body[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%], #campaign-overview-body[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%], #campaign-overview-body[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-sm[_ngcontent-%COMP%]{max-height:100%}@media (max-width: 768px){.overlay-heading[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5rem}#campaign-overview-heading[_ngcontent-%COMP%]{height:unset}}@media (max-width: 576px){.campaign-row[_ngcontent-%COMP%]{flex-direction:column;flex:1}.campaign[_ngcontent-%COMP%]{border-bottom:groove white 2px;border-top:groove white 2px}.background-image[_ngcontent-%COMP%]{height:unset}#campaign-overview-heading[_ngcontent-%COMP%]{flex-direction:column}#heading-buttons[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-direction:column;width:100%}#heading-buttons[_ngcontent-%COMP%]   .btn.mx-2[_ngcontent-%COMP%]{margin:0 0 .5rem!important}}"],data:{animation:[P7("slideInOut",[VI(":enter",[ff({transform:"translateX(-100%)"}),$I("500ms",ff({transform:"translateX(0%)"}))]),VI(":leave",[$I("500ms",ff({transform:"translateX(-100%)"}))])])]}}),t})();function Tae(t,n){1&t&&(p(0,"div",37),p(1,"div",38),O(2,"app-edit-toggle",39),f(),f()),2&t&&(g(2),v("isInUpdateState",!1)("link","update"))}function Eae(t,n){if(1&t){const e=G();p(0,"div"),k(1),p(2,"app-delete-toggle",40),A("deleteEvent",function(){const o=h(e).$implicit;return b().onRemoveAdmin(o)}),f(),f()}if(2&t){const e=n.$implicit;g(1),Z(" ",e.username," "),g(1),v("deleteMessage","Remove "+e.username+" as admin?")}}function kae(t,n){if(1&t){const e=G();p(0,"app-formly-formcontainer",41),A("formlySubmit",function(){return h(e),b().onAddAdminSubmit()})("formlyCancel",function(){return h(e),b().addAdminState=!1}),f()}if(2&t){const e=b();v("model",e.adminModel)("fields",e.adminFormlyFields)}}function Dae(t,n){if(1&t){const e=G();p(0,"div"),k(1),p(2,"app-delete-toggle",40),A("deleteEvent",function(){const o=h(e).$implicit;return b().onRemoveMember(o)}),f(),f()}if(2&t){const e=n.$implicit;g(1),Z(" ",e.username," "),g(1),v("deleteMessage","Remove "+e.username+" as member?")}}function xae(t,n){if(1&t){const e=G();p(0,"app-formly-formcontainer",41),A("formlySubmit",function(){return h(e),b().onAddMemberSubmit()})("formlyCancel",function(){return h(e),b().addMemberState=!1}),f()}if(2&t){const e=b();v("model",e.memberModel)("fields",e.memberFormlyFields)}}function Mae(t,n){if(1&t){const e=G();p(0,"div"),k(1),p(2,"app-delete-toggle",40),A("deleteEvent",function(){const o=h(e).$implicit;return b().onRemoveGuest(o)}),f(),f()}if(2&t){const e=n.$implicit;g(1),Z(" ",e.username," "),g(1),v("deleteMessage","Remove "+e.username+" as guest?")}}function Iae(t,n){if(1&t){const e=G();p(0,"app-formly-formcontainer",41),A("formlySubmit",function(){return h(e),b().onAddGuestSubmit()})("formlyCancel",function(){return h(e),b().addGuestState=!1}),f()}if(2&t){const e=b();v("model",e.guestModel)("fields",e.guestFormlyFields)}}function Pae(t,n){if(1&t&&(p(0,"div",37),p(1,"div",42),k(2),f(),p(3,"div",42),k(4),f(),f()),2&t){const e=n.$implicit;g(2),Z(" ",e.key,""),g(2),Z(" ",e.value,"")}}function Aae(t,n){if(1&t){const e=G();p(0,"div",43),k(1),p(2,"app-delete-toggle",44),A("deleteEvent",function(){const o=h(e).$implicit;return b().onRemoveResponse(o)}),f(),f()}if(2&t){const e=n.$implicit;g(1),Z(" ",e.text," "),g(1),v("deleteMessage","Remove response?")}}function Oae(t,n){if(1&t){const e=G();p(0,"app-formly-formcontainer",41),A("formlySubmit",function(){return h(e),b().onAddResponseSubmit()})("formlyCancel",function(){return h(e),b().addResponseState=!1}),f()}if(2&t){const e=b();v("model",e.responseModel)("fields",e.responseFormlyFields)}}function Nae(t,n){if(1&t){const e=G();p(0,"button",45),A("click",function(){return h(e),b().toggleMemberAddState()}),O(1,"span",46),k(2," Add Member "),f()}}function Fae(t,n){if(1&t){const e=G();p(0,"button",45),A("click",function(){return h(e),b().toggleAdminAddState()}),O(1,"span",46),k(2," Add Admin "),f()}}function Rae(t,n){if(1&t){const e=G();p(0,"button",45),A("click",function(){return h(e),b().toggleGuestAddState()}),O(1,"span",46),k(2," Add Guest "),f()}}function Lae(t,n){if(1&t){const e=G();p(0,"button",45),A("click",function(){return h(e),b().toggleResponseAddState()}),O(1,"span",47),k(2," Add EmptySearchResponse "),f()}}function $ae(t,n){1&t&&(p(0,"div",48),k(1,' Allows adding admins, members and guests to a campaign. Does not add the person to the list of possible "authors" for diaryentries. '),f())}function Uae(t,n){1&t&&(p(0,"div",48),k(1,' Allows creating, reading, updating and deleting articles in this campaign. Also makes the person a possible "author" for diaryentries. '),f())}function Vae(t,n){1&t&&(p(0,"div",48),k(1," Allows only reading articles in this campaign. "),f())}let Bae=(()=>{class t extends Hs{constructor(e,i,r,o,s,l,c,d){super(s,i,r,e,l,c),this.formlyService=o,this.campaignService=s,this.refreshTokenService=d,this.deleteRoute={routeName:"campaign-overview",params:{}},this.queryParameterName="name",this.addMemberState=!1,this.addAdminState=!1,this.addGuestState=!1,this.memberFormlyFields=[this.formlyService.genericDisableSelect({key:"pk",labelProp:"username",sortProp:"username",label:"User",overviewType:Ie.User,disabledExpression:m=>this.isInGroup(m,this.articleData.member_group_name),tooltipMessage:"Members typically represent the individual player characters + the GM(s)",warningMessage:"The user you selected is already member of this campaign"})],this.adminFormlyFields=[this.formlyService.genericDisableSelect({key:"pk",labelProp:"username",sortProp:"username",label:"User",overviewType:Ie.User,disabledExpression:m=>this.isInGroup(m,this.articleData.admin_group_name),tooltipMessage:"Keep in mind that being an admin only represents being the one administering this campaign, not being a member of it!",warningMessage:"The user you selected is already admin of this campaign"})],this.guestFormlyFields=[this.formlyService.genericDisableSelect({key:"pk",labelProp:"username",sortProp:"username",label:"User",overviewType:Ie.User,disabledExpression:m=>{const _=this.isInGroup(m,this.articleData.admin_group_name),w=this.isInGroup(m,this.articleData.member_group_name),E=this.isInGroup(m,this.articleData.guest_group_name);return _||w||E},tooltipMessage:"Keep in mind that there's no point in being a guest when you're already a member or admin.",warningMessage:"The user you selected is already guest of this campaign"})],this.addResponseState=!1,this.responseFormlyFields=[this.formlyService.genericInput({key:"text",placeholder:"Quest Name",maxLength:400})]}ngOnInit(){super.ngOnInit(),this.sortCampaignGroups(),this.campaignStatistics=this.route.snapshot.data.campaignStatistics,this.updateDynamicVariables(this.campaign,this.articleData,null)}sortByUsername(e,i){return e.username.toLowerCase()>i.username.toLowerCase()?1:-1}sortCampaignGroups(){this.articleData.admins=this.articleData.admins.sort(this.sortByUsername),this.articleData.members=this.articleData.members.sort(this.sortByUsername),this.articleData.guests=this.articleData.guests.sort(this.sortByUsername)}updateDynamicVariables(e,i,r){this.homeUrl=this.routingService.getRoutePath("home1",{campaign:i.name})}toggleGuestAddState(){this.addGuestState=!this.addGuestState,this.addGuestState&&(this.guestModel=new Dc)}toggleMemberAddState(){this.addMemberState=!this.addMemberState,this.addMemberState&&(this.memberModel=new Dc)}toggleAdminAddState(){this.addAdminState=!this.addAdminState,this.addAdminState&&(this.adminModel=new Dc)}onAddMemberSubmit(){const e=this.campaignService.addMember(this.articleData.name,this.memberModel);this.updateMembers(e)}onAddAdminSubmit(){const e=this.campaignService.addAdmin(this.articleData.name,this.adminModel);this.updateAdmins(e)}onAddGuestSubmit(){const e=this.campaignService.addGuest(this.articleData.name,this.guestModel);this.updateGuests(e)}onRemoveAdmin(e){const i=this.campaignService.removeAdmin(this.articleData.name,e);this.updateAdmins(i)}onRemoveMember(e){const i=this.campaignService.removeMember(this.articleData.name,e);this.updateMembers(i)}onRemoveGuest(e){const i=this.campaignService.removeGuest(this.articleData.name,e);this.updateGuests(i)}removeUserFromList(e,i){const r=i.indexOf(e);i.splice(r,1)}updateMembers(e){e.pipe(re()).subscribe(i=>Et(this,void 0,void 0,function*(){this.articleData.members=i.sort(this.sortByUsername),this.addMemberState=!1,yield this.refreshTokenService.refreshUserData().toPromise()}),i=>this.warnings.showWarning(i))}updateAdmins(e){e.pipe(re()).subscribe(i=>Et(this,void 0,void 0,function*(){this.articleData.admins=i.sort(this.sortByUsername),this.addAdminState=!1,yield this.refreshTokenService.refreshUserData().toPromise()}),i=>this.warnings.showWarning(i))}updateGuests(e){e.pipe(re()).subscribe(i=>Et(this,void 0,void 0,function*(){this.articleData.guests=i.sort(this.sortByUsername),this.addGuestState=!1,yield this.refreshTokenService.refreshUserData().toPromise()}),i=>this.warnings.showWarning(i))}isInGroup(e,i){return e.group_details.some(s=>s.name.toLowerCase()===i)}deleteArticle(){throw"You can not delete a campaign, please use 'deactivateCampaign' instead"}toggleResponseAddState(){this.addResponseState=!this.addResponseState,this.addResponseState&&(this.responseModel={campaign:this.campaign.pk,text:null})}onAddResponseSubmit(){this.campaignService.addEmptySearchResponse(this.responseModel).pipe(re()).subscribe(e=>{this.articleData.emptySearchResponses.push(e),this.articleData.emptySearchResponses.sort((i,r)=>i>r?1:-1)},e=>this.warnings.showWarning(e))}onRemoveResponse(e){this.campaignService.deleteEmptySearchResponse(e.id).pipe(re()).subscribe(i=>{const r=this.articleData.emptySearchResponses.indexOf(e);this.articleData.emptySearchResponses.splice(r,1)},i=>this.warnings.showWarning(i))}deactivateCampaign(){this.campaignService.deactivate(this.articleData.pk).pipe(re()).subscribe(e=>this.routingService.routeToPath("campaign-overview"),e=>this.warnings.showWarning(e))}}return t.\u0275fac=function(e){return new(e||t)(C(Ze),C(Me),C(ce),C(mn),C(ki),C($e),C(ke),C(jw))},t.\u0275cmp=Y({type:t,selectors:[["app-campaign"]],features:[oe],decls:82,vars:29,consts:[[1,"main"],["article",""],[1,"container"],["class","row",4,"ngIf"],[1,"row","mb-5"],[1,"text-center","col"],[1,"fas","fa-cog"],[1,"card","mb-5","mx-0","py-3","row","flex-row"],[1,"col-md-6","d-flex","flex-column","align-items-center"],[1,"text-center"],["title","Campaign background image","alt","Background image of this campaign",1,"gallery-image",3,"src"],["title","Campaign Icon","alt","Icon of this campaign",1,"gallery-image",3,"src"],[1,"col-12","row","mt-4"],[1,"col-md-3","col-6"],[1,"col-md-9","col-6"],[1,"col-md-9","col-6",3,"innerHtml"],[1,"fas","fa-users-cog"],[1,"mb-3","row"],[1,"col-md-6","col-12","mb-3"],[1,"p-3","card"],[3,"tooltipMessage"],[4,"ngFor","ngForOf"],[3,"model","fields","formlySubmit","formlyCancel",4,"ngIf","ngIfElse"],[1,"fas","fa-table"],[1,"container","mb-5"],["class","row",4,"ngFor","ngForOf"],[1,"fas","fa-search"],[1,"col-12","mb-3"],["class","mb-3",4,"ngFor","ngForOf"],[3,"showDelete","link","label","deleteMessage","delete"],["addMemberButton",""],["addAdminButton",""],["addGuestButton",""],["addResponseButton",""],["adminTooltip",""],["memberTooltip",""],["guestTooltip",""],[1,"row"],[1,"col-12"],[3,"isInUpdateState","link"],[1,"float-right","px-0","mt-0",3,"deleteMessage","deleteEvent"],[3,"model","fields","formlySubmit","formlyCancel"],[1,"col-6","col-md-3"],[1,"mb-3"],[1,"float-right","px-0",3,"deleteMessage","deleteEvent"],[1,"btn","btn-primary","mt-3",3,"click"],[1,"fas","user-plus","icon"],[1,"fas","fa-plus","icon"],[1,"alert","alert-info","m-0","p-0"]],template:function(e,i){if(1&e&&(p(0,"div",0,1),p(2,"article",2),S(3,Tae,3,2,"div",3),p(4,"div",4),p(5,"h1",5),k(6),f(),f(),p(7,"h1"),O(8,"span",6),k(9," Campaign Settings "),f(),p(10,"div",7),p(11,"div",8),p(12,"h3",9),k(13,"Background"),f(),O(14,"img",10),f(),p(15,"div",8),p(16,"h3",9),k(17,"Icon"),f(),O(18,"img",11),f(),p(19,"div",12),p(20,"strong",13),k(21,"Default Map: "),f(),p(22,"div",14),k(23),f(),p(24,"strong",13),k(25,"Subtitle: "),f(),O(26,"div",15),f(),f(),p(27,"h1"),O(28,"span",16),k(29," Campaign Members "),f(),p(30,"div",17),p(31,"div",18),p(32,"div",19),p(33,"h3",9),k(34," Admins "),O(35,"app-tooltip-infocircle",20),f(),S(36,Eae,3,2,"div",21),S(37,kae,1,2,"app-formly-formcontainer",22),f(),f(),p(38,"div",18),p(39,"div",19),p(40,"h3",9),k(41," Party members "),O(42,"app-tooltip-infocircle",20),f(),S(43,Dae,3,2,"div",21),S(44,xae,1,2,"app-formly-formcontainer",22),f(),f(),p(45,"div",18),p(46,"div",19),p(47,"h3",9),k(48," Guests "),O(49,"app-tooltip-infocircle",20),f(),S(50,Mae,3,2,"div",21),S(51,Iae,1,2,"app-formly-formcontainer",22),f(),f(),f(),p(52,"h1"),O(53,"span",23),k(54," Campaign Statistics "),f(),p(55,"div",24),S(56,Pae,5,2,"div",25),Lt(57,"keyvalue"),f(),p(58,"h1"),O(59,"span",26),k(60," Empty Search Responses "),O(61,"app-tooltip-infocircle",20),f(),p(62,"div",4),p(63,"div",27),p(64,"div",19),S(65,Aae,3,2,"div",28),S(66,Oae,1,2,"app-formly-formcontainer",22),f(),f(),f(),p(67,"app-article-footer",29),A("delete",function(){return i.deactivateCampaign()}),f(),f(),f(),S(68,Nae,3,0,"ng-template",null,30,se),S(70,Fae,3,0,"ng-template",null,31,se),S(72,Rae,3,0,"ng-template",null,32,se),S(74,Lae,3,0,"ng-template",null,33,se),S(76,$ae,2,0,"ng-template",null,34,se),S(78,Uae,2,0,"ng-template",null,35,se),S(80,Vae,2,0,"ng-template",null,36,se)),2&e){const r=ie(69),o=ie(71),s=ie(73),l=ie(75),c=ie(77),d=ie(79),m=ie(81);g(3),v("ngIf",!i.articleData.is_deactivated),g(3),Z(" ",i.articleData.name," "),g(8),v("src",i.constants.wikiUrl+i.articleData.background_image,li),g(4),v("src",i.constants.wikiMediaUrl+"/"+i.articleData.icon,li),g(5),Le(null==i.campaign.default_map_details?null:i.campaign.default_map_details.name),g(3),v("innerHtml",i.campaign.subtitle,Or),g(9),v("tooltipMessage",c),g(1),v("ngForOf",i.articleData.admins),g(1),v("ngIf",i.addAdminState)("ngIfElse",o),g(5),v("tooltipMessage",d),g(1),v("ngForOf",i.articleData.members),g(1),v("ngIf",i.addMemberState)("ngIfElse",r),g(5),v("tooltipMessage",m),g(1),v("ngForOf",i.articleData.guests),g(1),v("ngIf",i.addGuestState)("ngIfElse",s),g(5),v("ngForOf",yn(57,27,i.campaignStatistics)),g(5),v("tooltipMessage","Shown when a search came up empty. You can throw in in-jokes or references about things coming up empty."),g(4),v("ngForOf",i.articleData.emptySearchResponses),g(1),v("ngIf",i.addResponseState)("ngIfElse",l),g(1),v("showDelete",!i.articleData.is_deactivated)("link",i.homeUrl)("label","Back to "+i.articleData.name)("deleteMessage","Deactivate Campaign ?")}},directives:[le,$w,je,Ws,On,Ic,zn],pipes:[c_],styles:[".btn-secondary[_ngcontent-%COMP%]{background-color:var(--wiki-background-2)}.gallery-image[_ngcontent-%COMP%]{max-height:20rem;max-width:100%;object-fit:contain}"]}),t})();class uF{constructor(n){n&&Object.assign(this,n)}getAbsoluteRouterUrl(){return`${$.wikiUrlFrontendPrefix}/admin`}}function Hae(t,n){if(1&t){const e=G();p(0,"app-formly-formcontainer",8),A("formlySubmit",function(){return h(e),b().onSubmit()})("formlyCancel",function(){return h(e),b().onCancel()}),f()}if(2&t){const e=b();v("model",e.userModel)("fields",e.formlyFields)}}function jae(t,n){if(1&t){const e=G();p(0,"app-compare-form-container",9),A("updateSubmit",function(){return h(e),b().onSubmit()})("cancel",function(){return h(e),b().onCancel()}),f()}if(2&t){const e=b();v("formlyFields",e.formlyFields)("modelFromUser",e.userModel)("modelFromServer",e.serverModel)}}let dF=(()=>{class t extends Vo{constructor(e,i,r,o,s,l,c,d){super(i,r,o,s,s,c,l,d),this.formlyService=e,this.userModelClass=uF,this.updateCancelRoute={routeName:"home2",params:{campaign:null}},this.creationCancelRoute={routeName:"campaign-overview",params:{}},this.formlyFields=[this.formlyService.genericInput({key:"name",isNameInput:!0,required:!0,maxLength:400}),this.formlyService.genericInput({key:"subtitle",isNameInput:!1,required:!1,maxLength:400}),this.formlyService.genericSelect({key:"default_map",label:"Default Map",valueProp:"pk",overviewType:Ie.Map,campaign:this.campaign.name,required:!1}),this.formlyService.singleFileField({key:"background_image",required:!0}),this.formlyService.singleFileField({key:"icon",required:!0})]}getQueryParameters(e){return{name:e.campaign}}updateRouterLinks(e,i,r){this.campaignAdminUrl=this.routingService.getRoutePath("campaign-admin",{campaign:r.campaign}),this.campaignOverviewUrl=this.routingService.getRoutePath("campaign-overview")}onUpdateSuccess(e,i){this.routingService.routeToPath("campaign-admin",{campaign:e.name}),this.globalUrlParam.autoUpdateCampaignSet()}onCreationSuccess(e,i){return Et(this,void 0,void 0,function*(){throw"InvalidFunctionError. Campaign Update can not create campaigns"})}}return t.\u0275fac=function(e){return new(e||t)(C(mn),C(Ft),C(ce),C(Ze),C(ki),C(Me),C($e),C(ke))},t.\u0275cmp=Y({type:t,selectors:[["app-campaign-update"]],features:[oe],decls:10,vars:5,consts:[[1,"main"],[1,"mb-5"],[1,"row"],[1,"col-12"],[3,"isInUpdateState","link"],[1,"text-center"],[3,"model","fields","formlySubmit","formlyCancel",4,"ngIf"],[3,"formlyFields","modelFromUser","modelFromServer","updateSubmit","cancel",4,"ngIf"],[3,"model","fields","formlySubmit","formlyCancel"],[3,"formlyFields","modelFromUser","modelFromServer","updateSubmit","cancel"]],template:function(e,i){1&e&&(p(0,"div",0),p(1,"article",1),p(2,"div",2),p(3,"div",3),O(4,"app-edit-toggle",4),f(),f(),p(5,"div"),p(6,"h2",5),k(7),f(),f(),S(8,Hae,1,2,"app-formly-formcontainer",6),S(9,jae,1,3,"app-compare-form-container",7),f(),f()),2&e&&(g(4),v("isInUpdateState",!0)("link",i.campaignAdminUrl),g(3),Z(" Updating Campaign ",i.userModel.name," "),g(1),v("ngIf",i.isInUpdateState()||i.isInCreateState()),g(1),v("ngIf",i.isInOutdatedUpdateState()))},directives:[On,le,zn,br],styles:[""]}),t})();const zae=["card"],Gae=function(t,n){return{"fa icon":!0,"fa-chevron-down":t,"fa-chevron-up":n}};function Wae(t,n){if(1&t){const e=G();p(0,"h5",14),A("click",function(){return h(e),b().toggleCard()}),p(1,"div"),k(2),p(3,"span",15),k(4),Lt(5,"date"),f(),p(6,"span",16),k(7),f(),f(),O(8,"i",17),f()}if(2&t){const e=b();g(2),Z(" ",e.cardData.name," "),g(2),Z(" - ",yn(5,5,e.cardData.session_date),""),g(3),uc(" - Day ",e.cardData.start_day," to ",e.cardData.end_day," "),g(1),v("ngClass",Bn(7,Gae,!e.isOpen,e.isOpen))}}function qae(t,n){1&t&&O(0,"hr",18)}function Qae(t,n){1&t&&O(0,"i",22)}function Zae(t,n){1&t&&O(0,"i",23)}function Kae(t,n){if(1&t){const e=G();p(0,"div",19),A("click",function(){return h(e),b().toggleFormState()}),S(1,Qae,1,0,"i",20),S(2,Zae,1,0,"i",21),f()}if(2&t){const e=b();g(1),v("ngIf",e.isInDisplayState()),g(1),v("ngIf",!e.isInDisplayState())}}function Yae(t,n){if(1&t&&(p(0,"a",31),k(1),f()),2&t){const e=n.$implicit,i=n.index;v("routerLink",b(2).diaryentryUrls[i]),g(1),uc(" ",e.author_name," - ",e.name," ")}}function Jae(t,n){if(1&t&&(p(0,"h5"),p(1,"a",32),O(2,"span",33),k(3," Recording "),f(),f()),2&t){const e=b(2);g(1),v("routerLink",e.sessionAudioUrl)}}function Xae(t,n){if(1&t&&(p(0,"div"),p(1,"div",6),p(2,"h5",24),p(3,"span",25),k(4,"In-Game Days"),f(),f(),p(5,"span"),k(6),f(),f(),p(7,"div",26),p(8,"h5",27),O(9,"span",28),k(10," Diaryentries "),f(),p(11,"div",29),S(12,Yae,2,3,"a",30),f(),f(),S(13,Jae,4,1,"h5",9),f()),2&t){const e=b();g(6),uc(" ",e.cardData.start_day," to ",e.cardData.end_day,""),g(6),v("ngForOf",e.cardData.diaryentries),g(1),v("ngIf",e.cardData.has_recording)}}function ele(t,n){if(1&t){const e=G();p(0,"app-formly-formcontainer",34),A("formlySubmit",function(){return h(e),b().onSubmit()})("formlyCancel",function(){return h(e),b().onCancel()}),f()}if(2&t){const e=b();v("model",e.userModel)("fields",e.formlyFields)}}function tle(t,n){if(1&t){const e=G();p(0,"app-compare-form-container",35),A("updateSubmit",function(){return h(e),b().onSubmit()})("cancel",function(){return h(e),b().onCancel()}),f()}if(2&t){const e=b();v("formlyFields",e.formlyFields)("modelFromUser",e.userModel)("modelFromServer",e.serverModel)("displayVertically",!0)}}function nle(t,n){if(1&t){const e=G();p(0,"div",36),p(1,"app-formly-formcontainer",34),A("formlySubmit",function(){return h(e),b().onSubmit()})("formlyCancel",function(){return h(e),b().onCancel()}),f(),f()}if(2&t){const e=b();g(1),v("model",e.userModel)("fields",e.formlyFields)}}const ile=function(t){return{"animate__animated animate__fadeInUp":t}};let rle=(()=>{class t extends Yv{constructor(e,i,r,o,s,l,c){super(r,e,c,s),this.formlyService=i,this.routingService=o,this.element=l,this.userModelClass=Iu,this.cardDelete=new q,this.formlyFields=[this.formlyService.genericCheckbox({key:"is_main_session",defaultValue:!0,label:"Main Session?"}),this.formlyService.genericInput({key:"session_number",label:"Session Number",required:!0,isNumberInput:!0}),this.formlyService.genericDatepicker({key:"session_date",label:"Date of the Session (YYYY/MM/DD)",required:!0}),this.formlyService.genericInput({key:"start_day",label:"Start Day",required:!1}),this.formlyService.genericInput({key:"end_day",label:"End Day",required:!1})]}createUserModel(){this.userModel=JSON.parse(JSON.stringify(this.cardData))}articleUpdate(e){e.end_day=parseInt(e.end_day),e.start_day=parseInt(e.start_day),super.articleUpdate(e)}updateDynamicVariables(e,i,r){const o=i.diaryentries;null!=o&&(this.diaryentryUrls=o.map(s=>this.routingService.getRoutePath("diaryentry",{authorName:s.author_name,campaign:e.name,sessionNumber:this.cardData.session_number,isMainSession:this.cardData.is_main_session_int})),this.sessionAudioUrl=this.routingService.getRoutePath("sessionaudio",{campaign:e.name,isMainSession:this.cardData.is_main_session_int,sessionNumber:this.cardData.session_number}))}}return t.\u0275fac=function(e){return new(e||t)(C(hs),C(mn),C(Ze),C(ce),C(ke),C(Ye),C(Me))},t.\u0275cmp=Y({type:t,selectors:[["app-session"]],viewQuery:function(e,i){if(1&e&&pt(zae,5),2&e){let r;ye(r=be())&&(i.card=r.first)}},features:[oe],decls:16,vars:12,consts:[[1,"card","row","mb-3","px-4","pt-3","pb-1",3,"ngClass"],["card",""],["class","pointer col-12 justify-content-between d-flex align-items-center",3,"click",4,"ngIf"],[1,"mb-3","w-100",3,"ngbCollapse"],[1,"col-12"],["class","white-separator mb-2",4,"ngIf"],[1,"mb-3"],[1,"d-inline"],["class","btn btn-secondary float-right",3,"click",4,"ngIf"],[4,"ngIf"],[3,"model","fields","formlySubmit","formlyCancel",4,"ngIf"],["class","d-flex justify-content-center",3,"formlyFields","modelFromUser","modelFromServer","displayVertically","updateSubmit","cancel",4,"ngIf"],[3,"deleteMessage","deleteEvent"],["formField",""],[1,"pointer","col-12","justify-content-between","d-flex","align-items-center",3,"click"],[1,"text-muted","no-transform"],[1,"text-muted","no-transform","hide-on-mobile"],[3,"ngClass"],[1,"white-separator","mb-2"],[1,"btn","btn-secondary","float-right",3,"click"],["class","fa fa-pencil",4,"ngIf"],["class","fa fa-times",4,"ngIf"],[1,"fa","fa-pencil"],[1,"fa","fa-times"],[1,"row","mb-0"],[1,"col"],[1,"mb-5"],[1,"mb-1"],[1,"fas","fa-book-open"],[1,"d-flex","flex-column"],["class","ml-4 max-content-width",3,"routerLink",4,"ngFor","ngForOf"],[1,"ml-4","max-content-width",3,"routerLink"],[3,"routerLink"],[1,"fa","fa-file-audio-o"],[3,"model","fields","formlySubmit","formlyCancel"],[1,"d-flex","justify-content-center",3,"formlyFields","modelFromUser","modelFromServer","displayVertically","updateSubmit","cancel"],["id","edit-section"]],template:function(e,i){1&e&&(p(0,"div",0,1),S(2,Wae,9,10,"h5",2),p(3,"div",3),p(4,"div",4),S(5,qae,1,0,"hr",5),p(6,"div",6),p(7,"h4",7),k(8),f(),S(9,Kae,3,2,"div",8),f(),S(10,Xae,14,4,"div",9),S(11,ele,1,2,"app-formly-formcontainer",10),S(12,tle,1,4,"app-compare-form-container",11),p(13,"app-delete-toggle",12),A("deleteEvent",function(){return i.articleDelete(i.cardData)}),f(),f(),f(),f(),S(14,nle,2,2,"ng-template",null,13,se)),2&e&&(v("ngClass",ht(10,ile,i.isInCreateState())),g(2),v("ngIf",!i.isInOutdatedUpdateState()),g(1),v("ngbCollapse",!i.isOpen),g(2),v("ngIf",!i.isInOutdatedUpdateState()),g(3),Z(" ",i.cardData.name,""),g(1),v("ngIf",i.hasUpdatePermission),g(1),v("ngIf",i.isInDisplayState()),g(1),v("ngIf",i.isInCreateState()||i.isInUpdateState()),g(1),v("ngIf",i.isInOutdatedUpdateState()),g(1),v("deleteMessage","Delete this session ?"))},directives:[Yt,le,B0,Ic,je,Ht,zn,br],pipes:[l_],styles:[".btn-secondary[_ngcontent-%COMP%]{background-color:var(--wiki-background-2)}.no-transform[_ngcontent-%COMP%]{text-transform:none}.max-content-width[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content}"]}),t})();const ole=["sessionElements"];function sle(t,n){if(1&t){const e=G();p(0,"div"),p(1,"app-session",12,13),A("cardDelete",function(){const o=h(e).index;return b().onArticleDelete(o)}),f(),f()}if(2&t){const e=n.$implicit,i=n.index,r=b();g(1),v("cardData",e)("campaign",r.campaign)("index",i)}}let ale=(()=>{class t extends Jv{constructor(e,i,r,o,s,l){super(e,i,r,o,s,l),this.articleModelClass=Iu,this.articleStarterTitle="New Session",this.articlesSortProperty="session_date",this.isReverseSort=!0,this.articlesInitialScrollParameter="name"}updateDynamicVariables(e,i,r){this.homeUrl=this.routingService.getRoutePath("home2",{campaign:e.name})}addArticle(){const e=new Iu;e.name=this.articleStarterTitle,e.campaign=this.campaign.pk;const i=Math.max.apply(Math,this.articles.map(o=>o.session_number));e.session_number=i+1,e.session_date=this.getNextSessionDate(this.articles[0]),this.articles.unshift(e)}getNextSessionDate(e){let i;if(null==e)i=new Date;else{const r=new Date(e.session_date);i=this.addDaysToDate(7,r)}return this.dateToYYYMMDDString(i)}addDaysToDate(e,i){const r=864e5*e;return new Date(i.setTime(i.getTime()+r))}dateToYYYMMDDString(e){return e.toISOString().slice(0,10)}}return t.\u0275fac=function(e){return new(e||t)(C(hs),C(Me),C(ce),C(Ze),C($e),C(ke))},t.\u0275cmp=Y({type:t,selectors:[["app-sessions"]],viewQuery:function(e,i){if(1&e&&pt(ole,5),2&e){let r;ye(r=be())&&(i.articleElements=r)}},features:[oe],decls:15,vars:3,consts:[[1,"main"],["listArticle",""],[1,"container"],[1,"row"],[1,"text-center","col"],[3,"tooltipMessage"],[1,"mb-3","row"],["title","Add Session",1,"btn","btn-primary","col-lg-2","col-sm-3",3,"click"],[1,"fa","fa-plus"],[4,"ngFor","ngForOf"],[1,"row","mt-5"],[1,"btn","btn-secondary","col-md-3",3,"routerLink"],[3,"cardData","campaign","index","cardDelete"],["ruleElements",""]],template:function(e,i){1&e&&(p(0,"div",0,1),p(2,"article",2),p(3,"div",3),p(4,"h1",4),k(5," Sessions "),O(6,"app-tooltip-infocircle",5),f(),f(),p(7,"div",6),p(8,"div",7),A("click",function(){return i.addArticle()}),O(9,"i",8),k(10," Add Session "),f(),f(),S(11,sle,3,3,"div",9),p(12,"div",10),p(13,"a",11),k(14," Back To Frontpage "),f(),f(),f(),f()),2&e&&(g(6),v("tooltipMessage","A list of all sessions that happened this campaign"),g(5),v("ngForOf",i.articles),g(2),xe("routerLink",i.homeUrl))},directives:[$w,je,Ht,rle],styles:[""]}),t})();class Dl{constructor(n,e){this.service=n,this.routing=e}resolve(n,e){const i=n.params,r=i.campaign,o=this.getQueryParameter(i);return this.service.readByParam(r,o).pipe(Lo(s=>(console.error(s),this.routing.routeToErrorPage(s),Ee(null))),re())}getQueryParameter(n){return{name:n.name}}}class hF{constructor(n,e){this.service=n,this.routing=e}resolve(n,e){return this.service.campaignList(n.params.campaign).pipe(Lo(o=>(console.error(o),this.routing.routeToErrorPage(o),Ee(null))),re())}}class zw{constructor(n,e){this.service=n,this.routing=e}resolve(n,e){return this.service.campaignDetailList(n.params.campaign).pipe(Lo(o=>(console.error(o),this.routing.routeToErrorPage(o),Ee(null))),re())}}class Qs{constructor(n,e,i){this.service=n,this.globalUrlParamsService=e,this.routing=i}resolve(n,e){return Et(this,void 0,void 0,function*(){const r=this.getQueryParameters(n.params),o=yield this.globalUrlParamsService.getCurrentCampaign();return this.isUpdateRoute(e)?this.fetchData(o,r):this.createData(o,r)})}isUpdateRoute(n){return n.url.includes("update")}getQueryParameters(n){return{name:n.name}}createData(n,e){return Et(this,void 0,void 0,function*(){if(null==this.dataModelClass)throw new Error("Undefined dataModelClass in modelData Resolver. You tried to \n        create a model for a create route without telling in the resolver for the modelData which class the model is\n        supposed to have");const i=new this.dataModelClass;return i.campaign=n.pk,i})}fetchData(n,e){return Et(this,void 0,void 0,function*(){return this.service.readByParam(n.name,e).pipe(Lo(i=>(console.error(i),this.routing.routeToErrorPage(i),Ee(null))),re()).toPromise()})}}let Ne=(()=>{class t{constructor(e){this.globalUrlParams=e}resolve(e,i){return Et(this,void 0,void 0,function*(){return yield this.globalUrlParams.getCurrentCampaign()})}}return t.\u0275fac=function(e){return new(e||t)(P($e))},t.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),lle=(()=>{class t{constructor(e){this.campaignService=e}resolve(e,i){return this.campaignService.readByParam(e.params.campaign)}}return t.\u0275fac=function(e){return new(e||t)(P(ki))},t.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),cle=(()=>{class t{constructor(e){this.campaignService=e}resolve(e,i){return this.campaignService.statistics(e.params.campaign)}}return t.\u0275fac=function(e){return new(e||t)(P(ki))},t.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),ule=(()=>{class t extends Qs{constructor(e,i,r,o){super(e,r,o),this.campaignService=e,this.dataModelClass=uF}resolve(e,i){const r=Object.create(null,{resolve:{get:()=>super.resolve}});return Et(this,void 0,void 0,function*(){const o=yield r.resolve.call(this,e,i);return this.isUpdateRoute(i)?this.fetchData(o,null):this.createData(o,null)})}createData(e,i){return Et(this,void 0,void 0,function*(){return new this.dataModelClass})}fetchData(e,i){return this.campaignService.readByParam(e.name).toPromise()}}return t.\u0275fac=function(e){return new(e||t)(P(ki),P(Ft),P($e),P(ce))},t.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),dle=(()=>{class t extends Dl{constructor(e,i){super(e,i)}}return t.\u0275fac=function(e){return new(e||t)(P(Zf),P(ce))},t.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),pF=(()=>{class t extends Qs{constructor(e,i,r){super(e,i,r),this.dataModelClass=Rv}}return t.\u0275fac=function(e){return new(e||t)(P(Zf),P($e),P(ce))},t.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),fF=(()=>{class t extends Dl{constructor(e,i){super(e,i)}}return t.\u0275fac=function(e){return new(e||t)(P(ir),P(ce))},t.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),mF=(()=>{class t extends Qs{constructor(e,i,r){super(e,i,r),this.dataModelClass=zf}}return t.\u0275fac=function(e){return new(e||t)(P(ir),P($e),P(ce))},t.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),hle=(()=>{class t extends Dl{constructor(e,i){super(e,i)}getQueryParameter(e){return{locationName:e.name,parentLocationName:e.parent_name?e.parent_name:"None"}}}return t.\u0275fac=function(e){return new(e||t)(P(wl),P(ce))},t.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Gw=(()=>{class t extends Qs{constructor(e,i,r,o){super(e,i,o),this.routingService=r,this.dataModelClass=Mu}resolve(e,i){return Et(this,void 0,void 0,function*(){const o=this.getQueryParameters(e.params),s=yield this.globalUrlParamsService.getCurrentCampaign();return this.isUpdateRoute(i)?this.fetchData(s,o):this.createLocationData(i,s,o)})}getQueryParameters(e){return{locationName:e.name,parentLocationName:e.parent_name?e.parent_name:"None"}}createLocationData(e,i,r){const o=Object.create(null,{createData:{get:()=>super.createData}});return Et(this,void 0,void 0,function*(){const l=yield o.createData.call(this,i,r);if(l.parent_location=null,this.isCreateRouteWithParentLocation(e,r)){const c=yield this.fetchParentLocationData(i.name,r);l.parent_location=c.pk,l.parent_location_details={pk:c.pk,name:c.name,parent_location:c.parent_location_details.name,name_full:c.name_full}}return l})}fetchParentLocationData(e,i){return Et(this,void 0,void 0,function*(){try{return yield this.service.readByParam(e,i).toPromise()}catch(r){this.routingService.routeToErrorPage(r)}})}isCreateRouteWithParentLocation(e,i){return e.url.endsWith("create")&&null!=i.locationName&&null!=i.parentLocationName}}return t.\u0275fac=function(e){return new(e||t)(P(wl),P($e),P(ce),P(ce))},t.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),ple=(()=>{class t{constructor(e){this.campaignService=e}resolve(e,i){return Et(this,void 0,void 0,function*(){const r=new Mu,o=yield this.campaignService.getCurrentCampaign();return r.campaign=o.pk,r})}}return t.\u0275fac=function(e){return new(e||t)(P($e))},t.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),gF=(()=>{class t extends Dl{constructor(e,i){super(e,i)}getQueryParameter(e){return{isMainSession:parseInt(e.isMainSession),sessionNumber:parseInt(e.sessionNumber),authorName:e.authorName}}}return t.\u0275fac=function(e){return new(e||t)(P(Gs),P(ce))},t.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),_F=(()=>{class t extends Qs{constructor(e,i,r){super(e,i,r),this.dataModelClass=Gf}getQueryParameters(e){return{isMainSession:parseInt(e.isMainSession),sessionNumber:parseInt(e.sessionNumber),authorName:e.authorName}}}return t.\u0275fac=function(e){return new(e||t)(P(Gs),P($e),P(ce))},t.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),fle=(()=>{class t extends Dl{constructor(e,i){super(e,i)}}return t.\u0275fac=function(e){return new(e||t)(P(Kf),P(ce))},t.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),vF=(()=>{class t extends Qs{constructor(e,i,r){super(e,i,r),this.dataModelClass=Wf}}return t.\u0275fac=function(e){return new(e||t)(P(Kf),P($e),P(ce))},t.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),mle=(()=>{class t{constructor(e,i){this.characterService=e,this.globalUrlParamsService=i}resolve(e,i){return Et(this,void 0,void 0,function*(){const r=yield this.globalUrlParamsService.getCurrentCampaign(),o=e.params.character_name,s=yield this.characterService.readByParam(r.name,{name:o}).pipe(re()).toPromise(),l=new Wf;return l.campaign=r.pk,l.owner=s.pk,l})}}return t.\u0275fac=function(e){return new(e||t)(P(ir),P($e))},t.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),yF=(()=>{class t{constructor(e,i){this.service=e,this.globalUrlParams=i}resolve(e,i){return Et(this,void 0,void 0,function*(){const r=e.params,o=yield this.globalUrlParams.getCurrentCampaign(),s=yield this.service.campaignList(o.name).pipe(re()).toPromise(),l=this.getQueryParameter(r,o,s);return null==l?Ee({maps:[],mapData:null}).toPromise():this.service.readByParam(o.name,l).pipe(re(),he(c=>({mapData:c,maps:s}))).toPromise()})}getQueryParameter(e,i,r){return 0===r.length?null:{name:null!=e.name?e.name:this.getSecondaryMapChoice(i,r)}}getSecondaryMapChoice(e,i){var r;if(0===i.length)return;const o=null===(r=e.default_map_details)||void 0===r?void 0:r.name;return null!=o?o:i[0].name}}return t.\u0275fac=function(e){return new(e||t)(P(Hr),P($e))},t.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),bF=(()=>{class t extends Qs{constructor(e,i,r){super(e,i,r),this.dataModelClass=Ch}}return t.\u0275fac=function(e){return new(e||t)(P(Hr),P($e),P(ce))},t.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),gle=(()=>{class t extends Dl{constructor(e,i){super(e,i)}}return t.\u0275fac=function(e){return new(e||t)(P(wh),P(ce))},t.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),CF=(()=>{class t extends Qs{constructor(e,i,r){super(e,i,r),this.dataModelClass=Lv}}return t.\u0275fac=function(e){return new(e||t)(P(wh),P($e),P(ce))},t.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),_le=(()=>{class t extends Dl{constructor(e,i){super(e,i)}}return t.\u0275fac=function(e){return new(e||t)(P(ds),P(ce))},t.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),vle=(()=>{class t extends hF{constructor(e,i){super(e,i)}}return t.\u0275fac=function(e){return new(e||t)(P(ds),P(ce))},t.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),wF=(()=>{class t extends Qs{constructor(e,i,r){super(e,i,r),this.dataModelClass=$v}}return t.\u0275fac=function(e){return new(e||t)(P(ds),P($e),P(ce))},t.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),yle=(()=>{class t{constructor(e){this.quoteService=e}resolve(e,i){const r=e.params;return this.quoteService.getAllCharacterQuotes(r.campaign,r.name)}}return t.\u0275fac=function(e){return new(e||t)(P(Gv))},t.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),ble=(()=>{class t extends Dl{constructor(e,i){super(e,i)}getQueryParameter(e){return{isMainSession:e.isMainSession,sessionNumber:e.sessionNumber}}}return t.\u0275fac=function(e){return new(e||t)(P(ps),P(ce))},t.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Cle=(()=>{class t extends hF{constructor(e,i){super(e,i)}}return t.\u0275fac=function(e){return new(e||t)(P(ps),P(ce))},t.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),wle=(()=>{class t{constructor(e){this.timestampService=e}resolve(e,i){const r=e.params;return this.timestampService.getTimestamps(r.campaign,r.isMainSession,r.sessionNumber)}}return t.\u0275fac=function(e){return new(e||t)(P(kl))},t.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),SF=(()=>{class t extends Qs{constructor(e,i,r){super(e,i,r),this.dataModelClass=qf}getQueryParameters(e){return{isMainSession:e.isMainSession,sessionNumber:e.sessionNumber}}}return t.\u0275fac=function(e){return new(e||t)(P(ps),P($e),P(ce))},t.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Sle=(()=>{class t extends Dl{constructor(e,i){super(e,i)}getQueryParameter(e){return{parentLocationName:e.parent_location_name,locationName:e.location_name,mapName:e.map_name}}}return t.\u0275fac=function(e){return new(e||t)(P($o),P(ce))},t.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),TF=(()=>{class t{constructor(e,i){this.mapService=e,this.globalUrlParamsService=i}resolve(e,i){return Et(this,void 0,void 0,function*(){const r=e.params,o=r.campaign,s=r.map_name,l=yield this.mapService.readByParam(o,{name:s}).pipe(re()).toPromise(),c=new Pu;return c.latitude=parseInt(r.latitude),c.longitude=parseInt(r.longitude),c.map=l.pk,c})}}return t.\u0275fac=function(e){return new(e||t)(P(Hr),P($e))},t.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),EF=(()=>{class t extends Qs{constructor(e,i,r,o){super(e,i,o),this.locationService=r,this.dataModelClass=Pu}getQueryParameters(e){return{parentLocationName:e.parent_location_name,locationName:e.location_name,mapName:e.map_name}}createData(e,i){const r=Object.create(null,{createData:{get:()=>super.createData}});return Et(this,void 0,void 0,function*(){const s=yield r.createData.call(this,e,i),l=yield this.locationService.readByParam(e.name,i).pipe(re()).toPromise();return s.location=l.pk,s.location_details={parent_location_name:l.parent_location_details.name,name:l.name,description:l.description,sublocations:null},s})}}return t.\u0275fac=function(e){return new(e||t)(P($o),P($e),P(wl),P(ce))},t.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),kF=(()=>{class t extends zw{constructor(e,i){super(e,i)}}return t.\u0275fac=function(e){return new(e||t)(P(jv),P(ce))},t.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),DF=(()=>{class t extends zw{constructor(e,i){super(e,i)}}return t.\u0275fac=function(e){return new(e||t)(P(zv),P(ce))},t.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Tle=(()=>{class t extends zw{constructor(e,i){super(e,i)}}return t.\u0275fac=function(e){return new(e||t)(P(hs),P(ce))},t.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Ele=(()=>{class t{constructor(e){this.articleService=e}resolve(e,i){const r=e.params;return this.articleService.getCampaignSearchArticle(r.campaign,r.searchString)}}return t.\u0275fac=function(e){return new(e||t)(P(lF))},t.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Dh=(()=>{class t{constructor(e,i){this.overviewService=e,this.router=i}resolve(e,i){const o=e.params.campaign,s=this.getOverviewType(i.url);return this.overviewService.getCampaignOverviewItems(o,s)}getOverviewType(e){const i=e.split("/"),o=this.capitalize(i[i.length-2]);return Ie[o]}capitalize(e){return e.charAt(0).toUpperCase()+e.slice(1)}}return t.\u0275fac=function(e){return new(e||t)(P(Yf),P(Ft))},t.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const Ile=[].concat([{path:"",redirectTo:`${$.wikiUrlFrontendPrefixNoSlash}/campaigns`,pathMatch:"full",data:{name:"start"}},{path:"wiki2",redirectTo:`${$.wikiUrlFrontendPrefixNoSlash}/campaigns`,pathMatch:"full",data:{name:"start"}},{path:`${$.wikiUrlFrontendPrefixNoSlash}/home`,redirectTo:`${$.wikiUrlFrontendPrefixNoSlash}/campaigns`,pathMatch:"full",data:{name:"no-campaigns"}},{path:`${$.wikiUrlFrontendPrefixNoSlash}/login`,component:oF,data:{name:"login"}},{path:`${$.wikiUrlFrontendPrefixNoSlash}/login/:state`,component:oF,data:{name:"login-state"}},{path:`${$.wikiUrlFrontendPrefixNoSlash}/profile/:username`,component:Wse,data:{name:"direct-profile"},canActivate:[Hw],resolve:{userData:(()=>{class t{constructor(e){this.userService=e}resolve(e,i){return this.userService.getThisUser()}}return t.\u0275fac=function(e){return new(e||t)(P(so))},t.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()}},{path:`${$.wikiUrlFrontendPrefixNoSlash}/campaigns`,component:Sae,data:{name:"campaign-overview"},canActivate:[Hw]},{path:"wiki1",component:sF,data:{name:"wiki1"},children:[{path:"**",component:sF}]},{path:`${$.wikiUrlFrontendPrefixNoSlash}/error/:errorStatus`,component:aF,data:{name:"error"}},{path:`${$.wikiUrlFrontendPrefixNoSlash}/**`,component:aF,data:{name:"404"}}],[{path:`${$.wikiUrlFrontendPrefixNoSlash}/admin`,component:Ise,data:{name:"admin"},canActivate:[om]},{path:`${$.wikiUrlFrontendPrefixNoSlash}/configtables`,component:rae,data:{name:"config-tables"},canActivate:[om]},{path:`${$.wikiUrlFrontendPrefixNoSlash}/campaign/create`,component:dF,data:{name:"campaign-create"},canActivate:[om]}],[{path:`${$.wikiUrlFrontendPrefixNoSlash}/home/:campaign`,component:cF,data:{name:"home1",requiredRole:ue.GUEST},canActivate:[Ae],resolve:{campaign:Ne}},{path:`${$.wikiUrlFrontendPrefixNoSlash}/home/:campaign`,component:cF,data:{name:"home2",requiredRole:ue.GUEST},canActivate:[Ae],resolve:{campaign:Ne}},{path:`${$.wikiUrlFrontendPrefixNoSlash}/campaign/:campaign`,component:Bae,data:{name:"campaign-admin",requiredRole:ue.ADMIN},canActivate:[Ae],resolve:{campaign:Ne,article:lle,campaignStatistics:cle}},{path:`${$.wikiUrlFrontendPrefixNoSlash}/campaign/:campaign/update`,component:dF,data:{name:"campaign-update",requiredRole:ue.ADMIN},canActivate:[Ae],resolve:{campaign:Ne,modelData:ule}},{path:`${$.wikiUrlFrontendPrefixNoSlash}/character/:campaign`,component:bh,data:{name:"character-overview",requiredRole:ue.GUEST},canActivate:[Ae],resolve:{campaign:Ne,overviewList:Dh}},{path:`${$.wikiUrlFrontendPrefixNoSlash}/character/:campaign/create`,component:WN,data:{name:"character-create",requiredRole:ue.MEMBER},canActivate:[Ae],resolve:{campaign:Ne,modelData:mF}},{path:`${$.wikiUrlFrontendPrefixNoSlash}/character/:campaign/:name`,component:ete,data:{name:"character",requiredRole:ue.GUEST},canActivate:[Ae],resolve:{campaign:Ne,article:fF}},{path:`${$.wikiUrlFrontendPrefixNoSlash}/character/:campaign/:name/update`,component:WN,data:{name:"character-update",requiredRole:ue.MEMBER},canActivate:[Ae],resolve:{campaign:Ne,modelData:mF}},{path:`${$.wikiUrlFrontendPrefixNoSlash}/location/:campaign`,component:bh,data:{name:"location-overview",requiredRole:ue.GUEST},canActivate:[Ae],resolve:{campaign:Ne,overviewList:Dh}},{path:`${$.wikiUrlFrontendPrefixNoSlash}/location/:campaign/create`,component:Bw,data:{name:"location-create",requiredRole:ue.MEMBER},canActivate:[Ae],resolve:{campaign:Ne,modelData:Gw}},{path:`${$.wikiUrlFrontendPrefixNoSlash}/location/:campaign/:parent_name/:name`,component:fte,data:{name:"location",requiredRole:ue.GUEST},canActivate:[Ae],resolve:{campaign:Ne,article:hle}},{path:`${$.wikiUrlFrontendPrefixNoSlash}/location/:campaign/:parent_name/:name/create`,component:Bw,data:{name:"location-parentlocation-create",requiredRole:ue.MEMBER},canActivate:[Ae],resolve:{campaign:Ne,modelData:Gw}},{path:`${$.wikiUrlFrontendPrefixNoSlash}/location/:campaign/:latitude/:longitude/:map_name/create`,component:Goe,data:{name:"location-map-create",requiredRole:ue.MEMBER},canActivate:[Ae],resolve:{campaign:Ne,locationModelData:ple,markerModelData:TF}},{path:`${$.wikiUrlFrontendPrefixNoSlash}/location/:campaign/:parent_name/:name/update`,component:Bw,data:{name:"location-update",requiredRole:ue.MEMBER},canActivate:[Ae],resolve:{campaign:Ne,modelData:Gw}},{path:`${$.wikiUrlFrontendPrefixNoSlash}/diaryentry/:campaign`,component:bh,data:{name:"diaryentry-overview",requiredRole:ue.GUEST},canActivate:[Ae],resolve:{campaign:Ne,overviewList:Dh}},{path:`${$.wikiUrlFrontendPrefixNoSlash}/diaryentry/:campaign/create`,component:KN,data:{name:"diaryentry-create",requiredRole:ue.MEMBER},canActivate:[Ae],resolve:{campaign:Ne,modelData:_F}},{path:`${$.wikiUrlFrontendPrefixNoSlash}/diaryentry/:campaign/:sessionNumber/:isMainSession/:authorName`,component:zN,data:{name:"diaryentry",requiredRole:ue.GUEST},canActivate:[Ae],resolve:{campaign:Ne,article:gF}},{path:`${$.wikiUrlFrontendPrefixNoSlash}/diaryentry/:campaign/:sessionNumber/:isMainSession/:authorName/update`,component:KN,data:{name:"diaryentry-update",requiredRole:ue.MEMBER},canActivate:[Ae],resolve:{campaign:Ne,modelData:_F}},{path:`${$.wikiUrlFrontendPrefixNoSlash}/diaryentry/:campaign/:sessionNumber/:isMainSession/:authorName/:encounterTitle`,component:zN,data:{name:"diaryentry-encounter",requiredRole:ue.GUEST},canActivate:[Ae],resolve:{campaign:Ne,article:gF}},{path:`${$.wikiUrlFrontendPrefixNoSlash}/creature/:campaign`,component:bh,data:{name:"creature-overview",requiredRole:ue.GUEST},canActivate:[Ae],resolve:{campaign:Ne,overviewList:Dh}},{path:`${$.wikiUrlFrontendPrefixNoSlash}/creature/:campaign/create`,component:qN,data:{name:"creature-create",requiredRole:ue.MEMBER},canActivate:[Ae],resolve:{campaign:Ne,modelData:pF}},{path:`${$.wikiUrlFrontendPrefixNoSlash}/creature/:campaign/:name`,component:Yte,data:{name:"creature",requiredRole:ue.GUEST},canActivate:[Ae],resolve:{campaign:Ne,article:dle}},{path:`${$.wikiUrlFrontendPrefixNoSlash}/creature/:campaign/:name/update`,component:qN,data:{name:"creature-update",requiredRole:ue.MEMBER},canActivate:[Ae],resolve:{campaign:Ne,modelData:pF}},{path:`${$.wikiUrlFrontendPrefixNoSlash}/organization/:campaign`,component:bh,data:{name:"organization-overview",requiredRole:ue.GUEST},canActivate:[Ae],resolve:{campaign:Ne,overviewList:Dh}},{path:`${$.wikiUrlFrontendPrefixNoSlash}/organization/:campaign/create`,component:YN,data:{name:"organization-create",requiredRole:ue.MEMBER},canActivate:[Ae],resolve:{campaign:Ne,modelData:CF}},{path:`${$.wikiUrlFrontendPrefixNoSlash}/organization/:campaign/:name`,component:nne,data:{name:"organization",requiredRole:ue.GUEST},canActivate:[Ae],resolve:{campaign:Ne,article:gle}},{path:`${$.wikiUrlFrontendPrefixNoSlash}/organization/:campaign/:name/update`,component:YN,data:{name:"organization-update",requiredRole:ue.MEMBER},canActivate:[Ae],resolve:{campaign:Ne,modelData:CF}},{path:`${$.wikiUrlFrontendPrefixNoSlash}/item/:campaign`,component:bh,data:{name:"item-overview",requiredRole:ue.GUEST},canActivate:[Ae],resolve:{campaign:Ne,overviewList:Dh}},{path:`${$.wikiUrlFrontendPrefixNoSlash}/item/:campaign/create`,component:Vw,data:{name:"item-create",requiredRole:ue.MEMBER},canActivate:[Ae],resolve:{campaign:Ne,modelData:vF}},{path:`${$.wikiUrlFrontendPrefixNoSlash}/item/:campaign/:character_name/create`,component:Vw,data:{name:"item-character-create",requiredRole:ue.MEMBER},canActivate:[Ae],resolve:{campaign:Ne,modelData:mle}},{path:`${$.wikiUrlFrontendPrefixNoSlash}/item/:campaign/:name`,component:one,data:{name:"item",requiredRole:ue.GUEST},canActivate:[Ae],resolve:{campaign:Ne,article:fle}},{path:`${$.wikiUrlFrontendPrefixNoSlash}/item/:campaign/:name/update`,component:Vw,data:{name:"item-update",requiredRole:ue.MEMBER},canActivate:[Ae],resolve:{campaign:Ne,modelData:vF}},{path:`${$.wikiUrlFrontendPrefixNoSlash}/quest/:campaign`,component:Kie,data:{name:"quest-overview",requiredRole:ue.GUEST},canActivate:[Ae],resolve:{campaign:Ne,overviewList:vle}},{path:`${$.wikiUrlFrontendPrefixNoSlash}/quest/:campaign/create`,component:JN,data:{name:"quest-create",requiredRole:ue.MEMBER},canActivate:[Ae],resolve:{campaign:Ne,modelData:wF}},{path:`${$.wikiUrlFrontendPrefixNoSlash}/quest/:campaign/:name`,component:$ie,data:{name:"quest",requiredRole:ue.GUEST},canActivate:[Ae],resolve:{campaign:Ne,article:_le}},{path:`${$.wikiUrlFrontendPrefixNoSlash}/quest/:campaign/:name/update`,component:JN,data:{name:"quest-update",requiredRole:ue.MEMBER},canActivate:[Ae],resolve:{campaign:Ne,modelData:wF}},{path:`${$.wikiUrlFrontendPrefixNoSlash}/quotes/:campaign/:name`,component:ese,data:{name:"quote-overview",requiredRole:ue.GUEST},canActivate:[Ae],resolve:{campaign:Ne,character:fF,articleList:yle}},{path:`${$.wikiUrlFrontendPrefixNoSlash}/sessionaudio/:campaign`,component:moe,data:{name:"sessionaudio-overview",requiredRole:ue.GUEST},canActivate:[Ae],resolve:{campaign:Ne,overviewList:Cle}},{path:`${$.wikiUrlFrontendPrefixNoSlash}/sessionaudio/:campaign/create`,component:tF,data:{name:"sessionaudio-create",requiredRole:ue.MEMBER},canActivate:[Ae],resolve:{campaign:Ne,modelData:SF}},{path:`${$.wikiUrlFrontendPrefixNoSlash}/sessionaudio/:campaign/:isMainSession/:sessionNumber`,component:doe,data:{name:"sessionaudio",requiredRole:ue.GUEST},canActivate:[Ae],resolve:{campaign:Ne,article:ble,timestamps:wle}},{path:`${$.wikiUrlFrontendPrefixNoSlash}/sessionaudio/:campaign/:isMainSession/:sessionNumber/update`,component:tF,data:{name:"sessionaudio-update",requiredRole:ue.MEMBER},canActivate:[Ae],resolve:{campaign:Ne,modelData:SF}},{path:`${$.wikiUrlFrontendPrefixNoSlash}/marker/:campaign/:parent_location_name/:location_name/create`,component:nF,data:{name:"marker-create",requiredRole:ue.MEMBER},canActivate:[Ae],resolve:{campaign:Ne,modelData:EF}},{path:`${$.wikiUrlFrontendPrefixNoSlash}/marker/:campaign/:latitude/:longitude/:map_name/create`,component:zoe,data:{name:"marker-map-create",requiredRole:ue.MEMBER},canActivate:[Ae],resolve:{campaign:Ne,modelData:TF}},{path:`${$.wikiUrlFrontendPrefixNoSlash}/marker/:campaign/:parent_location_name/:location_name/:map_name`,component:Toe,data:{name:"marker",requiredRole:ue.GUEST},canActivate:[Ae],resolve:{campaign:Ne,article:Sle}},{path:`${$.wikiUrlFrontendPrefixNoSlash}/marker/:campaign/:parent_location_name/:location_name/:map_name/update`,component:nF,data:{name:"marker-update",requiredRole:ue.MEMBER},canActivate:[Ae],resolve:{campaign:Ne,modelData:EF}},{path:`${$.wikiUrlFrontendPrefixNoSlash}/map/:campaign/create`,component:rF,data:{name:"map-create",requiredRole:ue.MEMBER},canActivate:[Ae],resolve:{campaign:Ne,modelData:bF}},{path:`${$.wikiUrlFrontendPrefixNoSlash}/map/:campaign/default`,component:iF,data:{name:"default-map",requiredRole:ue.GUEST},canActivate:[Ae],resolve:{campaign:Ne,article:yF}},{path:`${$.wikiUrlFrontendPrefixNoSlash}/map/:campaign/:name`,component:iF,data:{name:"map",requiredRole:ue.GUEST},canActivate:[Ae],resolve:{campaign:Ne,article:yF}},{path:`${$.wikiUrlFrontendPrefixNoSlash}/map/:campaign/:name/update`,component:rF,data:{name:"map-update",requiredRole:ue.MEMBER},canActivate:[Ae],resolve:{campaign:Ne,modelData:bF}},{path:`${$.wikiUrlFrontendPrefixNoSlash}/rules/:campaign`,component:GN,data:{name:"rules",requiredRole:ue.GUEST},canActivate:[Ae],resolve:{campaign:Ne,articleList:kF}},{path:`${$.wikiUrlFrontendPrefixNoSlash}/rules/:campaign/:name`,component:GN,data:{name:"rule",requiredRole:ue.GUEST},canActivate:[Ae],resolve:{campaign:Ne,articleList:kF}},{path:`${$.wikiUrlFrontendPrefixNoSlash}/spells/:campaign`,component:XN,data:{name:"spells",requiredRole:ue.GUEST},canActivate:[Ae],resolve:{campaign:Ne,articleList:DF}},{path:`${$.wikiUrlFrontendPrefixNoSlash}/spells/:campaign/:name`,component:XN,data:{name:"spell",requiredRole:ue.GUEST},canActivate:[Ae],resolve:{campaign:Ne,articleList:DF}},{path:`${$.wikiUrlFrontendPrefixNoSlash}/sessions/:campaign`,component:ale,data:{name:"sessions",requiredRole:ue.GUEST},canActivate:[Ae],resolve:{campaign:Ne,articleList:Tle}},{path:`${$.wikiUrlFrontendPrefixNoSlash}/search/:campaign/:searchString`,component:Qre,data:{name:"campaignSearch",requiredRole:ue.GUEST},canActivate:[Ae],resolve:{campaign:Ne,searchResults:Ele}}]);let Ple=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=et({type:t}),t.\u0275inj=Te({imports:[[Ov.forRoot(Ile,{scrollPositionRestoration:"enabled"})],Ov]}),t})();function xF(t,n,e){const i=e.value;return e.value=function(){if($.isTouchDevice)return i.apply(this,arguments)},e}const sm="Service workers are disabled or not supported by this browser";class Xv{constructor(n){if(this.serviceWorker=n,n){const i=Ci(n,"controllerchange").pipe(he(()=>n.controller)),o=_f(mv(()=>Ee(n.controller)),i);this.worker=o.pipe($t(m=>!!m)),this.registration=this.worker.pipe(ri(()=>n.getRegistration()));const d=Ci(n,"message").pipe(he(m=>m.data)).pipe($t(m=>m&&m.type)).pipe(Lc(new Fe));d.connect(),this.events=d}else this.worker=this.events=this.registration=mv(()=>qP(new Error("Service workers are disabled or not supported by this browser")))}postMessage(n,e){return this.worker.pipe(Pn(1),Zn(i=>{i.postMessage(Object.assign({action:n},e))})).toPromise().then(()=>{})}postMessageWithStatus(n,e,i){const r=this.waitForStatus(i),o=this.postMessage(n,e);return Promise.all([r,o]).then(()=>{})}generateNonce(){return Math.round(1e7*Math.random())}eventsOfType(n){return this.events.pipe($t(i=>i.type===n))}nextEventOfType(n){return this.eventsOfType(n).pipe(Pn(1))}waitForStatus(n){return this.eventsOfType("STATUS").pipe($t(e=>e.nonce===n),Pn(1),he(e=>{if(!e.status)throw new Error(e.error)})).toPromise()}get isEnabled(){return!!this.serviceWorker}}let Nle=(()=>{class t{constructor(e){if(this.sw=e,this.subscriptionChanges=new Fe,!e.isEnabled)return this.messages=vc,this.notificationClicks=vc,void(this.subscription=vc);this.messages=this.sw.eventsOfType("PUSH").pipe(he(r=>r.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(he(r=>r.data)),this.pushManager=this.sw.registration.pipe(he(r=>r.pushManager));const i=this.pushManager.pipe(ri(r=>r.getSubscription()));this.subscription=zo(i,this.subscriptionChanges)}get isEnabled(){return this.sw.isEnabled}requestSubscription(e){if(!this.sw.isEnabled)return Promise.reject(new Error(sm));const i={userVisibleOnly:!0};let r=this.decodeBase64(e.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),o=new Uint8Array(new ArrayBuffer(r.length));for(let s=0;s<r.length;s++)o[s]=r.charCodeAt(s);return i.applicationServerKey=o,this.pushManager.pipe(ri(s=>s.subscribe(i)),Pn(1)).toPromise().then(s=>(this.subscriptionChanges.next(s),s))}unsubscribe(){return this.sw.isEnabled?this.subscription.pipe(Pn(1),ri(i=>{if(null===i)throw new Error("Not subscribed to push notifications.");return i.unsubscribe().then(r=>{if(!r)throw new Error("Unsubscribe failed!");this.subscriptionChanges.next(null)})})).toPromise():Promise.reject(new Error(sm))}decodeBase64(e){return atob(e)}}return t.\u0275fac=function(e){return new(e||t)(P(Xv))},t.\u0275prov=B({token:t,factory:t.\u0275fac}),t})(),MF=(()=>{class t{constructor(e){if(this.sw=e,!e.isEnabled)return this.available=vc,this.activated=vc,void(this.unrecoverable=vc);this.available=this.sw.eventsOfType("UPDATE_AVAILABLE"),this.activated=this.sw.eventsOfType("UPDATE_ACTIVATED"),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}get isEnabled(){return this.sw.isEnabled}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(sm));const e=this.sw.generateNonce();return this.sw.postMessageWithStatus("CHECK_FOR_UPDATES",{statusNonce:e},e)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(sm));const e=this.sw.generateNonce();return this.sw.postMessageWithStatus("ACTIVATE_UPDATE",{statusNonce:e},e)}}return t.\u0275fac=function(e){return new(e||t)(P(Xv))},t.\u0275prov=B({token:t,factory:t.\u0275fac}),t})();class Ww{}const IF=new tt("NGSW_REGISTER_SCRIPT");function Fle(t,n,e,i){return()=>{if(!cf(i)||!("serviceWorker"in navigator)||!1===e.enabled)return;let o;if(navigator.serviceWorker.addEventListener("controllerchange",()=>{null!==navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({action:"INITIALIZE"})}),"function"==typeof e.registrationStrategy)o=e.registrationStrategy();else{const[l,...c]=(e.registrationStrategy||"registerWhenStable:30000").split(":");switch(l){case"registerImmediately":o=Ee(null);break;case"registerWithDelay":o=PF(+c[0]||0);break;case"registerWhenStable":o=c[0]?zo(AF(t),PF(+c[0])):AF(t);break;default:throw new Error(`Unknown ServiceWorker registration strategy: ${e.registrationStrategy}`)}}t.get(it).runOutsideAngular(()=>o.pipe(Pn(1)).subscribe(()=>navigator.serviceWorker.register(n,{scope:e.scope}).catch(l=>console.error("Service worker registration failed with:",l))))}}function PF(t){return Ee(null).pipe(m0(t))}function AF(t){return t.get(ts).isStable.pipe($t(e=>e))}function Rle(t,n){return new Xv(cf(n)&&!1!==t.enabled?navigator.serviceWorker:void 0)}let Lle=(()=>{class t{static register(e,i={}){return{ngModule:t,providers:[{provide:IF,useValue:e},{provide:Ww,useValue:i},{provide:Xv,useFactory:Rle,deps:[Ww,Os]},{provide:Jd,useFactory:Fle,deps:[Mt,IF,Ww,Os],multi:!0}]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=et({type:t}),t.\u0275inj=Te({providers:[Nle,MF]}),t})();const $le=["backgroundImage"];function Ule(t,n){if(1&t&&(Vt(0),O(1,"div",2,3),Bt()),2&t){const e=n.ngIf;g(1),to("background-image","linear-gradient(0deg,rgba(19,21,25,.5), rgba(19,21,25,.5)), url("+e+")")}}function Vle(t,n){1&t&&O(0,"div",2,3),2&t&&to("background-image","linear-gradient(0deg,rgba(19,21,25,.5), rgba(19,21,25,.5)), url("+b().constants.defaultBackgroundImageUrl+")")}let Ble=(()=>{class t{constructor(e){this.globalURLParamService=e,this.constants=$,this.currentCampaign=new ln(null)}ngOnInit(){this.urlParamSubscription=this.globalURLParamService.currentCampaign.pipe($t(e=>!this.isCurrentCampaign(e))).subscribe(e=>this.updateCurrentCampaignBackground(e)),this.backgroundImageUrl$=this.currentCampaign.pipe(he(e=>null==e?null:`${$.wikiUrl}${null==e?void 0:e.background_image}`))}isCurrentCampaign(e){var i;return(null===(i=this.currentCampaign.getValue())||void 0===i?void 0:i.name)===(null==e?void 0:e.name)}updateCurrentCampaignBackground(e){return Et(this,void 0,void 0,function*(){yield this.animateBackgroundImage("fadeOut"),this.currentCampaign.next(e),yield this.animateBackgroundImage("fadeIn")})}animateBackgroundImage(e){return Et(this,void 0,void 0,function*(){if(null!=this.backgroundImage)return hi(this.backgroundImage.nativeElement,e)})}ngOnDestroy(){this.urlParamSubscription&&this.urlParamSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(C($e))},t.\u0275cmp=Y({type:t,selectors:[["app-background-image"]],viewQuery:function(e,i){if(1&e&&pt($le,5),2&e){let r;ye(r=be())&&(i.backgroundImage=r.first)}},decls:4,vars:4,consts:[[4,"ngIf","ngIfElse"],["defaultBackground",""],["id","bg"],["backgroundImage",""]],template:function(e,i){if(1&e&&(S(0,Ule,3,2,"ng-container",0),Lt(1,"async"),S(2,Vle,2,2,"ng-template",null,1,se)),2&e){const r=ie(3);v("ngIf",yn(1,2,i.backgroundImageUrl$))("ngIfElse",r)}},directives:[le],pipes:[fc],styles:[""]}),t})();const zle=new class extends ml{}(class extends BP{constructor(n,e){super(n,e),this.scheduler=n,this.work=e}schedule(n,e=0){return e>0?super.schedule(n,e):(this.delay=e,this.state=n,this.scheduler.flush(this),this)}execute(n,e){return e>0||this.closed?super.execute(n,e):this._execute(n,e)}requestAsyncId(n,e,i=0){return null!==i&&i>0||null===i&&this.delay>0?super.requestAsyncId(n,e,i):n.flush(this)}});class ey extends vt{constructor(n,e,i=0){super(n),this.scheduler=e,this.delay=i}static dispatch(n){const{notification:e,destination:i}=n;e.observe(i),this.unsubscribe()}scheduleMessage(n){this.destination.add(this.scheduler.schedule(ey.dispatch,this.delay,new Wle(n,this.destination)))}_next(n){this.scheduleMessage(oo.createNext(n))}_error(n){this.scheduleMessage(oo.createError(n)),this.unsubscribe()}_complete(){this.scheduleMessage(oo.createComplete()),this.unsubscribe()}}class Wle{constructor(n,e){this.notification=n,this.destination=e}}class qle extends Fe{constructor(n=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,i){super(),this.scheduler=i,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=n<1?1:n,this._windowTime=e<1?1:e,e===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(n){if(!this.isStopped){const e=this._events;e.push(n),e.length>this._bufferSize&&e.shift()}super.next(n)}nextTimeWindow(n){this.isStopped||(this._events.push(new Qle(this._getNow(),n)),this._trimBufferThenGetEvents()),super.next(n)}_subscribe(n){const e=this._infiniteTimeWindow,i=e?this._events:this._trimBufferThenGetEvents(),r=this.scheduler,o=i.length;let s;if(this.closed)throw new un;if(this.isStopped||this.hasError?s=gt.EMPTY:(this.observers.push(n),s=new wn(this,n)),r&&n.add(n=new ey(n,r)),e)for(let l=0;l<o&&!n.closed;l++)n.next(i[l]);else for(let l=0;l<o&&!n.closed;l++)n.next(i[l].value);return this.hasError?n.error(this.thrownError):this.isStopped&&n.complete(),s}_getNow(){return(this.scheduler||zle).now()}_trimBufferThenGetEvents(){const n=this._getNow(),e=this._bufferSize,i=this._windowTime,r=this._events,o=r.length;let s=0;for(;s<o&&!(n-r[s].time<i);)s++;return o>e&&(s=Math.max(s,o-e)),s>0&&r.splice(0,s),r}}class Qle{constructor(n,e){this.time=n,this.value=e}}function Yle(t,n){if(1&t&&(p(0,"div",3),O(1,"div",4),f()),2&t){const e=b(2);g(1),to("width",e.diameter)("height",e.diameter)}}function Jle(t,n){if(1&t&&O(0,"div",5),2&t){const e=b().ngIf,i=b();to("background",i.color)("height",i.height)("width",e+"%")}}function Xle(t,n){if(1&t&&(Vt(0),S(1,Yle,2,4,"div",1),S(2,Jle,1,6,"div",2),Bt()),2&t){const e=b();g(1),v("ngIf",e.includeSpinner),g(1),v("ngIf",e.includeBar)}}class ece{constructor(n={}){this.config=n,this.state={action:null,value:0,initialValue:0},this.requests=null,this.disabled=!1,this.stream$=new Fe,this._value$=null,this.timer$=e=>{let i=Ee(e);switch(e.action){case"start":case"increment":case"set":"start"===e.action&&0===this.config.latencyThreshold&&0===e.value&&(e.value=e.initialValue),this.requests>0&&(i=F_(this.config.latencyThreshold,250).pipe(he(r=>Object.assign(Object.assign({},e),{value:0===r?this.state.value||e.initialValue:this._increment()}))));break;case"complete":case"stop":i=0===e.value?Ee(Object.assign({},e)):F_(0,500).pipe(Pn(2),he(r=>({value:0===r?100:0})))}return i.pipe(he(r=>Object.assign(Object.assign({},r),{action:"set"})),Zn(r=>this.next(r,!1)))},this.config=Object.assign({latencyThreshold:0},n)}get value$(){return this._value$?this._value$:this._value$=this.stream$.asObservable().pipe(gu(this.state),ri(n=>this.timer$(n)),function(t,n,e){let i;return i=t&&"object"==typeof t?t:{bufferSize:t,windowTime:n,refCount:!1,scheduler:e},r=>r.lift(function({bufferSize:t=Number.POSITIVE_INFINITY,windowTime:n=Number.POSITIVE_INFINITY,refCount:e,scheduler:i}){let r,s,o=0,l=!1,c=!1;return function(m){let _;o++,!r||l?(l=!1,r=new qle(t,n,i),_=r.subscribe(this),s=m.subscribe({next(w){r.next(w)},error(w){l=!0,r.error(w)},complete(){c=!0,s=void 0,r.complete()}}),c&&(s=void 0)):_=r.subscribe(this),this.add(()=>{o--,_.unsubscribe(),_=void 0,s&&!c&&e&&0===o&&(s.unsubscribe(),s=void 0,r=void 0)})}}(i))}(),he(n=>n.value))}start(n=2){this.disabled||this.next({action:"start",initialValue:n})}stop(){this.next({action:"stop"})}complete(){this.next({action:"complete"})}disable(){this.disabled=!0}set(n){this.next({action:"set",value:n})}increment(n=0){this.next({action:"increment",value:n})}next(n,e=!0){switch(n.action){case"start":this.requests=(this.requests||0)+1;break;case"complete":if(this.requests=(this.requests||1)-1,this.requests>0)return;break;case"stop":this.requests=0;break;case"increment":n.value=this._increment(n.value)}this.state=Object.assign(Object.assign(Object.assign({},this.state),{action:null}),n),e&&this.stream$.next(this.state)}_increment(n=0){const e=this.state.value;return e>=99&&(n=0),0===n&&(n=e>=0&&e<25?3*Math.random()+3:e>=25&&e<65?3*Math.random():e>=65&&e<90?2*Math.random():e>=90&&e<99?.5:0),n+e}}const qw=new tt("LOADING_BAR_CONFIG");let ty=(()=>{let t=class{constructor(e,i={},r){this.platformId=e,this.config=i,this.zone=r,this.refs={},this.streams$=new Fe,this.value$=this.streams$.asObservable().pipe(gu(null),ri(()=>R_(...Object.keys(this.refs).map(o=>this.refs[o].value$))),function(t){return t?n=>new _t(e=>n.subscribe(i=>t.run(()=>e.next(i)),i=>t.run(()=>e.error(i)),()=>t.run(()=>e.complete()))):n=>n}(this.zone),he(o=>Math.max(0,...o)))}get progress$(){return this.value$}start(e=2){this.useRef().start(e)}set(e){this.useRef().set(e)}increment(e){this.useRef().increment(e)}complete(){this.useRef().complete()}stop(){this.useRef().stop()}useRef(e="default"){return this.refs[e]||(this.refs[e]=new ece(this.config),this.streams$.next(),cf(this.platformId)||this.refs[e].disable()),this.refs[e]}};return t.\u0275fac=function(e){return new(e||t)(P(Os),P(qw,8),P(it,8))},t.\u0275prov=B({factory:function(){return new t(P(Os),P(qw,8),P(it,8))},token:t,providedIn:"root"}),t=Cn([Nv(0,sc(Os)),Nv(1,fr()),Nv(1,sc(qw)),Nv(2,fr()),Pa("design:paramtypes",[Object,Object,it])],t),t})(),nce=(()=>{let t=class{constructor(e){this.loader=e,this.includeSpinner=!0,this.includeBar=!0,this.fixed=!0,this.color="#29d"}get value$(){return this.ref?this.loader.useRef(this.ref).value$:this.loader.value$}};return t.\u0275fac=function(e){return new(e||t)(C(ty))},t.\u0275cmp=Y({type:t,selectors:[["ngx-loading-bar"]],hostVars:3,hostBindings:function(e,i){2&e&&(Ct("fixed",i.fixed),to("color",i.color))},inputs:{includeSpinner:"includeSpinner",includeBar:"includeBar",fixed:"fixed",color:"color",value:"value",ref:"ref",height:"height",diameter:"diameter"},decls:2,vars:3,consts:[[4,"ngIf"],["class","ngx-spinner",4,"ngIf"],["class","ngx-bar",3,"background","height","width",4,"ngIf"],[1,"ngx-spinner"],[1,"ngx-spinner-icon"],[1,"ngx-bar"]],template:function(e,i){1&e&&(S(0,Xle,3,2,"ng-container",0),Lt(1,"async")),2&e&&v("ngIf",null!=i.value?i.value:yn(1,1,i.value$))},directives:[le],pipes:[fc],styles:["[_nghost-%COMP%]{position:relative;display:block;pointer-events:none}[_nghost-%COMP%]   .ngx-spinner[_ngcontent-%COMP%]{transition:350ms linear;display:block;position:absolute;top:5px;left:0}[_nghost-%COMP%]   .ngx-spinner[_ngcontent-%COMP%]   .ngx-spinner-icon[_ngcontent-%COMP%]{width:14px;height:14px;border:2px solid transparent;border-top-color:inherit;border-left-color:inherit;border-radius:50%;-webkit-animation:.4s linear infinite loading-bar-spinner;animation:.4s linear infinite loading-bar-spinner}[_nghost-%COMP%]   .ngx-bar[_ngcontent-%COMP%]{transition:width 350ms;position:absolute;top:0;left:0;width:100%;height:2px;border-bottom-right-radius:1px;border-top-right-radius:1px}[dir=rtl]   [_nghost-%COMP%]   .ngx-bar[_ngcontent-%COMP%]{right:0;left:unset}[fixed=true][_nghost-%COMP%]{z-index:10002}[fixed=true][_nghost-%COMP%]   .ngx-bar[_ngcontent-%COMP%]{position:fixed}[fixed=true][_nghost-%COMP%]   .ngx-spinner[_ngcontent-%COMP%]{position:fixed;top:10px;left:10px}[dir=rtl]   [fixed=true][_nghost-%COMP%]   .ngx-spinner[_ngcontent-%COMP%]{right:10px;left:unset}@-webkit-keyframes loading-bar-spinner{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}@keyframes loading-bar-spinner{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}"],changeDetection:0}),Cn([hc(),Pa("design:type",Object)],t.prototype,"includeSpinner",void 0),Cn([hc(),Pa("design:type",Object)],t.prototype,"includeBar",void 0),Cn([hc(),Pa("design:type",Object)],t.prototype,"fixed",void 0),Cn([hc(),Pa("design:type",Object)],t.prototype,"color",void 0),Cn([hc(),Pa("design:type",Number)],t.prototype,"value",void 0),Cn([hc(),Pa("design:type",String)],t.prototype,"ref",void 0),Cn([hc(),Pa("design:type",String)],t.prototype,"height",void 0),Cn([hc(),Pa("design:type",String)],t.prototype,"diameter",void 0),t=Cn([Pa("design:paramtypes",[ty])],t),t})(),OF=(()=>{let t=class{};return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=et({type:t}),t.\u0275inj=Te({imports:[[bi]]}),t})();const Qw=function(t){return{"disabled-entry":t}};function ice(t,n){if(1&t&&(Vt(0),p(1,"li",19),p(2,"a",20),O(3,"i",21),p(4,"span",18),k(5," Campaign Admin "),f(),f(),f(),Bt()),2&t){const e=b().ngIf,i=b();g(1),v("ngClass",ht(2,Qw,null==e)),g(1),v("routerLink",i.campaignAdminUrl)}}function rce(t,n){if(1&t&&(Vt(0),p(1,"li",19),p(2,"a",20),O(3,"i"),p(4,"span",18),k(5),f(),f(),f(),Bt()),2&t){const e=n.$implicit,i=b().ngIf;g(1),v("ngClass",ht(5,Qw,null==i)),g(1),v("routerLink",e.route),g(1),Ao(e.iconClass),g(2),Le(e.title)}}const oce=function(t,n){return{"swiped-right":t,"swiped-left":n}};function sce(t,n){if(1&t){const e=G();p(0,"nav",2),A("swipeleft",function(){return!0}),p(1,"ul",3),p(2,"li",4),p(3,"a",5),O(4,"span",6),f(),f(),p(5,"li",7),p(6,"a",8),p(7,"h3",9),O(8,"img",10),Lt(9,"async"),p(10,"span",11),k(11),f(),f(),f(),f(),f(),S(12,ice,6,4,"ng-container",12),S(13,rce,6,7,"ng-container",13),p(14,"ul",14),p(15,"li",15),p(16,"a",16),A("click",function(){return h(e),b().logout()}),O(17,"i",17),p(18,"span",18),k(19,"Logout"),f(),f(),f(),f(),f()}if(2&t){const e=n.ngIf,i=b();v("ngClass",Bn(11,oce,i.showSidebar.getValue(),!i.showSidebar.getValue())),g(3),v("routerLink",i.campaignOverviewUrl),g(2),v("title",e.name+"-Home")("ngClass",ht(14,Qw,null==e)),g(1),v("routerLink",i.homeUrl),g(2),v("src",yn(9,9,i.campaignIcon$),li),g(3),Le(e.name),g(1),v("ngIf",i.showAdminSection),g(1),v("ngForOf",i.sidebarEntries)}}function ace(t,n){if(1&t&&(p(0,"ul",3),p(1,"li",22),p(2,"a",8),p(3,"h3",9),O(4,"span",23),p(5,"span",11),k(6," To campaigns"),f(),f(),f(),f(),f()),2&t){const e=b();g(2),v("routerLink",e.campaignOverviewUrl)}}let lce=(()=>{class t{constructor(e,i,r,o){this.routingService=e,this.tokenService=i,this.globalUrlParams=r,this.cdRef=o,this.constants=$,this.showUserSection=!1,this.showAdminSection=!1}ngOnInit(){this.sidebarEntries=this.constants.articleTypeMetaData.filter(e=>e.showInSidebar),this.sidebarEntries.sort((e,i)=>e.title>i.title?1:-1),this.currentCampaign$=this.globalUrlParams.currentCampaign,this.campaignRole$=this.currentCampaign$.pipe(he(e=>this.tokenService.getCampaignRole(null==e?void 0:e.name))),this.campaignIcon$=this.currentCampaign$.pipe(he(e=>null==e?null:`${$.wikiUrl}${e.icon}`)),this.parameterSubscription=this.currentCampaign$.pipe($t(e=>null!=e)).subscribe(e=>{this.updateSidebarEntries(e.name),this.cdRef.detectChanges()})}refreshGlobalData(){return Et(this,void 0,void 0,function*(){yield this.globalUrlParams.autoUpdateCampaignSet(),this.routingService.routeToPath("campaign-overview")})}updateSidebarEntries(e){this.updateSidebarEntryRoutes(e),this.updateGeneralRouterLinks(e),this.showAdminSection=this.tokenService.isCampaignAdmin(e)||this.tokenService.isAdmin()||this.tokenService.isSuperUser()}updateGeneralRouterLinks(e){this.campaignOverviewUrl=this.routingService.getRoutePath("campaign-overview"),this.homeUrl=this.routingService.getRoutePath("home2",{campaign:e}),this.campaignAdminUrl=this.routingService.getRoutePath("campaign-admin",{campaign:e})}updateSidebarEntryRoutes(e){this.sidebarEntries.map(i=>{const o=this.routingService.getRoutePath(i.route,{campaign:e});return i.route=o,i})}logout(){this.tokenService.hasTokens()&&(this.tokenService.invalidateJWTToken(),this.tokenService.removeJWTTokenFromLocalStorage()),this.routingService.routeToPath("login-state",{state:"logged-out"})}ngOnDestroy(){this.parameterSubscription&&this.parameterSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(C(ce),C(ke),C($e),C(ci))},t.\u0275cmp=Y({type:t,selectors:[["app-sidebar"]],inputs:{showSidebar:"showSidebar"},decls:4,vars:3,consts:[["id","sidebar",3,"ngClass","swipeleft",4,"ngIf"],["nonCampaignBrand",""],["id","sidebar",3,"ngClass","swipeleft"],[1,"brand-line","d-flex"],["title","campaign-overview",1,"entry"],[1,"on-hover-show","flex","overview-link",3,"routerLink"],[1,"fas","fa-chevron-left","fa-2x"],[1,"flex-1","entry","brand-entry",3,"title","ngClass"],[1,"pl-0",3,"routerLink"],["id","brand",1,"d-flex","align-items-center","justify-content-center"],["alt","...",1,"campaign-icon",3,"src"],[1,"ml-2","on-hover-show"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"footer","d-flex","mt-auto"],[1,"entry","w-100","align-self-end"],[1,"d-flex","align-items-center","entry","pointer",3,"click"],[1,"fas","fa-sign-out-alt"],[1,"on-hover-show"],[1,"entry",3,"ngClass"],[1,"d-flex","align-items-center","entry",3,"routerLink"],[1,"fas","fa-hammer"],[1,"flex-1"],[1,"fas","fa-chevron-left"]],template:function(e,i){1&e&&(S(0,sce,20,16,"nav",0),Lt(1,"async"),S(2,ace,7,1,"ng-template",null,1,se)),2&e&&v("ngIf",yn(1,1,i.currentCampaign$))},directives:[le,Yt,Ht,je],pipes:[fc],styles:["#sidebar[_ngcontent-%COMP%]{height:100vh;width:4rem;transition:width .2s ease-in-out;position:fixed;background-color:var(--dark);z-index:1005;overflow-y:auto;overflow-x:hidden;display:flex;flex-shrink:0;flex-direction:column;border-right-color:#fff;border-right-width:1px;border-right-style:outset}@media (hover: hover) and (pointer: fine){#sidebar[_ngcontent-%COMP%]:hover{width:20rem}li.entry[_ngcontent-%COMP%]:hover, li.entry[_ngcontent-%COMP%]:focus   a[_ngcontent-%COMP%], li.entry[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:focus{background-color:var(--secondary);color:var(--link-blue)}#sidebar[_ngcontent-%COMP%]:hover   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{justify-content:unset;padding-left:1rem}#sidebar[_ngcontent-%COMP%]:hover   .on-hover-show[_ngcontent-%COMP%]{display:block;animation:fadeInFromNone .3s ease-out}#sidebar[_ngcontent-%COMP%]:hover   .on-hover-show.overview-link.flex[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}#sidebar[_ngcontent-%COMP%]:hover   .on-hover-show.flex[_ngcontent-%COMP%]{display:flex;align-items:center}}#sidebar.swiped-right[_ngcontent-%COMP%]{display:block;width:20rem;touch-action:pan-y!important;animation:slideInLeft .2s ease-out}.swiped-left[_ngcontent-%COMP%]{display:unset;width:4rem;animation:slideInLeft .2s ease-out;animation-direction:reverse}ul[_ngcontent-%COMP%]{list-style-type:none;margin:0;padding:0}li[_ngcontent-%COMP%]{list-style-type:none;height:3rem;font-weight:bold;font-size:large}#user-section[_ngcontent-%COMP%]   #user-links[_ngcontent-%COMP%]{padding-left:1.5rem;display:none}#sidebar.swiped-right[_ngcontent-%COMP%]   #user-section.active[_ngcontent-%COMP%], #sidebar[_ngcontent-%COMP%]:hover   #user-section.active[_ngcontent-%COMP%]{height:auto}#user-section.active[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{height:3rem}#user-section.active[_ngcontent-%COMP%]   #user-links[_ngcontent-%COMP%]{display:block}#sidebar[_ngcontent-%COMP%]:hover   #user-links[_ngcontent-%COMP%]   .on-hover-show[_ngcontent-%COMP%], #sidebar[_ngcontent-%COMP%]:hover   #user-links.on-hover-show[_ngcontent-%COMP%]{animation:fadeInFromNone .2s ease-in}li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{height:100%;display:flex;align-items:center;border-bottom:none}li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{text-align:center;width:3rem}li.entry.footer[_ngcontent-%COMP%]{align-self:flex-end}#brand[_ngcontent-%COMP%]{height:3rem;font-size:1.5rem;margin:auto!important}#sidebar[_ngcontent-%COMP%]:hover   #brand[_ngcontent-%COMP%]{margin-left:.5rem!important}#brand[_ngcontent-%COMP%]   .campaign-icon[_ngcontent-%COMP%]{height:32px;width:32px}.brand-entry[_ngcontent-%COMP%]:hover, .brand-entry[_ngcontent-%COMP%]:hover   h3#brand[_ngcontent-%COMP%]{color:var(--link-blue)}#sidebar[_ngcontent-%COMP%]:hover   .brand-entry[_ngcontent-%COMP%]   h3#brand[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], #sidebar[_ngcontent-%COMP%]:hover   .brand-entry[_ngcontent-%COMP%]   h3#brand[_ngcontent-%COMP%], #sidebar[_ngcontent-%COMP%]:hover   .brand-entry[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis}.brand-line[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{border-bottom:none!important}.brand-line[_ngcontent-%COMP%]   .overview-link[_ngcontent-%COMP%]{margin-top:auto;margin-bottom:auto;padding-right:1rem;border-right:solid 2px white}.brand-line[_ngcontent-%COMP%]   .overview-link[_ngcontent-%COMP%]:hover{background-color:transparent;color:var(--link-blue)}#sidebar[_ngcontent-%COMP%]   .on-hover-show[_ngcontent-%COMP%]{display:none}#sidebar.swiped-right[_ngcontent-%COMP%]   .on-hover-show[_ngcontent-%COMP%]{display:block;animation:fadeInFromNone .3s ease-out}#sidebar.swiped-right[_ngcontent-%COMP%]   .on-hover-show.overview-link.flex[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.disabled-entry[_ngcontent-%COMP%]{pointer-events:none;opacity:.3;color:unset;background-color:unset}@media (max-width: 576px){#brand[_ngcontent-%COMP%]{padding-left:.5rem}#sidebar[_ngcontent-%COMP%]{display:none;width:0vw}#sidebar.swiped-right[_ngcontent-%COMP%]{display:block;width:75vw;animation:slideInLeft-mobile .2s ease-out}#sidebar.swiped-left[_ngcontent-%COMP%]{display:none;width:0vw;animation:slideInLeft-mobile .2s ease-out;animation-direction:reverse}}@media (max-width: 326px){#brand[_ngcontent-%COMP%]{font-size:1.5rem}}@keyframes fadeInFromNone{0%{display:none;opacity:0}60%{display:block;opacity:0}to{display:block;opacity:1}}@keyframes slideInLeft-mobile{0%{display:none;width:0rem}1%{display:block;width:0rem}to{display:block;width:75vw}}@keyframes slideInLeft{0%{display:none;width:0rem}1%{display:block;width:0rem}to{display:block;width:20rem}}"]}),t})();const cce=["sidebar"];function uce(t,n){if(1&t){const e=G();p(0,"div",6),p(1,"strong",7),k(2," This project does not support Safari. The application should still work generally, but no tests are performed for it. Given the pain that it is to develop for Apple hardware without owning apple devices, and given that I have no interest in owning said devices and don't see myself paying for emulation services to be able to get it to run either, I ask for your understanding. "),O(3,"br"),k(4," - Philipp D\xf6rner aka the Developer "),f(),p(5,"i",8),A("click",function(){return h(e),b().showSafariWarning=!1}),f(),f()}}const dce=function(t,n){return{"swiped-right":t,"swiped-left":n}};function hce(t,n){if(1&t&&(p(0,"div",9),O(1,"app-sidebar",10,11),f()),2&t){const e=b();v("ngClass",Bn(2,dce,e.showSidebarSubject.getValue(),!e.showSidebarSubject.getValue())),g(1),v("showSidebar",e.showSidebarSubject)}}class Fu{constructor(n,e,i,r,o){this.routingService=n,this.serviceWorkerUpdate=e,this.warnings=i,this.router=r,this.tokenService=o,this.title="AldruneWiki",this.outsideClickSubject=new Fe,this.allowSidebar=!1,this.showSidebarSubject=new ln(!1),this.constants=$}ngOnInit(){this.tokenService.hasValidJWTToken()||(this.tokenService.removeJWTTokenFromLocalStorage(),this.routingService.routeToPath("login")),this.serviceWorkerSubscription=this.serviceWorkerUpdate.available.subscribe(n=>{this.warnings.showAlert("There's an update to this webpage, that you've just downloaded in the background! We now need to reload the page to move it into cache..."),location.reload()}),this.routingSubscription=this.router.events.pipe($t(this.isPageReroutingEndEvent)).subscribe(n=>this.onPageReroutingEnd(n))}isPageReroutingEndEvent(n){return n instanceof Tu}onPageReroutingEnd(n){this.updateSidebarAllowanceBasedOnRoute(),this.showSidebarSubject.next(!1)}updateSidebarAllowanceBasedOnRoute(){const n=this.router.url===this.routingService.getRoutePath("campaign-overview"),e=this.router.url.includes("/wiki2/login"),i=this.router.url===this.routingService.getRoutePath("admin"),r=this.router.url===this.routingService.getRoutePath("config-tables");this.allowSidebar=!(n||e||i||r)}isUserWithSafariBrowser(){const n=navigator.userAgent.toLowerCase(),e=n.indexOf("safari")>-1,i=n.indexOf("chrome")>-1,r=n.indexOf("firefox")>-1,o=n.indexOf("opera")>-1;return e&&!i&&!r&&!o}isIOSUser(){return"iOS"===this.getOS()}getOS(){var n=window.navigator.userAgent,e=window.navigator.platform,s=null;return-1!==["Macintosh","MacIntel","MacPPC","Mac68K"].indexOf(e)?s="Mac OS":-1!==["iPhone","iPad","iPod"].indexOf(e)?s="iOS":-1!==["Win32","Win64","Windows","WinCE"].indexOf(e)?s="Windows":/Android/.test(n)?s="Android":!s&&/Linux/.test(e)&&(s="Linux"),s}onSwipeLeft(n){this.showSidebarSubject.next(!1)}onSwipeRight(n){this.showSidebarSubject.next(!0)}ngOnDestroy(){this.routingSubscription&&this.routingSubscription.unsubscribe(),this.routingTransitionSubscription&&this.routingTransitionSubscription.unsubscribe(),this.serviceWorkerSubscription&&this.serviceWorkerSubscription.unsubscribe(),this.parameterSubscription&&this.parameterSubscription.unsubscribe()}}Fu.\u0275fac=function(n){return new(n||Fu)(C(ce),C(MF),C(Ze),C(Ft),C(ke))},Fu.\u0275cmp=Y({type:Fu,selectors:[["app-root"]],viewQuery:function(n,e){if(1&n&&pt(cce,5),2&n){let i;ye(i=be())&&(e.sidebarRef=i.first)}},decls:8,vars:4,consts:[["class","alert alert-warning alert-dismissable fade show mb-0 d-flex align-items-center","role","alert",4,"ngIf"],[1,"d-flex","base-page",3,"swipeleft","swiperight"],["class","sidebar-wrapper",3,"ngClass",4,"ngIf"],["id","background-div",1,"d-flex","justify-content-center","w-100"],["routerOutlet",""],[3,"color","includeSpinner"],["role","alert",1,"alert","alert-warning","alert-dismissable","fade","show","mb-0","d-flex","align-items-center"],[1,"flex-1"],[1,"fa","fa-2x","fa-times","pointer","text-color-black",3,"click"],[1,"sidebar-wrapper",3,"ngClass"],[3,"showSidebar"],["sidebar",""]],template:function(n,e){1&n&&(S(0,uce,6,0,"div",0),p(1,"div",1),A("swipeleft",function(r){return e.onSwipeLeft(r)})("swiperight",function(r){return e.onSwipeRight(r)}),S(2,hce,3,5,"div",2),p(3,"div",3),O(4,"router-outlet",null,4),f(),O(6,"app-background-image"),f(),O(7,"ngx-loading-bar",5)),2&n&&(v("ngIf",e.showSafariWarning),g(2),v("ngIf",e.allowSidebar),g(5),v("color","hsl(228, 100%, 76%)")("includeSpinner",!1))},directives:[le,Ew,Ble,nce,Yt,lce],styles:[".sidebar-wrapper[_ngcontent-%COMP%]{width:4rem;min-width:4rem;height:100vh}router-outlet[_ngcontent-%COMP%] +   *{width:100%;display:flex;justify-content:center}.transition-spinner[_ngcontent-%COMP%]{position:absolute;width:5rem;height:5rem;margin:auto;top:40%;left:50%;background-color:#000;border-radius:3rem;z-index:1006}@media (max-width: 576px){.sidebar-wrapper[_ngcontent-%COMP%]{width:0rem;min-width:0rem;display:none}.sidebar-wrapper.swiped-left[_ngcontent-%COMP%]{width:0rem;display:none}.sidebar-wrapper.swiped-right[_ngcontent-%COMP%]{width:.01rem;display:block}}.base-page[_ngcontent-%COMP%]{touch-action:pan-y!important;-webkit-user-select:unset!important;user-select:unset!important}"]}),Cn([xF],Fu.prototype,"onSwipeLeft",null),Cn([xF],Fu.prototype,"onSwipeRight",null);let Zw=(()=>{class t{transform(e,i){return e instanceof _t||(e=Ee(e)),e.pipe(he(r=>this.toOptions(r,i||{})))}toOptions(e,i){const r=[],o={},s=i.templateOptions||{};return s._flatOptions=!0,e.map(l=>{this.getGroupProp(l,s)?(s._flatOptions=!1,o[this.getGroupProp(l,s)]||(o[this.getGroupProp(l,s)]=[],r.push({label:this.getGroupProp(l,s),group:o[this.getGroupProp(l,s)]})),o[this.getGroupProp(l,s)].push(this.toOption(l,s))):r.push(this.toOption(l,s))}),r}toOption(e,i){return{label:this.getLabelProp(e,i),value:this.getValueProp(e,i),disabled:this.getDisabledProp(e,i)||!1}}getLabelProp(e,i){return"function"==typeof i.labelProp?i.labelProp(e):this.shouldUseLegacyOption(e,i)?(console.warn("NgxFormly: legacy select option '{key, value}' is deprecated since v5.5, use '{value, label}' instead."),e.value):e[i.labelProp||"label"]}getValueProp(e,i){return"function"==typeof i.valueProp?i.valueProp(e):this.shouldUseLegacyOption(e,i)?e.key:e[i.valueProp||"value"]}getDisabledProp(e,i){return"function"==typeof i.disabledProp?i.disabledProp(e):e[i.disabledProp||"disabled"]}getGroupProp(e,i){return"function"==typeof i.groupProp?i.groupProp(e):e[i.groupProp||"group"]}shouldUseLegacyOption(e,i){return!i.valueProp&&!i.labelProp&&null!=e&&"object"==typeof e&&"key"in e&&"value"in e}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=Ve({name:"formlySelectOptions",type:t,pure:!0}),t})(),pce=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=et({type:t}),t.\u0275inj=Te({}),t})();function fce(t,n){1&t&&O(0,"i",8),2&t&&v("ngClass",b(2).to.addonLeft.class)}function mce(t,n){if(1&t&&(p(0,"span",9),k(1),f()),2&t){const e=b(2);g(1),Le(e.to.addonLeft.text)}}const NF=function(t){return{cursor:t}};function gce(t,n){if(1&t){const e=G();p(0,"div",5),A("click",function(r){return h(e),b().addonLeftClick(r)}),S(1,fce,1,1,"i",6),S(2,mce,2,1,"span",7),f()}if(2&t){const e=b();v("ngStyle",ht(3,NF,e.to.addonLeft.onClick?"pointer":"inherit")),g(1),v("ngIf",e.to.addonLeft.class),g(1),v("ngIf",e.to.addonLeft.text)}}function _ce(t,n){1&t&&O(0,"i",8),2&t&&v("ngClass",b(2).to.addonRight.class)}function vce(t,n){if(1&t&&(p(0,"span",9),k(1),f()),2&t){const e=b(2);g(1),Le(e.to.addonRight.text)}}function yce(t,n){if(1&t){const e=G();p(0,"div",10),A("click",function(r){return h(e),b().addonRightClick(r)}),S(1,_ce,1,1,"i",6),S(2,vce,2,1,"span",7),f()}if(2&t){const e=b();v("ngStyle",ht(3,NF,e.to.addonRight.onClick?"pointer":"inherit")),g(1),v("ngIf",e.to.addonRight.class),g(1),v("ngIf",e.to.addonRight.text)}}let bce=(()=>{class t extends Ow{addonRightClick(e){this.to.addonRight.onClick&&this.to.addonRight.onClick(this.to,this,e)}addonLeftClick(e){this.to.addonLeft.onClick&&this.to.addonLeft.onClick(this.to,this,e)}}return t.\u0275fac=function(){let n;return function(i){return(n||(n=tn(t)))(i||t)}}(),t.\u0275cmp=Y({type:t,selectors:[["formly-wrapper-addons"]],features:[oe],decls:6,vars:2,consts:[[1,"input-group"],["class","input-group-prepend",3,"ngStyle","click",4,"ngIf"],[1,"input-addons"],["fieldComponent",""],["class","input-group-append",3,"ngStyle","click",4,"ngIf"],[1,"input-group-prepend",3,"ngStyle","click"],["class","input-group-text",3,"ngClass",4,"ngIf"],["class","input-group-text",4,"ngIf"],[1,"input-group-text",3,"ngClass"],[1,"input-group-text"],[1,"input-group-append",3,"ngStyle","click"]],template:function(e,i){1&e&&(p(0,"div",0),S(1,gce,3,5,"div",1),p(2,"div",2),Zi(3,null,3),f(),S(5,yce,3,5,"div",4),f()),2&e&&(g(1),v("ngIf",i.to.addonLeft),g(4),v("ngIf",i.to.addonRight))},directives:[le,mI,Yt],styles:["[_nghost-%COMP%]     .input-group>:not(:first-child) .form-control{border-top-left-radius:0;border-bottom-left-radius:0}[_nghost-%COMP%]     .input-group>:not(:last-child) .form-control{border-top-right-radius:0;border-bottom-right-radius:0}[_nghost-%COMP%]     .input-group>.input-addons{position:relative;flex:1 1 auto;width:1%;margin-bottom:0}"]}),t})();function Cce(t){!t.templateOptions||t.wrappers&&-1!==t.wrappers.indexOf("addons")||(t.templateOptions.addonLeft||t.templateOptions.addonRight)&&(t.wrappers=[...t.wrappers||[],"addons"])}let wce=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=et({type:t}),t.\u0275inj=Te({imports:[[bi,F0,Nw.forChild({wrappers:[{name:"addons",component:bce}],extensions:[{name:"addons",extension:{postPopulate:Cce}}]})]]}),t})();function Sce(t,n){1&t&&(p(0,"span",5),k(1,"*"),f())}function Tce(t,n){if(1&t&&(p(0,"label",3),k(1),S(2,Sce,2,0,"span",4),f()),2&t){const e=b();Oe("form-check-label",-1===e.to.formCheck.indexOf("custom"))("custom-control-label",0===e.to.formCheck.indexOf("custom")),v("for",e.id),g(1),Z(" ",e.to.label," "),g(1),v("ngIf",e.to.required&&!0!==e.to.hideRequiredMarker)}}const FF=function(t,n,e,i,r,o){return{"form-check":t,"form-check-inline":n,"custom-control":e,"custom-checkbox":i,"custom-control-inline":r,"custom-switch":o}};function Ece(t,n){if(1&t){const e=G();p(0,"div",1),p(1,"input",2),A("change",function(r){const s=h(e).$implicit;return b().onChange(s.value,r.target.checked)}),f(),p(2,"label",3),k(3),f(),f()}if(2&t){const e=n.$implicit,i=n.index,r=b();v("ngClass",M1(15,FF,-1===r.to.formCheck.indexOf("custom"),"inline"===r.to.formCheck,0===r.to.formCheck.indexOf("custom"),"custom"===r.to.formCheck||"custom-inline"===r.to.formCheck,"custom-inline"===r.to.formCheck,"custom-switch"===r.to.formCheck)),g(1),Oe("form-check-input",-1===r.to.formCheck.indexOf("custom"))("custom-control-input",0===r.to.formCheck.indexOf("custom")),v("id",r.id+"_"+i)("value",e.value)("checked",r.isChecked(e))("formlyAttributes",r.field),g(1),Oe("form-check-label",-1===r.to.formCheck.indexOf("custom"))("custom-control-label",0===r.to.formCheck.indexOf("custom")),v("for",r.id+"_"+i),g(1),Z(" ",e.label," ")}}function kce(t,n){if(1&t&&O(0,"input",2),2&t){const e=b();Oe("is-invalid",e.showError),v("type",e.type)("formControl",e.formControl)("formlyAttributes",e.field)}}function Dce(t,n){if(1&t&&O(0,"input",3),2&t){const e=b();Oe("is-invalid",e.showError),v("formControl",e.formControl)("formlyAttributes",e.field)}}const xce=function(t,n,e,i){return{"form-check":t,"form-check-inline":n,"custom-control custom-radio":e,"custom-control-inline":i}};function Mce(t,n){if(1&t&&(p(0,"div",1),O(1,"input",2),p(2,"label",3),k(3),f(),f()),2&t){const e=n.$implicit,i=n.index,r=b();v("ngClass",x1(20,xce,-1===r.to.formCheck.indexOf("custom"),"inline"===r.to.formCheck,0===r.to.formCheck.indexOf("custom"),"custom-inline"===r.to.formCheck)),g(1),Oe("form-check-input",-1===r.to.formCheck.indexOf("custom"))("custom-control-input",0===r.to.formCheck.indexOf("custom"))("is-invalid",r.showError),v("id",r.id+"_"+i)("name",r.field.name||r.id)("value",e.value)("formControl",r.formControl)("formlyAttributes",r.field),Ct("value",e.value)("disabled",!(!e.disabled&&!r.formControl.disabled)||null),g(1),Oe("form-check-label",-1===r.to.formCheck.indexOf("custom"))("custom-control-label",0===r.to.formCheck.indexOf("custom")),v("for",r.id+"_"+i),g(1),Z(" ",e.label," ")}}function Ice(t,n){if(1&t&&(Vt(0),p(1,"option",7),k(2),f(),Bt()),2&t){const e=n.$implicit;g(1),v("ngValue",e.value)("disabled",e.disabled),g(1),Le(e.label)}}function Pce(t,n){if(1&t&&(Vt(0),S(1,Ice,3,3,"ng-container",6),Bt()),2&t){const e=b().ngIf;g(1),v("ngForOf",e)}}function Ace(t,n){if(1&t&&(p(0,"option",7),k(1),f()),2&t){const e=b().$implicit;v("ngValue",e.value)("disabled",e.disabled),g(1),Le(e.label)}}function Oce(t,n){if(1&t&&(p(0,"option",7),k(1),f()),2&t){const e=n.$implicit;v("ngValue",e.value)("disabled",e.disabled),g(1),Z(" ",e.label," ")}}function Nce(t,n){if(1&t&&(p(0,"optgroup",10),S(1,Oce,2,3,"option",11),f()),2&t){const e=b().$implicit;v("label",e.label),g(1),v("ngForOf",e.group)}}function Fce(t,n){if(1&t&&(Vt(0),S(1,Ace,2,3,"option",8),S(2,Nce,2,2,"ng-template",null,9,se),Bt()),2&t){const e=n.$implicit,i=ie(3);g(1),v("ngIf",!e.group)("ngIfElse",i)}}function Rce(t,n){1&t&&S(0,Fce,4,2,"ng-container",6),2&t&&v("ngForOf",b().ngIf)}function Lce(t,n){if(1&t&&(Vt(0),S(1,Pce,2,1,"ng-container",4),S(2,Rce,1,1,"ng-template",null,5,se),Bt()),2&t){const e=ie(3),i=b(2);g(1),v("ngIf",i.to._flatOptions)("ngIfElse",e)}}function $ce(t,n){if(1&t&&(p(0,"select",2),S(1,Lce,4,2,"ng-container",3),Lt(2,"async"),Lt(3,"formlySelectOptions"),f()),2&t){const e=b();Oe("custom-select",e.to.customSelect)("is-invalid",e.showError),v("formControl",e.formControl)("compareWith",e.to.compareWith)("formlyAttributes",e.field),g(1),v("ngIf",yn(2,8,ka(3,10,e.to.options,e.field)))}}function Uce(t,n){if(1&t&&(p(0,"option",14),k(1),f()),2&t){const e=b(2);v("ngValue",null),g(1),Le(e.to.placeholder)}}function Vce(t,n){if(1&t&&(Vt(0),p(1,"option",7),k(2),f(),Bt()),2&t){const e=n.$implicit;g(1),v("ngValue",e.value)("disabled",e.disabled),g(1),Le(e.label)}}function Bce(t,n){if(1&t&&(Vt(0),S(1,Vce,3,3,"ng-container",6),Bt()),2&t){const e=b().ngIf;g(1),v("ngForOf",e)}}function Hce(t,n){if(1&t&&(p(0,"option",7),k(1),f()),2&t){const e=b().$implicit;v("ngValue",e.value)("disabled",e.disabled),g(1),Le(e.label)}}function jce(t,n){if(1&t&&(p(0,"option",7),k(1),f()),2&t){const e=n.$implicit;v("ngValue",e.value)("disabled",e.disabled),g(1),Z(" ",e.label," ")}}function zce(t,n){if(1&t&&(p(0,"optgroup",10),S(1,jce,2,3,"option",11),f()),2&t){const e=b().$implicit;v("label",e.label),g(1),v("ngForOf",e.group)}}function Gce(t,n){if(1&t&&(Vt(0),S(1,Hce,2,3,"option",8),S(2,zce,2,2,"ng-template",null,9,se),Bt()),2&t){const e=n.$implicit,i=ie(3);g(1),v("ngIf",!e.group)("ngIfElse",i)}}function Wce(t,n){1&t&&S(0,Gce,4,2,"ng-container",6),2&t&&v("ngForOf",b().ngIf)}function qce(t,n){if(1&t&&(Vt(0),S(1,Bce,2,1,"ng-container",4),S(2,Wce,1,1,"ng-template",null,5,se),Bt()),2&t){const e=ie(3),i=b(2);g(1),v("ngIf",i.to._flatOptions)("ngIfElse",e)}}function Qce(t,n){if(1&t&&(p(0,"select",12),S(1,Uce,2,2,"option",13),S(2,qce,4,2,"ng-container",3),Lt(3,"async"),Lt(4,"formlySelectOptions"),f()),2&t){const e=b();Oe("custom-select",e.to.customSelect)("is-invalid",e.showError),v("formControl",e.formControl)("compareWith",e.to.compareWith)("formlyAttributes",e.field),g(1),v("ngIf",e.to.placeholder),g(1),v("ngIf",yn(3,9,ka(4,11,e.to.options,e.field)))}}function Zce(t,n){1&t&&(p(0,"span",6),k(1,"*"),f())}function Kce(t,n){if(1&t&&(p(0,"label"),k(1),S(2,Zce,2,0,"span",5),f()),2&t){const e=b();Ct("for",e.id),g(1),Z(" ",e.to.label," "),g(1),v("ngIf",e.to.required&&!0!==e.to.hideRequiredMarker)}}function Yce(t,n){}function Jce(t,n){if(1&t&&(p(0,"div",7),O(1,"formly-validation-message",8),f()),2&t){const e=b();to("display","block"),g(1),v("field",e.field)}}function Xce(t,n){if(1&t&&(p(0,"small",9),k(1),f()),2&t){const e=b();g(1),Le(e.to.description)}}let RF=(()=>{class t extends ao{constructor(){super(...arguments),this.defaultOptions={templateOptions:{indeterminate:!0,hideLabel:!0,formCheck:"custom"}}}}return t.\u0275fac=function(){let n;return function(i){return(n||(n=tn(t)))(i||t)}}(),t.\u0275cmp=Y({type:t,selectors:[["formly-field-checkbox"]],features:[oe],decls:3,vars:20,consts:[[3,"ngClass"],["type","checkbox",3,"indeterminate","formControl","formlyAttributes"],[3,"for","form-check-label","custom-control-label",4,"ngIf"],[3,"for"],["aria-hidden","true",4,"ngIf"],["aria-hidden","true"]],template:function(e,i){1&e&&(p(0,"div",0),O(1,"input",1),S(2,Tce,3,7,"label",2),f()),2&e&&(v("ngClass",M1(13,FF,-1===i.to.formCheck.indexOf("custom"),"inline"===i.to.formCheck,0===i.to.formCheck.indexOf("custom"),"custom"===i.to.formCheck||"custom-inline"===i.to.formCheck,"custom-inline"===i.to.formCheck,"custom-switch"===i.to.formCheck)),g(1),Oe("is-invalid",i.showError)("form-check-input",-1===i.to.formCheck.indexOf("custom"))("position-static","nolabel"===i.to.formCheck)("custom-control-input",0===i.to.formCheck.indexOf("custom")),v("indeterminate",i.to.indeterminate&&null===i.formControl.value)("formControl",i.formControl)("formlyAttributes",i.field),g(1),v("ngIf","nolabel"!==i.to.formCheck))},directives:[Yt,_0,Si,Vs,Tl,le],encapsulation:2}),t})(),LF=(()=>{class t extends ao{constructor(){super(...arguments),this.defaultOptions={templateOptions:{options:[],formCheck:"custom"}}}onChange(e,i){this.formControl.patchValue("array"===this.to.type?i?[...this.formControl.value||[],e]:[...this.formControl.value||[]].filter(r=>r!==e):Object.assign({},this.formControl.value,{[e]:i})),this.formControl.markAsTouched()}isChecked(e){const i=this.formControl.value;return i&&("array"===this.to.type?-1!==i.indexOf(e.value):i[e.value])}}return t.\u0275fac=function(){let n;return function(i){return(n||(n=tn(t)))(i||t)}}(),t.\u0275cmp=Y({type:t,selectors:[["formly-field-multicheckbox"]],features:[oe],decls:4,vars:6,consts:[[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],["type","checkbox",3,"id","value","checked","formlyAttributes","change"],[3,"for"]],template:function(e,i){1&e&&(p(0,"div"),S(1,Ece,4,22,"div",0),Lt(2,"async"),Lt(3,"formlySelectOptions"),f()),2&e&&(g(1),v("ngForOf",yn(2,1,ka(3,3,i.to.options,i.field))))},directives:[je,Yt,Tl],pipes:[fc,Zw],encapsulation:2}),t})(),$F=(()=>{class t extends ao{get type(){return this.to.type||"text"}}return t.\u0275fac=function(){let n;return function(i){return(n||(n=tn(t)))(i||t)}}(),t.\u0275cmp=Y({type:t,selectors:[["formly-field-input"]],features:[oe],decls:3,vars:2,consts:[["class","form-control",3,"type","formControl","formlyAttributes","is-invalid",4,"ngIf","ngIfElse"],["numberTmp",""],[1,"form-control",3,"type","formControl","formlyAttributes"],["type","number",1,"form-control",3,"formControl","formlyAttributes"]],template:function(e,i){if(1&e&&(S(0,kce,1,5,"input",0),S(1,Dce,1,4,"ng-template",null,1,se)),2&e){const r=ie(2);v("ngIf","number"!==i.type)("ngIfElse",r)}},directives:[le,_l,Si,Vs,Tl,M0],encapsulation:2}),t})(),UF=(()=>{class t extends ao{constructor(){super(...arguments),this.defaultOptions={templateOptions:{options:[],formCheck:"custom"}}}}return t.\u0275fac=function(){let n;return function(i){return(n||(n=tn(t)))(i||t)}}(),t.\u0275cmp=Y({type:t,selectors:[["formly-field-radio"]],features:[oe],decls:4,vars:6,consts:[[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],["type","radio",3,"id","name","value","formControl","formlyAttributes"],[3,"for"]],template:function(e,i){1&e&&(p(0,"div"),S(1,Mce,4,25,"div",0),Lt(2,"async"),Lt(3,"formlySelectOptions"),f()),2&e&&(g(1),v("ngForOf",yn(2,1,ka(3,3,i.to.options,i.field))))},directives:[je,Yt,I0,_l,Si,Vs,Tl],pipes:[fc,Zw],encapsulation:2}),t})(),VF=(()=>{class t extends ao{constructor(){super(...arguments),this.defaultOptions={templateOptions:{cols:1,rows:1}}}}return t.\u0275fac=function(){let n;return function(i){return(n||(n=tn(t)))(i||t)}}(),t.\u0275cmp=Y({type:t,selectors:[["formly-field-textarea"]],features:[oe],decls:2,vars:6,consts:[[1,"form-control",3,"formControl","cols","rows","formlyAttributes"]],template:function(e,i){1&e&&(p(0,"textarea",0),k(1,"    "),f()),2&e&&(Oe("is-invalid",i.showError),v("formControl",i.formControl)("cols",i.to.cols)("rows",i.to.rows)("formlyAttributes",i.field))},directives:[_l,Si,Vs,Tl],encapsulation:2}),t})();const eue={types:[{name:"input",component:$F,wrappers:["form-field"]},{name:"checkbox",component:RF,wrappers:["form-field"]},{name:"radio",component:UF,wrappers:["form-field"]},{name:"select",component:(()=>{class t extends ao{constructor(e){super(),this.ngZone=e,this.defaultOptions={templateOptions:{options:[],compareWith:(i,r)=>i===r}}}set selectAccessor(e){if(!e)return;const i=e.writeValue.bind(e);null===e._getOptionId(e.value)&&i(e.value),e.writeValue=r=>{const o=e._idCounter;i(r),null===r&&this.ngZone.onStable.asObservable().pipe(Pn(1)).subscribe(()=>{o!==e._idCounter&&null===e._getOptionId(r)&&-1!==e._elementRef.nativeElement.selectedIndex&&i(r)})}}}return t.\u0275fac=function(e){return new(e||t)(C(it))},t.\u0275cmp=Y({type:t,selectors:[["formly-field-select"]],viewQuery:function(e,i){if(1&e&&pt(Ro,5),2&e){let r;ye(r=be())&&(i.selectAccessor=r.first)}},features:[oe],decls:3,vars:2,consts:[["class","form-control","multiple","",3,"custom-select","formControl","compareWith","is-invalid","formlyAttributes",4,"ngIf","ngIfElse"],["singleSelect",""],["multiple","",1,"form-control",3,"formControl","compareWith","formlyAttributes"],[4,"ngIf"],[4,"ngIf","ngIfElse"],["grouplist",""],[4,"ngFor","ngForOf"],[3,"ngValue","disabled"],[3,"ngValue","disabled",4,"ngIf","ngIfElse"],["optgroup",""],[3,"label"],[3,"ngValue","disabled",4,"ngFor","ngForOf"],[1,"form-control",3,"formControl","compareWith","formlyAttributes"],[3,"ngValue",4,"ngIf"],[3,"ngValue"]],template:function(e,i){if(1&e&&(S(0,$ce,4,13,"select",0),S(1,Qce,5,14,"ng-template",null,1,se)),2&e){const r=ie(2);v("ngIf",i.to.multiple)("ngIfElse",r)}},directives:[le,Z_,Si,Vs,Tl,je,as,ls,Ro],pipes:[fc,Zw],encapsulation:2}),t})(),wrappers:["form-field"]},{name:"textarea",component:VF,wrappers:["form-field"]},{name:"multicheckbox",component:LF,wrappers:["form-field"]}],wrappers:[{name:"form-field",component:(()=>{class t extends Ow{}return t.\u0275fac=function(){let n;return function(i){return(n||(n=tn(t)))(i||t)}}(),t.\u0275cmp=Y({type:t,selectors:[["formly-wrapper-form-field"]],features:[oe],decls:6,vars:5,consts:[[1,"form-group"],[4,"ngIf"],["fieldComponent",""],["class","invalid-feedback",3,"display",4,"ngIf"],["class","form-text text-muted",4,"ngIf"],["aria-hidden","true",4,"ngIf"],["aria-hidden","true"],[1,"invalid-feedback"],[3,"field"],[1,"form-text","text-muted"]],template:function(e,i){1&e&&(p(0,"div",0),S(1,Kce,3,3,"label",1),S(2,Yce,0,0,"ng-template",null,2,se),S(4,Jce,2,3,"div",3),S(5,Xce,2,1,"small",4),f()),2&e&&(Oe("has-error",i.showError),g(1),v("ngIf",i.to.label&&!0!==i.to.hideLabel),g(3),v("ngIf",i.showError),g(1),v("ngIf",i.to.description))},directives:[le,tX],encapsulation:2}),t})()}]};let tue=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=et({type:t}),t.\u0275inj=Te({imports:[[bi,F0,pce,Nw.forChild(eue),wce]]}),t})(),nue=(()=>{class t{constructor(){this.onChange=e=>{},this.onTouched=()=>{}}writeValue(e){}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=te({type:t,selectors:[["input","type","file"]],hostBindings:function(e,i){1&e&&A("change",function(o){return i.onChange(o.target.files)})("blur",function(){return i.onTouched()})},features:[At([{provide:wi,useExisting:t,multi:!0}])]}),t})(),iue=(()=>{class t extends ao{}return t.\u0275fac=function(){let n;return function(i){return(n||(n=tn(t)))(i||t)}}(),t.\u0275cmp=Y({type:t,selectors:[["formly-field-file"]],features:[oe],decls:2,vars:2,consts:[[1,"form-group"],["type","file",3,"formControl","formlyAttributes"]],template:function(e,i){1&e&&(p(0,"div",0),O(1,"input",1),f()),2&e&&(g(1),v("formControl",i.formControl)("formlyAttributes",i.field))},directives:[nue,_l,Si,Vs,Tl],encapsulation:2}),t})(),rue=(()=>{class t extends ao{constructor(){super(...arguments),this.constants=$}}return t.\u0275fac=function(){let n;return function(i){return(n||(n=tn(t)))(i||t)}}(),t.\u0275cmp=Y({type:t,selectors:[["formly-field-tinymce"]],features:[oe],decls:4,vars:5,consts:[[1,"form-group","mb-4"],[3,"for"],[3,"init","id","formControl"]],template:function(e,i){1&e&&(p(0,"div",0),p(1,"label",1),k(2),f(),O(3,"editor",2),f()),2&e&&(g(1),xe("for",i.to.name),g(1),Le(i.to.label),g(1),xe("id",i.to.name),v("init",i.constants.tinyMCESettings)("formControl",i.formControl))},directives:[X0,Si,Vs],styles:[""]}),t})();const oue=[{provide:iw,useClass:(()=>{class t{constructor(e,i,r){this.refreshTokenService=e,this.tokenService=i,this.routingService=r,this.apiNonTokenURLEndings=["/token","/token/refresh","/mail/reset"]}intercept(e,i){if(this.isApiUrlRequiringJWTToken(e.url)){if(!this.tokenService.hasValidJWTToken())return this.handleByRoutingToLogin(e,i);const r=ke.getAccessToken();return this.refreshTokenService.tokenNeedsRefresh(r)?this.handleByRefreshingAccessToken(e,i):this.refreshTokenService.hasToWaitForRefresh(r)?this.handleByWaitingForRefresh(e,i):(e=this.addTokenToRequest(r.token,e),i.handle(e))}return i.handle(e)}handleByRefreshingAccessToken(e,i){return this.refreshTokenService.refreshUserData().pipe(ri(r=>(e=this.addTokenToRequest(r.accessToken.token,e),i.handle(e))),Lo(r=>401===r.status?(console.log("Error while refreshing access token"),console.log(r),this.routingService.routeToPath("login-state",{state:"token-expired"}),ss):(this.routingService.routeToErrorPage(r),ss)))}handleByWaitingForRefresh(e,i){return this.refreshTokenService.waitForAccessTokenRefresh().pipe(ri(r=>(e=this.addTokenToRequest(r,e),i.handle(e))),Lo(r=>401===r.status?(console.log("Error while waiting for access token refresh"),console.log(r),this.routingService.routeToPath("login-state",{state:"???"}),ss):(console.log("Error during token refresh. Uncertain what error, but status "+r.status),console.log(r),this.routingService.routeToErrorPage(r.status),ss)))}handleByRoutingToLogin(e,i){return this.routingService.routeToPath("login-state",{state:"no-token"}),ss}isApiUrlRequiringJWTToken(e){const i=e.startsWith($.wikiApiUrl);let r=!0;for(let o of this.apiNonTokenURLEndings)if(e.endsWith(o)){r=!1;break}return i&&r}addTokenToRequest(e,i){const r=(new er).set("Authorization",`Bearer ${e}`);return i.clone({headers:r})}}return t.\u0275fac=function(e){return new(e||t)(P(jw),P(ke),P(ce))},t.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),multi:!0}];function sue(t,n){1&t&&(p(0,"span"),k(1,"*"),f())}function aue(t,n){if(1&t&&(p(0,"div",9),k(1),f()),2&t){const e=n.$implicit;g(1),Z(" ",e.day," ")}}const lue=function(t){return{"d-none":t}};let cue=(()=>{class t extends ph{constructor(){super(...arguments),this.DELIMITER="-"}fromModel(e){if(e){let i=e.split(this.DELIMITER);return{day:parseInt(i[2],10),month:parseInt(i[1],10),year:parseInt(i[0],10)}}return null}toModel(e){if(null==e)return"";const i=`${e.day}`.padStart(2,"0"),r=`${e.month}`.padStart(2,"0");return`${`${e.year}`.padStart(4,"0")}${this.DELIMITER}${r}${this.DELIMITER}${i}`}}return t.\u0275fac=function(){let n;return function(i){return(n||(n=tn(t)))(i||t)}}(),t.\u0275prov=B({token:t,factory:t.\u0275fac}),t})(),uue=(()=>{class t extends sv{constructor(){super(...arguments),this.DELIMITER="/"}parse(e){if(null==e)return null;let i=e.split(this.DELIMITER);return{day:parseInt(i[2],10),month:parseInt(i[1],10),year:parseInt(i[0],10)}}format(e){if(null==e)return"";const i=`${e.day}`.padStart(2,"0"),r=`${e.month}`.padStart(2,"0");return`${`${e.year}`.padStart(4,"0")}${this.DELIMITER}${r}${this.DELIMITER}${i}`}}return t.\u0275fac=function(){let n;return function(i){return(n||(n=tn(t)))(i||t)}}(),t.\u0275prov=B({token:t,factory:t.\u0275fac}),t})(),due=(()=>{class t extends ao{constructor(e,i){super(),this.ngbCalendar=e,this.dateAdapter=i}get today(){return this.dateAdapter.toModel(this.ngbCalendar.getToday())}}return t.\u0275fac=function(e){return new(e||t)(C(Df),C(ph))},t.\u0275cmp=Y({type:t,selectors:[["app-formly-datepicker"]],features:[At([{provide:ph,useClass:cue},{provide:sv,useClass:uue}]),oe],decls:12,vars:7,consts:[[1,"form-group",3,"ngClass"],["for","datepicker"],[4,"ngIf"],[1,"input-group"],["placeholder","yyyy-mm-dd","name","datepicker","ngbDatepicker","","type","text",1,"form-control",3,"formControl","formlyAttributes"],["datepickerInput","ngbDatepicker"],[1,"input-group-append"],[1,"btn","btn-outline-light","fa","fa-calendar",3,"click"],["customDay",""],[1,"datepicker-day","btn-light"]],template:function(e,i){if(1&e){const r=G();p(0,"div",0),p(1,"label",1),p(2,"strong"),k(3),S(4,sue,2,0,"span",2),f(),f(),p(5,"div",3),O(6,"input",4,5),p(8,"div",6),p(9,"div",7),A("click",function(){return h(r),ie(7).toggle()}),f(),f(),f(),f(),S(10,aue,2,1,"ng-template",null,8,se)}2&e&&(v("ngClass",ht(5,lue,i.to.hidden)),g(3),Z(" ",i.to.label," "),g(1),v("ngIf",i.to.required),g(2),v("formControl",i.formControl)("formlyAttributes",i.field))},directives:[Yt,le,pQ,_l,Si,Vs,Tl],styles:[".input-group[_ngcontent-%COMP%]{position:relative;display:flex;flex-wrap:wrap;align-items:stretch;width:100%}.btn-outline-light[_ngcontent-%COMP%]{border-color:#fff;color:#fff}.btn-outline-light[_ngcontent-%COMP%]:hover{background-color:#fff;color:gray}div.datepicker-day[_ngcontent-%COMP%]{background-color:var(--wiki-background-2);color:#fff;text-align:center;transition:background-color .2s ease-in-out;transition:color .2s ease-in-out}.datepicker-day[_ngcontent-%COMP%]:hover{color:#000;background-color:gray}"]}),t})();function hue(t,n){1&t&&(Vt(0),k(1," Create Session "),Bt())}function pue(t,n){if(1&t&&(Vt(0),k(1),Bt()),2&t){const e=b(2);g(1),Z(" Update ",e.model.name," ")}}function fue(t,n){if(1&t){const e=G();p(0,"div",11),p(1,"form",12),A("submit",function(){h(e);const r=b().$implicit;return b().onSubmit(r)}),O(2,"formly-form",13),p(3,"div",14),A("click",function(){return h(e),b().$implicit.close()}),k(4,"Cancel"),f(),p(5,"button",15),k(6,"Submit"),f(),f(),f()}if(2&t){const e=b(2);g(1),v("formGroup",e.form),g(1),v("form",e.form)("fields",e.fields)("model",e.model)}}function mue(t,n){if(1&t){const e=G();p(0,"div",4),p(1,"h4",5),S(2,hue,2,0,"ng-container",6),S(3,pue,2,1,"ng-container",6),f(),p(4,"div",7),A("click",function(){return h(e).$implicit.dismiss()}),O(5,"span",8),f(),f(),p(6,"div",9),S(7,fue,7,4,"div",10),f()}if(2&t){const e=b();g(2),v("ngIf",e.formState===e.constants.createState),g(1),v("ngIf",e.formState===e.constants.updateState),g(4),v("ngIf",e.model)("ngIfElse",e.loading)}}function gue(t,n){if(1&t){const e=G();p(0,"div",16),A("click",function(){h(e);const r=b(),o=ie(1);return r.open(o)}),f()}2&t&&Is("btn btn-outline-info fa ",b().icon,"")}const _ue=function(t){return{"d-none":t}};function vue(t,n){if(1&t){const e=G();p(0,"div",17),A("click",function(){h(e);const r=b(),o=ie(1);return r.open(o)}),f()}if(2&t){const e=b();Is("btn btn-outline-info fa ",e.icon,""),v("ngClass",ht(4,_ue,!e.model))}}let jF=(()=>{class t{constructor(e,i,r,o){this.modalService=e,this.formlyService=i,this.sessionService=r,this.globalUrlParams=o,this.icon="fa-pencil",this.updateSession=new q,this.createSession=new q,this.form=new Bi({}),this.fields=[this.formlyService.genericCheckbox({key:"is_main_session",defaultValue:!0,label:"Main Session?"}),this.formlyService.genericInput({key:"session_number",label:"Session Number",required:!0}),this.formlyService.genericDatepicker({key:"session_date",label:"Day of the Session",required:!0}),this.formlyService.genericInput({key:"start_day",label:"Start Day",required:!1}),this.formlyService.genericInput({key:"end_day",label:"End Day",required:!1})],this.constants=$}ngOnInit(){return Et(this,void 0,void 0,function*(){this.formState=this.session_pk_subject?$.updateState:$.createState,this.campaign=yield this.globalUrlParams.getCurrentCampaign(),this.onAfterCampaignLoad(this.campaign)})}onAfterCampaignLoad(e){this.formState===$.updateState?this.fetchUserModel():this.formState===$.createState&&this.createModel(e)}fetchUserModel(){this.sessionpk_subscription=this.session_pk_subject.pipe($t(e=>!!e)).subscribe(e=>{this.sessionService.read(e).pipe(re()).subscribe(i=>this.model=i)})}createModel(e){return Et(this,void 0,void 0,function*(){null==this.sessionList&&(this.sessionList=yield this.sessionService.campaignList(this.campaign.name).toPromise());const i=this.sessionList[0];this.model=new Iu,this.model.session_date=this.getNextSessionDate(i),this.model.is_main_session=!0,this.model.session_number=i.session_number+1,this.model.campaign=e.pk})}getNextSessionDate(e){const i=new Date(e.session_date),r=this.addDaysToDate(7,i);return this.dateToYYYMMDDString(r)}addDaysToDate(e,i){const r=864e5*e;return new Date(i.setTime(i.getTime()+r))}dateToYYYMMDDString(e){return e.toISOString().slice(0,10)}onSubmit(e){(this.formState===$.updateState?this.sessionService.update(this.model.pk,this.model):this.sessionService.create(this.model)).pipe(re()).subscribe(o=>{(this.formState===$.updateState?this.updateSession:this.createSession).emit(o),e.close()})}open(e){this.modalService.open(e,{ariaLabelledBy:"modal-basic-title"}).result.then(i=>{},i=>{})}ngOnDestroy(){this.sessionpk_subscription&&this.sessionpk_subscription.unsubscribe(),this.parameterSubscription&&this.parameterSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(C(Z0),C(mn),C(hs),C($e))},t.\u0275cmp=Y({type:t,selectors:[["app-session-update-modal"]],inputs:{session_pk_subject:"session_pk_subject",icon:"icon"},outputs:{updateSession:"updateSession",createSession:"createSession"},decls:5,vars:2,consts:[["content",""],[1,"form-group","mx-2"],["title","Create new Session",3,"class","click",4,"ngIf"],["title","Edit selected Session",3,"class","ngClass","click",4,"ngIf"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],[4,"ngIf"],["aria-label","Close",1,"close",3,"click"],["aria-hidden","true",1,"fa","fa-times","pointer"],[1,"modal-body"],["class","mb-1",4,"ngIf","ngIfElse"],[1,"mb-1"],[3,"formGroup","submit"],[3,"form","fields","model"],[1,"btn","btn-secondary","mr-3",3,"click"],["type","submit",1,"btn","btn-primary"],["title","Create new Session",3,"click"],["title","Edit selected Session",3,"ngClass","click"]],template:function(e,i){1&e&&(S(0,mue,8,4,"ng-template",null,0,se),p(2,"div",1),S(3,gue,1,3,"div",2),S(4,vue,1,6,"div",3),f()),2&e&&(g(3),v("ngIf",i.formState===i.constants.createState),g(1),v("ngIf",i.formState===i.constants.updateState))},directives:[le,Vr,Ur,yl,Eh,Yt],styles:[""]}),t})();function yue(t,n){if(1&t){const e=G();p(0,"div",3),p(1,"h4",4),k(2," Delete Session "),f(),p(3,"div",5),A("click",function(){return h(e).$implicit.dismiss()}),O(4,"span",6),f(),f(),p(5,"div",7),p(6,"div",8),p(7,"div",9),k(8,"Delete This Session?"),f(),p(9,"div",10),A("click",function(){return h(e).$implicit.close()}),k(10,"No"),f(),p(11,"div",11),A("click",function(){const o=h(e).$implicit;return b().onSubmit(o)}),k(12,"Yes"),f(),f(),f()}}const bue=function(t){return{"d-none":t}};let Cue=(()=>{class t{constructor(e,i){this.modalService=e,this.sessionService=i,this.icon="fa-trash",this.deleteSession=new q}ngOnInit(){this.session_pk_subject_subscription=this.session_pk_subject.subscribe(e=>this.sessionPk=e)}open(e){this.modalService.open(e,{ariaLabelledBy:"modal-basic-title"}).result.then(i=>{},i=>{})}onSubmit(e){this.sessionService.delete(this.sessionPk).pipe(re()).subscribe(i=>{this.deleteSession.emit(),e.close()})}ngOnDestroy(){this.session_pk_subject_subscription&&this.session_pk_subject_subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(C(Z0),C(hs))},t.\u0275cmp=Y({type:t,selectors:[["app-session-delete-modal"]],inputs:{session_pk_subject:"session_pk_subject",icon:"icon"},outputs:{deleteSession:"deleteSession"},decls:4,vars:6,consts:[["content",""],[1,"form-group","mx-2"],["title","Delete selected Session",3,"ngClass","click"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["aria-label","Close",1,"close",3,"click"],["aria-hidden","true",1,"fa","fa-times","pointer"],[1,"modal-body"],[1,"mb-1"],[1,"mb-2"],[1,"btn","btn-secondary","mr-3",3,"click"],[1,"btn","btn-danger",3,"click"]],template:function(e,i){if(1&e){const r=G();S(0,yue,13,0,"ng-template",null,0,se),p(2,"div",1),p(3,"div",2),A("click",function(){h(r);const s=ie(1);return i.open(s)}),f(),f()}2&e&&(g(3),Is("btn btn-outline-danger fa ",i.icon,""),v("ngClass",ht(4,bue,!i.sessionPk)))},directives:[Yt],styles:[""]}),t})();function wue(t,n){1&t&&(p(0,"span"),k(1,"*"),f())}function Sue(t,n){if(1&t&&(p(0,"label"),p(1,"strong"),k(2),S(3,wue,2,0,"span",0),f(),f()),2&t){const e=b();g(2),Z(" ",e.to.label," "),g(1),v("ngIf",e.to.required)}}function Tue(t,n){1&t&&(p(0,"div",7),Zi(1,null,8),f())}let Eue=(()=>{class t extends Ow{constructor(e){super(),this.changeDetector=e,this.showField=!0}reinitializeSessionField(){this.showField=!1,this.changeDetector.detectChanges(),this.showField=!0,this.changeDetector.detectChanges()}}return t.\u0275fac=function(e){return new(e||t)(C(ci))},t.\u0275cmp=Y({type:t,selectors:[["app-session-update-wrapper"]],features:[oe],decls:7,vars:6,consts:[[4,"ngIf"],[1,"d-flex"],["class","flex-1",4,"ngIf"],[1,"ml-2","align-self-end","d-flex"],[3,"session_pk_subject","icon","updateSession","createSession"],[3,"session_pk_subject","createSession","updateSession"],[3,"session_pk_subject","deleteSession"],[1,"flex-1"],["fieldComponent",""]],template:function(e,i){1&e&&(S(0,Sue,4,2,"label",0),p(1,"div",1),S(2,Tue,3,0,"div",2),p(3,"div",3),p(4,"app-session-update-modal",4),A("updateSession",function(){return i.reinitializeSessionField()})("createSession",function(){return i.reinitializeSessionField()}),f(),p(5,"app-session-update-modal",5),A("createSession",function(){return i.reinitializeSessionField()})("updateSession",function(){return i.reinitializeSessionField()}),f(),p(6,"app-session-delete-modal",6),A("deleteSession",function(){return i.reinitializeSessionField()}),f(),f(),f()),2&e&&(v("ngIf",null==i.to.additionalProperties?null:i.to.additionalProperties.showWrapperLabel),g(2),v("ngIf",i.showField),g(2),v("session_pk_subject",null)("icon","fa-plus"),g(1),v("session_pk_subject",i.formControl.valueChanges),g(1),v("session_pk_subject",i.formControl.valueChanges))},directives:[le,jF,Cue],styles:[""]}),t})();function kue(t,n){1&t&&(p(0,"span"),k(1,"*"),f())}function Due(t,n){if(1&t&&(p(0,"option",9),k(1),f()),2&t){const e=n.$implicit,i=n.index,r=b();v("ngValue",e[r.to.valueProp])("disabled",r.isOptionDisabledArray[i]),g(1),Z(" ",e[r.to.labelProp]," ")}}function xue(t,n){if(1&t&&(p(0,"div",10),k(1),f()),2&t){const e=b();g(1),Z(" ",e.to.warningMessage," ")}}function Mue(t,n){if(1&t&&(p(0,"div",11),k(1),f()),2&t){const e=b();g(1),Z(" ",e.to.tooltipMessage," ")}}let Iue=(()=>{class t extends ao{constructor(e){super(),this.warnings=e,this.isOptionDisabledArray=[]}ngOnInit(){const e=this.to.options;if(!(e instanceof _t))throw"InvalidSelectOptionsException. You tried to create a FormlySelectDisableComponent - field, but provided an option that wasn't an Observable!";e.pipe(re()).subscribe(r=>{this.allSelectOptions=r,this.determineDisabledStateOfOptions()},r=>this.warnings.showWarning(r))}ngOnChanges(){this.determineDisabledStateOfOptions()}determineDisabledStateOfOptions(){if(null==this.allSelectOptions||null==this.to.disabledExpression)return;const o=this;this.isOptionDisabledArray=this.allSelectOptions.map(s=>o.isDisabledOption(s,o))}isDisabledOption(e,i){if(null==i.allSelectOptions)return;const o=i.to.disabledExpression;return null!=o?o(e,i.to,i.model,i.formControl):void 0}hasInvalidOptionSelected(){if(null==this.allSelectOptions)return!1;const i=this.model.session,r=this.allSelectOptions.find(c=>c.pk===i);return null!=r&&this.isDisabledOption(r,this)}}return t.\u0275fac=function(e){return new(e||t)(C(Ze))},t.\u0275cmp=Y({type:t,selectors:[["app-formly-select-disable"]],features:[oe,St],decls:12,vars:11,consts:[[1,"form-group"],[3,"for"],["placement","top",3,"ngbTooltip"],[1,"fa","fa-info-circle","mx-1"],[4,"ngIf"],[1,"form-control",3,"id","required","formControl","formlyAttributes"],[3,"ngValue","disabled",4,"ngFor","ngForOf"],["class","mywarningmessage",4,"ngIf"],["tooltipContent",""],[3,"ngValue","disabled"],[1,"mywarningmessage"],[1,"alert","alert-info","m-0","p-0"]],template:function(e,i){if(1&e&&(p(0,"div",0),p(1,"label",1),p(2,"strong",2),k(3),O(4,"span",3),S(5,kue,2,0,"span",4),f(),f(),p(6,"select",5),S(7,Due,2,3,"option",6),f(),S(8,xue,2,1,"div",7),f(),S(9,Mue,2,1,"ng-template",null,8,se),k(11)),2&e){const r=ie(10);g(1),Po("for","formly_disable_select_",i.to.label,""),g(1),v("ngbTooltip",r),g(1),Z(" ",i.to.label," "),g(2),v("ngIf",i.to.required),g(1),Po("id","formly_disable_select_",i.to.label,""),xe("required",i.to.required),v("formControl",i.formControl)("formlyAttributes",i.field),g(1),v("ngForOf",i.allSelectOptions),g(1),v("ngIf",i.hasInvalidOptionSelected()),g(3),Z("\n",i.ngOnChanges(),"\n")}},directives:[Of,le,Ro,K_,Si,Vs,Tl,je,as,ls],styles:[".tooltip-inner{width:400px;background-color:#d6eaf8;border-color:#c6e2f5}.mywarningmessage[_ngcontent-%COMP%]{color:var(--lightest-red);font-size:80%}"]}),t})();function Aue(t,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,n)}let Nue=(()=>{let t=class{constructor(e,i){const r=i.useRef("router");e.events.subscribe(o=>{const s=this.getCurrentNavigationState(e);s&&s.ignoreLoadingBar||(o instanceof gv&&r.start(),(o instanceof bO||o instanceof Tu||o instanceof lw)&&r.complete())})}getCurrentNavigationState(e){const i=e.getCurrentNavigation&&e.getCurrentNavigation();return i&&i.extras?i.extras.state:{}}};return t.\u0275fac=function(e){return new(e||t)(P(Ft),P(ty))},t.\u0275mod=et({type:t}),t.\u0275inj=Te({imports:[[Ov,OF],Ov,OF]}),t=function(t,n,e,i){var s,r=arguments.length,o=r<3?n:null===i?i=Object.getOwnPropertyDescriptor(n,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,n,e,i);else for(var l=t.length-1;l>=0;l--)(s=t[l])&&(o=(r<3?s(o):r>3?s(n,e,o):s(n,e))||o);return r>3&&o&&Object.defineProperty(n,e,o),o}([Aue("design:paramtypes",[Ft,ty])],t),t})(),Fue=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=et({type:t,bootstrap:[Fu]}),t.\u0275inj=Te({providers:[{provide:oO,useValue:"tinymce/tinymce.min.js"},oue,Ae,om,Hw,{provide:m_,useClass:AI}],imports:[[PC,Ple,wZ,N0,hZ,RZ,F0,Nw.forRoot({types:[{name:"file",component:iue,wrappers:["form-field"]},{name:"tinymce",component:rue},{name:"datepicker",component:due},{name:"session-create-edit",component:jF},{name:"formly-select-disable",component:Iue}],wrappers:[{name:"session-update-wrapper",component:Eue}],validationMessages:[qne,Qne,Zne,Kne,Yne,Jne,Xne,eie,QN],validators:[nie,iie,sie,rie,lie,uie,hie,fie,gie]}),tue,bi,Lle.register("ngsw-worker.js",{enabled:true,registrationStrategy:"registerImmediately"}),c7,tG,Nue]]}),t})();function qF(t,n,e,i,r,o,s){try{var l=t[o](s),c=l.value}catch(d){return void e(d)}l.done?n(c):Promise.resolve(c).then(i,r)}function QF(t){return function(){var n=this,e=arguments;return new Promise(function(i,r){var o=t.apply(n,e);function s(c){qF(o,i,r,s,l,"next",c)}function l(c){qF(o,i,r,s,l,"throw",c)}s(void 0)})}}ne(524);let xh,ZF,Mh,YF=!1,iy=!1,Jw=!1,Bo=!1,Xw=null,ry=!1;const Zs="undefined"!=typeof window?window:{},Dn=Zs.document||{head:{}},kt={$flags$:0,$resourcesUrl$:"",jmp:t=>t(),raf:t=>requestAnimationFrame(t),ael:(t,n,e,i)=>t.addEventListener(n,e,i),rel:(t,n,e,i)=>t.removeEventListener(n,e,i),ce:(t,n)=>new CustomEvent(t,n)},Lue=(()=>{let t=!1;try{Dn.addEventListener("e",null,Object.defineProperty({},"passive",{get(){t=!0}}))}catch(n){}return t})(),Uue=(()=>{try{return new CSSStyleSheet,"function"==typeof(new CSSStyleSheet).replace}catch(t){}return!1})(),tS=(t,n,e,i)=>{e&&e.map(([r,o,s])=>{const l=Bue(t,r),c=Vue(n,s),d=Hue(r);kt.ael(l,o,c,d),(n.$rmListeners$=n.$rmListeners$||[]).push(()=>kt.rel(l,o,c,d))})},Vue=(t,n)=>e=>{try{t.$hostElement$[n](e)}catch(i){Ml(i)}},Bue=(t,n)=>4&n?Dn:8&n?Zs:16&n?Dn.body:t,Hue=t=>Lue?{passive:0!=(1&t),capture:0!=(2&t)}:0!=(2&t),nR="http://www.w3.org/1999/xlink",iR=new WeakMap,rS=(t,n,e,i)=>{let r=oS(n,e),o=um.get(r);if(t=11===t.nodeType?t:Dn,o)if("string"==typeof o){let l,s=iR.get(t=t.head||t);s||iR.set(t,s=new Set),s.has(r)||(l=Dn.createElement("style"),l.innerHTML=o,t.insertBefore(l,t.querySelector("link")),s&&s.add(r))}else!t.adoptedStyleSheets.includes(o)&&(t.adoptedStyleSheets=[...t.adoptedStyleSheets,o]);return r},oS=(t,n)=>"sc-"+(n&&32&t.$flags$?t.$tagName$+"-"+n:t.$tagName$),sR={},sS=t=>"object"==(t=typeof t)||"function"===t,z=(t,n,...e)=>{let i=null,r=null,o=null,s=!1,l=!1,c=[];const d=_=>{for(let w=0;w<_.length;w++)i=_[w],Array.isArray(i)?d(i):null!=i&&"boolean"!=typeof i&&((s="function"!=typeof t&&!sS(i))&&(i=String(i)),s&&l?c[c.length-1].$text$+=i:c.push(s?Ih(null,i):i),l=s)};if(d(e),n&&(n.key&&(r=n.key),n.name&&(o=n.name),true)){const _=n.className||n.class;_&&(n.class="object"!=typeof _?_:Object.keys(_).filter(w=>_[w]).join(" "))}if("function"==typeof t)return t(null===n?{}:n,c,Yue);const m=Ih(t,null);return m.$attrs$=n,c.length>0&&(m.$children$=c),m.$key$=r,m.$name$=o,m},Ih=(t,n)=>{const e={$flags$:0,$tag$:t,$text$:n,$elm$:null,$children$:null,$attrs$:null,$key$:null,$name$:null};return e},Ph={},aS=t=>t&&t.$tag$===Ph,Yue={forEach:(t,n)=>t.map(aR).forEach(n),map:(t,n)=>t.map(aR).map(n).map(Jue)},aR=t=>({vattrs:t.$attrs$,vchildren:t.$children$,vkey:t.$key$,vname:t.$name$,vtag:t.$tag$,vtext:t.$text$}),Jue=t=>{if("function"==typeof t.vtag){const e=Object.assign({},t.vattrs);return t.vkey&&(e.key=t.vkey),t.vname&&(e.name=t.vname),z(t.vtag,e,...t.vchildren||[])}const n=Ih(t.vtag,t.vtext);return n.$attrs$=t.vattrs,n.$children$=t.vchildren,n.$key$=t.vkey,n.$name$=t.vname,n},lR=(t,n,e,i,r,o)=>{if(e!==i){let s=OR(t,n),l=n.toLowerCase();if("class"===n){const c=t.classList,d=cR(e),m=cR(i);c.remove(...d.filter(_=>_&&!m.includes(_))),c.add(...m.filter(_=>_&&!d.includes(_)))}else if("style"===n){for(const c in e)(!i||null==i[c])&&(c.includes("-")?t.style.removeProperty(c):t.style[c]="");for(const c in i)(!e||i[c]!==e[c])&&(c.includes("-")?t.style.setProperty(c,i[c]):t.style[c]=i[c])}else if("key"!==n)if("ref"===n)i&&i(t);else if(t.__lookupSetter__(n)||"o"!==n[0]||"n"!==n[1]){{const c=sS(i);if((s||c&&null!==i)&&!r)try{if(t.tagName.includes("-"))t[n]=i;else{let m=null==i?"":i;"list"===n?s=!1:(null==e||t[n]!=m)&&(t[n]=m)}}catch(m){}let d=!1;l!==(l=l.replace(/^xlink\:?/,""))&&(n=l,d=!0),null==i||!1===i?(!1!==i||""===t.getAttribute(n))&&(d?t.removeAttributeNS(nR,n):t.removeAttribute(n)):(!s||4&o||r)&&!c&&(i=!0===i?"":i,d?t.setAttributeNS(nR,n,i):t.setAttribute(n,i))}}else n="-"===n[2]?n.slice(3):OR(Zs,l)?l.slice(2):l[2]+n.slice(3),e&&kt.rel(t,n,e,!1),i&&kt.ael(t,n,i,!1)}},ede=/\s/,cR=t=>t?t.split(ede):[],uR=(t,n,e,i)=>{const r=11===n.$elm$.nodeType&&n.$elm$.host?n.$elm$.host:n.$elm$,o=t&&t.$attrs$||sR,s=n.$attrs$||sR;for(i in o)i in s||lR(r,i,o[i],void 0,e,n.$flags$);for(i in s)lR(r,i,o[i],s[i],e,n.$flags$)},ay=(t,n,e,i)=>{let s,l,c,r=n.$children$[e],o=0;if(!YF&&(Jw=!0,"slot"===r.$tag$&&(xh&&i.classList.add(xh+"-s"),r.$flags$|=r.$children$?2:1)),null!==r.$text$)s=r.$elm$=Dn.createTextNode(r.$text$);else if(1&r.$flags$)s=r.$elm$=Dn.createTextNode("");else{if(!Bo&&(Bo="svg"===r.$tag$),s=r.$elm$=Dn.createElementNS(Bo?"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",2&r.$flags$?"slot-fb":r.$tag$),Bo&&"foreignObject"===r.$tag$&&(Bo=!1),uR(null,r,Bo),(t=>null!=t)(xh)&&s["s-si"]!==xh&&s.classList.add(s["s-si"]=xh),r.$children$)for(o=0;o<r.$children$.length;++o)l=ay(t,r,o,s),l&&s.appendChild(l);"svg"===r.$tag$?Bo=!1:"foreignObject"===s.tagName&&(Bo=!0)}return s["s-hn"]=Mh,3&r.$flags$&&(s["s-sr"]=!0,s["s-cr"]=ZF,s["s-sn"]=r.$name$||"",c=t&&t.$children$&&t.$children$[e],c&&c.$tag$===r.$tag$&&t.$elm$&&lm(t.$elm$,!1)),s},lm=(t,n)=>{kt.$flags$|=1;const e=t.childNodes;for(let i=e.length-1;i>=0;i--){const r=e[i];r["s-hn"]!==Mh&&r["s-ol"]&&(pR(r).insertBefore(r,lS(r)),r["s-ol"].remove(),r["s-ol"]=void 0,Jw=!0),n&&lm(r,n)}kt.$flags$&=-2},dR=(t,n,e,i,r,o)=>{let l,s=t["s-cr"]&&t["s-cr"].parentNode||t;for(s.shadowRoot&&s.tagName===Mh&&(s=s.shadowRoot);r<=o;++r)i[r]&&(l=ay(null,e,r,t),l&&(i[r].$elm$=l,s.insertBefore(l,lS(n))))},hR=(t,n,e,i,r)=>{for(;n<=e;++n)(i=t[n])&&(r=i.$elm$,_R(i),iy=!0,r["s-ol"]?r["s-ol"].remove():lm(r,!0),r.remove())},ly=(t,n)=>t.$tag$===n.$tag$&&("slot"===t.$tag$?t.$name$===n.$name$:t.$key$===n.$key$),lS=t=>t&&t["s-ol"]||t,pR=t=>(t["s-ol"]?t["s-ol"]:t).parentNode,Ah=(t,n)=>{const e=n.$elm$=t.$elm$,i=t.$children$,r=n.$children$,o=n.$tag$,s=n.$text$;let l;null!==s?(l=e["s-cr"])?l.parentNode.textContent=s:t.$text$!==s&&(e.data=s):(Bo="svg"===o||"foreignObject"!==o&&Bo,"slot"===o||uR(t,n,Bo),null!==i&&null!==r?((t,n,e,i)=>{let D,N,r=0,o=0,s=0,l=0,c=n.length-1,d=n[0],m=n[c],_=i.length-1,w=i[0],E=i[_];for(;r<=c&&o<=_;)if(null==d)d=n[++r];else if(null==m)m=n[--c];else if(null==w)w=i[++o];else if(null==E)E=i[--_];else if(ly(d,w))Ah(d,w),d=n[++r],w=i[++o];else if(ly(m,E))Ah(m,E),m=n[--c],E=i[--_];else if(ly(d,E))("slot"===d.$tag$||"slot"===E.$tag$)&&lm(d.$elm$.parentNode,!1),Ah(d,E),t.insertBefore(d.$elm$,m.$elm$.nextSibling),d=n[++r],E=i[--_];else if(ly(m,w))("slot"===d.$tag$||"slot"===E.$tag$)&&lm(m.$elm$.parentNode,!1),Ah(m,w),t.insertBefore(m.$elm$,d.$elm$),m=n[--c],w=i[++o];else{for(s=-1,l=r;l<=c;++l)if(n[l]&&null!==n[l].$key$&&n[l].$key$===w.$key$){s=l;break}s>=0?(N=n[s],N.$tag$!==w.$tag$?D=ay(n&&n[o],e,s,t):(Ah(N,w),n[s]=void 0,D=N.$elm$),w=i[++o]):(D=ay(n&&n[o],e,o,t),w=i[++o]),D&&pR(d.$elm$).insertBefore(D,lS(d.$elm$))}r>c?dR(t,null==i[_+1]?null:i[_+1].$elm$,e,i,o,_):o>_&&hR(n,r,c)})(e,i,n,r):null!==r?(null!==t.$text$&&(e.textContent=""),dR(e,null,n,r,0,r.length-1)):null!==i&&hR(i,0,i.length-1),Bo&&"svg"===o&&(Bo=!1))},fR=t=>{let e,i,r,o,s,l,n=t.childNodes;for(i=0,r=n.length;i<r;i++)if(e=n[i],1===e.nodeType){if(e["s-sr"])for(s=e["s-sn"],e.hidden=!1,o=0;o<r;o++)if(l=n[o].nodeType,n[o]["s-hn"]!==e["s-hn"]||""!==s){if(1===l&&s===n[o].getAttribute("slot")){e.hidden=!0;break}}else if(1===l||3===l&&""!==n[o].textContent.trim()){e.hidden=!0;break}fR(e)}},Ks=[],mR=t=>{let n,e,i,r,o,s,l=0,c=t.childNodes,d=c.length;for(;l<d;l++){if(n=c[l],n["s-sr"]&&(e=n["s-cr"])&&e.parentNode)for(i=e.parentNode.childNodes,r=n["s-sn"],s=i.length-1;s>=0;s--)e=i[s],!e["s-cn"]&&!e["s-nr"]&&e["s-hn"]!==n["s-hn"]&&(gR(e,r)?(o=Ks.find(m=>m.$nodeToRelocate$===e),iy=!0,e["s-sn"]=e["s-sn"]||r,o?o.$slotRefNode$=n:Ks.push({$slotRefNode$:n,$nodeToRelocate$:e}),e["s-sr"]&&Ks.map(m=>{gR(m.$nodeToRelocate$,e["s-sn"])&&(o=Ks.find(_=>_.$nodeToRelocate$===e),o&&!m.$slotRefNode$&&(m.$slotRefNode$=o.$slotRefNode$))})):Ks.some(m=>m.$nodeToRelocate$===e)||Ks.push({$nodeToRelocate$:e}));1===n.nodeType&&mR(n)}},gR=(t,n)=>1===t.nodeType?null===t.getAttribute("slot")&&""===n||t.getAttribute("slot")===n:t["s-sn"]===n||""===n,_R=t=>{t.$attrs$&&t.$attrs$.ref&&t.$attrs$.ref(null),t.$children$&&t.$children$.map(_R)},vR=(t,n)=>{const e=t.$hostElement$,i=t.$cmpMeta$,r=t.$vnode$||Ih(null,null),o=aS(n)?n:z(null,null,n);if(Mh=e.tagName,i.$attrsToReflect$&&(o.$attrs$=o.$attrs$||{},i.$attrsToReflect$.map(([s,l])=>o.$attrs$[l]=e[s])),o.$tag$=null,o.$flags$|=4,t.$vnode$=o,o.$elm$=r.$elm$=e.shadowRoot||e,xh=e["s-sc"],ZF=e["s-cr"],YF=0!=(1&i.$flags$),iy=!1,Ah(r,o),kt.$flags$|=1,Jw){mR(o.$elm$);let s,l,c,d,m,_,w=0;for(;w<Ks.length;w++)s=Ks[w],l=s.$nodeToRelocate$,l["s-ol"]||(c=Dn.createTextNode(""),c["s-nr"]=l,l.parentNode.insertBefore(l["s-ol"]=c,l));for(w=0;w<Ks.length;w++)if(s=Ks[w],l=s.$nodeToRelocate$,s.$slotRefNode$){for(d=s.$slotRefNode$.parentNode,m=s.$slotRefNode$.nextSibling,c=l["s-ol"];c=c.previousSibling;)if(_=c["s-nr"],_&&_["s-sn"]===l["s-sn"]&&d===_.parentNode&&(_=_.nextSibling,!_||!_["s-nr"])){m=_;break}(!m&&d!==l.parentNode||l.nextSibling!==m)&&l!==m&&(!l["s-hn"]&&l["s-ol"]&&(l["s-hn"]=l["s-ol"].parentNode.nodeName),d.insertBefore(l,m))}else 1===l.nodeType&&(l.hidden=!0)}iy&&fR(o.$elm$),kt.$flags$&=-2,Ks.length=0},ae=(t,n,e)=>{const i=t;return{emit:r=>cS(i,n,{bubbles:!!(4&e),composed:!!(2&e),cancelable:!!(1&e),detail:r})}},cS=(t,n,e)=>{const i=kt.ce(n,e);return t.dispatchEvent(i),i},cy=(t,n)=>{t.$flags$|=16;const e=()=>rde(t,n);return lo(e)},rde=(t,n)=>{const e=t.$hostElement$,i=()=>{},r=e;let o;return n?(Oh(e,"componentWillLoad"),o=Ra(r,"componentWillLoad")):(Oh(e,"componentWillUpdate"),o=Ra(r,"componentWillUpdate")),Oh(e,"componentWillRender"),o=wR(o,()=>Ra(r,"componentWillRender")),i(),wR(o,()=>ode(t,r,n))},ode=function(){var t=QF(function*(n,e,i){const r=n.$hostElement$,o=()=>{};i&&(t=>{const n=t.$cmpMeta$,e=t.$hostElement$,i=n.$flags$,r=()=>{},o=rS(e.shadowRoot?e.shadowRoot:e.getRootNode(),n,t.$modeName$);10&i&&(e["s-sc"]=o,e.classList.add(o+"-h"),2&i&&e.classList.add(o+"-s")),r()})(n);const l=()=>{};bR(n,e,r),l(),o(),CR(n)});return function(e,i,r){return t.apply(this,arguments)}}(),bR=(t,n,e)=>{try{Xw=n,n=n.render&&n.render(),t.$flags$&=-17,t.$flags$|=2,vR(t,n)}catch(l){Ml(l,t.$hostElement$)}return Xw=null,null},CR=t=>{const e=t.$hostElement$,i=()=>{},r=e;Ra(r,"componentDidRender"),Oh(e,"componentDidRender"),64&t.$flags$?(Ra(r,"componentDidUpdate"),Oh(e,"componentDidUpdate"),i()):(t.$flags$|=64,Ra(r,"componentDidLoad"),Oh(e,"componentDidLoad"),i())},Ra=(t,n,e)=>{if(t&&t[n])try{return t[n](e)}catch(i){Ml(i)}},wR=(t,n)=>t&&t.then?t.then(n):n(),Oh=(t,n)=>{},pS=(t,n,e)=>{if(n.$members$){t.watchers&&(n.$watchers$=t.watchers);const i=Object.entries(n.$members$),r=t.prototype;i.map(([o,[s]])=>{(31&s||32&s)&&Object.defineProperty(r,o,{get(){return((t,n)=>zr(this).$instanceValues$.get(n))(0,o)},set(l){((t,n,e,i)=>{const r=zr(t),o=t,s=r.$instanceValues$.get(n),l=r.$flags$,c=o;if((e=((t,n)=>null==t||sS(t)?t:4&n?"false"!==t&&(""===t||!!t):2&n?parseFloat(t):1&n?String(t):t)(e,i.$members$[n][0]))!==s&&(r.$instanceValues$.set(n,e),1)){if(i.$watchers$&&128&l){const d=i.$watchers$[n];d&&d.map(m=>{try{c[m](e,s,n)}catch(_){Ml(_,o)}})}if(2==(18&l)){if(c.componentShouldUpdate&&!1===c.componentShouldUpdate(e,s,n))return;cy(r,!1)}}})(this,o,l,n)},configurable:!0,enumerable:!0})});{const o=new Map;r.attributeChangedCallback=function(s,l,c){kt.jmp(()=>{const d=o.get(s);this[d]=(null!==c||"boolean"!=typeof this[d])&&c})},t.observedAttributes=i.filter(([s,l])=>15&l[0]).map(([s,l])=>{const c=l[1]||s;return o.set(c,s),512&l[0]&&n.$attrsToReflect$.push([s,c]),c})}}return t},fS=function(){var t=QF(function*(n,e,i,r,o){if(0==(32&e.$flags$)&&(o=n.constructor,e.$flags$|=160,o.style)){let c=o.style;"string"!=typeof c&&(c=c[e.$modeName$=(t=>FR.map(n=>n(t)).find(n=>!!n))(n)]);const d=oS(i,e.$modeName$);if(!um.has(d)){const m=()=>{};((t,n,e)=>{let i=um.get(t);Uue&&e?(i=i||new CSSStyleSheet,i.replace(n)):i=n,um.set(t,i)})(d,c,!!(1&i.$flags$)),m()}}const l=()=>cy(e,!0);l()});return function(e,i,r,o,s){return t.apply(this,arguments)}}(),ER=t=>{},hde=t=>{const n=t["s-cr"]=Dn.createComment("");n["s-cn"]=!0,t.insertBefore(n,t.firstChild)},ze=(t,n)=>{const e={$flags$:n[0],$tagName$:n[1]};e.$members$=n[2],e.$listeners$=n[3],e.$watchers$=t.$watchers$,e.$attrsToReflect$=[];const i=t.prototype.connectedCallback,r=t.prototype.disconnectedCallback;return Object.assign(t.prototype,{__registerHost(){AR(this,e)},connectedCallback(){(t=>{if(0==(1&kt.$flags$)){const n=zr(t),e=n.$cmpMeta$,i=()=>{};if(1&n.$flags$)tS(t,n,e.$listeners$),ER(n.$lazyInstance$);else{let r;n.$flags$|=1,!r&&12&e.$flags$&&hde(t),fS(t,n,e)}i()}})(this),i&&i.call(this)},disconnectedCallback(){(t=>{if(0==(1&kt.$flags$)){const n=zr(t);n.$rmListeners$&&(n.$rmListeners$.map(i=>i()),n.$rmListeners$=void 0)}})(this),r&&r.call(this)}}),t.is=e.$tagName$,pS(t,e)},lt=t=>{t.attachShadow({mode:"open"})},PR=(t,n)=>n,mS=new WeakMap,zr=t=>mS.get(t),AR=(t,n)=>{const e={$flags$:0,$hostElement$:t,$cmpMeta$:n,$instanceValues$:new Map};return tS(t,e,n.$listeners$),mS.set(t,e)},OR=(t,n)=>n in t,Ml=(t,n)=>(0,console.error)(t,n),um=new Map,FR=[],_S=[],Ru=[],wde=(t,n)=>e=>{t.push(e),ry||(ry=!0,n&&4&kt.$flags$?dm(dy):kt.raf(dy))},RR=t=>{for(let n=0;n<t.length;n++)try{t[n](performance.now())}catch(e){Ml(e)}t.length=0},dy=()=>{RR(_S),RR(Ru),(ry=_S.length>0)&&kt.raf(dy)},dm=t=>Promise.resolve(void 0).then(t),lo=wde(Ru,!0);function xn(t,n,e,i){return t.addEventListener(n,e,i),()=>t.removeEventListener(n,e,i)}const yS=(t,n,e=0,i=0,r=0,o=0)=>{const s=t.getBoundingClientRect(),l=n.getBoundingClientRect();return s.left+e<l.right+r&&s.right+e>l.left+r&&s.top+i<l.bottom+o&&s.bottom+i>l.top+o},Ys=(...t)=>{},Il=t=>null===t,fe=t=>void 0===t,co=t=>Il(t)||fe(t),hm=t=>co(t)?void 0:t.constructor,hy=t=>hm(t)===Object,Pl=t=>hm(t)===Number&&!Number.isNaN(t),Cr=t=>hm(t)===String,bS=t=>hm(t)===Function,py=t=>Array.isArray(t),fy=(t,n)=>Boolean(t&&n&&t instanceof n),my=()=>{let t=Ys,n=Ys;return{promise:new Promise((i,r)=>{t=i,n=r}),resolve:t,reject:n}};function Nh(t,n,e){const i=t[n];t[n]=function(){return e(),i?i.call(t):void 0}}function uo(t,n,e){let i=!1;fe(n)||(Nh(t,"componentWillLoad",()=>{n(),i=!0}),Nh(t,"connectedCallback",()=>{i&&n()})),fe(e)||Nh(t,"disconnectedCallback",()=>{e()})}const $R="vmFindPlayer",La=(t,n=300,e=10)=>{const i=(fy(t,HTMLElement),t),r=my();let o;const s=new CustomEvent($R,{bubbles:!0,composed:!0,detail:l=>{r.resolve(l),o()}});return o=function(t,n,e,i=300,r=10){let o,s=0,l=!1;return function c(){l||(o=setTimeout(()=>{s!==r?(t.dispatchEvent(n),s+=1,c()):null==e||e()},i))}(),()=>{window.clearTimeout(o),l=!0}}(i,s,()=>{r.reject(`Could not find player for ${i.nodeName}`)},n,e),r.promise};var fs=(()=>(function(t){t.Audio="audio",t.Video="video"}(fs||(fs={})),fs))();const UR="vmStateChange",Al=t=>(n,e)=>{const i=(fy(t,HTMLElement),t),r=new CustomEvent(UR,{bubbles:!0,composed:!0,detail:{by:i,prop:n,value:e}});i.dispatchEvent(r)},pm={play:"Play",pause:"Pause",playback:"Playback",scrubber:"Scrubber",scrubberLabel:"{currentTime} of {duration}",played:"Played",duration:"Duration",buffered:"Buffered",close:"Close",currentTime:"Current time",live:"LIVE",volume:"Volume",mute:"Mute",unmute:"Unmute",audio:"Audio",default:"Default",captions:"Captions",subtitlesOrCc:"Subtitles/CC",enableCaptions:"Enable subtitles/captions",disableCaptions:"Disable subtitles/captions",auto:"Auto",fullscreen:"Fullscreen",enterFullscreen:"Enter fullscreen",exitFullscreen:"Exit fullscreen",settings:"Settings",seekForward:"Seek forward",seekBackward:"Seek backward",seekTotal:"Seek total",normal:"Normal",none:"None",playbackRate:"Playback Rate",playbackQuality:"Playback Quality",loop:"Loop",disabled:"Disabled",off:"Off",enabled:"Enabled",pip:"Picture-in-Picture",enterPiP:"Miniplayer",exitPiP:"Expand"},Fh={theme:void 0,paused:!0,playing:!1,duration:-1,currentProvider:void 0,mediaTitle:void 0,currentSrc:void 0,currentPoster:void 0,textTracks:[],currentTextTrack:-1,audioTracks:[],currentAudioTrack:-1,isTextTrackVisible:!0,shouldRenderNativeTextTracks:!0,icons:"vime",currentTime:0,autoplay:!1,ready:!1,playbackReady:!1,loop:!1,muted:!1,buffered:0,playbackRate:1,playbackRates:[1],playbackQuality:void 0,playbackQualities:[],seeking:!1,debug:!1,playbackStarted:!1,playbackEnded:!1,buffering:!1,controls:!1,isControlsActive:!1,volume:50,isFullscreenActive:!1,aspectRatio:"16:9",viewType:void 0,isAudioView:!1,isVideoView:!1,mediaType:void 0,isAudio:!1,isVideo:!1,isMobile:!1,isTouch:!1,isSettingsActive:!1,isLive:!1,isPiPActive:!1,autopause:!0,playsinline:!1,language:"en",languages:["en"],translations:{en:pm},i18n:pm},Dde=new Set(["autoplay","autopause","aspectRatio","controls","theme","debug","paused","currentTime","language","loop","translations","playbackQuality","muted","playbackRate","playsinline","volume","isSettingsActive","isControlsActive","shouldRenderNativeTextTracks"]),VR=t=>Dde.has(t),xde=new Set(["paused","currentTime","duration","buffered","seeking","playing","buffering","playbackReady","textTracks","currentTextTrack","audioTracks","currentAudioTrack","mediaTitle","currentSrc","currentPoster","playbackRate","playbackRates","playbackStarted","playbackEnded","playbackQuality","playbackQualities","mediaType"]),Mde=t=>xde.has(t);var ho=(()=>(function(t){t.Audio="audio",t.Video="video"}(ho||(ho={})),ho))();class zi{constructor(n=[]){this.dispose=n}add(n){this.dispose.push(n)}empty(){this.dispose.forEach(n=>n()),this.dispose=[]}}const CS=Symbol("vmPlayerKey"),gy=Symbol("vmNameKey"),Lu=Symbol("vmRegistryKey"),wS=Symbol("vmRegistrationKey"),HR="vmComponentRegistered",jR="vmComponentDeregistered",Rh=t=>(fy(t,HTMLElement),t);function Ke(t,n){const e=Symbol("vmRegistryId"),i=Rh(t);i[gy]=null!=n?n:i.nodeName.toLowerCase(),i[wS]=e;const o=new CustomEvent("vmComponentRegister",{bubbles:!0,composed:!0,detail:i});uo(t,()=>{i.dispatchEvent(o)})}function $a(t){return Rh(t)[CS]}function zR(t,n){var e,i;const r=Rh(t);return Array.from(null!==(i=null===(e=r[Lu])||void 0===e?void 0:e.values())&&void 0!==i?i:[]).filter(o=>o[gy]===n)}function GR(t,n,e){var i;return function(t,n,e,i){return new(e||(e=Promise))(function(o,s){function l(m){try{d(i.next(m))}catch(_){s(_)}}function c(m){try{d(i.throw(m))}catch(_){s(_)}}function d(m){m.done?o(m.value):function(o){return o instanceof e?o:new e(function(s){s(o)})}(m.value).then(l,c)}d((i=i.apply(t,n||[])).next())})}(this,void 0,void 0,function*(){const r=yield La(t),o=new zi,s=Rh(t)[Lu];function l(c){c.detail[gy]===n&&(null==e||e(zR(r,n)))}return Array.from(null!==(i=null==s?void 0:s.values())&&void 0!==i?i:[]).forEach(c=>l(new CustomEvent("",{detail:c}))),fe(r)||(o.add(xn(r,HR,l)),o.add(xn(r,jR,l))),uo(t,()=>{},()=>{o.empty()}),()=>{o.empty()}})}var fm=new Map,WR=function(t,n){var i=t.updater;t.fields.forEach(function(r){i(r,n[r])})},qR_Provider=function(t,n){var e=t.state,i=Xw;if(fm.has(i)){var r=fm.get(i);r.state=e,r.wormholes.forEach(function(o){WR(o,e)})}return n};const Rde=new Set(["isFullscreenActive","isControlsActive","isTextTrackVisible","isPiPActive","isLive","isTouch","isAudio","isVideo","isAudioView","isVideoView"]),Lde=new Set(["ready","playbackStarted","playbackEnded","playbackReady"]);function $de(t,n,e,i){const r=[];r.push(new CustomEvent((t=>Rde.has(t)?`vm${t.replace("is","").replace("Active","")}Change`:Lde.has(t)?`vm${t.charAt(0).toUpperCase()}${t.slice(1)}`:`vm${t.charAt(0).toUpperCase()}${t.slice(1)}Change`)(n),{detail:e})),"paused"===n&&!e&&r.push(new CustomEvent("vmPlay")),"seeking"===n&&i&&!e&&r.push(new CustomEvent("vmSeeked")),r.forEach(o=>{t.dispatchEvent(o)})}const Qt=(t,n)=>function(t,n,e){void 0===e&&(e=!0);var r="Function"===t.constructor.name?t.prototype:t,o=r.componentWillLoad;r.componentWillLoad=function(){var s=this,l=this,c=function(){var t;return{promise:new Promise(function(e){t=e}),resolve:t}}(),d=new CustomEvent("openWormhole",{bubbles:!0,composed:!0,detail:{consumer:this,fields:n,updater:function(_,w){(_ in l?l:s)[_]=w},onOpen:c}});l.dispatchEvent(d);var m=function(){if(o)return o.call(s)};return e?c.promise.then(function(){return m()}):m()}}(t,n);var mm=(()=>(function(t){t.Audio="audio",t.Video="video",t.HLS="hls",t.Dash="dash",t.YouTube="youtube",t.Vimeo="vimeo",t.Dailymotion="dailymotion"}(mm||(mm={})),mm))();const SS=/\.(m4a|mp4a|mpga|mp2|mp2a|mp3|m2a|m3a|wav|weba|aac|oga|spx)($|\?)/i,ZR=/\.(mp4|og[gv]|webm|mov|m4v)($|\?)/i,TS=/\.(m3u8)($|\?)/i,Vde=/^application\/(x-mpegURL|vnd\.apple\.mpegURL)$/i,Bde=/\.(mpd)($|\?)/i,KR="vmProviderChange",Lh=t=>(n,e)=>{const i=(fy(t,HTMLElement),t),r=new CustomEvent(KR,{bubbles:!0,composed:!0,detail:{by:i,prop:n,value:e}});i.dispatchEvent(r)},Hde=new Set(["ready","playing","playbackReady","playbackStarted","playbackEnded","seeking","buffered","buffering","duration","viewType","mediaTitle","mediaType","currentSrc","currentPoster","playbackRates","playbackQualities","textTracks","currentTextTrack","isTextTrackVisible","audioTracks","currentAudioTrack","isPiPActive","isFullscreenActive"]);var YR=function(t,n,e,i){return new(e||(e=Promise))(function(o,s){function l(m){try{d(i.next(m))}catch(_){s(_)}}function c(m){try{d(i.throw(m))}catch(_){s(_)}}function d(m){m.done?o(m.value):function(o){return o instanceof e?o:new e(function(s){s(o)})}(m.value).then(l,c)}d((i=i.apply(t,n||[])).next())})};const JR=Symbol("vmProviderCache"),XR="vmMediaProviderConnect";function eL(t,n){return new CustomEvent(t,{bubbles:!0,composed:!0,detail:n})}function Pc(t){const n=eL(XR,t);uo(t,()=>{t.dispatchEvent(n)})}var tL=function(t,n,e,i){return new(e||(e=Promise))(function(o,s){function l(m){try{d(i.next(m))}catch(_){s(_)}}function c(m){try{d(i.throw(m))}catch(_){s(_)}}function d(m){m.done?o(m.value):function(o){return o instanceof e?o:new e(function(s){s(o)})}(m.value).then(l,c)}d((i=i.apply(t,n||[])).next())})};const Wde=class extends HTMLElement{constructor(){super(),this.__registerHost(),this.willAttach=!1,this.preload="metadata",Ke(this),this.willAttach||Pc(this)}getAdapter(){var t,n;return tL(this,void 0,void 0,function*(){const e=null!==(n=yield null===(t=this.fileProvider)||void 0===t?void 0:t.getAdapter())&&void 0!==n?n:{};return e.canPlay=i=>tL(this,void 0,void 0,function*(){return Cr(i)&&SS.test(i)}),e})}render(){return z("vm-file",{noConnect:!0,willAttach:this.willAttach,crossOrigin:this.crossOrigin,preload:this.preload,disableRemotePlayback:this.disableRemotePlayback,mediaTitle:this.mediaTitle,viewType:ho.Audio,ref:t=>{this.fileProvider=t}},z("slot",null))}};const Zde=class extends HTMLElement{constructor(){super(),this.__registerHost(),lt(this),this.canToggleCaptionVisibility=!1,this.showIcon="captions-on",this.hideIcon="captions-off",this.tooltipPosition="top",this.hideTooltip=!1,this.keys="c",this.i18n={},this.playbackReady=!1,this.textTracks=[],this.isTextTrackVisible=!1,Ke(this),Qt(this,["i18n","textTracks","isTextTrackVisible","playbackReady"])}onTextTracksChange(){var t;return function(t,n,e,i){return new(e||(e=Promise))(function(o,s){function l(m){try{d(i.next(m))}catch(_){s(_)}}function c(m){try{d(i.throw(m))}catch(_){s(_)}}function d(m){m.done?o(m.value):function(o){return o instanceof e?o:new e(function(s){s(o)})}(m.value).then(l,c)}d((i=i.apply(t,n||[])).next())})}(this,void 0,void 0,function*(){const n=$a(this);this.canToggleCaptionVisibility=this.textTracks.length>0&&null!==(t=yield null==n?void 0:n.canSetTextTrackVisibility())&&void 0!==t&&t})}componentDidLoad(){this.onTextTracksChange()}onClick(){var t;const n=$a(this);null===(t=null==n?void 0:n.setTextTrackVisibility)||void 0===t||t.call(n,!this.isTextTrackVisible)}render(){const t=this.isTextTrackVisible?this.i18n.disableCaptions:this.i18n.enableCaptions,n=fe(this.keys)?t:`${t} (${this.keys})`;return z(Ph,{hidden:!this.canToggleCaptionVisibility},z("vm-control",{label:this.i18n.captions,keys:this.keys,hidden:!this.canToggleCaptionVisibility,pressed:this.isTextTrackVisible,onClick:this.onClick.bind(this)},z("vm-icon",{name:this.isTextTrackVisible?this.showIcon:this.hideIcon,library:this.icons}),z("vm-tooltip",{hidden:this.hideTooltip,position:this.tooltipPosition,direction:this.tooltipDirection},n)))}static get watchers(){return{textTracks:["onTextTracksChange"],playbackReady:["onTextTracksChange"]}}static get style(){return":host([hidden]){display:none}"}},_y=new Set,vy=new Set,yy=new Map;function gm(){lo(()=>{vy.forEach(t=>{const n=parseFloat(window.getComputedStyle(t).height);_y.forEach(e=>{const i=yy.get(e),r=yS(e,t),o=yS(e,t,0,n)||yS(e,t,0,-n);i.set(t,r||o?n:0)})}),_y.forEach(t=>{const n=yy.get(t);t.style.setProperty("--vm-controls-height",`${Math.max(0,Math.max(...n.values()))}px`)})})}function nL(t){const n=t;uo(t,()=>{_y.add(n),yy.set(n,new Map),gm()},()=>{_y.delete(n),yy.delete(n)})}const Xde=class extends HTMLElement{constructor(){super(),this.__registerHost(),lt(this),this.sizeDisposal=new zi,this.textDisposal=new zi,this.isEnabled=!1,this.fontSize="sm",this.hidden=!1,this.isControlsActive=!1,this.isVideoView=!1,this.playbackStarted=!1,this.textTracks=[],this.currentTextTrack=-1,this.isTextTrackVisible=!0,Ke(this),nL(this),Qt(this,["isVideoView","playbackStarted","isControlsActive","textTracks","currentTextTrack","isTextTrackVisible"])}onEnabledChange(){this.isEnabled=this.playbackStarted&&this.isVideoView}onTextTracksChange(){const t=this.textTracks[this.currentTextTrack],n=()=>{var e;const i=Array.from(null!==(e=t.activeCues)&&void 0!==e?e:[]);this.renderCurrentCue(i[0])};this.textDisposal.empty(),co(t)||(n(),this.textDisposal.add(xn(t,"cuechange",n)))}connectedCallback(){this.dispatch=Al(this),this.dispatch("shouldRenderNativeTextTracks",!1),this.onTextTracksChange(),this.onPlayerResize()}disconnectedCallback(){this.textDisposal.empty(),this.sizeDisposal.empty(),this.dispatch("shouldRenderNativeTextTracks",!0)}onPlayerResize(){return function(t,n,e,i){return new(e||(e=Promise))(function(o,s){function l(m){try{d(i.next(m))}catch(_){s(_)}}function c(m){try{d(i.throw(m))}catch(_){s(_)}}function d(m){m.done?o(m.value):function(o){return o instanceof e?o:new e(function(s){s(o)})}(m.value).then(l,c)}d((i=i.apply(t,n||[])).next())})}(this,void 0,void 0,function*(){const t=yield La(this);if(fe(t))return;const n=yield t.getContainer();new ResizeObserver(i=>{const r=i[0],{width:o}=r.contentRect;this.fontSize=o>=1360?"xl":o>=1024?"lg":o>=768?"md":"sm"}).observe(n)})}renderCurrentCue(t){if(co(t))return void(this.cue="");const n=document.createElement("div");n.append(t.getCueAsHTML()),this.cue=n.innerHTML.trim()}render(){return z("div",{style:{transform:`translateY(calc(${this.isControlsActive?"var(--vm-controls-height)":"24px"} * -1))`},class:{captions:!0,enabled:this.isEnabled,hidden:this.hidden,fontMd:"md"===this.fontSize,fontLg:"lg"===this.fontSize,fontXl:"xl"===this.fontSize,inactive:!this.isTextTrackVisible}},z("span",{class:"cue"},this.cue))}static get watchers(){return{isVideoView:["onEnabledChange"],playbackStarted:["onEnabledChange"],textTracks:["onTextTracksChange"],currentTextTrack:["onTextTracksChange"]}}static get style(){return":host{position:absolute;left:0;bottom:0;width:100%;pointer-events:none;z-index:var(--vm-captions-z-index)}.captions{width:100%;text-align:center;color:var(--vm-captions-text-color);font-size:var(--vm-captions-font-size);padding:$control-spacing;display:none;pointer-events:none;transition:transform 0.4s ease-in-out, opacity 0.3s ease-in-out}.captions.enabled{display:inline-block}.captions.hidden{display:none !important}.captions.inactive{opacity:0;visibility:hidden}.captions.fontMd{font-size:var(--vm-captions-font-size-medium)}.captions.fontLg{font-size:var(--vm-captions-font-size-large)}.captions.fontXl{font-size:var(--vm-captions-font-size-xlarge)}.cue{display:inline-block;background:var(--vm-captions-cue-bg-color);border-radius:var(--vm-captions-cue-border-radius);box-decoration-break:clone;line-height:185%;padding:var(--vm-captions-cue-padding);white-space:pre-wrap;pointer-events:none}.cue>div{display:inline}.cue:empty{display:none}"}};const nhe=class extends HTMLElement{constructor(){super(),this.__registerHost(),lt(this),this.useOnMobile=!1,this.paused=!0,this.isVideoView=!1,this.isMobile=!1,Ke(this),Qt(this,["paused","isVideoView","isMobile"])}connectedCallback(){this.dispatch=Al(this)}forceClick(){return function(t,n,e,i){return new(e||(e=Promise))(function(o,s){function l(m){try{d(i.next(m))}catch(_){s(_)}}function c(m){try{d(i.throw(m))}catch(_){s(_)}}function d(m){m.done?o(m.value):function(o){return o instanceof e?o:new e(function(s){s(o)})}(m.value).then(l,c)}d((i=i.apply(t,n||[])).next())})}(this,void 0,void 0,function*(){this.onClick()})}onClick(){this.dispatch("paused",!this.paused)}render(){return z("div",{class:{clickToPlay:!0,enabled:this.isVideoView&&(!this.isMobile||this.useOnMobile)},onClick:this.onClick.bind(this)})}static get style(){return":host{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:var(--vm-click-to-play-z-index)}.clickToPlay{display:none;width:100%;height:100%;pointer-events:none}.clickToPlay.enabled{display:inline-block;pointer-events:auto}"}};var ES=function(t,n,e,i){return new(e||(e=Promise))(function(o,s){function l(m){try{d(i.next(m))}catch(_){s(_)}}function c(m){try{d(i.throw(m))}catch(_){s(_)}}function d(m){m.done?o(m.value):function(o){return o instanceof e?o:new e(function(s){s(o)})}(m.value).then(l,c)}d((i=i.apply(t,n||[])).next())})};const rhe=class extends HTMLElement{constructor(){super(),this.__registerHost(),lt(this),this.vmInteractionChange=ae(this,"vmInteractionChange",7),this.vmFocus=ae(this,"vmFocus",7),this.vmBlur=ae(this,"vmBlur",7),this.keyboardDisposal=new zi,this.showTapHighlight=!1,this.hidden=!1,this.isTouch=!1,Ke(this),Qt(this,["isTouch"])}onKeysChange(){return ES(this,void 0,void 0,function*(){if(this.keyboardDisposal.empty(),fe(this.keys))return;const t=yield La(this),n=this.keys.split("/");fe(t)||this.keyboardDisposal.add(xn(t,"keydown",e=>{n.includes(e.key)&&this.button.click()}))})}connectedCallback(){this.findTooltip(),this.onKeysChange()}componentWillLoad(){this.findTooltip()}disconnectedCallback(){this.keyboardDisposal.empty()}focusControl(){var t;return ES(this,void 0,void 0,function*(){null===(t=this.button)||void 0===t||t.focus()})}blurControl(){var t;return ES(this,void 0,void 0,function*(){null===(t=this.button)||void 0===t||t.blur()})}onTouchStart(){this.showTapHighlight=!0}onTouchEnd(){setTimeout(()=>{this.showTapHighlight=!1},100)}findTooltip(){const t=this.host.querySelector("vm-tooltip");return Il(t)||(this.describedBy=t.id),t}onShowTooltip(){const t=this.findTooltip();Il(t)||(t.active=!0),this.vmInteractionChange.emit(!0)}onHideTooltip(){const t=this.findTooltip();Il(t)||(t.active=!1),this.button.blur(),this.vmInteractionChange.emit(!1)}onFocus(){this.vmFocus.emit(),this.onShowTooltip()}onBlur(){this.vmBlur.emit(),this.onHideTooltip()}onMouseEnter(){this.onShowTooltip()}onMouseLeave(){this.onHideTooltip()}render(){const t=this.expanded?"true":"false",n=this.pressed?"true":"false";return z("button",{class:{hidden:this.hidden,notTouch:!this.isTouch,tapHighlight:this.showTapHighlight},id:this.identifier,type:"button","aria-label":this.label,"aria-haspopup":fe(this.menu)?void 0:"true","aria-controls":this.menu,"aria-expanded":fe(this.menu)?void 0:t,"aria-pressed":fe(this.pressed)?void 0:n,"aria-hidden":this.hidden?"true":"false","aria-describedby":this.describedBy,onTouchStart:this.onTouchStart.bind(this),onTouchEnd:this.onTouchEnd.bind(this),onFocus:this.onFocus.bind(this),onBlur:this.onBlur.bind(this),onMouseEnter:this.onMouseEnter.bind(this),onMouseLeave:this.onMouseLeave.bind(this),ref:e=>{this.button=e}},z("slot",null))}get host(){return this}static get watchers(){return{keys:["onKeysChange"]}}static get style(){return"button{display:flex;align-items:center;flex-direction:row;border:var(--vm-control-border);cursor:pointer;flex-shrink:0;font-size:var(--vm-control-icon-size);color:var(--vm-control-color);background:var(--vm-control-bg, transparent);border-radius:var(--vm-control-border-radius);padding:var(--vm-control-padding);position:relative;pointer-events:auto;transition:all 0.3s ease;transform:scale(var(--vm-control-scale, 1));touch-action:manipulation;box-sizing:border-box}button.hidden{display:none}button:focus{outline:0}button.tapHighlight{background:var(--vm-control-tap-highlight)}button.notTouch:focus,button.notTouch:hover,button.notTouch[aria-expanded='true']{background:var(--vm-control-focus-bg);color:var(--vm-control-focus-color);transform:scale(calc(var(--vm-control-scale, 1) + 0.06))}"}},she=class extends HTMLElement{constructor(){super(),this.__registerHost(),lt(this),this.space="none",Ke(this)}render(){return z("div",{class:{controlGroup:!0,spaceTop:"none"!==this.space&&"bottom"!==this.space,spaceBottom:"none"!==this.space&&"top"!==this.space}},z("slot",null))}get host(){return this}static get style(){return":host{width:100%}.controlGroup{position:relative;width:100%;display:flex;flex-wrap:wrap;flex-direction:inherit;align-items:inherit;justify-content:inherit;box-sizing:border-box}.controlGroup.spaceTop{margin-top:var(--vm-control-group-spacing)}.controlGroup.spaceBottom{margin-bottom:var(--vm-control-group-spacing)}::slotted(*){margin-left:var(--vm-controls-spacing)}::slotted(*:first-child){margin-left:0}"}},lhe=class extends HTMLElement{constructor(){super(),this.__registerHost(),lt(this),Ke(this)}static get style(){return":host{flex:1}"}},che=(t,n=1e3,e=!1)=>{let i;return function(...o){const s=this,c=e&&fe(i);clearTimeout(i),i=setTimeout(function(){i=void 0,e||t.apply(s,o)},n),c&&t.apply(s,o)}};const $h={},by={},hhe=class extends HTMLElement{constructor(){super(),this.__registerHost(),lt(this),this.disposal=new zi,this.isInteracting=!1,this.hidden=!1,this.fullWidth=!1,this.fullHeight=!1,this.direction="row",this.align="center",this.justify="start",this.pin="bottomLeft",this.activeDuration=2750,this.waitForPlaybackStart=!1,this.hideWhenPaused=!1,this.hideOnMouseLeave=!1,this.isAudioView=!1,this.isSettingsActive=!1,this.playbackReady=!1,this.isControlsActive=!1,this.paused=!0,this.playbackStarted=!1,Ke(this),function(t){const n=t;function e(){return n.shadowRoot.querySelector(".controls")}uo(t,()=>{const i=e();Il(i)||(vy.add(i),gm())},()=>{vy.delete(e()),gm()}),Nh(t,"componentDidLoad",()=>{vy.add(e()),gm()}),Nh(t,"componentDidRender",gm)}(this),Qt(this,["playbackReady","isAudioView","isControlsActive","isSettingsActive","paused","playbackStarted"])}connectedCallback(){this.dispatch=Al(this),this.onControlsChange(),this.setupPlayerListeners()}componentWillLoad(){this.onControlsChange()}disconnectedCallback(){this.disposal.empty(),delete by[$h[this]],delete $h[this]}setupPlayerListeners(){return function(t,n,e,i){return new(e||(e=Promise))(function(o,s){function l(m){try{d(i.next(m))}catch(_){s(_)}}function c(m){try{d(i.throw(m))}catch(_){s(_)}}function d(m){m.done?o(m.value):function(o){return o instanceof e?o:new e(function(s){s(o)})}(m.value).then(l,c)}d((i=i.apply(t,n||[])).next())})}(this,void 0,void 0,function*(){const t=yield La(this);fe(t)||(["focus","keydown","click","touchstart","mouseleave"].forEach(e=>{this.disposal.add(xn(t,e,this.onControlsChange.bind(this)))}),this.disposal.add(xn(t,"mousemove",che(this.onControlsChange,50,!0).bind(this))),$h[this]=t)})}show(){this.dispatch("isControlsActive",!0)}hide(){this.dispatch("isControlsActive",!1)}hideWithDelay(){clearTimeout(by[$h[this]]),by[$h[this]]=setTimeout(()=>{this.hide()},this.activeDuration)}onControlsChange(t){if(clearTimeout(by[$h[this]]),!this.hidden&&this.playbackReady)if(this.isAudioView)this.show();else if(!this.waitForPlaybackStart||this.playbackStarted)if(this.isInteracting||this.isSettingsActive)this.show();else if(this.hideWhenPaused&&this.paused)this.hideWithDelay();else{if(!this.hideOnMouseLeave||this.paused||"mouseleave"!==(null==t?void 0:t.type))return this.paused?void this.show():(this.show(),void this.hideWithDelay());this.hide()}else this.hide();else this.hide()}getPosition(){if(this.isAudioView)return{};if("center"===this.pin)return{top:"50%",left:"50%",transform:"translate(-50%, -50%)"};const t=this.pin.split(/(?=[L|R])/).map(n=>n.toLowerCase());return{[t[0]]:0,[t[1]]:0}}onStartInteraction(){this.isInteracting=!0}onEndInteraction(){this.isInteracting=!1}render(){return z(Ph,{video:!this.isAudioView},z("div",{style:Object.assign(Object.assign({},this.getPosition()),{flexDirection:this.direction,alignItems:"center"===this.align?"center":`flex-${this.align}`,justifyContent:this.justify}),class:{controls:!0,audio:this.isAudioView,hidden:this.hidden,active:this.playbackReady&&this.isControlsActive,fullWidth:this.isAudioView||this.fullWidth,fullHeight:!this.isAudioView&&this.fullHeight},onMouseEnter:this.onStartInteraction.bind(this),onMouseLeave:this.onEndInteraction.bind(this),onTouchStart:this.onStartInteraction.bind(this),onTouchEnd:this.onEndInteraction.bind(this)},z("slot",null)))}static get watchers(){return{paused:["onControlsChange"],hidden:["onControlsChange"],isAudioView:["onControlsChange"],isInteracting:["onControlsChange"],isSettingsActive:["onControlsChange"],hideWhenPaused:["onControlsChange"],hideOnMouseLeave:["onControlsChange"],playbackStarted:["onControlsChange"],waitForPlaybackStart:["onControlsChange"],playbackReady:["onControlsChange"]}}static get style(){return":host{position:relative;width:100%;z-index:var(--vm-controls-z-index)}:host([video]){position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none}.controls{display:flex;width:100%;position:absolute;flex-wrap:wrap;pointer-events:auto;box-sizing:border-box;background:var(--vm-controls-bg);padding:var(--vm-controls-padding);border-radius:var(--vm-controls-border-radius);opacity:0;visibility:hidden;transition:var(--vm-fade-transition)}.controls.audio{position:relative}.controls.hidden{display:none}.controls.active{opacity:1;visibility:visible}.controls.fullWidth{width:100%}.controls.fullHeight{height:100%}::slotted(*:not(vm-control-group)){margin-left:var(--vm-controls-spacing)}::slotted(*:not(vm-control-group):first-child){margin-left:0}"}},fhe=class extends HTMLElement{constructor(){super(),this.__registerHost(),lt(this),this.currentTime=0,this.i18n={},this.alwaysShowHours=!1,Ke(this),Qt(this,["currentTime","i18n"])}render(){return z("vm-time",{label:this.i18n.currentTime,seconds:this.currentTime,alwaysShowHours:this.alwaysShowHours})}static get style(){return":host{display:flex;align-items:center;justify-content:center}"}};var kS,DS;const Gr="undefined"!=typeof window,Cy=Gr?null===(kS=window.navigator)||void 0===kS?void 0:kS.userAgent.toLowerCase():"",Uh=/iphone|ipad|ipod|ios|CriOS|FxiOS/.test(Cy),mhe=/android/.test(Cy),xS=Gr&&(Uh||mhe),ghe=Gr&&/(iPhone|iPod)/gi.test(null===(DS=window.navigator)||void 0===DS?void 0:DS.platform);/firefox/.test(Cy);const _he=Gr&&window.chrome;Gr&&!_he&&(window.safari||Uh||/(apple|safari)/.test(Cy));const iL=()=>{if(!Gr)return!1;const t=document.createElement("video");return!!document.pictureInPictureEnabled&&!t.disablePictureInPicture},rL=()=>{if(!Gr)return!1;const t=document.createElement("video");return bS(t.webkitSupportsPresentationMode)&&bS(t.webkitSetPresentationMode)&&!ghe},oL=(t=!0,n=!0)=>{if(!Gr)return Promise.resolve(!1);const e=document.createElement("video");return t&&(e.setAttribute("muted",""),e.muted=!0),n&&(e.setAttribute("playsinline",""),e.setAttribute("webkit-playsinline","")),e.setAttribute("height","0"),e.setAttribute("width","0"),e.style.position="fixed",e.style.top="0",e.style.width="0",e.style.height="0",e.style.opacity="0",new Promise(i=>i(e.play())).catch(Ys),Promise.resolve(!e.paused)},MS=(t,n=1)=>new Promise((e,i)=>{const r=new Image,o=()=>{delete r.onload,delete r.onerror,r.naturalWidth>=n?e(r):i(r)};Object.assign(r,{onload:o,onerror:o,src:t})}),Ehe=(t,n,e=Ys)=>{var i;const r=document.createElement("script");r.src=t,r.onload=n,r.onerror=e;const o=document.getElementsByTagName("script")[0];null===(i=o.parentNode)||void 0===i||i.insertBefore(r,o)},sL=t=>{if((t=>!co(t)&&(hy(t)||Cr(t)&&t.startsWith("{")))(t))return(t=>hy(t)?t:function(t){if(Cr(t))try{return JSON.parse(t)}catch(n){return}}(t))(t)},aL=(t,n="")=>{if(!Gr)return n;try{return window.decodeURIComponent(t)}catch(e){return n}},khe=/(?:^[#?]?|&)([^=&]+)(?:=([^&]*))?/g,lL=(t,n="preconnect",e)=>{if(!Gr)return!1;const i=document.createElement("link");return i.rel=n,i.href=t,fe(e)||(i.as=e),i.crossOrigin="true",document.head.append(i),!0},Phe=t=>{if(Cr(t))return(t=>{const n=Object.create(null);if(fe(t))return n;let e;for(;e=khe.exec(t);){const i=aL(e[1],e[1]).replace("[]",""),r=Cr(e[2])?aL(e[2].replace(/\+/g," "),e[2]):"",o=n[i];o&&!py(o)&&(n[i]=[o]),o?n[i].push(r):n[i]=r}return n})(t)},Vh={},cL=(t,n,e,i=(()=>!0),r=Ehe)=>{const o=l=>fe(window[l])?window.exports&&window.exports[l]?window.exports[l]:window.module&&window.module.exports&&window.module.exports[l]?window.module.exports[l]:void 0:window[l],s=o(n);return s&&i(s)?Promise.resolve(s):new Promise((l,c)=>{if(!fe(Vh[t]))return void Vh[t].push({resolve:l,reject:c});Vh[t]=[{resolve:l,reject:c}];const d=m=>{Vh[t].forEach(_=>_.resolve(m))};if(!fe(e)){const m=window[e];window[e]=function(){fe(m)||m(),d(o(n))}}r(t,()=>{fe(e)&&d(o(n))},m=>{Vh[t].forEach(_=>{_.reject(m)}),delete Vh[t]})})},wy=(t,n=[])=>Qt(t,["autoplay","controls","language","muted","logger","loop","aspectRatio","playsinline",...n]);var po=function(t,n,e,i){return new(e||(e=Promise))(function(o,s){function l(m){try{d(i.next(m))}catch(_){s(_)}}function c(m){try{d(i.throw(m))}catch(_){s(_)}}function d(m){m.done?o(m.value):function(o){return o instanceof e?o:new e(function(s){s(o)})}(m.value).then(l,c)}d((i=i.apply(t,n||[])).next())})};const IS=new Map,Ohe=class extends HTMLElement{constructor(){super(),this.__registerHost(),lt(this),this.vmLoadStart=ae(this,"vmLoadStart",7),this.vmError=ae(this,"vmError",7),this.defaultInternalState={},this.internalState={currentTime:0,volume:0,muted:!1,isAdsPlaying:!1,playbackReady:!1},this.embedSrc="",this.mediaTitle="",this.shouldAutoplayQueue=!1,this.showUpNextQueue=!1,this.showShareButtons=!1,this.showDailymotionLogo=!1,this.showVideoInfo=!0,this.language="en",this.autoplay=!1,this.controls=!1,this.loop=!1,this.muted=!1,this.playsinline=!1,Ke(this),Pc(this),wy(this)}onVideoIdChange(){this.internalState=Object.assign({},this.defaultInternalState),this.videoId?(this.embedSrc=`${this.getOrigin()}/embed/video/${this.videoId}?api=1`,this.fetchVideoInfo=this.getVideoInfo(),this.pendingMediaTitleCall=my()):this.embedSrc=""}onControlsChange(){this.internalState.playbackReady&&this.remoteControl("controls",this.controls)}onCustomPosterChange(){this.dispatch("currentPoster",this.poster)}connectedCallback(){this.dispatch=Lh(this),this.dispatch("viewType",ho.Video),this.onVideoIdChange(),this.initialMuted=this.muted,this.internalState.muted=this.muted,this.defaultInternalState=Object.assign({},this.internalState)}getOrigin(){return"https://www.dailymotion.com"}getPreconnections(){return[this.getOrigin(),"https://static1.dmcdn.net"]}remoteControl(t,n){return this.embed.postMessage({command:t,parameters:n?[n]:[]})}buildParams(){return{autoplay:this.autoplay,mute:this.initialMuted,"queue-autoplay-next":this.shouldAutoplayQueue,"queue-enable":this.showUpNextQueue,"sharing-enable":this.showShareButtons,syndication:this.syndication,"ui-highlight":this.color,"ui-logo":this.showDailymotionLogo,"ui-start-screen-info":this.showVideoInfo}}getVideoInfo(){return po(this,void 0,void 0,function*(){return IS.has(this.videoId)?IS.get(this.videoId):window.fetch(`https://api.dailymotion.com/video/${this.videoId}?fields=duration,thumbnail_1080_url`).then(n=>n.json()).then(n=>{const e=n.thumbnail_1080_url,i=parseFloat(n.duration);return IS.set(this.videoId,{poster:e,duration:i}),{poster:e,duration:i}})})}onEmbedSrcChange(){this.vmLoadStart.emit(),this.dispatch("viewType",ho.Video)}onEmbedMessage(t){var n,e;const i=t.detail;switch(i.event){case"playback_ready":this.onControlsChange(),this.dispatch("currentSrc",this.embedSrc),this.dispatch("mediaType",fs.Video),Promise.all([this.fetchVideoInfo,null===(n=this.pendingMediaTitleCall)||void 0===n?void 0:n.promise]).then(([r,o])=>{var s,l;this.dispatch("duration",null!==(s=null==r?void 0:r.duration)&&void 0!==s?s:-1),this.dispatch("currentPoster",null!==(l=this.poster)&&void 0!==l?l:null==r?void 0:r.poster),this.dispatch("mediaTitle",o),this.dispatch("playbackReady",!0)});break;case"videochange":null===(e=this.pendingMediaTitleCall)||void 0===e||e.resolve(i.title);break;case"start":this.dispatch("paused",!1),this.dispatch("playbackStarted",!0),this.dispatch("buffering",!0);break;case"video_start":this.remoteControl("muted",this.internalState.muted),this.remoteControl("volume",this.internalState.volume),this.internalState.currentTime>0&&this.remoteControl("seek",this.internalState.currentTime);break;case"play":this.dispatch("paused",!1);break;case"pause":this.dispatch("paused",!0),this.dispatch("playing",!1),this.dispatch("buffering",!1);break;case"playing":this.dispatch("playing",!0),this.dispatch("buffering",!1);break;case"video_end":this.loop?setTimeout(()=>{this.remoteControl("play")},300):this.dispatch("playbackEnded",!0);break;case"timeupdate":this.dispatch("currentTime",parseFloat(i.time));break;case"volumechange":this.dispatch("muted","true"===i.muted),this.dispatch("volume",Math.floor(100*parseFloat(i.volume)));break;case"seeking":this.dispatch("currentTime",parseFloat(i.time)),this.dispatch("seeking",!0);break;case"seeked":this.dispatch("currentTime",parseFloat(i.time)),this.dispatch("seeking",!1);break;case"waiting":this.dispatch("buffering",!0);break;case"progress":this.dispatch("buffered",parseFloat(i.time));break;case"durationchange":this.dispatch("duration",parseFloat(i.duration));break;case"qualitiesavailable":this.dispatch("playbackQualities",i.qualities.map(r=>`${r}p`));break;case"qualitychange":this.dispatch("playbackQuality",`${i.quality}p`);break;case"fullscreenchange":this.dispatch("isFullscreenActive","true"===i.fullscreen);break;case"error":this.vmError.emit(i.error)}}getAdapter(){return po(this,void 0,void 0,function*(){const t=/(?:dai\.ly|dailymotion|dailymotion\.com)\/(?:video\/|embed\/|)(?:video\/|)((?:\w)+)/;return{getInternalPlayer:()=>po(this,void 0,void 0,function*(){return this.embed}),play:()=>po(this,void 0,void 0,function*(){this.remoteControl("play")}),pause:()=>po(this,void 0,void 0,function*(){this.remoteControl("pause")}),canPlay:n=>po(this,void 0,void 0,function*(){return Cr(n)&&t.test(n)}),setCurrentTime:n=>po(this,void 0,void 0,function*(){this.internalState.currentTime=n,this.remoteControl("seek",n)}),setMuted:n=>po(this,void 0,void 0,function*(){this.internalState.muted=n,this.remoteControl("muted",n)}),setVolume:n=>po(this,void 0,void 0,function*(){this.internalState.volume=n/100,this.dispatch("volume",n),this.remoteControl("volume",n/100)}),canSetPlaybackQuality:()=>po(this,void 0,void 0,function*(){return!0}),setPlaybackQuality:n=>po(this,void 0,void 0,function*(){this.remoteControl("quality",n.slice(0,-1))}),canSetFullscreen:()=>po(this,void 0,void 0,function*(){return!0}),enterFullscreen:()=>po(this,void 0,void 0,function*(){this.remoteControl("fullscreen",!0)}),exitFullscreen:()=>po(this,void 0,void 0,function*(){this.remoteControl("fullscreen",!1)})}})}render(){return z("vm-embed",{embedSrc:this.embedSrc,mediaTitle:this.mediaTitle,origin:this.getOrigin(),params:this.buildParams(),decoder:Phe,preconnections:this.getPreconnections(),onVmEmbedMessage:this.onEmbedMessage.bind(this),onVmEmbedSrcChange:this.onEmbedSrcChange.bind(this),ref:t=>{this.embed=t}})}static get watchers(){return{videoId:["onVideoIdChange"],controls:["onControlsChange"],poster:["onCustomPosterChange"]}}static get style(){return":host{z-index:var(--vm-media-z-index)}"}};var Ua=function(t,n,e,i){return new(e||(e=Promise))(function(o,s){function l(m){try{d(i.next(m))}catch(_){s(_)}}function c(m){try{d(i.throw(m))}catch(_){s(_)}}function d(m){m.done?o(m.value):function(o){return o instanceof e?o:new e(function(s){s(o)})}(m.value).then(l,c)}d((i=i.apply(t,n||[])).next())})};const Fhe=class extends HTMLElement{constructor(){super(),this.__registerHost(),lt(this),this.vmLoadStart=ae(this,"vmLoadStart",7),this.vmError=ae(this,"vmError",7),this.textTracksDisposal=new zi,this.hasAttached=!1,this.version="latest",this.config={},this.autoplay=!1,this.preload="metadata",this.enableTextTracksByDefault=!0,this.shouldRenderNativeTextTracks=!0,this.isTextTrackVisible=!0,this.currentTextTrack=-1,Ke(this),Pc(this),Qt(this,["autoplay","shouldRenderNativeTextTracks","isTextTrackVisible","currentTextTrack"])}onSrcChange(){var t;!this.hasAttached||(this.vmLoadStart.emit(),null===(t=this.dash)||void 0===t||t.attachSource(this.src))}onShouldRenderNativeTextTracks(){var t;this.shouldRenderNativeTextTracks?this.textTracksDisposal.empty():this.hideCurrentTextTrack(),null===(t=this.dash)||void 0===t||t.enableForcedTextStreaming(!this.shouldRenderNativeTextTracks)}onTextTrackChange(){var t,n;if(this.shouldRenderNativeTextTracks&&!fe(this.dash)&&(this.dash.setTextTrack(this.isTextTrackVisible?this.currentTextTrack:-1),!this.isTextTrackVisible)){const e=Array.from(null!==(n=null===(t=this.mediaEl)||void 0===t?void 0:t.textTracks)&&void 0!==n?n:[])[this.currentTextTrack];"hidden"===(null==e?void 0:e.mode)&&this.dispatch("currentTextTrack",-1)}}connectedCallback(){this.dispatch=Lh(this),this.mediaEl&&this.setupDash()}disconnectedCallback(){this.textTracksDisposal.empty(),this.destroyDash()}setupDash(){return Ua(this,void 0,void 0,function*(){try{const t=this.libSrc||`https://cdn.jsdelivr.net/npm/dashjs@${this.version}/dist/dash.all.min.js`,n=yield cL(t,"dashjs");this.dash=n.MediaPlayer(this.config).create(),this.dash.initialize(this.mediaEl,null,this.autoplay),this.dash.setTextDefaultEnabled(this.enableTextTracksByDefault),this.dash.enableForcedTextStreaming(!this.shouldRenderNativeTextTracks),this.dash.on(n.MediaPlayer.events.PLAYBACK_METADATA_LOADED,()=>{this.dispatch("mediaType",fs.Video),this.dispatch("currentSrc",this.src),this.dispatchLevels(),this.listenToTextTracksForChanges(),this.dispatch("playbackReady",!0)}),this.dash.on(n.MediaPlayer.events.TRACK_CHANGE_RENDERED,()=>{this.shouldRenderNativeTextTracks||this.hideCurrentTextTrack()}),this.dash.on(n.MediaPlayer.events.ERROR,e=>{this.vmError.emit(e)}),this.hasAttached=!0}catch(t){this.vmError.emit(t)}})}destroyDash(){var t;return Ua(this,void 0,void 0,function*(){null===(t=this.dash)||void 0===t||t.reset(),this.hasAttached=!1})}onMediaElChange(t){return Ua(this,void 0,void 0,function*(){this.destroyDash(),!fe(t.detail)&&(this.mediaEl=t.detail,yield this.setupDash())})}levelToPlaybackQuality(t){return-1===t?"Auto":`${t.height}p`}findLevelIndexFromQuality(t){return this.dash.getBitrateInfoListFor("video").findIndex(n=>this.levelToPlaybackQuality(n)===t)}dispatchLevels(){try{const t=this.dash.getBitrateInfoListFor("video");(null==t?void 0:t.length)>0&&(this.dispatch("playbackQualities",["Auto",...t.map(this.levelToPlaybackQuality)]),this.dispatch("playbackQuality","Auto"))}catch(t){this.vmError.emit(t)}}listenToTextTracksForChanges(){var t,n,e;if(this.textTracksDisposal.empty(),fe(this.mediaEl)||this.shouldRenderNativeTextTracks)return;const i=null!==(e=(null===(n=null===(t=this.dash)||void 0===t?void 0:t.getCurrentTrackFor("text"))||void 0===n?void 0:n.index)-1)&&void 0!==e?e:-1;this.currentTextTrack=i,this.dispatch("currentTextTrack",i),this.textTracksDisposal.add(xn(this.mediaEl.textTracks,"change",this.onTextTracksChange.bind(this)))}getTextTracks(){var t,n;return Array.from(null!==(n=null===(t=this.mediaEl)||void 0===t?void 0:t.textTracks)&&void 0!==n?n:[])}hideCurrentTextTrack(){const t=this.getTextTracks();t[this.currentTextTrack]&&this.isTextTrackVisible&&(t[this.currentTextTrack].mode="hidden")}onTextTracksChange(){this.hideCurrentTextTrack(),this.dispatch("textTracks",this.getTextTracks()),this.dispatch("isTextTrackVisible",this.isTextTrackVisible),this.dispatch("currentTextTrack",this.currentTextTrack)}getAdapter(){var t,n;return Ua(this,void 0,void 0,function*(){const e=null!==(n=yield null===(t=this.videoProvider)||void 0===t?void 0:t.getAdapter())&&void 0!==n?n:{},i=e.canPlay;return Object.assign(Object.assign({},e),{getInternalPlayer:()=>Ua(this,void 0,void 0,function*(){return this.dash}),canPlay:r=>Ua(this,void 0,void 0,function*(){var o;return Cr(r)&&Bde.test(r)||null!==(o=null==i?void 0:i(r))&&void 0!==o&&o}),canSetPlaybackQuality:()=>Ua(this,void 0,void 0,function*(){var r,o;try{return(null===(o=null===(r=this.dash)||void 0===r?void 0:r.getBitrateInfoListFor("video"))||void 0===o?void 0:o.length)>0}catch(s){return this.vmError.emit(s),!1}}),setPlaybackQuality:r=>Ua(this,void 0,void 0,function*(){if(!fe(this.dash)){const o=this.findLevelIndexFromQuality(r);this.dash.updateSettings({streaming:{abr:{autoSwitchBitrate:{video:-1===o}}}}),o>=0&&this.dash.setQualityFor("video",o),this.dispatch("playbackQuality",r)}}),setCurrentTextTrack:r=>Ua(this,void 0,void 0,function*(){var o;this.shouldRenderNativeTextTracks?e.setCurrentTextTrack(r):(this.currentTextTrack=r,null===(o=this.dash)||void 0===o||o.setTextTrack(r),this.onTextTracksChange())}),setTextTrackVisibility:r=>Ua(this,void 0,void 0,function*(){var o;this.shouldRenderNativeTextTracks?e.setTextTrackVisibility(r):(this.isTextTrackVisible=r,null===(o=this.dash)||void 0===o||o.enableText(r),this.onTextTracksChange())})})})}render(){return z("vm-video",{willAttach:!0,crossOrigin:this.crossOrigin,preload:this.preload,poster:this.poster,controlsList:this.controlsList,autoPiP:this.autoPiP,disablePiP:this.disablePiP,hasCustomTextManager:!this.shouldRenderNativeTextTracks,disableRemotePlayback:this.disableRemotePlayback,mediaTitle:this.mediaTitle,ref:t=>{this.videoProvider=t}})}static get watchers(){return{src:["onSrcChange"],hasAttached:["onSrcChange"],shouldRenderNativeTextTracks:["onShouldRenderNativeTextTracks"],isTextTrackVisible:["onTextTrackChange"],currentTextTrack:["onTextTrackChange"]}}static get style(){return":host{z-index:var(--vm-media-z-index)}"}};var PS=function(t,n,e,i){return new(e||(e=Promise))(function(o,s){function l(m){try{d(i.next(m))}catch(_){s(_)}}function c(m){try{d(i.throw(m))}catch(_){s(_)}}function d(m){m.done?o(m.value):function(o){return o instanceof e?o:new e(function(s){s(o)})}(m.value).then(l,c)}d((i=i.apply(t,n||[])).next())})};const Lhe=class extends HTMLElement{constructor(){super(),this.__registerHost(),lt(this),this.canSetFullscreen=!1,this.useOnMobile=!1,this.isFullscreenActive=!0,this.isVideoView=!1,this.playbackReady=!1,this.isMobile=!1,this.clicks=0,Ke(this),Qt(this,["playbackReady","isFullscreenActive","isVideoView","isMobile"])}onPlaybackReadyChange(){return PS(this,void 0,void 0,function*(){const t=yield La(this);fe(t)||(this.canSetFullscreen=yield t.canSetFullscreen())})}onTriggerClickToPlay(){return PS(this,void 0,void 0,function*(){const[t]=zR(this,"vm-click-to-play");yield null==t?void 0:t.forceClick()})}onToggleFullscreen(){return PS(this,void 0,void 0,function*(){const t=yield La(this);fe(t)||(this.isFullscreenActive?t.exitFullscreen():t.enterFullscreen())})}onClick(){this.clicks+=1,1===this.clicks&&setTimeout(()=>{1===this.clicks?this.onTriggerClickToPlay():this.onToggleFullscreen(),this.clicks=0},300)}render(){return z("div",{class:{dblClickFullscreen:!0,enabled:this.playbackReady&&this.canSetFullscreen&&this.isVideoView&&(!this.isMobile||this.useOnMobile)},onClick:this.onClick.bind(this)})}static get watchers(){return{playbackReady:["onPlaybackReadyChange"]}}static get style(){return":host{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:var(--vm-dbl-click-fullscreen-z-index)}.dblClickFullscreen{display:none;width:100%;height:100%;pointer-events:none}.dblClickFullscreen.enabled{display:inline-block;pointer-events:auto}"}},Uhe=class extends HTMLElement{constructor(){super(),this.__registerHost(),lt(this),this.activeDuration=2750,this.waitForPlaybackStart=!1,this.hideWhenPaused=!1,this.hideOnMouseLeave=!1,this.isMobile=!1,this.isLive=!1,this.isAudioView=!1,this.isVideoView=!1,Ke(this),Qt(this,["theme","isMobile","isAudioView","isVideoView","isLive"])}buildAudioControls(){return z("vm-controls",{fullWidth:!0},z("vm-playback-control",{tooltipDirection:"right"}),z("vm-volume-control",null),!this.isLive&&z("vm-current-time",null),this.isLive&&z("vm-control-spacer",null),!this.isLive&&z("vm-scrubber-control",null),this.isLive&&z("vm-live-indicator",null),!this.isLive&&z("vm-end-time",null),!this.isLive&&z("vm-settings-control",{tooltipDirection:"left"}),z("div",{style:{marginLeft:"0",paddingRight:"2px"}}))}buildMobileVideoControls(){return z(PR,null,z("vm-scrim",{gradient:"up"}),z("vm-controls",{pin:"topLeft",fullWidth:!0,activeDuration:this.activeDuration,waitForPlaybackStart:this.waitForPlaybackStart,hideWhenPaused:this.hideWhenPaused},z("vm-control-spacer",null),z("vm-volume-control",null),!this.isLive&&z("vm-caption-control",null),!this.isLive&&z("vm-settings-control",null),this.isLive&&z("vm-fullscreen-control",null)),z("vm-controls",{pin:"center",justify:"center",activeDuration:this.activeDuration,waitForPlaybackStart:this.waitForPlaybackStart,hideWhenPaused:this.hideWhenPaused},z("vm-playback-control",{style:{"--vm-control-scale":"1.3"}})),!this.isLive&&z("vm-controls",{pin:"bottomLeft",fullWidth:!0,activeDuration:this.activeDuration,waitForPlaybackStart:this.waitForPlaybackStart,hideWhenPaused:this.hideWhenPaused},z("vm-control-group",null,z("vm-current-time",null),z("vm-control-spacer",null),z("vm-end-time",null),z("vm-fullscreen-control",null)),z("vm-control-group",{space:"top"},z("vm-scrubber-control",null))))}buildDesktopVideoControls(){return z(PR,null,"light"!==this.theme&&z("vm-scrim",{gradient:"up"}),z("vm-controls",{fullWidth:!0,pin:"bottomRight",activeDuration:this.activeDuration,waitForPlaybackStart:this.waitForPlaybackStart,hideWhenPaused:this.hideWhenPaused,hideOnMouseLeave:this.hideOnMouseLeave},!this.isLive&&z("vm-control-group",null,z("vm-scrubber-control",null)),z("vm-control-group",{space:this.isLive?"none":"top"},z("vm-playback-control",{tooltipDirection:"right"}),z("vm-volume-control",null),!this.isLive&&z("vm-time-progress",null),z("vm-control-spacer",null),!this.isLive&&z("vm-caption-control",null),this.isLive&&z("vm-live-indicator",null),z("vm-pip-control",null),!this.isLive&&z("vm-settings-control",null),z("vm-fullscreen-control",{tooltipDirection:"left"}))))}render(){return this.isAudioView?this.buildAudioControls():this.isVideoView&&this.isMobile?this.buildMobileVideoControls():this.isVideoView?this.buildDesktopVideoControls():null}static get style(){return":host{display:contents;pointer-events:none;z-index:var(--vm-controls-z-index)}"}};var AS=function(t,n,e,i){return new(e||(e=Promise))(function(o,s){function l(m){try{d(i.next(m))}catch(_){s(_)}}function c(m){try{d(i.throw(m))}catch(_){s(_)}}function d(m){m.done?o(m.value):function(o){return o instanceof e?o:new e(function(s){s(o)})}(m.value).then(l,c)}d((i=i.apply(t,n||[])).next())})};const Bhe=class extends HTMLElement{constructor(){super(),this.__registerHost(),lt(this),this.textTracksDisposal=new zi,this.canSetPlaybackRate=!1,this.canSetPlaybackQuality=!1,this.canSetTextTrack=!1,this.canSetAudioTrack=!1,this.pin="bottomRight",this.i18n={},this.playbackReady=!1,this.playbackRate=1,this.playbackRates=[1],this.isVideoView=!1,this.playbackQualities=[],this.textTracks=[],this.currentTextTrack=-1,this.audioTracks=[],this.currentAudioTrack=-1,this.isTextTrackVisible=!0,Ke(this),Qt(this,["i18n","playbackReady","playbackRate","playbackRates","playbackQuality","playbackQualities","isVideoView","textTracks","currentTextTrack","isTextTrackVisible","audioTracks","currentAudioTrack"])}onPlaybackReady(){return AS(this,void 0,void 0,function*(){const t=yield La(this);fe(t)||(this.canSetPlaybackQuality=yield t.canSetPlaybackQuality(),this.canSetPlaybackRate=yield t.canSetPlaybackRate())})}onAudioTracksChange(){var t;return AS(this,void 0,void 0,function*(){const n=$a(this);this.canSetAudioTrack=null!==(t=yield null==n?void 0:n.canSetAudioTrack())&&void 0!==t&&t})}onTextTracksChange(){var t;return AS(this,void 0,void 0,function*(){const n=$a(this);this.canSetTextTrack=null!==(t=yield null==n?void 0:n.canSetTextTrack())&&void 0!==t&&t})}connectedCallback(){this.dispatch=Al(this)}componentDidLoad(){this.onTextTracksChange()}disconnectedCallback(){this.textTracksDisposal.empty()}onPlaybackRateSelect(t){this.dispatch("playbackRate",parseFloat(t.target.value))}buildPlaybackRateSubmenu(){if(this.playbackRates.length<=1||!this.canSetPlaybackRate)return z("vm-menu-item",{label:this.i18n.playbackRate,hint:this.i18n.normal});const t=n=>1===n?this.i18n.normal:`${n}`;return z("vm-submenu",{label:this.i18n.playbackRate,hint:t(this.playbackRate)},z("vm-menu-radio-group",{value:`${this.playbackRate}`,onVmCheck:this.onPlaybackRateSelect.bind(this)},this.playbackRates.map(n=>z("vm-menu-radio",{label:t(n),value:`${n}`}))))}onPlaybackQualitySelect(t){this.dispatch("playbackQuality",t.target.value)}buildPlaybackQualitySubmenu(){var t;if(this.playbackQualities.length<=1||!this.canSetPlaybackQuality)return z("vm-menu-item",{label:this.i18n.playbackQuality,hint:null!==(t=this.playbackQuality)&&void 0!==t?t:this.i18n.auto});const n=e=>{const i=parseInt(e.slice(0,-1),10);return i>=2160?"UHD":i>=1080?"HD":void 0};return z("vm-submenu",{label:this.i18n.playbackQuality,hint:this.playbackQuality},z("vm-menu-radio-group",{value:this.playbackQuality,onVmCheck:this.onPlaybackQualitySelect.bind(this)},this.playbackQualities.map(e=>z("vm-menu-radio",{label:e,value:e,badge:n(e)}))))}onTextTrackSelect(t){const e=parseInt(t.target.value,10),i=$a(this);-1!==e?(null==i||i.setTextTrackVisibility(!0),null==i||i.setCurrentTextTrack(e)):null==i||i.setTextTrackVisibility(!1)}buildTextTracksSubmenu(){var t,n,e;return this.textTracks.length<=1||!this.canSetTextTrack?z("vm-menu-item",{label:this.i18n.subtitlesOrCc,hint:null!==(n=null===(t=this.textTracks[this.currentTextTrack])||void 0===t?void 0:t.label)&&void 0!==n?n:this.i18n.none}):z("vm-submenu",{label:this.i18n.subtitlesOrCc,hint:this.isTextTrackVisible?null===(e=this.textTracks[this.currentTextTrack])||void 0===e?void 0:e.label:this.i18n.off},z("vm-menu-radio-group",{value:`${this.isTextTrackVisible?this.currentTextTrack:-1}`,onVmCheck:this.onTextTrackSelect.bind(this)},[z("vm-menu-radio",{label:this.i18n.off,value:"-1"})].concat(this.textTracks.map((i,r)=>z("vm-menu-radio",{label:i.label,value:`${r}`})))))}onAudioTrackSelect(t){const e=parseInt(t.target.value,10),i=$a(this);null==i||i.setCurrentAudioTrack(e)}buildAudioTracksMenu(){var t,n,e;return this.audioTracks.length<=1||!this.canSetAudioTrack?z("vm-menu-item",{label:this.i18n.audio,hint:null!==(n=null===(t=this.audioTracks[this.currentAudioTrack])||void 0===t?void 0:t.label)&&void 0!==n?n:this.i18n.default}):z("vm-submenu",{label:this.i18n.audio,hint:null===(e=this.audioTracks[this.currentAudioTrack])||void 0===e?void 0:e.label},z("vm-menu-radio-group",{value:`${this.currentAudioTrack}`,onVmCheck:this.onAudioTrackSelect.bind(this)},this.audioTracks.map((i,r)=>z("vm-menu-radio",{label:i.label,value:`${r}`}))))}render(){return z("vm-settings",{pin:this.pin},this.buildAudioTracksMenu(),this.buildPlaybackRateSubmenu(),this.buildPlaybackQualitySubmenu(),this.isVideoView&&this.buildTextTracksSubmenu(),z("slot",null))}static get watchers(){return{playbackReady:["onPlaybackReady","onAudioTracksChange","onTextTracksChange"],audioTracks:["onAudioTracksChange"],textTracks:["onTextTracksChange"]}}static get style(){return":host{z-index:var(--vm-menu-z-index)}"}},jhe=class extends HTMLElement{constructor(){super(),this.__registerHost(),lt(this),this.noClickToPlay=!1,this.noDblClickFullscreen=!1,this.noCaptions=!1,this.noPoster=!1,this.noSpinner=!1,this.noControls=!1,this.noSettings=!1,this.noLoadingScreen=!1,Ke(this)}render(){return z("vm-ui",null,!this.noClickToPlay&&z("vm-click-to-play",null),!this.noDblClickFullscreen&&z("vm-dbl-click-fullscreen",null),!this.noCaptions&&z("vm-captions",null),!this.noPoster&&z("vm-poster",null),!this.noSpinner&&z("vm-spinner",null),!this.noLoadingScreen&&z("vm-loading-screen",null),!this.noControls&&z("vm-default-controls",null),!this.noSettings&&z("vm-default-settings",null),z("slot",null))}static get style(){return":host{display:contents;pointer-events:none}"}};class OS{constructor(n,e,i){var r;this.el=n,this.attributes=e,this.onLoad=i,this.hasLoaded=!1,!co(this.el)&&(this.intersectionObs=this.canObserveIntersection()?new IntersectionObserver(this.onIntersection.bind(this)):void 0,this.mutationObs=this.canObserveMutations()?new MutationObserver(this.onMutation.bind(this)):void 0,null===(r=this.mutationObs)||void 0===r||r.observe(this.el,{childList:!0,subtree:!0,attributeFilter:this.attributes}),this.lazyLoad())}didLoad(){return this.hasLoaded}destroy(){var n,e;null===(n=this.intersectionObs)||void 0===n||n.disconnect(),null===(e=this.mutationObs)||void 0===e||e.disconnect()}canObserveIntersection(){return Gr&&window.IntersectionObserver}canObserveMutations(){return Gr&&window.MutationObserver}lazyLoad(){var n;this.canObserveIntersection()?null===(n=this.intersectionObs)||void 0===n||n.observe(this.el):this.load()}onIntersection(n){n.forEach(e=>{(e.intersectionRatio>0||e.isIntersecting)&&(this.load(),this.intersectionObs.unobserve(e.target))})}onMutation(){this.hasLoaded&&this.load()}getLazyElements(){return(co(this.el.shadowRoot)?this.el:this.el.shadowRoot).querySelectorAll(".lazy")}load(){window.requestAnimationFrame(()=>{this.getLazyElements().forEach(this.loadEl.bind(this))})}loadEl(n){var e,i;null===(e=this.intersectionObs)||void 0===e||e.unobserve(n),this.hasLoaded=!0,null===(i=this.onLoad)||void 0===i||i.call(this,n)}}let uL=0;const Sy=new Set,Whe=class extends HTMLElement{constructor(){super(),this.__registerHost(),lt(this),this.vmEmbedSrcChange=ae(this,"vmEmbedSrcChange",3),this.vmEmbedMessage=ae(this,"vmEmbedMessage",3),this.vmEmbedLoaded=ae(this,"vmEmbedLoaded",3),this.srcWithParams="",this.hasEnteredViewport=!1,this.embedSrc="",this.mediaTitle="",this.params="",this.preconnections=[],Ke(this)}onEmbedSrcChange(){this.srcWithParams=Cr(this.embedSrc)&&this.embedSrc.length>0?((t,n)=>((t,n)=>{if(fe(n)||0===n.length)return t;const e=t.split("?",2);return e[0]+(fe(e[1])?`?${n}`:`?${e[1]}&${n}`)})(t,hy(n)?(t=>{const n=[],e=(i,r)=>{n.push(`${encodeURIComponent(i)}=${encodeURIComponent(r)}`)};return Object.keys(t).forEach(i=>{const r=t[i];co(r)||(py(r)?r.forEach(o=>e(i,o)):e(i,r))}),n.join("&")})(n):n))(this.embedSrc,this.params):void 0}srcWithParamsChange(){fe(this.srcWithParams)||!this.hasEnteredViewport&&!Sy.has(this.embedSrc)&&lL(this.srcWithParams)&&Sy.add(this.embedSrc),this.vmEmbedSrcChange.emit(this.srcWithParams)}preconnectionsChange(){this.hasEnteredViewport||this.preconnections.filter(t=>!Sy.has(t)).forEach(t=>{lL(t)&&Sy.add(t)})}connectedCallback(){this.lazyLoader=new OS(this.host,["data-src"],t=>{const n=t.getAttribute("data-src");t.removeAttribute("src"),Il(n)||t.setAttribute("src",n)}),this.onEmbedSrcChange(),this.genIframeId()}disconnectedCallback(){this.lazyLoader.destroy()}onWindowMessage(t){var n,e,i;if(t.source!==(null===(n=this.iframe)||void 0===n?void 0:n.contentWindow)||Cr(this.origin)&&this.origin!==t.origin)return;const o=null!==(i=null===(e=this.decoder)||void 0===e?void 0:e.call(this,t.data))&&void 0!==i?i:t.data;o&&this.vmEmbedMessage.emit(o)}postMessage(t,n){var e,i;return function(t,n,e,i){return new(e||(e=Promise))(function(o,s){function l(m){try{d(i.next(m))}catch(_){s(_)}}function c(m){try{d(i.throw(m))}catch(_){s(_)}}function d(m){m.done?o(m.value):function(o){return o instanceof e?o:new e(function(s){s(o)})}(m.value).then(l,c)}d((i=i.apply(t,n||[])).next())})}(this,void 0,void 0,function*(){null===(i=null===(e=this.iframe)||void 0===e?void 0:e.contentWindow)||void 0===i||i.postMessage(JSON.stringify(t),null!=n?n:"*")})}onLoad(){this.vmEmbedLoaded.emit()}genIframeId(){uL+=1,this.id=`vm-iframe-${uL}`}render(){return z("iframe",{id:this.id,class:"lazy",title:this.mediaTitle,"data-src":this.srcWithParams,allowFullScreen:!0,allow:"autoplay; encrypted-media; picture-in-picture;",onLoad:this.onLoad.bind(this),ref:t=>{this.iframe=t}})}get host(){return this}static get watchers(){return{embedSrc:["onEmbedSrcChange"],params:["onEmbedSrcChange"],srcWithParams:["srcWithParamsChange"],preconnections:["preconnectionsChange"]}}static get style(){return":host{z-index:var(--vm-media-z-index)}iframe{position:absolute;top:0;left:0;border:0;width:100%;height:100%;user-select:none}"}},Qhe=class extends HTMLElement{constructor(){super(),this.__registerHost(),lt(this),this.duration=-1,this.i18n={},this.alwaysShowHours=!1,Ke(this),Qt(this,["duration","i18n"])}render(){return z("vm-time",{label:this.i18n.duration,seconds:Math.max(0,this.duration),alwaysShowHours:this.alwaysShowHours})}static get style(){return":host{display:flex;align-items:center;justify-content:center}"}};var Ho={fullscreenEnabled:0,fullscreenElement:1,requestFullscreen:2,exitFullscreen:3,fullscreenchange:4,fullscreenerror:5,fullscreen:6},dL=["webkitFullscreenEnabled","webkitFullscreenElement","webkitRequestFullscreen","webkitExitFullscreen","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],hL=["mozFullScreenEnabled","mozFullScreenElement","mozRequestFullScreen","mozCancelFullScreen","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],pL=["msFullscreenEnabled","msFullscreenElement","msRequestFullscreen","msExitFullscreen","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"],fo="undefined"!=typeof window&&void 0!==window.document?window.document:{},ms="fullscreenEnabled"in fo&&Object.keys(Ho)||dL[0]in fo&&dL||hL[0]in fo&&hL||pL[0]in fo&&pL||[],$u={requestFullscreen:function(t){return t[ms[Ho.requestFullscreen]]()},requestFullscreenFunction:function(t){return t[ms[Ho.requestFullscreen]]},get exitFullscreen(){return fo[ms[Ho.exitFullscreen]].bind(fo)},get fullscreenPseudoClass(){return":"+ms[Ho.fullscreen]},addEventListener:function(t,n,e){return fo.addEventListener(ms[Ho[t]],n,e)},removeEventListener:function(t,n,e){return fo.removeEventListener(ms[Ho[t]],n,e)},get fullscreenEnabled(){return Boolean(fo[ms[Ho.fullscreenEnabled]])},set fullscreenEnabled(t){},get fullscreenElement(){return fo[ms[Ho.fullscreenElement]]},set fullscreenElement(t){},get onfullscreenchange(){return fo[("on"+ms[Ho.fullscreenchange]).toLowerCase()]},set onfullscreenchange(t){return fo[("on"+ms[Ho.fullscreenchange]).toLowerCase()]=t},get onfullscreenerror(){return fo[("on"+ms[Ho.fullscreenerror]).toLowerCase()]},set onfullscreenerror(t){return fo[("on"+ms[Ho.fullscreenerror]).toLowerCase()]=t}};function fL(t){return{all:t=t||new Map,on:function(n,e){var i=t.get(n);i?i.push(e):t.set(n,[e])},off:function(n,e){var i=t.get(n);i&&(e?i.splice(i.indexOf(e)>>>0,1):t.set(n,[]))},emit:function(n,e){var i=t.get(n);i&&i.slice().map(function(r){r(e)}),(i=t.get("*"))&&i.slice().map(function(r){r(n,e)})}}}var _m=function(t,n,e,i){return new(e||(e=Promise))(function(o,s){function l(m){try{d(i.next(m))}catch(_){s(_)}}function c(m){try{d(i.throw(m))}catch(_){s(_)}}function d(m){m.done?o(m.value):function(o){return o instanceof e?o:new e(function(s){s(o)})}(m.value).then(l,c)}d((i=i.apply(t,n||[])).next())})};class mL{constructor(n){this.host=n,this.disposal=new zi,this.emitter=fL()}get isSupported(){return this.isSupportedNatively}get isSupportedNatively(){return $u.fullscreenEnabled}get isFullscreen(){return this.isNativeFullscreen}get isNativeFullscreen(){if($u.fullscreenElement===this.host)return!0;try{return this.host.matches($u.fullscreenPseudoClass)}catch(n){return!1}}on(n,e){this.emitter.on(n,e)}off(n,e){this.emitter.off(n,e)}destroy(){return _m(this,void 0,void 0,function*(){this.isFullscreen&&(yield this.exitFullscreen()),this.disposal.empty(),this.emitter.all.clear()})}addFullscreenChangeEventListener(n){return this.isSupported?xn($u,"fullscreenchange",n):Ys}addFullscreenErrorEventListener(n){return this.isSupported?xn($u,"fullscreenerror",n):Ys}requestFullscreen(){return _m(this,void 0,void 0,function*(){if(!this.isFullscreen)return this.throwIfNoFullscreenSupport(),this.disposal.add(this.addFullscreenChangeEventListener(this.handleFullscreenChange.bind(this))),this.disposal.add(this.addFullscreenErrorEventListener(this.handleFullscreenError.bind(this))),this.makeEnterFullscreenRequest()})}makeEnterFullscreenRequest(){return _m(this,void 0,void 0,function*(){return $u.requestFullscreen(this.host)})}handleFullscreenChange(){this.isFullscreen||this.disposal.empty(),this.emitter.emit("change",this.isFullscreen)}handleFullscreenError(n){this.emitter.emit("error",n)}exitFullscreen(){return _m(this,void 0,void 0,function*(){if(this.isFullscreen)return this.throwIfNoFullscreenSupport(),this.makeExitFullscreenRequest()})}makeExitFullscreenRequest(){return _m(this,void 0,void 0,function*(){return $u.exitFullscreen()})}throwIfNoFullscreenSupport(){if(!this.isSupported)throw Error("Fullscreen API is not enabled or supported in this environment.")}}var gL=function(t,n,e,i){return new(e||(e=Promise))(function(o,s){function l(m){try{d(i.next(m))}catch(_){s(_)}}function c(m){try{d(i.throw(m))}catch(_){s(_)}}function d(m){m.done?o(m.value):function(o){return o instanceof e?o:new e(function(s){s(o)})}(m.value).then(l,c)}d((i=i.apply(t,n||[])).next())})};class Zhe extends mL{constructor(n,e){super(n),this.host=n,this.presentationController=e}get isFullscreen(){return this.presentationController.isFullscreenMode}get isSupported(){return this.presentationController.isSupported}makeEnterFullscreenRequest(){return gL(this,void 0,void 0,function*(){return this.presentationController.setPresentationMode("fullscreen")})}makeExitFullscreenRequest(){return gL(this,void 0,void 0,function*(){return this.presentationController.setPresentationMode("inline")})}addFullscreenChangeEventListener(){return this.isSupported?(this.presentationController.on("change",this.handlePresentationModeChange.bind(this)),()=>{this.presentationController.off("change",this.handlePresentationModeChange.bind(this))}):Ys}handlePresentationModeChange(){this.handleFullscreenChange()}addFullscreenErrorEventListener(){return Ys}}class Yhe{constructor(n){this.host=n,this.disposal=new zi,this.emitter=fL();const e=n.disconnectedCallback;n.disconnectedCallback=()=>function(t,n,e,i){return new(e||(e=Promise))(function(o,s){function l(m){try{d(i.next(m))}catch(_){s(_)}}function c(m){try{d(i.throw(m))}catch(_){s(_)}}function d(m){m.done?o(m.value):function(o){return o instanceof e?o:new e(function(s){s(o)})}(m.value).then(l,c)}d((i=i.apply(t,n||[])).next())})}(this,void 0,void 0,function*(){yield this.destroy(),null==e||e.call(n)})}get videoElement(){var n;if("video"===(null===(n=this.host.mediaEl)||void 0===n?void 0:n.tagName.toLowerCase()))return this.host.mediaEl}get presentationMode(){var n;return null===(n=this.videoElement)||void 0===n?void 0:n.webkitPresentationMode}get isInlineMode(){return"inline"===this.presentationMode}get isPictureInPictureMode(){return"inline"===this.presentationMode}get isFullscreenMode(){return"fullscreen"===this.presentationMode}get isSupported(){var n,e,i;return Uh&&bS(null===(n=this.videoElement)||void 0===n?void 0:n.webkitSetPresentationMode)&&null!==(i=null===(e=this.videoElement)||void 0===e?void 0:e.webkitSupportsFullscreen)&&void 0!==i&&i}setPresentationMode(n){var e,i;null===(i=null===(e=this.videoElement)||void 0===e?void 0:e.webkitSetPresentationMode)||void 0===i||i.call(e,n)}on(n,e){this.emitter.on(n,e)}off(n,e){this.emitter.off(n,e)}destroy(){this.setPresentationMode("inline"),this.disposal.empty()}addPresentationModeChangeEventListener(){return!this.isSupported||co(this.videoElement)?Ys:xn(this.videoElement,"webkitpresentationmodechanged",this.handlePresentationModeChange.bind(this))}handlePresentationModeChange(){this.emitter.emit("change",this.presentationMode)}}var Wr=function(t,n,e,i){return new(e||(e=Promise))(function(o,s){function l(m){try{d(i.next(m))}catch(_){s(_)}}function c(m){try{d(i.throw(m))}catch(_){s(_)}}function d(m){m.done?o(m.value):function(o){return o instanceof e?o:new e(function(s){s(o)})}(m.value).then(l,c)}d((i=i.apply(t,n||[])).next())})};const Xhe=class extends HTMLElement{constructor(){super(),this.__registerHost(),this.vmLoadStart=ae(this,"vmLoadStart",7),this.vmError=ae(this,"vmError",7),this.vmMediaElChange=ae(this,"vmMediaElChange",7),this.vmSrcSetChange=ae(this,"vmSrcSetChange",7),this.textTracksDisposal=new zi,this.wasPausedBeforeSeeking=!0,this.currentSrcSet=[],this.mediaQueryDisposal=new zi,this.willAttach=!1,this.preload="metadata",this.playbackRates=[.25,.5,.75,1,1.25,1.5,2],this.language="en",this.autoplay=!1,this.controls=!1,this.loop=!1,this.muted=!1,this.playsinline=!1,this.noConnect=!1,this.paused=!0,this.currentTime=0,this.volume=0,this.playbackReady=!1,this.playbackStarted=!1,this.presentationController=new Yhe(this),this.fullscreenController=new Zhe(this,this.presentationController),this.currentTextTrack=-1,this.hasCustomTextManager=!1,this.isTextTrackVisible=!0,this.shouldRenderNativeTextTracks=!0,Ke(this),Pc(this),wy(this,["playbackReady","playbackStarted","currentTime","volume","paused","currentTextTrack","isTextTrackVisible","shouldRenderNativeTextTracks"]),GR(this,"vm-poster",t=>{[this.vmPoster]=t})}onMediaTitleChange(){this.dispatch("mediaTitle",this.mediaTitle)}onPosterChange(){var t;this.playbackStarted||null===(t=this.mediaEl)||void 0===t||t.load()}onViewTypeChange(){this.dispatch("viewType",this.viewType)}connectedCallback(){this.initLazyLoader(),this.dispatch=Lh(this),this.onViewTypeChange(),this.onPosterChange(),this.onMediaTitleChange(),this.addPresentationControllerListeners()}componentDidRender(){this.prevMediaEl!==this.mediaEl&&(this.prevMediaEl=this.mediaEl,this.vmMediaElChange.emit(this.mediaEl),this.presentationController.addPresentationModeChangeEventListener())}componentDidLoad(){this.onViewTypeChange()}disconnectedCallback(){var t;this.mediaQueryDisposal.empty(),this.textTracksDisposal.empty(),this.cancelTimeUpdates(),null===(t=this.lazyLoader)||void 0===t||t.destroy(),this.wasPausedBeforeSeeking=!0}initLazyLoader(){this.lazyLoader=new OS(this.host,["data-src","data-poster"],()=>{if(co(this.mediaEl))return;const t=this.mediaEl.getAttribute("data-poster");Il(t)||this.mediaEl.setAttribute("poster",t),this.refresh(),this.didSrcSetChange()})}refresh(){if(co(this.mediaEl))return;const{children:t}=this.mediaEl;for(let n=0;n<=t.length-1;n+=1){const e=t[n],i=e.getAttribute("data-src")||e.getAttribute("src")||e.getAttribute("data-vs");e.removeAttribute("src"),!Il(i)&&(e.setAttribute("data-vs",i),e.setAttribute("src",i))}}didSrcSetChange(){if(co(this.mediaEl))return;const n=Array.from(this.mediaEl.querySelectorAll("source")).map(i=>{var r;return{src:i.getAttribute("data-vs"),media:null!==(r=i.getAttribute("data-media"))&&void 0!==r?r:void 0,ref:i}});(this.currentSrcSet.length!==n.length||n.some((i,r)=>this.currentSrcSet[r].src!==i.src))&&(this.currentSrcSet=n,this.onSrcSetChange())}onSrcSetChange(){var t;this.textTracksDisposal.empty(),this.mediaQueryDisposal.empty(),this.vmLoadStart.emit(),this.vmSrcSetChange.emit(this.currentSrcSet),this.willAttach||null===(t=this.mediaEl)||void 0===t||t.load()}hasCustomPoster(){return!Uh&&!fe(this.vmPoster)}cancelTimeUpdates(){Pl(this.timeRAF)&&window.cancelAnimationFrame(this.timeRAF),this.timeRAF=void 0}requestTimeUpdates(){var t,n;this.dispatch("currentTime",null!==(n=null===(t=this.mediaEl)||void 0===t?void 0:t.currentTime)&&void 0!==n?n:0),this.timeRAF=window.requestAnimationFrame(()=>{this.requestTimeUpdates()})}getMediaType(){const{currentSrc:t}=this.mediaEl;return SS.test(t)?fs.Audio:ZR.test(t)||TS.test(t)?fs.Video:void 0}onLoadedMetadata(){this.mediaEl.volume=this.volume/100,this.listenToTextTracksForChanges(),this.onTextTracksChange(),this.onProgress(),this.dispatch("currentPoster",this.poster),this.dispatch("duration",this.mediaEl.duration),this.dispatch("playbackRates",this.playbackRates),this.willAttach||(this.dispatch("currentSrc",this.mediaEl.currentSrc),this.dispatch("mediaType",this.getMediaType()),this.dispatch("playbackReady",!0))}onProgress(){const{buffered:t,duration:n}=this.mediaEl,e=0===t.length?0:t.end(t.length-1);this.dispatch("buffered",e>n?n:e)}onPlay(){this.requestTimeUpdates(),this.dispatch("paused",!1),this.playbackStarted||this.dispatch("playbackStarted",!0)}onPause(){this.cancelTimeUpdates(),this.dispatch("paused",!0),this.dispatch("buffering",!1)}onPlaying(){this.dispatch("playing",!0),this.dispatch("buffering",!1)}onSeeking(){this.wasPausedBeforeSeeking||(this.wasPausedBeforeSeeking=this.mediaEl.paused),this.dispatch("currentTime",this.mediaEl.currentTime),this.dispatch("seeking",!0)}onSeeked(){0===this.currentTime&&!this.playbackStarted||(this.dispatch("seeking",!1),(!this.playbackStarted||!this.wasPausedBeforeSeeking)&&this.attemptToPlay(),this.wasPausedBeforeSeeking=!0)}onRateChange(){this.dispatch("playbackRate",this.mediaEl.playbackRate)}onVolumeChange(){this.dispatch("muted",this.mediaEl.muted),this.dispatch("volume",100*this.mediaEl.volume)}onDurationChange(){this.dispatch("duration",this.mediaEl.duration)}onWaiting(){this.dispatch("buffering",!0)}onSuspend(){this.dispatch("buffering",!1)}onEnded(){this.loop||this.dispatch("playbackEnded",!0)}onError(){this.vmError.emit(this.mediaEl.error)}attemptToPlay(){var t;try{null===(t=this.mediaEl)||void 0===t||t.play()}catch(n){this.vmError.emit(n)}}togglePiPInChrome(t){var n;return t?null===(n=this.mediaEl)||void 0===n?void 0:n.requestPictureInPicture():document.exitPictureInPicture()}togglePiPInSafari(t){var n,e;const i=t?"picture-in-picture":"inline";if(!(null===(n=this.mediaEl)||void 0===n?void 0:n.webkitSupportsPresentationMode(i)))throw new Error("PiP API is not available.");return null===(e=this.mediaEl)||void 0===e?void 0:e.webkitSetPresentationMode(i)}togglePiP(t){return Wr(this,void 0,void 0,function*(){if(iL())return this.togglePiPInChrome(t);if(rL())return this.togglePiPInSafari(t);throw new Error("PiP API is not available.")})}onEnterPiP(){this.dispatch("isPiPActive",!0)}onLeavePiP(){this.dispatch("isPiPActive",!1)}addPresentationControllerListeners(){this.presentationController.on("change",t=>{this.dispatch("isPiPActive","picture-in-picture"===t),this.dispatch("isFullscreenActive","fullscreen"===t)})}getAdapter(){return Wr(this,void 0,void 0,function*(){return{getInternalPlayer:()=>Wr(this,void 0,void 0,function*(){return this.mediaEl}),play:()=>Wr(this,void 0,void 0,function*(){var t;return null===(t=this.mediaEl)||void 0===t?void 0:t.play()}),pause:()=>Wr(this,void 0,void 0,function*(){var t;return null===(t=this.mediaEl)||void 0===t?void 0:t.pause()}),canPlay:t=>Wr(this,void 0,void 0,function*(){return Cr(t)&&(SS.test(t)||ZR.test(t))}),setCurrentTime:t=>Wr(this,void 0,void 0,function*(){this.mediaEl&&(this.mediaEl.currentTime=t)}),setMuted:t=>Wr(this,void 0,void 0,function*(){this.mediaEl&&(this.mediaEl.muted=t)}),setVolume:t=>Wr(this,void 0,void 0,function*(){this.mediaEl&&(this.mediaEl.volume=t/100)}),canSetPlaybackRate:()=>Wr(this,void 0,void 0,function*(){return!0}),setPlaybackRate:t=>Wr(this,void 0,void 0,function*(){this.mediaEl&&(this.mediaEl.playbackRate=t)}),canSetPiP:()=>Wr(this,void 0,void 0,function*(){return iL()||rL()}),enterPiP:()=>this.togglePiP(!0),exitPiP:()=>this.togglePiP(!1),canSetFullscreen:()=>Wr(this,void 0,void 0,function*(){return this.fullscreenController.isSupported}),enterFullscreen:()=>this.fullscreenController.requestFullscreen(),exitFullscreen:()=>this.fullscreenController.exitFullscreen(),setCurrentTextTrack:t=>Wr(this,void 0,void 0,function*(){t!==this.currentTextTrack&&this.toggleTextTrackModes(t)}),setTextTrackVisibility:t=>Wr(this,void 0,void 0,function*(){this.isTextTrackVisible=t,this.toggleTextTrackModes(this.currentTextTrack)})}})}onHasCustomTextManagerChange(){this.hasCustomTextManager?this.textTracksDisposal.empty():this.playbackReady&&this.listenToTextTracksForChanges()}onShouldRenderNativeTextTracksChange(){this.hasCustomTextManager||this.toggleTextTrackModes(this.currentTextTrack)}onProviderConnect(t){this.noConnect&&t.stopImmediatePropagation()}onProviderDisconnect(t){this.noConnect&&t.stopImmediatePropagation()}getFilteredTextTracks(){const t=[],n=Array.from(this.mediaEl.textTracks);for(let e=0;e<n.length;e+=1){const i=n[e];("subtitles"===i.kind||"captions"===i.kind)&&i.label&&t.push(n[e])}return t}listenToTextTracksForChanges(){this.hasCustomTextManager||(this.textTracksDisposal.empty(),!fe(this.mediaEl)&&this.textTracksDisposal.add(xn(this.mediaEl.textTracks,"change",this.onTextTracksChange.bind(this))))}onTextTracksChange(){var t;const n=this.getFilteredTextTracks();let e=-1;for(let i=0;i<n.length;i+=1)if("hidden"===n[i].mode)e=i;else if("showing"===n[i].mode){e=i;break}this.shouldRenderNativeTextTracks||"showing"!==(null===(t=n[e])||void 0===t?void 0:t.mode)?(this.shouldRenderNativeTextTracks&&(this.isTextTrackVisible=-1!==e&&"showing"===n[e].mode,this.dispatch("isTextTrackVisible",this.isTextTrackVisible)),this.dispatch("textTracks",n),this.dispatch("currentTextTrack",this.shouldRenderNativeTextTracks&&!this.isTextTrackVisible?-1:e)):n[e].mode="hidden"}toggleTextTrackModes(t){if(co(this.mediaEl))return;const{textTracks:n}=this.mediaEl;if(-1===t)Array.from(n).forEach(i=>{i.mode="disabled"});else{const i=n[this.currentTextTrack];i&&(i.mode="disabled")}const e=n[t];e&&(e.mode=this.isTextTrackVisible&&this.shouldRenderNativeTextTracks?"showing":"hidden"),this.dispatch("currentTextTrack",this.shouldRenderNativeTextTracks&&!this.isTextTrackVisible?-1:t),this.dispatch("isTextTrackVisible",this.isTextTrackVisible)}render(){const t={autoplay:this.autoplay,muted:this.muted,playsinline:this.playsinline,playsInline:this.playsinline,"x5-playsinline":this.playsinline,"webkit-playsinline":this.playsinline,controls:this.controls,crossorigin:""===this.crossOrigin?"anonymous":this.crossOrigin,controlslist:this.controlsList,"data-poster":this.hasCustomPoster()?void 0:this.poster,loop:this.loop,preload:this.preload,disablePictureInPicture:this.disablePiP,autoPictureInPicture:this.autoPiP,disableRemotePlayback:this.disableRemotePlayback,"x-webkit-airplay":this.disableRemotePlayback?"deny":"allow",ref:i=>{this.mediaEl=i},onLoadedMetadata:this.onLoadedMetadata.bind(this),onProgress:this.onProgress.bind(this),onPlay:this.onPlay.bind(this),onPause:this.onPause.bind(this),onPlaying:this.onPlaying.bind(this),onSeeking:this.onSeeking.bind(this),onSeeked:this.onSeeked.bind(this),onRateChange:this.onRateChange.bind(this),onVolumeChange:this.onVolumeChange.bind(this),onDurationChange:this.onDurationChange.bind(this),onWaiting:this.onWaiting.bind(this),onSuspend:this.onSuspend.bind(this),onEnded:this.onEnded.bind(this),onError:this.onError.bind(this)},n=z("audio",Object.assign({class:"lazy"},t),z("slot",null),"Your browser does not support the",z("code",null,"audio"),"element."),e=z("video",Object.assign({class:"lazy"},t,{onenterpictureinpicture:this.onEnterPiP.bind(this),onleavepictureinpicture:this.onLeavePiP.bind(this)}),z("slot",null),"Your browser does not support the",z("code",null,"video"),"element.");return this.viewType===ho.Audio?n:e}get host(){return this}static get watchers(){return{mediaTitle:["onMediaTitleChange"],poster:["onPosterChange"],viewType:["onViewTypeChange"],hasCustomTextManager:["onHasCustomTextManagerChange"],shouldRenderNativeTextTracks:["onShouldRenderNativeTextTracksChange"]}}static get style(){return"audio.sc-vm-file,video.sc-vm-file{border-radius:inherit;vertical-align:middle;width:100%;outline:0}video.sc-vm-file{position:absolute;top:0;left:0;border:0;height:100%;user-select:none}"}};const npe=class extends HTMLElement{constructor(){super(),this.__registerHost(),lt(this),this.canSetFullscreen=!1,this.enterIcon="fullscreen-enter",this.exitIcon="fullscreen-exit",this.tooltipPosition="top",this.hideTooltip=!1,this.keys="f",this.isFullscreenActive=!1,this.i18n={},this.playbackReady=!1,Ke(this),Qt(this,["isFullscreenActive","playbackReady","i18n"])}onPlaybackReadyChange(){var t;return function(t,n,e,i){return new(e||(e=Promise))(function(o,s){function l(m){try{d(i.next(m))}catch(_){s(_)}}function c(m){try{d(i.throw(m))}catch(_){s(_)}}function d(m){m.done?o(m.value):function(o){return o instanceof e?o:new e(function(s){s(o)})}(m.value).then(l,c)}d((i=i.apply(t,n||[])).next())})}(this,void 0,void 0,function*(){const n=$a(this);this.canSetFullscreen=null!==(t=yield null==n?void 0:n.canSetFullscreen())&&void 0!==t&&t})}componentDidLoad(){this.onPlaybackReadyChange()}onClick(){const t=$a(this);this.isFullscreenActive?null==t||t.exitFullscreen():null==t||t.enterFullscreen()}render(){const t=this.isFullscreenActive?this.i18n.exitFullscreen:this.i18n.enterFullscreen,n=fe(this.keys)?t:`${t} (${this.keys})`;return z(Ph,{hidden:!this.canSetFullscreen},z("vm-control",{label:this.i18n.fullscreen,keys:this.keys,pressed:this.isFullscreenActive,hidden:!this.canSetFullscreen,onClick:this.onClick.bind(this)},z("vm-icon",{name:this.isFullscreenActive?this.exitIcon:this.enterIcon,library:this.icons}),z("vm-tooltip",{hidden:this.hideTooltip,position:this.tooltipPosition,direction:this.tooltipDirection},n)))}static get watchers(){return{playbackReady:["onPlaybackReadyChange"]}}static get style(){return":host([hidden]){display:none}"}};var Va=function(t,n,e,i){return new(e||(e=Promise))(function(o,s){function l(m){try{d(i.next(m))}catch(_){s(_)}}function c(m){try{d(i.throw(m))}catch(_){s(_)}}function d(m){m.done?o(m.value):function(o){return o instanceof e?o:new e(function(s){s(o)})}(m.value).then(l,c)}d((i=i.apply(t,n||[])).next())})};const ipe=class extends HTMLElement{constructor(){super(),this.__registerHost(),this.vmLoadStart=ae(this,"vmLoadStart",7),this.vmError=ae(this,"vmError",7),this.hasAttached=!1,this.version="latest",this.preload="metadata",this.playbackReady=!1,Ke(this),Pc(this),Qt(this,["playbackReady"])}connectedCallback(){this.dispatch=Lh(this),this.mediaEl&&this.setupHls()}disconnectedCallback(){this.destroyHls()}get src(){if(co(this.videoProvider))return;const t=this.videoProvider.querySelectorAll("source"),n=Array.from(t).find(e=>TS.test(e.src)||Vde.test(e.type));return null==n?void 0:n.src}setupHls(){return Va(this,void 0,void 0,function*(){if(fe(this.hls))try{const t=this.libSrc||`https://cdn.jsdelivr.net/npm/hls.js@${this.version}/dist/hls.min.js`,n=yield cL(t,"Hls");if(!n.isSupported())return void this.vmError.emit("hls.js is not supported");this.hls=new n(this.config),this.hls.on(n.Events.MEDIA_ATTACHED,()=>{this.hasAttached=!0,this.onSrcChange()}),this.hls.on(n.Events.AUDIO_TRACKS_UPDATED,()=>{this.dispatch("audioTracks",this.hls.audioTracks),this.dispatch("currentAudioTrack",this.hls.audioTrack)}),this.hls.on(n.Events.AUDIO_TRACK_SWITCHED,()=>{this.dispatch("currentAudioTrack",this.hls.audioTrack)}),this.hls.on(n.Events.ERROR,(e,i)=>{if(i.fatal)switch(i.type){case n.ErrorTypes.NETWORK_ERROR:this.hls.startLoad();break;case n.ErrorTypes.MEDIA_ERROR:this.hls.recoverMediaError();break;default:this.destroyHls()}this.vmError.emit({event:e,data:i})}),this.hls.on(n.Events.MANIFEST_PARSED,()=>{this.dispatch("mediaType",fs.Video),this.dispatch("currentSrc",this.src),this.dispatchLevels()}),this.hls.on(n.Events.LEVEL_LOADED,(e,i)=>{this.playbackReady||(this.dispatch("duration",i.details.totalduration),this.dispatch("playbackReady",!0))}),this.hls.attachMedia(this.mediaEl)}catch(t){this.vmError.emit(t)}})}dispatchLevels(){!this.hls.levels||0===this.hls.levels.length||(this.dispatch("playbackQualities",["Auto",...this.hls.levels.map(this.levelToPlaybackQuality)]),this.dispatch("playbackQuality","Auto"))}levelToPlaybackQuality(t){return-1===t?"Auto":`${t.height}p`}findLevelIndexFromQuality(t){return this.hls.levels.findIndex(n=>this.levelToPlaybackQuality(n)===t)}destroyHls(){var t;null===(t=this.hls)||void 0===t||t.destroy(),this.hasAttached=!1}onMediaElChange(t){return Va(this,void 0,void 0,function*(){this.destroyHls(),!fe(t.detail)&&(this.mediaEl=t.detail,setTimeout(()=>Va(this,void 0,void 0,function*(){yield this.setupHls()}),50))})}onSrcChange(){var t;return Va(this,void 0,void 0,function*(){this.hasAttached&&this.hls.url!==this.src&&(this.vmLoadStart.emit(),null===(t=this.hls)||void 0===t||t.loadSource(this.src))})}getAdapter(){var t,n;return Va(this,void 0,void 0,function*(){const e=null!==(n=yield null===(t=this.videoProvider)||void 0===t?void 0:t.getAdapter())&&void 0!==n?n:{},i=e.canPlay;return Object.assign(Object.assign({},e),{getInternalPlayer:()=>Va(this,void 0,void 0,function*(){return this.hls}),canPlay:r=>Va(this,void 0,void 0,function*(){var o;return Cr(r)&&TS.test(r)||null!==(o=null==i?void 0:i(r))&&void 0!==o&&o}),canSetPlaybackQuality:()=>Va(this,void 0,void 0,function*(){var r,o;return(null===(o=null===(r=this.hls)||void 0===r?void 0:r.levels)||void 0===o?void 0:o.length)>0}),setPlaybackQuality:r=>Va(this,void 0,void 0,function*(){fe(this.hls)||(this.hls.currentLevel=this.findLevelIndexFromQuality(r),this.dispatch("playbackQuality",r))}),setCurrentAudioTrack:r=>Va(this,void 0,void 0,function*(){fe(this.hls)||(this.hls.audioTrack=r)})})})}render(){return z("vm-video",{willAttach:!0,crossOrigin:this.crossOrigin,preload:this.preload,poster:this.poster,controlsList:this.controlsList,autoPiP:this.autoPiP,disablePiP:this.disablePiP,disableRemotePlayback:this.disableRemotePlayback,mediaTitle:this.mediaTitle,ref:t=>{this.videoProvider=t}},z("slot",null))}},_L="https://cdn.jsdelivr.net/npm/@vime/core@latest/icons",NS=new Map(Object.entries({vime:t=>`${_L}/vime/vm-${t}.svg`,material:t=>`${_L}/material/md-${t}.svg`})),FS=new Set;const RS=new Map;var vL=function(t,n,e,i){return new(e||(e=Promise))(function(o,s){function l(m){try{d(i.next(m))}catch(_){s(_)}}function c(m){try{d(i.throw(m))}catch(_){s(_)}}function d(m){m.done?o(m.value):function(o){return o instanceof e?o:new e(function(s){s(o)})}(m.value).then(l,c)}d((i=i.apply(t,n||[])).next())})};const dpe=new DOMParser,hpe=class extends HTMLElement{constructor(){super(),this.__registerHost(),lt(this),this.vmLoad=ae(this,"vmLoad",7),this.vmError=ae(this,"vmError",7),this.icons="material",Ke(this),function(t){const n=t;uo(t,()=>{FS.add(n)},()=>{FS.delete(n)})}(this)}handleChange(){this.setIcon()}connectedCallback(){Qt(this,["icons"])}componentDidLoad(){this.setIcon()}redraw(){return vL(this,void 0,void 0,function*(){this.setIcon()})}getLabel(){let t="";return this.label?t=this.label:this.name?t=this.name.replace(/-/g," "):this.src&&(t=this.src.replace(/.*\//,"").replace(/-/g," ").replace(/\.svg/i,"")),t}setIcon(){var t;return vL(this,void 0,void 0,function*(){const n=(t=>NS.get(t))(null!==(t=this.library)&&void 0!==t?t:this.icons);let e=this.src;if(this.name&&n&&(e=n(this.name)),e)try{const i=yield(t=>{if(RS.has(t))return RS.get(t);const n=fetch(t).then(e=>function(t,n,e,i){return new(e||(e=Promise))(function(o,s){function l(m){try{d(i.next(m))}catch(_){s(_)}}function c(m){try{d(i.throw(m))}catch(_){s(_)}}function d(m){m.done?o(m.value):function(o){return o instanceof e?o:new e(function(s){s(o)})}(m.value).then(l,c)}d((i=i.apply(t,n||[])).next())})}(void 0,void 0,void 0,function*(){if(e.ok){const i=document.createElement("div");i.innerHTML=yield e.text();const r=i.firstElementChild;return{ok:e.ok,status:e.status,svg:r&&"svg"===r.tagName.toLowerCase()?r.outerHTML:""}}return{ok:e.ok,status:e.status}}));return RS.set(t,n),n})(e);if(i.ok){const o=dpe.parseFromString(i.svg,"text/html").body.querySelector("svg");o?(this.svg=o.outerHTML,this.vmLoad.emit()):(this.svg="",this.vmError.emit({status:i.status}))}}catch(i){this.vmError.emit()}})}render(){return z("div",{class:"icon",role:"img","aria-label":this.getLabel(),innerHTML:this.svg})}static get watchers(){return{name:["handleChange"],src:["handleChange"],library:["handleChange"],icons:["handleChange"]}}static get style(){return":host{display:inline-block;width:1em;height:1em;contain:strict;box-sizing:content-box !important}.icon,svg{display:block;height:100%;width:100%;transition:var(--vm-icon-transition);transform:var(--vm-icon-transform);fill:var(--vm-icon-fill, currentColor);stroke:var(--vm-icon-stroke)}"}},ppe=class extends HTMLElement{constructor(){super(),this.__registerHost(),lt(this),this.icons="material",Ke(this),Qt(this,["icons"])}handleUpdate(){this.register()}connectedCallback(){this.register()}disconnectedCallback(){fe(this.name)||function(t){NS.delete(t)}(this.name)}register(){var t;!function(t,n){fe(n)||NS.set(t,n),FS.forEach(e=>{e.library===t&&e.redraw()})}(null!==(t=this.name)&&void 0!==t?t:this.icons,this.name?this.resolver:void 0)}get host(){return this}static get watchers(){return{name:["handleUpdate"],resolver:["handleUpdate"],icons:["handleUpdate"]}}},mpe=class extends HTMLElement{constructor(){super(),this.__registerHost(),lt(this),this.isLive=!1,this.i18n={},Ke(this),Qt(this,["isLive","i18n"])}render(){return z("div",{class:{liveIndicator:!0,hidden:!this.isLive}},z("div",{class:"indicator"}),this.i18n.live)}static get style(){return".liveIndicator{display:flex;align-items:center;font-size:13px;font-weight:bold;letter-spacing:0.6px;color:var(--vm-control-color)}.liveIndicator.hidden{display:none}.indicator{display:inline-block;width:8px;height:8px;border-radius:50%;margin-right:4px;background-color:var(--vm-live-indicator-color, red)}"}},_pe=class extends HTMLElement{constructor(){super(),this.__registerHost(),lt(this),this.playbackReady=!1,this.hideDots=!1,Ke(this),Qt(this,["playbackReady"])}render(){return z("div",{class:{loadingScreen:!0,inactive:this.playbackReady}},z("slot",null),!this.hideDots&&z("div",{class:"dotPulse"}))}static get style(){return":host{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:var(--vm-loading-screen-z-index);display:flex;align-items:center;justify-content:center}.loadingScreen{opacity:100;transition:var(--vm-fade-transition)}.loadingScreen.inactive{opacity:0}.dotPulse{position:relative;left:-9999px;width:var(--vm-loading-screen-dot-size);height:var(--vm-loading-screen-dot-size);border-radius:calc(var(--vm-loading-screen-dot-size) / 2);background-color:var(--vm-loading-screen-dot-color);color:var(--vm-loading-screen-dot-color);box-shadow:9999px 0 0 calc(calc(var(--vm-loading-screen-dot-size) / 2) * -1)\n    var(--vm-loading-screen-dot-color);animation:dotPulse var(--vm-loading-screen-pulse-duration) infinite linear;animation-delay:calc(var(--vm-loading-screen-pulse-duration) / 6)}.dotPulse::before,.dotPulse::after{content:'';display:inline-block;position:absolute;top:0;width:var(--vm-loading-screen-dot-size);height:var(--vm-loading-screen-dot-size);border-radius:calc(var(--vm-loading-screen-dot-size) / 2);background-color:var(--vm-loading-screen-dot-color);color:var(--vm-loading-screen-dot-color)}.dotPulse::before{box-shadow:9984px 0 0 calc(calc(var(--vm-loading-screen-dot-size) / 2) * -1)\n    var(--vm-loading-screen-dot-color);animation:dotPulseBefore var(--vm-loading-screen-pulse-duration) infinite\n    linear;animation-delay:0s}.dotPulse::after{box-shadow:10014px 0 0 calc(calc(var(--vm-loading-screen-dot-size) / 2) * -1)\n    var(--vm-loading-screen-dot-color);animation:dotPulseAfter var(--vm-loading-screen-pulse-duration) infinite\n    linear;animation-delay:calc(var(--vm-loading-screen-pulse-duration) / 3)}@keyframes dotPulseBefore{0%{box-shadow:9984px 0 0\n      calc(calc(var(--vm-loading-screen-dot-size) / 2) * -1)\n      var(--vm-loading-screen-dot-color)}30%{box-shadow:9984px 0 0 2px var(--vm-loading-screen-dot-color)}60%,100%{box-shadow:9984px 0 0\n      calc(calc(var(--vm-loading-screen-dot-size) / 2) * -1)\n      var(--vm-loading-screen-dot-color)}}@keyframes dotPulse{0%{box-shadow:9999px 0 0\n      calc(calc(var(--vm-loading-screen-dot-size) / 2) * -1)\n      var(--vm-loading-screen-dot-color)}30%{box-shadow:9999px 0 0 2px var(--vm-loading-screen-dot-color)}60%,100%{box-shadow:9999px 0 0\n      calc(calc(var(--vm-loading-screen-dot-size) / 2) * -1)\n      var(--vm-loading-screen-dot-color)}}@keyframes dotPulseAfter{0%{box-shadow:10014px 0 0\n      calc(calc(var(--vm-loading-screen-dot-size) / 2) * -1)\n      var(--vm-loading-screen-dot-color)}30%{box-shadow:10014px 0 0 2px var(--vm-loading-screen-dot-color)}60%,100%{box-shadow:10014px 0 0\n      calc(calc(var(--vm-loading-screen-dot-size) / 2) * -1)\n      var(--vm-loading-screen-dot-color)}}"}};var vm=function(t,n,e,i){return new(e||(e=Promise))(function(o,s){function l(m){try{d(i.next(m))}catch(_){s(_)}}function c(m){try{d(i.throw(m))}catch(_){s(_)}}function d(m){m.done?o(m.value):function(o){return o instanceof e?o:new e(function(s){s(o)})}(m.value).then(l,c)}d((i=i.apply(t,n||[])).next())})};const wpe=class extends HTMLElement{constructor(){super(),this.__registerHost(),lt(this),this.vmOpen=ae(this,"vmOpen",7),this.vmClose=ae(this,"vmClose",7),this.vmFocus=ae(this,"vmFocus",7),this.vmBlur=ae(this,"vmBlur",7),this.vmActiveSubmenuChange=ae(this,"vmActiveSubmenuChange",7),this.vmActiveMenuItemChange=ae(this,"vmActiveMenuItemChange",7),this.vmMenuHeightChange=ae(this,"vmMenuHeightChange",3),this.hasDisconnected=!1,this.active=!1,Ke(this)}onActiveMenuitemChange(){this.vmActiveMenuItemChange.emit(this.activeMenuItem)}onActiveSubmenuChange(){this.vmActiveSubmenuChange.emit(this.activeSubmenu)}onActiveChange(){var t;this.hasDisconnected||(this.active?this.vmOpen.emit(this.host):this.vmClose.emit(this.host),"vm-menu-item"===(null===(t=this.controller)||void 0===t?void 0:t.tagName.toLowerCase())&&(this.controller.expanded=!0))}connectedCallback(){this.hasDisconnected=!1}componentDidRender(){lo(()=>{this.hasDisconnected||this.calculateHeight()})}disconnectedCallback(){this.controller=void 0,this.hasDisconnected=!0}focusMenu(){var t;return vm(this,void 0,void 0,function*(){null===(t=this.menu)||void 0===t||t.focus()})}blurMenu(){var t;return vm(this,void 0,void 0,function*(){null===(t=this.menu)||void 0===t||t.blur()})}getActiveMenuItem(){return vm(this,void 0,void 0,function*(){return this.activeMenuItem})}setActiveMenuItem(t){return vm(this,void 0,void 0,function*(){null==t||t.focusItem(),this.activeMenuItem=t})}calculateHeight(){var t,n;return vm(this,void 0,void 0,function*(){let e=0;if(this.activeSubmenu){const i=yield this.activeSubmenu.getMenu();e=null!==(t=yield null==i?void 0:i.calculateHeight())&&void 0!==t?t:0,e+=(yield this.activeSubmenu.getControllerHeight())}else{const i=(null===(n=this.container)||void 0===n?void 0:n.firstChild).assignedElements({flatten:!0});null==i||i.forEach(r=>{e+=parseFloat(window.getComputedStyle(r).height)})}return this.vmMenuHeightChange.emit(e),e})}onOpenSubmenu(t){t.stopPropagation(),fe(this.activeSubmenu)||(this.activeSubmenu.active=!1),this.activeSubmenu=t.detail,this.getChildren().forEach(n=>{n!==this.activeSubmenu&&(n.style.opacity="0",n.style.visibility="hidden")}),lo(()=>{this.activeSubmenu.active=!0})}onCloseSubmenu(t){null==t||t.stopPropagation(),fe(this.activeSubmenu)||(this.activeSubmenu.active=!1),this.getChildren().forEach(n=>{n!==this.activeSubmenu&&(n.style.opacity="",n.style.visibility="")}),lo(()=>{this.activeSubmenu=void 0})}onWindowClick(){this.onCloseSubmenu(),this.onClose()}onWindowKeyDown(t){this.active&&"Escape"===t.key&&(this.onCloseSubmenu(),this.onClose(),this.focusController())}getChildren(){var t;const n=null===(t=this.host.shadowRoot.querySelector("slot"))||void 0===t?void 0:t.assignedElements({flatten:!0});return null!=n?n:[]}getMenuItems(){var t;return function(t){if(fe(t))return[];const n=["vm-menu-item","vm-menu-radio-group","vm-submenu"];return Array.from(null!=t?t:[]).filter(e=>n.includes(e.tagName.toLowerCase())).map(e=>function(t){return"vm-submenu"!==t.tagName.toLowerCase()?t:t.shadowRoot.querySelector("vm-menu-item")}(e)).map(e=>function(t){var n;if("vm-menu-radio-group"!==t.tagName.toLowerCase())return t;const i=t.shadowRoot.querySelector("slot");return Array.from(null!==(n=null==i?void 0:i.assignedElements())&&void 0!==n?n:[]).filter(o=>"vm-menu-radio"===o.tagName.toLowerCase()).map(o=>o.shadowRoot.querySelector("vm-menu-item"))}(e)).reduce((e,i)=>e.concat(i),[])}(null===(t=this.host.shadowRoot.querySelector("slot"))||void 0===t?void 0:t.assignedElements({flatten:!0}))}focusController(){var t,n,e,i,r;fe(null===(t=this.controller)||void 0===t?void 0:t.focusItem)?fe(null===(e=this.controller)||void 0===e?void 0:e.focusControl)?null===(r=this.controller)||void 0===r||r.focus():null===(i=this.controller)||void 0===i||i.focusControl():null===(n=this.controller)||void 0===n||n.focusItem()}triggerMenuItem(){var t;fe(this.activeMenuItem)||(this.activeMenuItem.click(),null===(t=this.activeMenuItem.menu)||void 0===t||t.focusMenu())}onClose(){this.activeMenuItem=void 0,this.active=!1}onClick(t){t.stopPropagation()}onFocus(){var t;this.active=!0,[this.activeMenuItem]=this.getMenuItems(),null===(t=this.activeMenuItem)||void 0===t||t.focusItem(),this.vmFocus.emit()}onBlur(){this.vmBlur.emit()}foucsMenuItem(t,n){n<0&&(n=t.length-1),n>t.length-1&&(n=0),this.activeMenuItem=t[n],this.activeMenuItem.focusItem()}onKeyDown(t){if(!this.active)return;t.preventDefault(),t.stopPropagation();const n=this.getMenuItems();let e=n.findIndex(i=>i===this.activeMenuItem);switch(t.key){case"Escape":this.onClose(),this.focusController();break;case"ArrowDown":case"Tab":this.foucsMenuItem(n,e+=1);break;case"ArrowUp":this.foucsMenuItem(n,e-=1);break;case"ArrowLeft":this.onClose(),this.focusController();break;case"ArrowRight":case"Enter":case" ":this.triggerMenuItem();break;case"Home":case"PageUp":this.foucsMenuItem(n,0);break;case"End":case"PageDown":this.foucsMenuItem(n,n.length-1)}}render(){var t,n,e;return z("div",{id:this.identifier,class:{menu:!0,slideIn:!fe(this.slideInDirection),slideInFromLeft:"left"===this.slideInDirection,slideInFromRight:"right"===this.slideInDirection},role:"menu",tabindex:"-1","aria-labelledby":null!==(n=null===(t=this.controller)||void 0===t?void 0:t.identifier)&&void 0!==n?n:null===(e=this.controller)||void 0===e?void 0:e.id,"aria-hidden":this.active?"false":"true",onFocus:this.onFocus.bind(this),onBlur:this.onBlur.bind(this),onClick:this.onClick.bind(this),onKeyDown:this.onKeyDown.bind(this),ref:i=>{this.menu=i}},z("div",{class:"container",ref:i=>{this.container=i}},z("slot",null)))}get host(){return this}static get watchers(){return{activeMenuItem:["onActiveMenuitemChange"],activeSubmenu:["onActiveSubmenuChange"],active:["onActiveChange"]}}static get style(){return":host{position:absolute;top:0;left:0;width:100%;height:100%;overflow:hidden;pointer-events:none;z-index:var(--vm-menu-z-index)}:host([active]){pointer-events:auto;z-index:calc(var(--vm-menu-z-index) + 1)}.menu{position:absolute;top:0;left:0;width:100%;height:100%;box-sizing:border-box;transition:var(--vm-menu-transition)}.menu.slideIn{transform:translateX(0)}.menu[aria-hidden='true'].slideInFromLeft{transform:translateX(-100%)}.menu[aria-hidden='true'].slideInFromRight{transform:translateX(100%)}.container{display:flex;flex-direction:column;position:relative;text-align:left;width:100%;height:100%;color:var(--vm-menu-color);background:var(--vm-menu-bg);font-size:var(--vm-menu-font-size);font-weight:var(--vm-menu-font-weight)}.menu:focus{outline:0}"}};var LS=function(t,n,e,i){return new(e||(e=Promise))(function(o,s){function l(m){try{d(i.next(m))}catch(_){s(_)}}function c(m){try{d(i.throw(m))}catch(_){s(_)}}function d(m){m.done?o(m.value):function(o){return o instanceof e?o:new e(function(s){s(o)})}(m.value).then(l,c)}d((i=i.apply(t,n||[])).next())})};const Tpe=class extends HTMLElement{constructor(){super(),this.__registerHost(),lt(this),this.vmFocus=ae(this,"vmFocus",7),this.vmBlur=ae(this,"vmBlur",7),this.showTapHighlight=!1,this.hidden=!1,this.checkIcon="check",this.isTouch=!1,Ke(this),Qt(this,["isTouch"])}focusItem(){var t;return LS(this,void 0,void 0,function*(){null===(t=this.menuItem)||void 0===t||t.focus()})}blurItem(){var t;return LS(this,void 0,void 0,function*(){null===(t=this.menuItem)||void 0===t||t.blur()})}getHeight(){return LS(this,void 0,void 0,function*(){return parseFloat(this.menuItem?window.getComputedStyle(this.menuItem).height:"0")})}onClick(){co(this.menu)||(this.menu.active=!this.expanded)}onFocus(){this.vmFocus.emit()}onBlur(){this.vmBlur.emit()}onTouchStart(){this.showTapHighlight=!0}onTouchEnd(){setTimeout(()=>{this.showTapHighlight=!1},100)}onMouseLeave(){var t;null===(t=this.menuItem)||void 0===t||t.blur()}render(){var t,n,e,i;const r=!fe(this.checked),o=!fe(this.menu),s=this.expanded?"true":"false",l=this.checked?"true":"false",c=r&&!fe(this.checkIcon),d=o&&this.expanded,m=o&&!this.expanded,_=!(fe(this.hint)||r||o&&this.expanded),w=!fe(this.badge)&&!_&&!m,E=_||m;return z("div",{class:{menuItem:!0,notTouch:!this.isTouch,tapHighlight:this.showTapHighlight,showDivider:o&&null!==(t=this.expanded)&&void 0!==t&&t},id:this.identifier,role:r?"menuitemradio":"menuitem",tabindex:"0","aria-label":this.label,"aria-hidden":this.hidden?"true":"false","aria-haspopup":o?"true":void 0,"aria-controls":null!==(e=null===(n=this.menu)||void 0===n?void 0:n.identifier)&&void 0!==e?e:null===(i=this.menu)||void 0===i?void 0:i.id,"aria-expanded":o?s:void 0,"aria-checked":r?l:void 0,onClick:this.onClick.bind(this),onFocus:this.onFocus.bind(this),onBlur:this.onBlur.bind(this),onTouchStart:this.onTouchStart.bind(this),onTouchEnd:this.onTouchEnd.bind(this),onMouseLeave:this.onMouseLeave.bind(this),ref:D=>{this.menuItem=D}},c&&z("vm-icon",{name:this.checkIcon,library:this.icons}),d&&z("span",{class:"arrow left"}),this.label,E&&z("span",{class:"spacer"}),_&&z("span",{class:"hint"},this.hint),w&&z("span",{class:"badge"},this.badge),m&&z("span",{class:"arrow right"}))}get host(){return this}static get style(){return":host{display:block}.menuItem{display:flex;position:relative;align-items:center;flex-direction:row;cursor:pointer;color:var(--vm-menu-color);background:var(--vm-menu-bg);font-size:var(--vm-menu-font-size);font-weight:var(--vm-menu-font-weight);padding:var(--vm-menu-item-padding);touch-action:manipulation;box-sizing:border-box}.menuItem:focus{outline:0}.menuItem.hidden{display:none}.menuItem.tapHighlight{background:var(--vm-menu-item-tap-highlight)}.menuItem.showDivider{border-bottom:0.5px solid var(--vm-menu-item-divider-color)}.menuItem.notTouch:hover,.menuItem.notTouch:focus{outline:0;color:var(--vm-menu-item-focus-color);background-color:var(--vm-menu-item-focus-bg)}.menuItem[aria-expanded='true']{position:absolute;z-index:2;top:0;width:100%}.menuItem[aria-hidden='true']{display:none}.menuItem[aria-checked='true'] vm-icon{opacity:1;visibility:visible}vm-icon{display:inline-block}vm-icon{fill:currentColor;pointer-events:none;font-size:var(--vm-menu-item-check-icon-size);margin-right:10px;opacity:0;visibility:hidden;transition:var(--vm-fade-transition)}.hint{display:inline-block;margin-left:auto;overflow:hidden;pointer-events:none;margin-right:6px;font-size:var(--vm-menu-item-hint-font-size);opacity:var(--vm-menu-item-hint-opacity);color:var(--vm-menu-item-hint-color)}.badge{display:inline-block;line-height:1;overflow:hidden;pointer-events:none;margin-left:6px;color:var(--vm-menu-item-badge-color);background:var(--vm-menu-item-badge-bg);font-size:var(--vm-menu-item-badge-font-size)}.spacer{flex:1}.arrow{color:var(--vm-menu-item-arrow-color);border:2px solid;padding:2px;display:inline-block;border-width:0 2px 2px 0}.arrow.left{margin-right:6px;transform:rotate(135deg)}.arrow.right{transform:rotate(-45deg);opacity:0.38}"}},Epe=class extends HTMLElement{constructor(){super(),this.__registerHost(),lt(this),this.vmCheck=ae(this,"vmCheck",7),this.checked=!1,this.checkIcon="check",Ke(this)}onClick(){this.checked=!0,this.vmCheck.emit()}render(){return z("vm-menu-item",{label:this.label,checked:this.checked,badge:this.badge,checkIcon:this.checkIcon,icons:this.icons,onClick:this.onClick.bind(this)})}},kpe=class extends HTMLElement{constructor(){super(),this.__registerHost(),lt(this),this.vmCheck=ae(this,"vmCheck",7),Ke(this)}onValueChange(){var t;null===(t=this.findRadios())||void 0===t||t.forEach(n=>{n.checked=n.value===this.value})}connectedCallback(){this.onValueChange()}componentDidLoad(){this.onValueChange()}onSelectionChange(t){this.value=t.target.value}findRadios(){var t;return null===(t=this.host.shadowRoot.querySelector("slot"))||void 0===t?void 0:t.assignedElements()}render(){return z("slot",null)}get host(){return this}static get watchers(){return{value:["onValueChange"]}}},Dpe=class extends HTMLElement{constructor(){super(),this.__registerHost(),lt(this),this.vmFocus=ae(this,"vmFocus",7),this.vmBlur=ae(this,"vmBlur",7),this.lowVolumeIcon="volume-low",this.highVolumeIcon="volume-high",this.mutedIcon="volume-mute",this.tooltipPosition="top",this.hideTooltip=!1,this.keys="m",this.volume=50,this.muted=!1,this.i18n={},Ke(this),Qt(this,["muted","volume","i18n"])}connectedCallback(){this.dispatch=Al(this)}getIcon(){return this.muted||0===this.volume?this.mutedIcon:this.volume<50?this.lowVolumeIcon:this.highVolumeIcon}onClick(){this.dispatch("muted",!this.muted)}render(){const t=this.muted?this.i18n.unmute:this.i18n.mute,n=fe(this.keys)?t:`${t} (${this.keys})`;return z("vm-control",{label:this.i18n.mute,pressed:this.muted,keys:this.keys,onClick:this.onClick.bind(this)},z("vm-icon",{name:this.getIcon(),library:this.icons}),z("vm-tooltip",{hidden:this.hideTooltip,position:this.tooltipPosition,direction:this.tooltipDirection},n))}};const Ipe=class extends HTMLElement{constructor(){super(),this.__registerHost(),lt(this),this.canSetPiP=!1,this.enterIcon="pip-enter",this.exitIcon="pip-exit",this.tooltipPosition="top",this.hideTooltip=!1,this.keys="p",this.isPiPActive=!1,this.i18n={},this.playbackReady=!1,Ke(this),Qt(this,["isPiPActive","playbackReady","i18n"])}onPlaybackReadyChange(){var t;return function(t,n,e,i){return new(e||(e=Promise))(function(o,s){function l(m){try{d(i.next(m))}catch(_){s(_)}}function c(m){try{d(i.throw(m))}catch(_){s(_)}}function d(m){m.done?o(m.value):function(o){return o instanceof e?o:new e(function(s){s(o)})}(m.value).then(l,c)}d((i=i.apply(t,n||[])).next())})}(this,void 0,void 0,function*(){const n=$a(this);this.canSetPiP=null!==(t=yield null==n?void 0:n.canSetPiP())&&void 0!==t&&t})}componentDidLoad(){this.onPlaybackReadyChange()}onClick(){const t=$a(this);this.isPiPActive?null==t||t.exitPiP():null==t||t.enterPiP()}render(){const t=this.isPiPActive?this.i18n.exitPiP:this.i18n.enterPiP,n=fe(this.keys)?t:`${t} (${this.keys})`;return z(Ph,{hidden:!this.canSetPiP},z("vm-control",{label:this.i18n.pip,keys:this.keys,pressed:this.isPiPActive,hidden:!this.canSetPiP,onClick:this.onClick.bind(this)},z("vm-icon",{name:this.isPiPActive?this.exitIcon:this.enterIcon,library:this.icons}),z("vm-tooltip",{hidden:this.hideTooltip,position:this.tooltipPosition,direction:this.tooltipDirection},n)))}static get watchers(){return{playbackReady:["onPlaybackReadyChange"]}}static get style(){return":host([hidden]){display:none}"}},Ppe=class extends HTMLElement{constructor(){super(),this.__registerHost(),lt(this),this.playIcon="play",this.pauseIcon="pause",this.tooltipPosition="top",this.hideTooltip=!1,this.keys="k",this.paused=!0,this.i18n={},Ke(this),Qt(this,["paused","i18n"])}connectedCallback(){this.dispatch=Al(this)}onClick(){this.dispatch("paused",!this.paused)}render(){const t=this.paused?this.i18n.play:this.i18n.pause,n=fe(this.keys)?t:`${t} (${this.keys})`;return z("vm-control",{label:this.i18n.playback,keys:this.keys,pressed:!this.paused,onClick:this.onClick.bind(this)},z("vm-icon",{name:this.paused?this.playIcon:this.pauseIcon,library:this.icons}),z("vm-tooltip",{hidden:this.hideTooltip,position:this.tooltipPosition,direction:this.tooltipDirection},n))}};class Ape{constructor(){this.silent=!1}log(...n){!this.silent&&!fe(console)&&console.log("[Vime tip]:",...n)}warn(...n){!this.silent&&!fe(console)&&console.error("[Vime warn]:",...n)}}const $S=new Set;var ym=function(t,n,e,i){return new(e||(e=Promise))(function(o,s){function l(m){try{d(i.next(m))}catch(_){s(_)}}function c(m){try{d(i.throw(m))}catch(_){s(_)}}function d(m){m.done?o(m.value):function(o){return o instanceof e?o:new e(function(s){s(o)})}(m.value).then(l,c)}d((i=i.apply(t,n||[])).next())})};const Rpe=new Set(["currentTime","paused"]);var cn=function(t,n,e,i){return new(e||(e=Promise))(function(o,s){function l(m){try{d(i.next(m))}catch(_){s(_)}}function c(m){try{d(i.throw(m))}catch(_){s(_)}}function d(m){m.done?o(m.value):function(o){return o instanceof e?o:new e(function(s){s(o)})}(m.value).then(l,c)}d((i=i.apply(t,n||[])).next())})};let yL=0;const Upe=class extends HTMLElement{constructor(){super(),this.__registerHost(),lt(this),this.vmThemeChange=ae(this,"vmThemeChange",7),this.vmPausedChange=ae(this,"vmPausedChange",7),this.vmPlay=ae(this,"vmPlay",7),this.vmPlayingChange=ae(this,"vmPlayingChange",7),this.vmSeekingChange=ae(this,"vmSeekingChange",7),this.vmSeeked=ae(this,"vmSeeked",7),this.vmBufferingChange=ae(this,"vmBufferingChange",7),this.vmDurationChange=ae(this,"vmDurationChange",7),this.vmCurrentTimeChange=ae(this,"vmCurrentTimeChange",7),this.vmReady=ae(this,"vmReady",7),this.vmPlaybackReady=ae(this,"vmPlaybackReady",7),this.vmPlaybackStarted=ae(this,"vmPlaybackStarted",7),this.vmPlaybackEnded=ae(this,"vmPlaybackEnded",7),this.vmBufferedChange=ae(this,"vmBufferedChange",7),this.vmError=ae(this,"vmError",7),this.vmLoadStart=ae(this,"vmLoadStart",7),this.vmCurrentProviderChange=ae(this,"vmCurrentProviderChange",7),this.vmCurrentSrcChange=ae(this,"vmCurrentSrcChange",7),this.vmCurrentPosterChange=ae(this,"vmCurrentPosterChange",7),this.vmMediaTitleChange=ae(this,"vmMediaTitleChange",7),this.vmControlsChange=ae(this,"vmControlsChange",7),this.vmPlaybackRateChange=ae(this,"vmPlaybackRateChange",7),this.vmPlaybackRatesChange=ae(this,"vmPlaybackRatesChange",7),this.vmPlaybackQualityChange=ae(this,"vmPlaybackQualityChange",7),this.vmPlaybackQualitiesChange=ae(this,"vmPlaybackQualitiesChange",7),this.vmMutedChange=ae(this,"vmMutedChange",7),this.vmVolumeChange=ae(this,"vmVolumeChange",7),this.vmViewTypeChange=ae(this,"vmViewTypeChange",7),this.vmMediaTypeChange=ae(this,"vmMediaTypeChange",7),this.vmLiveChange=ae(this,"vmLiveChange",7),this.vmTouchChange=ae(this,"vmTouchChange",7),this.vmLanguageChange=ae(this,"vmLanguageChange",7),this.vmI18nChange=ae(this,"vmI18nChange",7),this.vmTranslationsChange=ae(this,"vmTranslationsChange",7),this.vmLanguagesChange=ae(this,"vmLanguagesChange",7),this.vmFullscreenChange=ae(this,"vmFullscreenChange",7),this.vmPiPChange=ae(this,"vmPiPChange",7),this.vmTextTracksChange=ae(this,"vmTextTracksChange",7),this.vmCurrentTextTrackChange=ae(this,"vmCurrentTextTrackChange",7),this.vmTextTrackVisibleChange=ae(this,"vmTextTrackVisibleChange",7),this.vmAudioTracksChange=ae(this,"vmAudioTracksChange",7),this.vmCurrentAudioTrackChange=ae(this,"vmCurrentAudioTrackChange",7),this.disposal=new zi,this.logger=new Ape,this.icons="vime",this.paused=!0,this.playing=!1,this.duration=-1,this.currentTime=0,this.autoplay=!1,this.ready=!1,this.playbackReady=!1,this.loop=!1,this.muted=!1,this.buffered=0,this.playbackRate=1,this.lastRateCheck=1,this.playbackRates=[1],this.playbackQualities=[],this.seeking=!1,this.debug=!1,this.playbackStarted=!1,this.playbackEnded=!1,this.buffering=!1,this.controls=!1,this.isControlsActive=!1,this.isSettingsActive=!1,this.volume=50,this.isFullscreenActive=!1,this.aspectRatio="16:9",this.isAudioView=!1,this.isVideoView=!1,this.isAudio=!1,this.isVideo=!1,this.isLive=!1,this.isMobile=!1,this.isTouch=!1,this.isPiPActive=!1,this.textTracks=[],this.currentTextTrack=-1,this.isTextTrackVisible=!0,this.shouldRenderNativeTextTracks=!0,this.audioTracks=[],this.currentAudioTrack=-1,this.autopause=!0,this.playsinline=!1,this.language="en",this.translations={en:pm},this.languages=["en"],this.i18n=pm,function(t){const n=t;let e;uo(t,()=>{e=xn(n,$R,i=>{i.stopPropagation(),i.detail(n)})},()=>{null==e||e()})}(this),function(t){const n=t,e=new Map,i=new zi;function o(s){const l=s.detail,c=Rh(l);c[CS]=n,c[Lu]=e,e.set(c[wS],c),n.dispatchEvent(new CustomEvent(HR,{detail:c})),uo(l,void 0,()=>function(s){delete s[CS],delete s[Lu],e.delete(s[wS]),n.dispatchEvent(new CustomEvent(jR,{detail:s}))}(c))}n[Lu]=e,uo(t,()=>{i.add(xn(n,"vmComponentRegister",o))},()=>{e.clear(),i.empty(),delete t[Lu]})}(this),function(t){const n=t;uo(t,()=>{$S.add(n)},()=>{$S.delete(n)})}(this),function(t){const n=t,e=new zi,i=new Map;function s(c){c.stopImmediatePropagation(),Object.keys(t).forEach(c=>{i.set(c,t[c])});const d=c.detail,m=c.detail;if(t.provider===m)return;const _=null==m?void 0:m.nodeName.toLowerCase().replace("vm-","");lo(()=>YR(this,void 0,void 0,function*(){t.provider=m,t.currentProvider=Object.values(mm).find(w=>_===w),uo(d,void 0,()=>function(){lo(()=>YR(this,void 0,void 0,function*(){var c;t.ready=!1,t.provider=void 0,i.clear(),null===(c=t.onProviderDisconnect)||void 0===c||c.call(t),n.dispatchEvent(eL("vmMediaProviderDisconnect"))}))}())}))}function l(c){var d;c.stopImmediatePropagation();const{by:m,prop:_,value:w}=c.detail;(t=>VR(t)||Hde.has(t))(_)?lo(()=>{i.set(_,w),t[_]=w}):null===(d=t.logger)||void 0===d||d.warn(`${m.nodeName} tried to change \`${_}\` but it is readonly.`)}t[JR]=i,uo(t,()=>{e.add(xn(n,XR,s)),e.add(xn(n,KR,l))},()=>{e.empty(),i.clear()})}(this),function(t){const n=t,e=new Map;uo(t,()=>{Object.keys(Fh).forEach(o=>{e.set(o,t[o])})},()=>{e.clear()});const{componentDidRender:r}=t;t.componentDidRender=function(){null==r||r();const o=Array.from(e.keys());for(let s=0;s<o.length;s+=1){const l=o[s],c=e.get(l),d=t[l];c!==d&&($de(n,l,d,c),e.set(l,d))}}}(this),this.safeAdapterCall=function(t){const n=t,e=new zi,i=new Map;let o=[],l=!1;function c(w){null==w||w.stopImmediatePropagation(),l?(o=[],lo(()=>{Object.keys(Fh).filter(Mde).forEach(E=>{t[E]=Fh[E]})})):l=!0}function d(w){var E;return ym(this,void 0,void 0,function*(){w.stopImmediatePropagation();const{by:D,prop:N,value:F}=w.detail;if(VR(N)){if(!t.playbackStarted&&Rpe.has(N)){const j=yield t.adapter;"paused"===N&&!F&&(null==j||j.play()),"currentTime"===N&&(null==j||j.play(),null==j||j.setCurrentTime(F))}lo(()=>{t[N]=F})}else null===(E=t.logger)||void 0===E||E.warn(`${D.nodeName} tried to change \`${N}\` but it is readonly.`)})}const{onProviderDisconnect:m}=t;return t.onProviderDisconnect=function(){c(),m&&m.call(t)},uo(t,()=>{Object.keys(Fh).forEach(w=>{i.set(w,t[w])}),e.add(xn(n,"vmLoadStart",c)),e.add(xn(n,UR,d))},()=>{i.clear(),e.empty()}),Nh(t,"componentWillRender",()=>ym(this,void 0,void 0,function*(){t.playbackReady&&o.length>0&&(yield function(){return ym(this,void 0,void 0,function*(){const w=yield t.adapter;if(!fe(w)){for(let E=0;E<o.length;E+=1)yield o[E](w);o=[]}})}())})),function(E,D){return ym(this,void 0,void 0,function*(){if(!function(w,E){var D;return E!==(null===(D=t[JR])||void 0===D?void 0:D.get(w))}(E,t[E]))return;const N=t[E],F=j=>ym(this,void 0,void 0,function*(){var H;try{yield null===(H=null==j?void 0:j[D])||void 0===H?void 0:H.call(j,N)}catch(X){n.dispatchEvent(new CustomEvent("vmError",{detail:X}))}});t.playbackReady?yield F(yield t.adapter):o.push(F)})}}(this)}get adapter(){var t;return null===(t=this.provider)||void 0===t?void 0:t.getAdapter()}onContainerChange(){var t;null===(t=this.fullscreenController)||void 0===t||t.destroy(),!fe(this.container)&&(this.fullscreenController=new mL(this.container),this.fullscreenController.on("change",n=>{this.isFullscreenActive=n,n&&this.rotateDevice()}),this.fullscreenController.on("error",n=>{this.vmError.emit(n)}))}onPausedChange(){this.paused?this.playing=!1:function(t){const n=t;$S.forEach(e=>{e!==n&&e.autopause&&(e.paused=!0)})}(this),this.safeAdapterCall("paused",this.paused?"pause":"play")}onDurationChange(){this.isLive=this.duration===1/0}onCurrentTimeChange(){this.currentTime=Math.max(0,Math.min(this.currentTime,this.playbackReady?this.duration:1/0)),this.safeAdapterCall("currentTime","setCurrentTime")}onPlaybackReadyChange(){this.ready||(this.ready=!0)}onMutedChange(){this.safeAdapterCall("muted","setMuted")}onPlaybackRateChange(t,n){var e,i;return cn(this,void 0,void 0,function*(){if(t!==this.lastRateCheck){if(!(yield null===(i=null===(e=yield this.adapter)||void 0===e?void 0:e.canSetPlaybackRate)||void 0===i?void 0:i.call(e)))return this.logger.log("provider cannot change `playbackRate`."),this.lastRateCheck=n,void(this.playbackRate=n);if(!this.playbackRates.includes(t))return this.logger.log(`invalid \`playbackRate\` of ${t}, valid values are [${this.playbackRates.join(", ")}]`),this.lastRateCheck=n,void(this.playbackRate=n);this.lastRateCheck=t,this.safeAdapterCall("playbackRate","setPlaybackRate")}})}onPlaybackQualityChange(t,n){var e,i;return cn(this,void 0,void 0,function*(){if(!fe(t)&&t!==this.lastQualityCheck){if(!(yield null===(i=null===(e=yield this.adapter)||void 0===e?void 0:e.canSetPlaybackQuality)||void 0===i?void 0:i.call(e)))return this.logger.log("provider cannot change `playbackQuality`."),this.lastQualityCheck=n,void(this.playbackQuality=n);if(!this.playbackQualities.includes(t))return this.logger.log(`invalid \`playbackQuality\` of ${t}, valid values are [${this.playbackQualities.join(", ")}]`),this.lastQualityCheck=n,void(this.playbackQuality=n);this.lastQualityCheck=t,this.safeAdapterCall("playbackQuality","setPlaybackQuality")}})}onDebugChange(){this.logger.silent=!this.debug}onVolumeChange(){return cn(this,void 0,void 0,function*(){this.volume=Math.max(0,Math.min(this.volume,100)),this.safeAdapterCall("volume","setVolume")})}onViewTypeChange(){this.isAudioView=this.viewType===ho.Audio,this.isVideoView=this.viewType===ho.Video}onMediaTypeChange(){this.isAudio=this.mediaType===fs.Audio,this.isVideo=this.mediaType===fs.Video}onLanguageChange(t,n){if(!this.languages.includes(this.language))return this.logger.log(`invalid \`language\` of ${this.language}, valid values are [${this.languages.join(", ")}]`),void(this.language=n);this.i18n=this.translations[this.language]}onTranslationsChange(){Object.assign(this.translations,{en:pm}),this.languages=Object.keys(this.translations),this.i18n=this.translations[this.language]}onError(t){this.logger.warn(t.detail)}getProvider(){return cn(this,void 0,void 0,function*(){return this.provider})}getAdapter(){return cn(this,void 0,void 0,function*(){return this.adapter})}play(){var t;return cn(this,void 0,void 0,function*(){return null===(t=yield this.adapter)||void 0===t?void 0:t.play()})}pause(){var t;return cn(this,void 0,void 0,function*(){return null===(t=yield this.adapter)||void 0===t?void 0:t.pause()})}canPlay(t){var n,e;return cn(this,void 0,void 0,function*(){return null!==(e=null===(n=yield this.adapter)||void 0===n?void 0:n.canPlay(t))&&void 0!==e&&e})}canAutoplay(){return cn(this,void 0,void 0,function*(){return oL()})}canMutedAutoplay(){return cn(this,void 0,void 0,function*(){return oL(!0)})}canSetPlaybackRate(){var t,n,e;return cn(this,void 0,void 0,function*(){return null!==(e=null===(n=null===(t=yield this.adapter)||void 0===t?void 0:t.canSetPlaybackRate)||void 0===n?void 0:n.call(t))&&void 0!==e&&e})}canSetPlaybackQuality(){var t,n,e;return cn(this,void 0,void 0,function*(){return null!==(e=null===(n=null===(t=yield this.adapter)||void 0===t?void 0:t.canSetPlaybackQuality)||void 0===n?void 0:n.call(t))&&void 0!==e&&e})}canSetFullscreen(){var t,n,e;return cn(this,void 0,void 0,function*(){return this.fullscreenController.isSupported||null!==(e=null===(n=null===(t=yield this.adapter)||void 0===t?void 0:t.canSetFullscreen)||void 0===n?void 0:n.call(t))&&void 0!==e&&e})}enterFullscreen(t){var n,e,i;return cn(this,void 0,void 0,function*(){if(!this.isVideoView)throw Error("Cannot enter fullscreen on an audio player view.");if(this.fullscreenController.isSupported)return this.fullscreenController.requestFullscreen();const r=yield this.adapter;if(null!==(e=yield null===(n=null==r?void 0:r.canSetFullscreen)||void 0===n?void 0:n.call(r))&&void 0!==e&&e)return null===(i=null==r?void 0:r.enterFullscreen)||void 0===i?void 0:i.call(r,t);throw Error("Fullscreen API is not available.")})}exitFullscreen(){var t,n;return cn(this,void 0,void 0,function*(){return this.fullscreenController.isSupported?this.fullscreenController.exitFullscreen():null===(n=null===(t=yield this.adapter)||void 0===t?void 0:t.exitFullscreen)||void 0===n?void 0:n.call(t)})}canSetPiP(){var t,n,e;return cn(this,void 0,void 0,function*(){return null!==(e=null===(n=null===(t=yield this.adapter)||void 0===t?void 0:t.canSetPiP)||void 0===n?void 0:n.call(t))&&void 0!==e&&e})}enterPiP(){var t,n;return cn(this,void 0,void 0,function*(){if(!this.isVideoView)throw Error("Cannot enter PiP mode on an audio player view.");if(!(yield this.canSetPiP()))throw Error("Picture-in-Picture API is not available.");return null===(n=null===(t=yield this.adapter)||void 0===t?void 0:t.enterPiP)||void 0===n?void 0:n.call(t)})}exitPiP(){var t,n;return cn(this,void 0,void 0,function*(){return null===(n=null===(t=yield this.adapter)||void 0===t?void 0:t.exitPiP)||void 0===n?void 0:n.call(t)})}canSetAudioTrack(){var t;return cn(this,void 0,void 0,function*(){return!fe(null===(t=yield this.adapter)||void 0===t?void 0:t.setCurrentAudioTrack)})}setCurrentAudioTrack(t){var n,e;return cn(this,void 0,void 0,function*(){null===(e=null===(n=yield this.adapter)||void 0===n?void 0:n.setCurrentAudioTrack)||void 0===e||e.call(n,t)})}canSetTextTrack(){var t;return cn(this,void 0,void 0,function*(){return!fe(null===(t=yield this.adapter)||void 0===t?void 0:t.setCurrentTextTrack)})}setCurrentTextTrack(t){var n,e;return cn(this,void 0,void 0,function*(){null===(e=null===(n=yield this.adapter)||void 0===n?void 0:n.setCurrentTextTrack)||void 0===e||e.call(n,t)})}canSetTextTrackVisibility(){var t;return cn(this,void 0,void 0,function*(){return!fe(null===(t=yield this.adapter)||void 0===t?void 0:t.setTextTrackVisibility)})}setTextTrackVisibility(t){var n,e;return cn(this,void 0,void 0,function*(){null===(e=null===(n=yield this.adapter)||void 0===n?void 0:n.setTextTrackVisibility)||void 0===e||e.call(n,t)})}extendLanguage(t,n){var e;return cn(this,void 0,void 0,function*(){const i=Object.assign(Object.assign({},this.translations),{[t]:Object.assign(Object.assign({},null!==(e=this.translations[t])&&void 0!==e?e:{}),n)});this.translations=i})}connectedCallback(){this.onPausedChange(),this.onCurrentTimeChange(),this.onVolumeChange(),this.onMutedChange(),this.onDebugChange(),this.onContainerChange(),this.onTranslationsChange(),this.onLanguageChange(this.language,Fh.language),this.disposal.add((t=>!Gr||fe(window.ResizeObserver)?(t(xS),Ys):(t(window.innerWidth<=480||xS),xn(window,"resize",function(){t(window.innerWidth<=480||xS)})))(t=>{this.isMobile=t})),this.disposal.add((t=>{if(!Gr)return Ys;let n=0;const e=xn(document,"touchstart",()=>{n=(new Date).getTime(),t(!0)},!0),i=xn(document,"mousemove",()=>{(new Date).getTime()-n<500||t(!1)},!0);return()=>{e(),i()}})(t=>{this.isTouch=t}))}componentWillLoad(){!function(t,n){var e=t,i=new Map,r={wormholes:i,state:n};fm.set(t,r);var o=t.connectedCallback;t.connectedCallback=function(){fm.set(t,r),o&&o.call(t)};var s=t.disconnectedCallback;t.disconnectedCallback=function(){fm.delete(t),s&&s.call(t)},e.addEventListener("openWormhole",function(l){l.stopPropagation();var c=l.detail,d=c.consumer,m=c.onOpen;if(!i.has(d)){if("symbol"!=typeof d){var _=d.connectedCallback,w=d.disconnectedCallback;d.connectedCallback=function(){i.set(d,l.detail),_&&_.call(d)},d.disconnectedCallback=function(){i.delete(d),w&&w.call(d)}}i.set(d,l.detail),WR(l.detail,r.state),null==m||m.resolve(function(){i.delete(d)})}}),e.addEventListener("closeWormhole",function(l){i.delete(l.detail)})}(this,this.getPlayerState())}disconnectedCallback(){var t;null===(t=this.fullscreenController)||void 0===t||t.destroy(),this.disposal.empty()}rotateDevice(){return cn(this,void 0,void 0,function*(){if(this.isMobile&&Gr&&window.screen.orientation&&window.screen.orientation.lock)try{this.isFullscreenActive?yield window.screen.orientation.lock("landscape"):yield window.screen.orientation.unlock()}catch(t){this.vmError.emit(t)}})}getPlayerState(){const t={},n=Object.keys(Fh);for(let e=0;e<n.length;e+=1)t[n[e]]=this[n[e]];return t}calcAspectRatio(){const[t,n]=/\d{1,2}:\d{1,2}/.test(this.aspectRatio)?this.aspectRatio.split(":"):[16,9];return 100/Number(t)*Number(n)}getContainer(){return cn(this,void 0,void 0,function*(){return this.container})}callAdapter(t,n){return cn(this,void 0,void 0,function*(){return(yield this.adapter)[t](n)})}hasCustomControls(){return function(t,n){var e;const r=Rh(t)[Lu];return Array.from(null!==(e=null==r?void 0:r.values())&&void 0!==e?e:[]).some(o=>"vm-controls"===o[gy])}(this)}genId(){var t;const n=null===(t=this.host)||void 0===t?void 0:t.id;return Cr(n)&&n.length>0?n:(yL+=1,`vm-player-${yL}`)}render(){const t=`${this.isAudioView?"Audio Player":"Video Player"}${fe(this.mediaTitle)?"":` - ${this.mediaTitle}`}`,n=!Uh||!this.isVideoView||this.playsinline&&!this.isFullscreenActive;n||(this.controls=!0);const e=n&&this.hasCustomControls()&&this.isVideoView&&!this.paused&&!this.isControlsActive,i=!this.controls&&n&&this.isVideoView;return z(Ph,{id:this.genId(),idle:e,mobile:this.isMobile,touch:this.isTouch,live:this.isLive,audio:this.isAudioView,video:this.isVideoView,pip:this.isPiPActive,fullscreen:this.isFullscreenActive},z("div",{"aria-label":t,"aria-hidden":this.ready?"false":"true","aria-busy":this.playbackReady?"false":"true",class:{player:!0,idle:e,audio:this.isAudioView,video:this.isVideoView,fullscreen:this.isFullscreenActive},style:{paddingBottom:this.isVideoView?`${this.calcAspectRatio()}%`:void 0},ref:r=>{lo(()=>{this.container=r})}},i&&z("div",{class:"blocker"}),z(qR_Provider,{state:this.getPlayerState()},z("slot",null))))}get host(){return this}static get watchers(){return{container:["onContainerChange"],paused:["onPausedChange"],duration:["onDurationChange"],currentTime:["onCurrentTimeChange"],playbackReady:["onPlaybackReadyChange"],muted:["onMutedChange"],playbackRate:["onPlaybackRateChange"],playbackQuality:["onPlaybackQualityChange"],debug:["onDebugChange"],volume:["onVolumeChange"],viewType:["onViewTypeChange"],isAudioView:["onViewTypeChange"],isVideoView:["onViewTypeChange"],mediaType:["onMediaTypeChange"],language:["onLanguageChange"],translations:["onTranslationsChange"]}}static get style(){return".player{box-sizing:border-box;direction:ltr;font-family:var(--vm-player-font-family);-moz-osx-font-smoothing:auto;-webkit-font-smoothing:subpixel-antialiased;-webkit-tap-highlight-color:transparent;font-variant-numeric:tabular-nums;font-weight:500;line-height:1.7;width:100%;display:block;max-width:100%;min-width:275px;min-height:40px;position:relative;text-shadow:none;outline:0;transition:box-shadow 0.3s ease;box-shadow:var(--vm-player-box-shadow);border-radius:var(--vm-player-border-radius)}.player.idle{cursor:none}.player.audio{background-color:transparent !important}.player.video{height:0;overflow:hidden;background-color:var(--vm-player-bg, #000)}.player.fullscreen{margin:0;border-radius:0;width:100%;height:100%;padding-bottom:0 !important}.blocker{position:absolute;top:0;left:0;width:100%;height:100%;display:inline-block;z-index:var(--vm-blocker-z-index)}"}},Bpe=class extends HTMLElement{constructor(){super(),this.__registerHost(),lt(this),this.vmLoaded=ae(this,"vmLoaded",3),this.vmWillShow=ae(this,"vmWillShow",3),this.vmWillHide=ae(this,"vmWillHide",3),this.isHidden=!0,this.isActive=!1,this.hasLoaded=!1,this.fit="cover",this.isVideoView=!1,this.playbackStarted=!1,this.currentTime=0,Ke(this),Qt(this,["mediaTitle","currentPoster","playbackStarted","currentTime","isVideoView"])}onCurrentPosterChange(){var t;this.hasLoaded=!1,null===(t=this.lazyLoader)||void 0===t||t.onMutation()}connectedCallback(){this.lazyLoader=new OS(this.host,["data-src","src"],t=>{const n=t.getAttribute("data-src");t.removeAttribute("src"),Il(n)||t.setAttribute("src",n)}),this.onEnabledChange(),this.onActiveChange()}disconnectedCallback(){this.lazyLoader.destroy()}onVisibilityChange(){!this.isHidden&&this.isActive?this.vmWillShow.emit():this.vmWillHide.emit()}onEnabledChange(){this.isHidden=!this.isVideoView,this.onVisibilityChange()}onActiveChange(){this.isActive=!this.playbackStarted||this.currentTime<=.1,this.onVisibilityChange()}onPosterLoad(){this.vmLoaded.emit(),this.hasLoaded=!0}render(){return z("div",{class:{poster:!0,hidden:this.isHidden,active:this.isActive&&this.hasLoaded}},z("img",{class:"lazy","data-src":this.currentPoster,alt:fe(this.mediaTitle)?"Media Poster":`${this.mediaTitle} Poster`,style:{objectFit:this.fit},onLoad:this.onPosterLoad.bind(this)}))}get host(){return this}static get watchers(){return{currentPoster:["onCurrentPosterChange"],isVideoView:["onEnabledChange"],currentTime:["onActiveChange"],playbackStarted:["onActiveChange"]}}static get style(){return":host{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:var(--vm-poster-z-index)}.poster{width:100%;height:100%;background:#000;opacity:0;visibility:hidden;pointer-events:none;transition:var(--vm-fade-transition)}.poster.hidden{display:none}.poster.active{opacity:1;visibility:visible}img{width:100%;height:100%;pointer-events:none}"}},jpe=class extends HTMLElement{constructor(){super(),this.__registerHost(),lt(this),this.isVideoView=!1,this.isControlsActive=!1,Ke(this),Qt(this,["isVideoView","isControlsActive"])}render(){return z("div",{class:{scrim:!0,gradient:!fe(this.gradient),gradientUp:"up"===this.gradient,gradientDown:"down"===this.gradient,hidden:!this.isVideoView,active:this.isControlsActive}})}static get style(){return":host{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:var(--vm-scrim-z-index)}.scrim{position:absolute;width:100%;background:var(--vm-scrim-bg);display:inline-block;opacity:0;visibility:hidden;transition:var(--vm-fade-transition)}.scrim.gradient{height:258px;background:none;background-position:bottom;background-image:url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAECCAYAAAA/9r2TAAABKklEQVQ4T2XI50cFABiF8dvee++67b33uM17b1MkkSSSSBJJJIkkkkQSSSKJ9Efmeb8cr86HH88JBP4thkfEkiKOFPGkSCCNRE8SKZJJkUIaqZ40UqSTIoMUmaSR5ckmRQ4pckkjz5NPigJSFJKiiDSKPSWkKCVFGWmUeypIUUmKKlJUk0aNJ0iKWlLUkUa9p4EUjaRoIkUzabR4WknRRop20ujwdJKiixTdpOghjV5PHyn6STFAGoOeIVIMk2KEFKOkMeYZJ8UEKUKkMemZIsU0KWZIMUsac54wKSKkiJLGvGeBFIukWCLFMrkCq7AG67ABm7AF27ADu7AH+3AAh3AEx3ACp3AG53ABl3AF13ADt3AH9/AAj/AEz/ACr/AG7/ABn/AF3/ADv39LujSyJPVJ0QAAAABJRU5ErkJggg==')}.scrim.gradientUp{top:unset;bottom:0}.scrim.gradientDown{transform:rotate(180deg)}.scrim.hidden{display:none}.scrim.active{opacity:1;visibility:visible}"}},bm=(t=0,n=!1)=>{const e=s=>`0${s}`.slice(-2),i=(t=>Math.trunc(t/60/60%60))(t),r=(t=>Math.trunc(t/60%60))(t),o=(t=>Math.trunc(t%60))(t);return`${n||i>0?`${i}:`:""}${e(r)}:${e(o)}`};const Zpe=class extends HTMLElement{constructor(){super(),this.__registerHost(),lt(this),this.keyboardDisposal=new zi,this.timestamp="",this.endTime=0,this.alwaysShowHours=!1,this.hideTooltip=!1,this.currentTime=0,this.duration=-1,this.noKeyboard=!1,this.buffering=!1,this.buffered=0,this.i18n={},Ke(this),Qt(this,["i18n","currentTime","duration","buffering","buffered"])}onNoKeyboardChange(){return function(t,n,e,i){return new(e||(e=Promise))(function(o,s){function l(m){try{d(i.next(m))}catch(_){s(_)}}function c(m){try{d(i.throw(m))}catch(_){s(_)}}function d(m){m.done?o(m.value):function(o){return o instanceof e?o:new e(function(s){s(o)})}(m.value).then(l,c)}d((i=i.apply(t,n||[])).next())})}(this,void 0,void 0,function*(){if(this.keyboardDisposal.empty(),this.noKeyboard)return;const t=yield La(this);fe(t)||this.keyboardDisposal.add(xn(t,"keydown",e=>{if("ArrowLeft"!==e.key&&"ArrowRight"!==e.key)return;e.preventDefault();const r="ArrowLeft"===e.key?Math.max(0,this.currentTime-5):Math.min(this.duration,this.currentTime+5);this.dispatch("currentTime",r)}))})}onDurationChange(){this.endTime=Math.max(0,this.duration)}connectedCallback(){this.dispatch=Al(this),this.timestamp=bm(this.currentTime,this.alwaysShowHours),this.onNoKeyboardChange()}disconnectedCallback(){this.keyboardDisposal.empty()}setTooltipPosition(t){var n,e;const i=null===(e=null===(n=this.tooltip.shadowRoot)||void 0===n?void 0:n.querySelector(".tooltip"))||void 0===e?void 0:e.getBoundingClientRect(),r=this.slider.getBoundingClientRect(),o=parseFloat(window.getComputedStyle(this.slider).getPropertyValue("--vm-slider-thumb-width")),c=Math.max(i.width/2-o/2,Math.min(t,r.width-i.width/2-o/2));this.tooltip.style=`--vm-tooltip-left: ${c}px`}onSeek(t){this.dispatch("currentTime",t.detail)}onSeeking(t){if(this.duration<0||this.tooltip.hidden)return;if("mouseleave"===t.type)return this.getSliderInput().blur(),void(this.tooltip.active=!1);const n=this.host.getBoundingClientRect(),e=Math.max(0,Math.min(100,100/n.width*(t.pageX-n.left)));this.timestamp=bm(this.duration/100*e,this.alwaysShowHours),this.setTooltipPosition(e/100*n.width),this.tooltip.active||(this.getSliderInput().focus(),this.tooltip.active=!0)}getSliderInput(){var t;return null===(t=this.slider.shadowRoot)||void 0===t?void 0:t.querySelector("input")}render(){const t=this.i18n.scrubberLabel.replace(/{currentTime}/,bm(this.currentTime)).replace(/{duration}/,bm(this.endTime));return z("div",{class:"scrubber",onMouseEnter:this.onSeeking.bind(this),onMouseLeave:this.onSeeking.bind(this),onMouseMove:this.onSeeking.bind(this),onTouchMove:()=>{this.getSliderInput().focus()},onTouchEnd:()=>{this.getSliderInput().blur()}},z("vm-slider",{step:.01,max:this.endTime,value:this.currentTime,label:this.i18n.scrubber,valueText:t,onVmValueChange:this.onSeek.bind(this),ref:n=>{this.slider=n}}),z("progress",{class:{loading:this.buffering},min:0,max:this.endTime,value:this.buffered,"aria-label":this.i18n.buffered,"aria-valuemin":"0","aria-valuemax":this.endTime,"aria-valuenow":this.buffered,"aria-valuetext":`${(this.endTime>0?this.buffered/this.endTime:0).toFixed(0)}%`},"% buffered"),z("vm-tooltip",{hidden:this.hideTooltip,ref:n=>{this.tooltip=n}},this.timestamp))}get host(){return this}static get watchers(){return{noKeyboard:["onNoKeyboardChange"],duration:["onDurationChange"]}}static get style(){return":host{--vm-tooltip-spacing:var(--vm-scrubber-tooltip-spacing);flex:1;position:relative;cursor:pointer;pointer-events:auto;box-sizing:border-box;left:calc(var(--vm-slider-thumb-width) / 2);margin-right:var(--vm-slider-thumb-width);margin-bottom:var(--vm-slider-track-height)}@keyframes progress{to{background-position:var(--vm-scrubber-loading-stripe-size) 0}}.scrubber{position:relative;width:100%}vm-slider,progress{margin-left:calc(calc(var(--vm-slider-thumb-width) / 2) * -1);margin-right:calc(calc(var(--vm-slider-thumb-width) / 2) * -1);width:calc(100% + var(--vm-slider-thumb-width));height:var(--vm-slider-track-height)}vm-slider:hover,progress:hover{cursor:pointer}vm-slider{position:absolute;top:0;left:0;z-index:3}progress{-webkit-appearance:none;background:transparent;border:0;border-radius:100px;position:absolute;left:0;top:50%;padding:0;color:var(--vm-scrubber-buffered-bg);height:var(--vm-slider-track-height)}progress::-webkit-progress-bar{background:transparent}progress::-webkit-progress-value{background:currentColor;border-radius:100px;min-width:var(--vm-slider-track-height);transition:width 0.2s ease}progress::-moz-progress-bar{background:currentColor;border-radius:100px;min-width:var(--vm-slider-track-height);transition:width 0.2s ease}progress::-ms-fill{border-radius:100px;transition:width 0.2s ease}progress.loading{animation:progress 1s linear infinite;background-image:linear-gradient(\n    -45deg,\n    var(--vm-scrubber-loading-stripe-color) 25%,\n    transparent 25%,\n    transparent 50%,\n    var(--vm-scrubber-loading-stripe-color) 50%,\n    var(--vm-scrubber-loading-stripe-color) 75%,\n    transparent 75%,\n    transparent\n  );background-repeat:repeat-x;background-size:var(--vm-scrubber-loading-stripe-size)\n    var(--vm-scrubber-loading-stripe-size);color:transparent;background-color:transparent}"}};let bL=0;const Jpe=class extends HTMLElement{constructor(){super(),this.__registerHost(),lt(this),this.disposal=new zi,this.menuHeight=0,this.pin="bottomRight",this.active=!1,this.isMobile=!1,this.isAudioView=!1,Ke(this),nL(this),Qt(this,["isMobile","isAudioView"])}onActiveChange(){this.dispatch("isSettingsActive",this.active),!fe(this.controller)&&(this.controller.expanded=this.active)}connectedCallback(){this.dispatch=Al(this),bL+=1,this.id=`vm-settings-${bL}`}disconnectedCallback(){this.disposal.empty()}setController(t){return function(t,n,e,i){return new(e||(e=Promise))(function(o,s){function l(m){try{d(i.next(m))}catch(_){s(_)}}function c(m){try{d(i.throw(m))}catch(_){s(_)}}function d(m){m.done?o(m.value):function(o){return o instanceof e?o:new e(function(s){s(o)})}(m.value).then(l,c)}d((i=i.apply(t,n||[])).next())})}(this,void 0,void 0,function*(){this.controller=t,this.controller.menu=this.id,this.disposal.empty(),this.disposal.add(xn(this.controller,"click",()=>{this.active=!this.active})),this.disposal.add(xn(this.controller,"keydown",n=>{"Enter"===n.key&&(this.active||this.menu.focusMenu())}))})}getPosition(){if(this.isAudioView)return{right:"0",bottom:"calc(var(--vm-controls-height, 0) + 4px)"};const t=this.pin.split(/(?=[L|R])/).map(n=>n.toLowerCase());return{[t.includes("top")?"top":"bottom"]:"var(--vm-controls-height, 0)",[t.includes("left")?"left":"right"]:"8px"}}onOpen(t){var n;(null===(n=t.detail)||void 0===n?void 0:n.identifier)===this.id&&(this.active=!0)}onClose(t){var n;(null===(n=t.detail)||void 0===n?void 0:n.identifier)===this.id&&(this.active=!1)}onHeightChange(t){this.menuHeight=t.detail}render(){return z("div",{style:Object.assign({},this.getPosition()),class:{settings:!0,active:this.active,mobile:this.isMobile}},z("div",{class:"container",style:{height:`${this.menuHeight}px`}},z("vm-menu",{identifier:this.id,active:this.active,controller:this.controller,onVmOpen:this.onOpen.bind(this),onVmClose:this.onClose.bind(this),onVmMenuHeightChange:this.onHeightChange.bind(this),ref:t=>{this.menu=t}},z("slot",null))))}get host(){return this}static get watchers(){return{active:["onActiveChange"]}}static get style(){return":host{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:var(--vm-menu-z-index)}.settings{position:absolute;opacity:0;pointer-events:none;overflow-x:hidden;overflow-y:auto;background-color:var(--vm-menu-bg);max-height:var(--vm-settings-max-height);border-radius:var(--vm-settings-border-radius);padding:var(--vm-settings-padding);box-shadow:var(--vm-settings-shadow);box-sizing:border-box;scrollbar-width:thin;scroll-behavior:smooth;scrollbar-color:var(--vm-settings-scroll-thumb-color)\n    var(--vm-settings-scroll-track-color);transform:translateY(8px);transition:var(--vm-settings-transition)}.container{display:block;width:var(--vm-settings-width);height:100%;position:relative;transition:width 0.25s ease-in, height 0.25s ease-in}.settings.hydrated{visibility:hidden !important}.settings::-webkit-scrollbar{width:var(--vm-settings-scroll-width)}.settings::-webkit-scrollbar-track{background:var(--vm-settings-scroll-track-color)}.settings::-webkit-scrollbar-thumb{border-radius:var(--vm-settings-scroll-width);background-color:var(--vm-settings-scroll-thumb-color);border:2px solid var(--vm-menu-bg)}.settings.active{transform:translateY(0);opacity:1;pointer-events:auto;visibility:visible !important}.settings.mobile{position:fixed;top:auto !important;left:0 !important;right:0 !important;bottom:0 !important;width:100%;min-height:56px;max-height:50%;border-radius:0;z-index:2147483647;transform:translateY(100%)}.settings.mobile.active{transform:translateY(0)}.settings.mobile>vm-menu{height:100% !important;overflow:auto !important}"}};var CL=function(t,n,e,i){return new(e||(e=Promise))(function(o,s){function l(m){try{d(i.next(m))}catch(_){s(_)}}function c(m){try{d(i.throw(m))}catch(_){s(_)}}function d(m){m.done?o(m.value):function(o){return o instanceof e?o:new e(function(s){s(o)})}(m.value).then(l,c)}d((i=i.apply(t,n||[])).next())})};let wL=0;const efe=class extends HTMLElement{constructor(){super(),this.__registerHost(),lt(this),this.icon="settings",this.tooltipPosition="top",this.expanded=!1,this.i18n={},Ke(this),Qt(this,["i18n"])}onComponentsChange(){fe(this.vmSettings)||this.vmSettings.setController(this.host)}connectedCallback(){wL+=1,this.id=`vm-settings-control-${wL}`,GR(this,"vm-settings",t=>{[this.vmSettings]=t})}focusControl(){var t;return CL(this,void 0,void 0,function*(){null===(t=this.control)||void 0===t||t.focusControl()})}blurControl(){var t;return CL(this,void 0,void 0,function*(){null===(t=this.control)||void 0===t||t.blurControl()})}render(){const t=!fe(this.menu);return z("div",{class:{settingsControl:!0,hidden:!t,active:t&&this.expanded}},z("vm-control",{identifier:this.id,menu:this.menu,hidden:!t,expanded:this.expanded,label:this.i18n.settings,ref:n=>{this.control=n}},z("vm-icon",{name:this.icon,library:this.icons}),z("vm-tooltip",{hidden:this.expanded,position:this.tooltipPosition,direction:this.tooltipDirection},this.i18n.settings)))}get host(){return this}static get watchers(){return{vmSettings:["onComponentsChange"]}}static get style(){return".settingsControl.hidden{display:none}.settingsControl{--vm-icon-transition:transform 0.3s ease}.settingsControl.active{--vm-icon-transform:rotate(90deg)}"}},nfe=class extends HTMLElement{constructor(){super(),this.__registerHost(),lt(this),this.hidden=!1,this.effect="sheen",this.ready=!1,Ke(this),Qt(this,["ready"])}onReadyChange(){this.ready?setTimeout(()=>{this.hidden=!0},500):this.hidden=!1}render(){return z("div",{class:{skeleton:!0,hidden:this.hidden,sheen:"sheen"===this.effect}},z("div",{class:"indicator"}))}static get watchers(){return{ready:["onReadyChange"]}}static get style(){return":host{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:var(--vm-skeleton-z-index)}@keyframes sheen{0%{background-position:200% 0}to{background-position:-200% 0}}.skeleton{width:100%;height:100%;display:flex;min-height:1rem;pointer-events:auto}.sheen.hidden{opacity:0;visibility:hidden;transition:var(--vm-fade-transition);pointer-events:none}.indicator{flex:1 1 auto;background:var(--vm-skeleton-color)}.skeleton.sheen .indicator{background:linear-gradient(\n    270deg,\n    var(--vm-skeleton-sheen-color),\n    var(--vm-skeleton-color),\n    var(--vm-skeleton-color),\n    var(--vm-skeleton-sheen-color)\n  );background-size:400% 100%;background-size:400% 100%;animation:sheen 8s ease-in-out infinite}"}},rfe=class extends HTMLElement{constructor(){super(),this.__registerHost(),lt(this),this.vmValueChange=ae(this,"vmValueChange",7),this.vmFocus=ae(this,"vmFocus",7),this.vmBlur=ae(this,"vmBlur",7),this.step=1,this.min=0,this.max=10,this.value=5,Ke(this)}getPercentage(){return this.value/this.max*100+"%"}onValueChange(t){var n;const e=parseFloat(null===(n=t.target)||void 0===n?void 0:n.value);this.vmValueChange.emit(e)}calcTouchedValue(t){const n=t.target,e=t.changedTouches[0],i=parseFloat(n.getAttribute("min")),r=parseFloat(n.getAttribute("max")),o=parseFloat(n.getAttribute("step")),s=r-i;let l;const c=n.getBoundingClientRect(),d=parseFloat(window.getComputedStyle(this.host).getPropertyValue("--vm-slider-thumb-width")),m=100/c.width*(d/2)/100;l=100/c.width*(e.clientX-c.left),l=Math.max(0,Math.min(l,100)),l<50?l-=(100-2*l)*m:l>50&&(l+=2*(l-50)*m);const _=s*(l/100);return o>=1?i+Math.round(_/o)*o:i+parseFloat(_.toFixed(2))}onTouch(t){const n=t.target;n.disabled||(t.preventDefault(),this.value=this.calcTouchedValue(t),this.vmValueChange.emit(this.value),n.dispatchEvent(new window.Event("touchend"===t.type?"change":"input",{bubbles:!0})))}render(){var t;return z("div",{class:"slider",style:{"--vm-value":this.getPercentage()}},z("input",{type:"range",step:this.step,min:this.min,max:this.max,value:this.value,autocomplete:"off","aria-label":this.label,"aria-valuemin":this.min,"aria-valuemax":this.max,"aria-valuenow":this.value,"aria-valuetext":null!==(t=this.valueText)&&void 0!==t?t:this.getPercentage(),"aria-orientation":"horizontal",onInput:this.onValueChange.bind(this),onFocus:()=>{this.vmFocus.emit()},onBlur:()=>{this.vmBlur.emit()},onTouchStart:this.onTouch.bind(this),onTouchMove:this.onTouch.bind(this),onTouchEnd:this.onTouch.bind(this)}))}get host(){return this}static get style(){return":host{width:100%}.slider{width:100%}input{width:100%;-webkit-appearance:none;background:transparent;border:0;outline:0;cursor:pointer;box-sizing:border-box;border-radius:calc(var(--vm-slider-thumb-height) * 2);user-select:none;-webkit-user-select:none;touch-action:manipulation;color:var(--vm-slider-value-color);display:block;height:var(--vm-slider-track-height);margin:0;padding:0;transition:box-shadow 0.3s ease}input::-webkit-slider-runnable-track{background:transparent;border:0;border-radius:calc(var(--vm-slider-track-height) / 2);height:var(--vm-slider-track-height);transition:box-shadow 0.3s ease;user-select:none;background-image:linear-gradient(\n    to right,\n    currentColor var(--vm-value, 0%),\n    transparent var(--vm-value, 0%)\n  );background-color:var(--vm-slider-track-color)}input::-webkit-slider-thumb{opacity:0;background:var(--vm-slider-thumb-bg);border:0;border-radius:100%;position:relative;transition:all 0.2s ease;width:var(--vm-slider-thumb-width);height:var(--vm-slider-thumb-height);box-shadow:var(--vm-slider-thumb-shadow);-webkit-appearance:none;margin-top:calc(\n    0px -\n      calc(\n        calc(var(--vm-slider-thumb-height) - var(--vm-slider-track-height)) / 2\n      )\n  )}input::-moz-range-track{background:transparent;border:0;border-radius:calc(var(--vm-slider-track-height) / 2);height:var(--vm-slider-track-height);transition:box-shadow 0.3s ease;user-select:none;background-color:var(--vm-slider-track-color)}input::-moz-range-thumb{opacity:0;background:var(--vm-slider-thumb-bg);border:0;border-radius:100%;position:relative;transition:all 0.2s ease;width:var(--vm-slider-thumb-width);height:var(--vm-slider-thumb-height);box-shadow:var(--vm-slider-thumb-shadow)}input::-moz-range-progress{background:currentColor;border-radius:calc(var(--vm-slider-track-height) / 2);height:var(--vm-slider-track-height)}input::-ms-track{border:0;border-radius:calc(var(--vm-slider-track-height) / 2);height:var(--vm-slider-track-height);transition:box-shadow 0.3s ease;user-select:none;color:transparent;background-color:var(--vm-slider-track-color)}input::-ms-fill-upper{background:transparent;border:0;border-radius:calc(var(--vm-slider-track-height) / 2);height:var(--vm-slider-track-height);transition:box-shadow 0.3s ease;user-select:none}input::-ms-fill-lower{border:0;border-radius:calc(var(--vm-slider-track-height) / 2);height:var(--vm-slider-track-height);transition:box-shadow 0.3s ease;user-select:none;background:currentColor}input::-ms-thumb{opacity:0;background:var(--vm-slider-thumb-bg);border:0;border-radius:100%;position:relative;transition:all 0.2s ease;width:var(--vm-slider-thumb-width);height:var(--vm-slider-thumb-height);box-shadow:var(--vm-slider-thumb-shadow);margin-top:0}input::-ms-tooltip{display:none}input:hover::-webkit-slider-runnable-track{height:var(--vm-slider-track-focused-height)}input:hover::-moz-range-track{height:var(--vm-slider-track-focused-height)}input:hover::-ms-track{height:var(--vm-slider-track-focused-height)}input:hover::-ms-fill-upper{height:var(--vm-slider-track-focused-height)}input:hover::-ms-fill-lower{height:var(--vm-slider-track-focused-height)}input:hover::-webkit-slider-thumb{opacity:1}input:hover::-moz-range-thumb{opacity:1}input:hover::-ms-thumb{opacity:1}input:focus{outline:0}input:focus::-webkit-slider-runnable-track{outline:0;height:var(--vm-slider-track-focused-height)}input:focus::-moz-range-track{outline:0;height:var(--vm-slider-track-focused-height)}input:focus::-ms-track{outline:0;height:var(--vm-slider-track-focused-height)}input::-moz-focus-outer{border:0}"}},sfe=class extends HTMLElement{constructor(){super(),this.__registerHost(),lt(this),this.vmWillShow=ae(this,"vmWillShow",3),this.vmWillHide=ae(this,"vmWillHide",3),this.blacklist=[mm.YouTube],this.isHidden=!0,this.isActive=!1,this.isVideoView=!1,this.showWhenMediaLoading=!1,this.playbackReady=!1,this.buffering=!1,Ke(this),Qt(this,["isVideoView","buffering","playbackReady","currentProvider"])}onVideoViewChange(){this.isHidden=!this.isVideoView,this.onVisiblityChange()}onActiveChange(){this.isActive=this.buffering||this.showWhenMediaLoading&&!this.playbackReady,this.onVisiblityChange()}onVisiblityChange(){!this.isHidden&&this.isActive?this.vmWillShow.emit():this.vmWillHide.emit()}render(){return z("div",{class:{spinner:!0,hidden:this.isHidden||this.blacklist.includes(this.currentProvider),active:this.isActive}},z("div",{class:{spin:!0,active:this.isActive}},"Loading..."))}static get watchers(){return{isVideoView:["onVideoViewChange"],buffering:["onActiveChange"],playbackReady:["onActiveChange"]}}static get style(){return":host{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:var(--vm-spinner-z-index)}.spinner{width:100%;height:100%;display:flex;justify-content:center;align-items:center;opacity:0;visibility:hidden;pointer-events:none;transition:var(--vm-fade-transition)}.spinner.hidden{display:none}.spinner.active{opacity:1;visibility:visible}@keyframes spin{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}.spin{background:transparent;margin:60px auto;font-size:10px;position:relative;text-indent:-9999em;pointer-events:none;border-top:var(--vm-spinner-thickness) solid var(--vm-spinner-fill-color);border-left:var(--vm-spinner-thickness) solid var(--vm-spinner-fill-color);border-right:var(--vm-spinner-thickness) solid var(--vm-spinner-track-color);border-bottom:var(--vm-spinner-thickness) solid var(--vm-spinner-track-color);transform:translateZ(0)}.spin.active{animation:spin var(--vm-spinner-spin-duration) infinite\n    var(--vm-spinner-spin-timing-func)}.spin,.spin::after{border-radius:50%;width:var(--vm-spinner-width);height:var(--vm-spinner-height)}"}};var US=function(t,n,e,i){return new(e||(e=Promise))(function(o,s){function l(m){try{d(i.next(m))}catch(_){s(_)}}function c(m){try{d(i.throw(m))}catch(_){s(_)}}function d(m){m.done?o(m.value):function(o){return o instanceof e?o:new e(function(s){s(o)})}(m.value).then(l,c)}d((i=i.apply(t,n||[])).next())})};let SL=0;const afe=class extends HTMLElement{constructor(){super(),this.__registerHost(),lt(this),this.vmOpenSubmenu=ae(this,"vmOpenSubmenu",7),this.vmCloseSubmenu=ae(this,"vmCloseSubmenu",7),this.slideInDirection="right",this.active=!1,Ke(this)}connectedCallback(){this.genId()}getController(){return US(this,void 0,void 0,function*(){return this.controller})}getMenu(){return US(this,void 0,void 0,function*(){return this.menu})}getControllerHeight(){var t,n;return US(this,void 0,void 0,function*(){return null!==(n=null===(t=this.controller)||void 0===t?void 0:t.getHeight())&&void 0!==n?n:0})}getControllerHeightSync(){var t;const n=null===(t=this.controller)||void 0===t?void 0:t.shadowRoot.querySelector("[role='menuitem']");return n?parseFloat(window.getComputedStyle(n).height):0}onMenuOpen(){this.active=!0,this.vmOpenSubmenu.emit(this.host)}onMenuClose(){this.active=!1,this.vmCloseSubmenu.emit(this.host)}genId(){SL+=1,this.id=`vm-submenu-${SL}`}getControllerId(){return`${this.id}-controller`}render(){return z("div",null,z("vm-menu-item",{identifier:this.getControllerId(),menu:this.menu,label:this.label,hint:this.hint,expanded:this.active,ref:t=>{lo(()=>{this.controller=t})}}),z("vm-menu",{identifier:this.id,controller:this.controller,active:this.active,slideInDirection:this.slideInDirection,onVmOpen:this.onMenuOpen.bind(this),onVmClose:this.onMenuClose.bind(this),ref:t=>{lo(()=>{this.menu=t})},style:{top:`${this.getControllerHeightSync()+1}px`}},z("slot",null)))}get host(){return this}},cfe=class extends HTMLElement{constructor(){super(),this.__registerHost(),lt(this),this.seconds=0,this.alwaysShowHours=!1,Ke(this)}render(){return z("div",{class:"time","aria-label":this.label},bm(Math.max(0,this.seconds),this.alwaysShowHours))}static get style(){return".time{display:flex;align-items:center;color:var(--vm-time-color);font-size:var(--vm-time-font-size);font-weight:var(--vm-time-font-weight)}"}},dfe=class extends HTMLElement{constructor(){super(),this.__registerHost(),lt(this),this.separator="/",this.alwaysShowHours=!1,Ke(this)}render(){return z("div",{class:"timeProgress"},z("vm-current-time",{alwaysShowHours:this.alwaysShowHours}),z("span",{class:"separator"},this.separator),z("vm-end-time",{alwaysShowHours:this.alwaysShowHours}))}static get style(){return".timeProgress{display:flex;width:100%;height:100%;align-items:center;color:var(--vm-time-color)}.separator{margin:0 4px}"}};let TL=0;const pfe=class extends HTMLElement{constructor(){super(),this.__registerHost(),lt(this),this.hasLoaded=!1,this.hidden=!1,this.active=!1,this.position="top",this.isTouch=!1,this.isMobile=!1,Ke(this),Qt(this,["isTouch","isMobile"])}componentDidLoad(){this.hasLoaded=!0}getId(){const t=this.host.id;return Cr(t)&&t.length>0?t:(TL+=1,`vm-tooltip-${TL}`)}render(){return z("div",{id:this.getId(),role:"tooltip","aria-hidden":!this.active||this.isTouch||this.isMobile?"true":"false",class:{tooltip:!0,hidden:!this.hasLoaded||this.hidden,onTop:"top"===this.position,onBottom:"bottom"===this.position,growLeft:"left"===this.direction,growRight:"right"===this.direction}},z("slot",null))}get host(){return this}static get style(){return":host{display:contents;z-index:var(--vm-tooltip-z-index)}.tooltip{left:var(--vm-tooltip-left, 50%);transform:translateX(-50%);line-height:1.3;pointer-events:none;position:absolute;opacity:0;white-space:nowrap;visibility:hidden;background:var(--vm-tooltip-bg);border-radius:var(--vm-tooltip-border-radius);box-sizing:border-box;box-shadow:var(--vm-tooltip-box-shadow);color:var(--vm-tooltip-color);font-size:var(--vm-tooltip-font-size);padding:var(--vm-tooltip-padding);transition:opacity var(--vm-tooltip-fade-duration)\n    var(--vm-tooltip-fade-timing-func)}.tooltip[aria-hidden='false']{opacity:1;visibility:visible}.tooltip.hidden{display:none}.tooltip.onTop{bottom:100%;margin-bottom:var(--vm-tooltip-spacing)}.tooltip.onBottom{top:100%;margin-top:var(--vm-tooltip-spacing)}.tooltip.growLeft{left:auto;right:0;transform:none}.tooltip.growRight{left:0;transform:none}"}},mfe=class extends HTMLElement{constructor(){super(),this.__registerHost(),lt(this),this.isVideoView=!1,this.playsinline=!1,this.isFullscreenActive=!1,Ke(this),Qt(this,["isVideoView","playsinline","isFullscreenActive"])}render(){const t=!Uh||!this.isVideoView||this.playsinline&&!this.isFullscreenActive;return z("div",{class:{ui:!0,hidden:!t,video:this.isVideoView}},t&&z("slot",null))}static get style(){return":host{z-index:var(--vm-ui-z-index)}.ui{width:100%;pointer-events:none}.ui.hidden{display:none}.ui.video{position:absolute;top:0;left:0;height:100%}"}};const _fe=class extends HTMLElement{constructor(){super(),this.__registerHost(),this.willAttach=!1,this.hasCustomTextManager=!1,this.preload="metadata",Ke(this),Pc(this)}onProviderConnect(t){this.willAttach&&t.stopImmediatePropagation()}onProviderDisconnect(t){this.willAttach&&t.stopImmediatePropagation()}getAdapter(){var t;return function(t,n,e,i){return new(e||(e=Promise))(function(o,s){function l(m){try{d(i.next(m))}catch(_){s(_)}}function c(m){try{d(i.throw(m))}catch(_){s(_)}}function d(m){m.done?o(m.value):function(o){return o instanceof e?o:new e(function(s){s(o)})}(m.value).then(l,c)}d((i=i.apply(t,n||[])).next())})}(this,void 0,void 0,function*(){return null===(t=this.fileProvider)||void 0===t?void 0:t.getAdapter()})}render(){return z("vm-file",{noConnect:!0,willAttach:this.willAttach,crossOrigin:this.crossOrigin,poster:this.poster,preload:this.preload,controlsList:this.controlsList,autoPiP:this.autoPiP,disablePiP:this.disablePiP,disableRemotePlayback:this.disableRemotePlayback,hasCustomTextManager:this.hasCustomTextManager,mediaTitle:this.mediaTitle,viewType:ho.Video,ref:t=>{this.fileProvider=t}},z("slot",null))}};var Ty=(()=>(function(t){t.Play="play",t.Pause="pause",t.Seeking="seeking",t.Seeked="seeked",t.TimeUpdate="timeupdate",t.VolumeChange="volumechange",t.DurationChange="durationchange",t.FullscreenChange="fullscreenchange",t.CueChange="cuechange",t.Progress="progress",t.Error="error",t.PlaybackRateChange="playbackratechange",t.Loaded="loaded",t.BufferStart="bufferstart",t.BufferEnd="bufferend",t.TextTrackChange="texttrackchange",t.Waiting="waiting",t.Ended="ended"}(Ty||(Ty={})),Ty))(),Js=function(t,n,e,i){return new(e||(e=Promise))(function(o,s){function l(m){try{d(i.next(m))}catch(_){s(_)}}function c(m){try{d(i.throw(m))}catch(_){s(_)}}function d(m){m.done?o(m.value):function(o){return o instanceof e?o:new e(function(s){s(o)})}(m.value).then(l,c)}d((i=i.apply(t,n||[])).next())})};const VS=new Map,yfe=class extends HTMLElement{constructor(){super(),this.__registerHost(),lt(this),this.vmLoadStart=ae(this,"vmLoadStart",7),this.vmError=ae(this,"vmError",7),this.defaultInternalState={},this.volume=50,this.hasLoaded=!1,this.internalState={paused:!0,playing:!1,seeking:!1,currentTime:0,buffered:0,playbackStarted:!1,playRequest:!1},this.embedSrc="",this.mediaTitle="",this.byline=!0,this.portrait=!0,this.noAutoAspectRatio=!1,this.cookies=!0,this.language="en",this.aspectRatio="16:9",this.autoplay=!1,this.controls=!1,this.loop=!1,this.muted=!1,this.playsinline=!1,Ke(this),Pc(this),wy(this)}onVideoIdChange(){this.cancelTimeUpdates(),this.videoId?(this.embedSrc=`${this.getOrigin()}/video/${this.videoId}`,this.pendingDurationCall=my(),this.pendingMediaTitleCall=my(),this.fetchVideoInfo=this.getVideoInfo()):this.embedSrc=""}onCustomPosterChange(){this.dispatch("currentPoster",this.poster)}connectedCallback(){this.dispatch=Lh(this),this.dispatch("viewType",ho.Video),this.onVideoIdChange(),this.initialMuted=this.muted,this.defaultInternalState=Object.assign({},this.internalState)}disconnectedCallback(){this.cancelTimeUpdates(),this.pendingPlayRequest=void 0}getOrigin(){return"https://player.vimeo.com"}getPreconnections(){return[this.getOrigin(),"https://i.vimeocdn.com","https://f.vimeocdn.com","https://fresnel.vimeocdn.com"]}remoteControl(t,n){return this.embed.postMessage({method:t,value:n})}buildParams(){return{byline:this.byline,color:this.color,portrait:this.portrait,autopause:!1,transparent:!1,autoplay:this.autoplay,muted:this.initialMuted,playsinline:this.playsinline,dnt:!this.cookies}}getVideoInfo(){return Js(this,void 0,void 0,function*(){return VS.has(this.videoId)?VS.get(this.videoId):window.fetch(`https://vimeo.com/api/oembed.json?url=${this.embedSrc}`).then(t=>t.json()).then(t=>{var n;const o={poster:`https://i.vimeocdn.com/video/${null===(n=null==t?void 0:t.thumbnail_url)||void 0===n?void 0:n.match(/vimeocdn\.com\/video\/([0-9]+)/)[1]}_1920x1080.jpg`,width:null==t?void 0:t.width,height:null==t?void 0:t.height};return VS.set(this.videoId,o),o})})}onTimeChange(t){this.internalState.currentTime!==t&&(this.dispatch("currentTime",t),Math.abs(this.internalState.currentTime-t)>1.5&&(this.internalState.seeking=!0,this.dispatch("seeking",!0),this.internalState.playing&&this.internalState.buffered<t&&this.dispatch("buffering",!0),window.clearTimeout(this.pendingPlayRequest),this.internalState.paused||(this.internalState.playRequest=!0),this.remoteControl(this.internalState.playbackStarted?"pause":"play")),this.internalState.currentTime=t)}cancelTimeUpdates(){Pl(this.timeRAF)&&window.cancelAnimationFrame(this.timeRAF)}requestTimeUpdates(){this.remoteControl("getCurrentTime"),this.timeRAF=window.requestAnimationFrame(()=>{this.requestTimeUpdates()})}onSeeked(){!this.internalState.seeking||(this.dispatch("seeking",!1),this.internalState.seeking=!1,this.internalState.playRequest&&window.setTimeout(()=>{this.remoteControl("play")},150))}onVimeoMethod(t,n){var e,i;switch(t){case"getCurrentTime":this.internalState.seeking||this.onTimeChange(n);break;case"getDuration":null===(e=this.pendingDurationCall)||void 0===e||e.resolve(n);break;case"getVideoTitle":null===(i=this.pendingMediaTitleCall)||void 0===i||i.resolve(n)}}onLoaded(){var t,n;this.hasLoaded||(this.pendingPlayRequest=void 0,this.internalState=Object.assign({},this.defaultInternalState),this.dispatch("currentSrc",this.embedSrc),this.dispatch("mediaType",fs.Video),this.remoteControl("getDuration"),this.remoteControl("getVideoTitle"),Promise.all([this.fetchVideoInfo,null===(t=this.pendingDurationCall)||void 0===t?void 0:t.promise,null===(n=this.pendingMediaTitleCall)||void 0===n?void 0:n.promise]).then(([e,i,r])=>{var o,s,l;this.requestTimeUpdates(),this.dispatch("aspectRatio",`${null!==(o=null==e?void 0:e.width)&&void 0!==o?o:16}:${null!==(s=null==e?void 0:e.height)&&void 0!==s?s:9}`),this.dispatch("currentPoster",null!==(l=this.poster)&&void 0!==l?l:null==e?void 0:e.poster),this.dispatch("duration",null!=i?i:-1),this.dispatch("mediaTitle",r),this.dispatch("playbackReady",!0)}),this.hasLoaded=!0)}onVimeoEvent(t,n){switch(t){case"ready":Object.values(Ty).forEach(e=>{this.remoteControl("addEventListener",e)});break;case"loaded":this.onLoaded();break;case"play":this.onLoaded(),this.internalState.paused=!1,this.dispatch("paused",!1);break;case"playProgress":this.internalState.playing||(this.dispatch("playing",!0),this.internalState.playing=!0,this.internalState.playbackStarted=!0,this.pendingPlayRequest=window.setTimeout(()=>{this.internalState.playRequest=!1,this.pendingPlayRequest=void 0},1e3)),this.dispatch("buffering",!1),this.onSeeked();break;case"pause":this.internalState.paused=!0,this.internalState.playing=!1,this.dispatch("paused",!0),this.dispatch("buffering",!1);break;case"loadProgress":this.internalState.buffered=n.seconds,this.dispatch("buffered",n.seconds);break;case"bufferstart":this.dispatch("buffering",!0),this.internalState.paused&&(this.internalState.paused=!1,this.dispatch("paused",!1),this.dispatch("playbackStarted",!0));break;case"bufferend":this.dispatch("buffering",!1),this.internalState.paused&&this.onSeeked();break;case"volumechange":if(n.volume>0){const e=Math.floor(100*n.volume);this.dispatch("muted",!1),this.volume!==e&&(this.volume=e,this.dispatch("volume",this.volume))}else this.dispatch("muted",!0);break;case"durationchange":this.dispatch("duration",n.duration);break;case"playbackratechange":this.dispatch("playbackRate",n.playbackRate);break;case"fullscreenchange":this.dispatch("isFullscreenActive",n.fullscreen);break;case"finish":this.loop?(this.remoteControl("setCurrentTime",0),setTimeout(()=>{this.remoteControl("play")},200)):this.dispatch("playbackEnded",!0);break;case"error":this.vmError.emit(n)}}onEmbedSrcChange(){this.hasLoaded=!1,this.vmLoadStart.emit(),this.dispatch("viewType",ho.Video)}onEmbedMessage(t){const n=t.detail;fe(n.event)||this.onVimeoEvent(n.event,n.data),fe(n.method)||this.onVimeoMethod(n.method,n.value)}adjustPosition(){const[t,n]=this.aspectRatio.split(":").map(o=>parseInt(o,10));return{paddingBottom:"240%",transform:`translateY(-${(240-100/t*n)/4.8+.02}%)`}}getAdapter(){return Js(this,void 0,void 0,function*(){const t=/vimeo(?:\.com|)\/([0-9]{9,})/,n=/vimeo\.com\/external\/[0-9]+\..+/;return{getInternalPlayer:()=>Js(this,void 0,void 0,function*(){return this.embed}),play:()=>Js(this,void 0,void 0,function*(){this.remoteControl("play")}),pause:()=>Js(this,void 0,void 0,function*(){this.remoteControl("pause")}),canPlay:e=>Js(this,void 0,void 0,function*(){return Cr(e)&&!n.test(e)&&t.test(e)}),setCurrentTime:e=>Js(this,void 0,void 0,function*(){this.remoteControl("setCurrentTime",e)}),setMuted:e=>Js(this,void 0,void 0,function*(){e||(this.volume=this.volume>0?this.volume:30),this.remoteControl("setVolume",e?0:this.volume/100)}),setVolume:e=>Js(this,void 0,void 0,function*(){this.muted?this.dispatch("volume",e):this.remoteControl("setVolume",e/100)}),canSetPlaybackRate:()=>Js(this,void 0,void 0,function*(){return!1}),setPlaybackRate:e=>Js(this,void 0,void 0,function*(){this.remoteControl("setPlaybackRate",e)})}})}render(){return z("vm-embed",{class:{hideControls:!this.controls},style:this.adjustPosition(),embedSrc:this.embedSrc,mediaTitle:this.mediaTitle,origin:this.getOrigin(),params:this.buildParams(),decoder:sL,preconnections:this.getPreconnections(),onVmEmbedMessage:this.onEmbedMessage.bind(this),onVmEmbedSrcChange:this.onEmbedSrcChange.bind(this),ref:t=>{this.embed=t}})}static get watchers(){return{videoId:["onVideoIdChange"],poster:["onCustomPosterChange"]}}static get style(){return":host{z-index:var(--vm-media-z-index)}vm-embed{position:absolute;top:0;left:0;width:100%;height:100%}vm-embed.hideControls{display:block;width:100%;height:auto;position:relative}"}};const wfe=class extends HTMLElement{constructor(){super(),this.__registerHost(),lt(this),this.keyboardDisposal=new zi,this.prevMuted=!1,this.currentVolume=50,this.isSliderActive=!1,this.lowVolumeIcon="volume-low",this.highVolumeIcon="volume-high",this.mutedIcon="volume-mute",this.tooltipPosition="top",this.hideTooltip=!1,this.muteKeys="m",this.noKeyboard=!1,this.muted=!1,this.volume=50,this.isMobile=!1,this.i18n={},Ke(this),Qt(this,["volume","muted","isMobile","i18n"])}onNoKeyboardChange(){return function(t,n,e,i){return new(e||(e=Promise))(function(o,s){function l(m){try{d(i.next(m))}catch(_){s(_)}}function c(m){try{d(i.throw(m))}catch(_){s(_)}}function d(m){m.done?o(m.value):function(o){return o instanceof e?o:new e(function(s){s(o)})}(m.value).then(l,c)}d((i=i.apply(t,n||[])).next())})}(this,void 0,void 0,function*(){if(this.keyboardDisposal.empty(),this.noKeyboard)return;const t=yield La(this);fe(t)||this.keyboardDisposal.add(xn(t,"keydown",n=>{if("ArrowUp"!==n.key&&"ArrowDown"!==n.key)return;const i="ArrowUp"===n.key?Math.min(100,this.volume+5):Math.max(0,this.volume-5);this.dispatch("volume",parseInt(`${i}`,10))}))})}onPlayerVolumeChange(){this.currentVolume=this.muted?0:this.volume,!this.muted&&this.prevMuted&&0===this.volume&&this.dispatch("volume",30),this.prevMuted=this.muted}connectedCallback(){this.prevMuted=this.muted,this.dispatch=Al(this),this.onNoKeyboardChange()}disconnectedCallback(){this.keyboardDisposal.empty()}onShowSlider(){clearTimeout(this.hideSliderTimeout),this.isSliderActive=!0}onHideSlider(){this.hideSliderTimeout=setTimeout(()=>{this.isSliderActive=!1},100)}onVolumeChange(t){const n=t.detail;this.currentVolume=n,this.dispatch("volume",n),this.dispatch("muted",0===n)}onKeyDown(t){"ArrowLeft"!==t.key&&"ArrowRight"!==t.key||t.stopPropagation()}render(){return z("div",{class:"volumeControl",onMouseEnter:this.onShowSlider.bind(this),onMouseLeave:this.onHideSlider.bind(this)},z("vm-mute-control",{keys:this.muteKeys,lowVolumeIcon:this.lowVolumeIcon,highVolumeIcon:this.highVolumeIcon,mutedIcon:this.mutedIcon,icons:this.icons,tooltipPosition:this.tooltipPosition,tooltipDirection:this.tooltipDirection,hideTooltip:this.hideTooltip,onVmFocus:this.onShowSlider.bind(this),onVmBlur:this.onHideSlider.bind(this)}),z("vm-slider",{class:{hidden:this.isMobile,active:this.isSliderActive},step:5,max:100,value:this.currentVolume,label:this.i18n.volume,onKeyDown:this.onKeyDown.bind(this),onVmFocus:this.onShowSlider.bind(this),onVmBlur:this.onHideSlider.bind(this),onVmValueChange:this.onVolumeChange.bind(this)}))}static get watchers(){return{noKeyboard:["onNoKeyboardChange"],muted:["onPlayerVolumeChange"],volume:["onPlayerVolumeChange"]}}static get style(){return".volumeControl{align-items:center;display:flex;position:relative;pointer-events:auto;box-sizing:border-box}vm-slider{width:75px;height:100%;margin:0;max-width:0;position:relative;z-index:3;transition:margin 0.2s cubic-bezier(0.4, 0, 1, 1),\n    max-width 0.2s cubic-bezier(0.4, 0, 1, 1);margin-left:calc(var(--vm-control-spacing) / 2) !important;visibility:hidden}vm-slider:hover{cursor:pointer}vm-slider.hidden{display:none}vm-slider.active{max-width:75px;visibility:visible;margin:0 calc(var(--vm-control-spacing) / 2)}"}},EL=t=>{switch(t){case"unknown":return;case"tiny":return"144p";case"small":return"240p";case"medium":return"360p";case"large":return"480p";case"hd720":return"720p";case"hd1080":return"1080p";case"highres":return"1440p";case"max":return"2160p";default:return}};var Xs=function(t,n,e,i){return new(e||(e=Promise))(function(o,s){function l(m){try{d(i.next(m))}catch(_){s(_)}}function c(m){try{d(i.throw(m))}catch(_){s(_)}}function d(m){m.done?o(m.value):function(o){return o instanceof e?o:new e(function(s){s(o)})}(m.value).then(l,c)}d((i=i.apply(t,n||[])).next())})};const BS=new Map,Tfe=class extends HTMLElement{constructor(){super(),this.__registerHost(),lt(this),this.vmLoadStart=ae(this,"vmLoadStart",7),this.defaultInternalState={},this.internalState={paused:!0,duration:0,seeking:!1,playbackReady:!1,playbackStarted:!1,currentTime:0,lastTimeUpdate:0,playbackRate:1,state:-1},this.embedSrc="",this.mediaTitle="",this.cookies=!1,this.showFullscreenControl=!0,this.language="en",this.autoplay=!1,this.controls=!1,this.loop=!1,this.muted=!1,this.playsinline=!1,Ke(this),Pc(this),wy(this)}onVideoIdChange(){this.videoId?(this.embedSrc=`${this.getOrigin()}/embed/${this.videoId}`,this.fetchPosterURL=this.findPosterURL()):this.embedSrc=""}onCustomPosterChange(){this.dispatch("currentPoster",this.poster)}connectedCallback(){this.dispatch=Lh(this),this.dispatch("viewType",ho.Video),this.onVideoIdChange(),this.initialMuted=this.muted,this.defaultInternalState=Object.assign({},this.internalState)}getAdapter(){return Xs(this,void 0,void 0,function*(){const t=/(?:youtu\.be|youtube|youtube\.com|youtube-nocookie\.com)\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=|)((?:\w|-){11})/;return{getInternalPlayer:()=>Xs(this,void 0,void 0,function*(){return this.embed}),play:()=>Xs(this,void 0,void 0,function*(){this.remoteControl("playVideo")}),pause:()=>Xs(this,void 0,void 0,function*(){this.remoteControl("pauseVideo")}),canPlay:n=>Xs(this,void 0,void 0,function*(){return Cr(n)&&t.test(n)}),setCurrentTime:n=>Xs(this,void 0,void 0,function*(){this.remoteControl("seekTo",n)}),setMuted:n=>Xs(this,void 0,void 0,function*(){this.remoteControl(n?"mute":"unMute")}),setVolume:n=>Xs(this,void 0,void 0,function*(){this.remoteControl("setVolume",n)}),canSetPlaybackRate:()=>Xs(this,void 0,void 0,function*(){return!0}),setPlaybackRate:n=>Xs(this,void 0,void 0,function*(){this.remoteControl("setPlaybackRate",n)})}})}getOrigin(){return this.cookies?"https://www.youtube.com":"https://www.youtube-nocookie.com"}getPreconnections(){return[this.getOrigin(),"https://www.google.com","https://googleads.g.doubleclick.net","https://static.doubleclick.net","https://s.ytimg.com","https://i.ytimg.com"]}remoteControl(t,n){return this.embed.postMessage({event:"command",func:t,args:n?[n]:void 0})}buildParams(){return{enablejsapi:1,cc_lang_pref:this.language,hl:this.language,fs:this.showFullscreenControl?1:0,controls:this.controls?1:0,disablekb:this.controls?0:1,iv_load_policy:this.controls?1:3,mute:this.initialMuted?1:0,playsinline:this.playsinline?1:0,autoplay:this.autoplay?1:0}}onEmbedSrcChange(){this.vmLoadStart.emit(),this.dispatch("viewType",ho.Video)}onEmbedLoaded(){window.setTimeout(()=>this.embed.postMessage({event:"listening"}),100)}findPosterURL(){return Xs(this,void 0,void 0,function*(){if(BS.has(this.videoId))return BS.get(this.videoId);const t=n=>`https://i.ytimg.com/vi/${this.videoId}/${n}.jpg`;return MS(t("maxresdefault"),121).catch(()=>MS(t("sddefault"),121)).catch(()=>MS(t("hqdefault"),121)).then(n=>{const e=n.src;return BS.set(this.videoId,e),e})})}onCued(){this.internalState.playbackReady||(this.internalState=Object.assign({},this.defaultInternalState),this.dispatch("currentSrc",this.embedSrc),this.dispatch("mediaType",fs.Video),this.fetchPosterURL.then(t=>{var n;this.dispatch("currentPoster",null!==(n=this.poster)&&void 0!==n?n:t),this.dispatch("playbackReady",!0)}),this.internalState.playbackReady=!0)}onPlayerStateChange(t){if(this.internalState.playbackReady&&-1===t)return this.internalState.paused=!0,this.internalState.playbackStarted=!1,this.dispatch("buffering",!1),this.dispatch("paused",!0),void this.dispatch("playbackStarted",!1);const n=1===t,e=3===t;switch(this.dispatch("buffering",e),this.internalState.paused&&(e||n)&&(this.internalState.paused=!1,this.dispatch("paused",!1),this.internalState.playbackStarted||(this.dispatch("playbackStarted",!0),this.internalState.playbackStarted=!0)),t){case 5:this.onCued();break;case 1:this.onCued(),this.dispatch("playing",!0);break;case 2:this.internalState.paused=!0,this.dispatch("paused",!0);break;case 0:this.loop?window.setTimeout(()=>{this.remoteControl("playVideo")},150):(this.dispatch("playbackEnded",!0),this.internalState.paused=!0,this.dispatch("paused",!0))}this.internalState.state=t}calcCurrentTime(t){let n=t;if(0===this.internalState.state)return this.internalState.duration;if(1===this.internalState.state){const e=(Date.now()/1e3-this.defaultInternalState.lastTimeUpdate)*this.internalState.playbackRate;e>0&&(n+=Math.min(e,1))}return n}onTimeChange(t){const n=this.calcCurrentTime(t);this.dispatch("currentTime",n),Math.abs(this.internalState.currentTime-n)>1.5&&(this.internalState.seeking=!0,this.dispatch("seeking",!0)),this.internalState.currentTime=n}onBufferedChange(t){this.dispatch("buffered",t),this.internalState.seeking&&t>this.internalState.currentTime&&window.setTimeout(()=>{this.internalState.seeking=!1,this.dispatch("seeking",!1)},this.internalState.paused?100:0)}onEmbedMessage(t){const n=t.detail,{info:e}=n;!e||(hy(e.videoData)&&this.dispatch("mediaTitle",e.videoData.title),Pl(e.duration)&&(this.internalState.duration=e.duration,this.dispatch("duration",e.duration)),py(e.availablePlaybackRates)&&this.dispatch("playbackRates",e.availablePlaybackRates),Pl(e.playbackRate)&&(this.internalState.playbackRate=e.playbackRate,this.dispatch("playbackRate",e.playbackRate)),Pl(e.currentTime)&&this.onTimeChange(e.currentTime),Pl(e.currentTimeLastUpdated)&&(this.internalState.lastTimeUpdate=e.currentTimeLastUpdated),Pl(e.videoLoadedFraction)&&this.onBufferedChange(e.videoLoadedFraction*this.internalState.duration),Pl(e.volume)&&this.dispatch("volume",e.volume),(t=>hm(t)===Boolean)(e.muted)&&this.dispatch("muted",e.muted),py(e.availableQualityLevels)&&this.dispatch("playbackQualities",e.availableQualityLevels.map(i=>EL(i))),Cr(e.playbackQuality)&&this.dispatch("playbackQuality",EL(e.playbackQuality)),Pl(e.playerState)&&this.onPlayerStateChange(e.playerState))}render(){return z("vm-embed",{embedSrc:this.embedSrc,mediaTitle:this.mediaTitle,origin:this.getOrigin(),params:this.buildParams(),decoder:sL,preconnections:this.getPreconnections(),onVmEmbedLoaded:this.onEmbedLoaded.bind(this),onVmEmbedMessage:this.onEmbedMessage.bind(this),onVmEmbedSrcChange:this.onEmbedSrcChange.bind(this),ref:t=>{this.embed=t}})}static get watchers(){return{cookies:["onVideoIdChange"],videoId:["onVideoIdChange"],poster:["onCustomPosterChange"]}}static get style(){return":host{z-index:var(--vm-media-z-index)}"}},kL=ze(Wde,[4,"vm-audio",{willAttach:[4,"will-attach"],crossOrigin:[1,"cross-origin"],preload:[1],disableRemotePlayback:[4,"disable-remote-playback"],mediaTitle:[1,"media-title"]}]),Efe=ze(Zde,[1,"vm-caption-control",{showIcon:[1,"show-icon"],hideIcon:[1,"hide-icon"],tooltipPosition:[1,"tooltip-position"],tooltipDirection:[1,"tooltip-direction"],hideTooltip:[4,"hide-tooltip"],icons:[1],keys:[1],i18n:[16],playbackReady:[4,"playback-ready"],textTracks:[16],isTextTrackVisible:[4,"is-text-track-visible"],canToggleCaptionVisibility:[32]}]),kfe=ze(Xde,[1,"vm-captions",{hidden:[4],isControlsActive:[4,"is-controls-active"],isVideoView:[4,"is-video-view"],playbackStarted:[4,"playback-started"],textTracks:[16],currentTextTrack:[2,"current-text-track"],isTextTrackVisible:[4,"is-text-track-visible"],isEnabled:[32],cue:[32],fontSize:[32]}]),Dfe=ze(nhe,[1,"vm-click-to-play",{useOnMobile:[4,"use-on-mobile"],paused:[4],isVideoView:[4,"is-video-view"],isMobile:[4,"is-mobile"]}]),xfe=ze(rhe,[1,"vm-control",{keys:[1],identifier:[1],hidden:[4],label:[1],menu:[1],expanded:[4],pressed:[4],isTouch:[4,"is-touch"],describedBy:[32],showTapHighlight:[32]}]),Mfe=ze(she,[1,"vm-control-group",{space:[1]}]),Ife=ze(lhe,[1,"vm-control-spacer"]),Pfe=ze(hhe,[1,"vm-controls",{hidden:[4],fullWidth:[4,"full-width"],fullHeight:[4,"full-height"],direction:[1],align:[1],justify:[1],pin:[513],activeDuration:[2,"active-duration"],waitForPlaybackStart:[4,"wait-for-playback-start"],hideWhenPaused:[4,"hide-when-paused"],hideOnMouseLeave:[4,"hide-on-mouse-leave"],isAudioView:[4,"is-audio-view"],isSettingsActive:[4,"is-settings-active"],playbackReady:[4,"playback-ready"],isControlsActive:[4,"is-controls-active"],paused:[4],playbackStarted:[4,"playback-started"],isInteracting:[32]}]),Afe=ze(fhe,[1,"vm-current-time",{currentTime:[2,"current-time"],i18n:[16],alwaysShowHours:[4,"always-show-hours"]}]),Ofe=ze(Ohe,[1,"vm-dailymotion",{videoId:[1,"video-id"],shouldAutoplayQueue:[4,"should-autoplay-queue"],showUpNextQueue:[4,"show-up-next-queue"],showShareButtons:[4,"show-share-buttons"],color:[1],syndication:[1],showDailymotionLogo:[4,"show-dailymotion-logo"],showVideoInfo:[4,"show-video-info"],language:[1],autoplay:[4],controls:[4],poster:[1],logger:[16],loop:[4],muted:[4],playsinline:[4],embedSrc:[32],mediaTitle:[32]}]),Nfe=ze(Fhe,[1,"vm-dash",{src:[1],version:[1],libSrc:[1,"lib-src"],config:[16],autoplay:[4],crossOrigin:[1,"cross-origin"],preload:[1],poster:[1],controlsList:[1,"controls-list"],autoPiP:[4,"auto-pip"],disablePiP:[4,"disable-pip"],disableRemotePlayback:[4,"disable-remote-playback"],mediaTitle:[1,"media-title"],enableTextTracksByDefault:[4,"enable-text-tracks-by-default"],shouldRenderNativeTextTracks:[4,"should-render-native-text-tracks"],isTextTrackVisible:[4,"is-text-track-visible"],currentTextTrack:[2,"current-text-track"],hasAttached:[32]},[[0,"vmMediaElChange","onMediaElChange"]]]),Ffe=ze(Lhe,[1,"vm-dbl-click-fullscreen",{useOnMobile:[4,"use-on-mobile"],isFullscreenActive:[4,"is-fullscreen-active"],isVideoView:[4,"is-video-view"],playbackReady:[4,"playback-ready"],isMobile:[4,"is-mobile"],canSetFullscreen:[32]}]),Rfe=ze(Uhe,[1,"vm-default-controls",{activeDuration:[2,"active-duration"],waitForPlaybackStart:[4,"wait-for-playback-start"],hideWhenPaused:[4,"hide-when-paused"],hideOnMouseLeave:[4,"hide-on-mouse-leave"],theme:[1],isMobile:[4,"is-mobile"],isLive:[4,"is-live"],isAudioView:[4,"is-audio-view"],isVideoView:[4,"is-video-view"]}]),Lfe=ze(Bhe,[1,"vm-default-settings",{pin:[513],i18n:[16],playbackReady:[4,"playback-ready"],playbackRate:[2,"playback-rate"],playbackRates:[16],isVideoView:[4,"is-video-view"],playbackQuality:[1,"playback-quality"],playbackQualities:[16],textTracks:[16],currentTextTrack:[2,"current-text-track"],audioTracks:[16],currentAudioTrack:[2,"current-audio-track"],isTextTrackVisible:[4,"is-text-track-visible"],canSetPlaybackRate:[32],canSetPlaybackQuality:[32],canSetTextTrack:[32],canSetAudioTrack:[32]}]),DL=ze(jhe,[1,"vm-default-ui",{noClickToPlay:[4,"no-click-to-play"],noDblClickFullscreen:[4,"no-dbl-click-fullscreen"],noCaptions:[4,"no-captions"],noPoster:[4,"no-poster"],noSpinner:[4,"no-spinner"],noControls:[4,"no-controls"],noSettings:[4,"no-settings"],noLoadingScreen:[4,"no-loading-screen"]}]),$fe=ze(Whe,[1,"vm-embed",{embedSrc:[1,"embed-src"],mediaTitle:[1,"media-title"],params:[1],origin:[1],preconnections:[16],decoder:[16],srcWithParams:[32],hasEnteredViewport:[32]},[[8,"message","onWindowMessage"]]]),Ufe=ze(Qhe,[1,"vm-end-time",{duration:[2],i18n:[16],alwaysShowHours:[4,"always-show-hours"]}]),Vfe=ze(Xhe,[6,"vm-file",{willAttach:[4,"will-attach"],crossOrigin:[1,"cross-origin"],preload:[1],poster:[1],mediaTitle:[1,"media-title"],controlsList:[1,"controls-list"],autoPiP:[4,"auto-pip"],disablePiP:[4,"disable-pip"],disableRemotePlayback:[4,"disable-remote-playback"],viewType:[1,"view-type"],playbackRates:[16],language:[1],autoplay:[4],controls:[4],logger:[16],loop:[4],muted:[4],playsinline:[4],noConnect:[4,"no-connect"],paused:[4],currentTime:[2,"current-time"],volume:[2],playbackReady:[4,"playback-ready"],playbackStarted:[4,"playback-started"],currentTextTrack:[2,"current-text-track"],hasCustomTextManager:[4,"has-custom-text-manager"],isTextTrackVisible:[4,"is-text-track-visible"],shouldRenderNativeTextTracks:[4,"should-render-native-text-tracks"],vmPoster:[32]},[[0,"vmMediaProviderConnect","onProviderConnect"],[0,"vmMediaProviderDisconnect","onProviderDisconnect"]]]),Bfe=ze(npe,[1,"vm-fullscreen-control",{enterIcon:[1,"enter-icon"],exitIcon:[1,"exit-icon"],icons:[1],tooltipPosition:[1,"tooltip-position"],tooltipDirection:[1,"tooltip-direction"],hideTooltip:[4,"hide-tooltip"],keys:[1],isFullscreenActive:[4,"is-fullscreen-active"],i18n:[16],playbackReady:[4,"playback-ready"],canSetFullscreen:[32]}]),Hfe=ze(ipe,[4,"vm-hls",{version:[1],libSrc:[1,"lib-src"],config:[8],crossOrigin:[1,"cross-origin"],preload:[1],poster:[1],controlsList:[1,"controls-list"],autoPiP:[4,"auto-pip"],disablePiP:[4,"disable-pip"],disableRemotePlayback:[4,"disable-remote-playback"],playbackReady:[4,"playback-ready"],mediaTitle:[1,"media-title"],hasAttached:[32]},[[0,"vmMediaElChange","onMediaElChange"],[0,"vmSrcSetChange","onSrcChange"]]]),jfe=ze(hpe,[1,"vm-icon",{name:[1],src:[1],label:[1],library:[1],icons:[1],svg:[32]}]),zfe=ze(ppe,[1,"vm-icon-library",{name:[1],resolver:[16],icons:[1]}]),Gfe=ze(mpe,[1,"vm-live-indicator",{isLive:[4,"is-live"],i18n:[16]}]),Wfe=ze(_pe,[1,"vm-loading-screen",{playbackReady:[4,"playback-ready"],hideDots:[4,"hide-dots"]}]),qfe=ze(wpe,[1,"vm-menu",{active:[1540],identifier:[1],controller:[16],slideInDirection:[1,"slide-in-direction"],activeMenuItem:[32],activeSubmenu:[32]},[[0,"vmOpenSubmenu","onOpenSubmenu"],[0,"vmCloseSubmenu","onCloseSubmenu"],[8,"click","onWindowClick"],[8,"keydown","onWindowKeyDown"]]]),Qfe=ze(Tpe,[1,"vm-menu-item",{identifier:[1],hidden:[4],label:[1],menu:[16],expanded:[4],checked:[4],hint:[1],badge:[1],checkIcon:[1,"check-icon"],icons:[1],isTouch:[4,"is-touch"],showTapHighlight:[32]}]),Zfe=ze(Epe,[1,"vm-menu-radio",{label:[1],value:[1],checked:[1028],badge:[1],checkIcon:[1,"check-icon"],icons:[1]}]),Kfe=ze(kpe,[1,"vm-menu-radio-group",{value:[1025]},[[0,"vmCheck","onSelectionChange"]]]),Yfe=ze(Dpe,[1,"vm-mute-control",{lowVolumeIcon:[1,"low-volume-icon"],highVolumeIcon:[1,"high-volume-icon"],mutedIcon:[1,"muted-icon"],icons:[1],tooltipPosition:[1,"tooltip-position"],tooltipDirection:[1,"tooltip-direction"],hideTooltip:[4,"hide-tooltip"],keys:[1],volume:[2],muted:[4],i18n:[16]}]),Jfe=ze(Ipe,[1,"vm-pip-control",{enterIcon:[1,"enter-icon"],exitIcon:[1,"exit-icon"],icons:[1],tooltipPosition:[1,"tooltip-position"],tooltipDirection:[1,"tooltip-direction"],hideTooltip:[4,"hide-tooltip"],keys:[1],isPiPActive:[4,"is-pi-p-active"],i18n:[16],playbackReady:[4,"playback-ready"],canSetPiP:[32]}]),Xfe=ze(Ppe,[1,"vm-playback-control",{playIcon:[1,"play-icon"],pauseIcon:[1,"pause-icon"],icons:[1],tooltipPosition:[1,"tooltip-position"],tooltipDirection:[1,"tooltip-direction"],hideTooltip:[4,"hide-tooltip"],keys:[1],paused:[4],i18n:[16]}]),xL=ze(Upe,[1,"vm-player",{logger:[16],theme:[513],icons:[513],paused:[1028],playing:[1028],duration:[1026],mediaTitle:[1025,"media-title"],currentProvider:[1025,"current-provider"],currentSrc:[1025,"current-src"],currentPoster:[1025,"current-poster"],currentTime:[1026,"current-time"],autoplay:[4],ready:[1540],playbackReady:[1028,"playback-ready"],loop:[4],muted:[1028],buffered:[1026],playbackRate:[1026,"playback-rate"],playbackRates:[1040],playbackQuality:[1025,"playback-quality"],playbackQualities:[1040],seeking:[1028],debug:[4],playbackStarted:[1028,"playback-started"],playbackEnded:[1028,"playback-ended"],buffering:[1028],controls:[4],isControlsActive:[4,"is-controls-active"],isSettingsActive:[1028,"is-settings-active"],volume:[1026],isFullscreenActive:[1028,"is-fullscreen-active"],aspectRatio:[1025,"aspect-ratio"],viewType:[1025,"view-type"],isAudioView:[1028,"is-audio-view"],isVideoView:[1028,"is-video-view"],mediaType:[1025,"media-type"],isAudio:[1028,"is-audio"],isVideo:[1028,"is-video"],isLive:[1028,"is-live"],isMobile:[1028,"is-mobile"],isTouch:[1028,"is-touch"],isPiPActive:[1028,"is-pi-p-active"],textTracks:[16],currentTextTrack:[2,"current-text-track"],isTextTrackVisible:[4,"is-text-track-visible"],shouldRenderNativeTextTracks:[4,"should-render-native-text-tracks"],audioTracks:[16],currentAudioTrack:[2,"current-audio-track"],autopause:[4],playsinline:[4],language:[1025],translations:[1040],languages:[1040],i18n:[1040],container:[32]},[[0,"vmError","onError"]]]),eme=ze(Bpe,[1,"vm-poster",{fit:[1],isVideoView:[4,"is-video-view"],currentPoster:[1,"current-poster"],mediaTitle:[1,"media-title"],playbackStarted:[4,"playback-started"],currentTime:[2,"current-time"],isHidden:[32],isActive:[32],hasLoaded:[32]}]),tme=ze(jpe,[1,"vm-scrim",{gradient:[1],isVideoView:[4,"is-video-view"],isControlsActive:[4,"is-controls-active"]}]),nme=ze(Zpe,[1,"vm-scrubber-control",{alwaysShowHours:[4,"always-show-hours"],hideTooltip:[4,"hide-tooltip"],currentTime:[2,"current-time"],duration:[2],noKeyboard:[4,"no-keyboard"],buffering:[4],buffered:[2],i18n:[16],timestamp:[32],endTime:[32]}]),ime=ze(Jpe,[1,"vm-settings",{pin:[513],active:[1540],isMobile:[4,"is-mobile"],isAudioView:[4,"is-audio-view"],menuHeight:[32]}]),rme=ze(efe,[1,"vm-settings-control",{icon:[1],icons:[1],tooltipPosition:[1,"tooltip-position"],tooltipDirection:[1,"tooltip-direction"],menu:[1],expanded:[4],i18n:[16],vmSettings:[32]}]),ome=ze(nfe,[1,"vm-skeleton",{effect:[1],ready:[4],hidden:[32]}]),sme=ze(rfe,[1,"vm-slider",{step:[2],min:[2],max:[2],value:[2],valueText:[1,"value-text"],label:[1]}]),ame=ze(sfe,[1,"vm-spinner",{isVideoView:[4,"is-video-view"],currentProvider:[1,"current-provider"],showWhenMediaLoading:[4,"show-when-media-loading"],playbackReady:[4,"playback-ready"],buffering:[4],isHidden:[32],isActive:[32]}]),lme=ze(afe,[1,"vm-submenu",{label:[1],hint:[1],slideInDirection:[1,"slide-in-direction"],active:[1540],menu:[32],controller:[32]}]),cme=ze(cfe,[1,"vm-time",{label:[1],seconds:[2],alwaysShowHours:[4,"always-show-hours"]}]),ume=ze(dfe,[1,"vm-time-progress",{separator:[1],alwaysShowHours:[4,"always-show-hours"]}]),dme=ze(pfe,[1,"vm-tooltip",{hidden:[4],active:[4],position:[1],direction:[1],isTouch:[4,"is-touch"],isMobile:[4,"is-mobile"]}]),hme=ze(mfe,[1,"vm-ui",{isVideoView:[4,"is-video-view"],playsinline:[4],isFullscreenActive:[4,"is-fullscreen-active"]}]),pme=ze(_fe,[4,"vm-video",{willAttach:[4,"will-attach"],hasCustomTextManager:[4,"has-custom-text-manager"],crossOrigin:[1,"cross-origin"],preload:[1],poster:[1],controlsList:[1,"controls-list"],autoPiP:[4,"auto-pip"],disablePiP:[4,"disable-pip"],disableRemotePlayback:[4,"disable-remote-playback"],mediaTitle:[1,"media-title"]},[[0,"vmMediaProviderConnect","onProviderConnect"],[0,"vmMediaProviderDisconnect","onProviderDisconnect"]]]),fme=ze(yfe,[1,"vm-vimeo",{videoId:[1,"video-id"],byline:[4],color:[1],portrait:[4],noAutoAspectRatio:[4,"no-auto-aspect-ratio"],poster:[1],cookies:[4],language:[1],aspectRatio:[1,"aspect-ratio"],autoplay:[4],controls:[4],logger:[16],loop:[4],muted:[4],playsinline:[4],embedSrc:[32],mediaTitle:[32]}]),mme=ze(wfe,[1,"vm-volume-control",{lowVolumeIcon:[1,"low-volume-icon"],highVolumeIcon:[1,"high-volume-icon"],mutedIcon:[1,"muted-icon"],icons:[1],tooltipPosition:[1,"tooltip-position"],tooltipDirection:[1,"tooltip-direction"],hideTooltip:[4,"hide-tooltip"],muteKeys:[1,"mute-keys"],noKeyboard:[4,"no-keyboard"],muted:[4],volume:[2],isMobile:[4,"is-mobile"],i18n:[16],currentVolume:[32],isSliderActive:[32]}]),gme=ze(Tfe,[1,"vm-youtube",{cookies:[4],videoId:[1,"video-id"],showFullscreenControl:[4,"show-fullscreen-control"],poster:[1],language:[1],autoplay:[4],controls:[4],logger:[16],loop:[4],muted:[4],playsinline:[4],embedSrc:[32],mediaTitle:[32]}]);(function(){if(fM)throw new Error("Cannot enable prod mode after platform setup.");pM=!1})(),C7().bootstrapModule(Fue).catch(t=>console.error(t)),customElements.define("vm-player",xL),customElements.define("vm-audio",kL),customElements.define("vm-default-ui",DL),"undefined"!=typeof customElements&&[kL,Efe,kfe,Dfe,xfe,Mfe,Ife,Pfe,Afe,Ofe,Nfe,Ffe,Rfe,Lfe,DL,$fe,Ufe,Vfe,Bfe,Hfe,jfe,zfe,Gfe,Wfe,qfe,Qfe,Zfe,Kfe,Yfe,Jfe,Xfe,xL,eme,tme,nme,ime,rme,ome,sme,ame,lme,cme,ume,dme,hme,pme,fme,mme,gme].forEach(n=>{customElements.get(n.is)||customElements.define(n.is,n,void 0)})},993:mo=>{function pi(ne){return Promise.resolve().then(()=>{var Xn=new Error("Cannot find module '"+ne+"'");throw Xn.code="MODULE_NOT_FOUND",Xn})}pi.keys=()=>[],pi.resolve=pi,pi.id=993,mo.exports=pi},232:mo=>{"use strict";mo.exports="/* required styles */\r\n\r\n.leaflet-pane,\r\n.leaflet-tile,\r\n.leaflet-marker-icon,\r\n.leaflet-marker-shadow,\r\n.leaflet-tile-container,\r\n.leaflet-pane > svg,\r\n.leaflet-pane > canvas,\r\n.leaflet-zoom-box,\r\n.leaflet-image-layer,\r\n.leaflet-layer {\r\n\tposition: absolute;\r\n\tleft: 0;\r\n\ttop: 0;\r\n\t}\r\n\r\n.leaflet-container {\r\n\toverflow: hidden;\r\n\t}\r\n\r\n.leaflet-tile,\r\n.leaflet-marker-icon,\r\n.leaflet-marker-shadow {\r\n\t-webkit-user-select: none;\r\n\t        user-select: none;\r\n\t  -webkit-user-drag: none;\r\n\t}\r\n\r\n/* Prevents IE11 from highlighting tiles in blue */\r\n\r\n.leaflet-tile::selection {\r\n\tbackground: transparent;\r\n}\r\n\r\n/* Safari renders non-retina tile on retina better with this, but Chrome is worse */\r\n\r\n.leaflet-safari .leaflet-tile {\r\n\timage-rendering: -webkit-optimize-contrast;\r\n\t}\r\n\r\n/* hack that prevents hw layers \"stretching\" when loading new tiles */\r\n\r\n.leaflet-safari .leaflet-tile-container {\r\n\twidth: 1600px;\r\n\theight: 1600px;\r\n\t-webkit-transform-origin: 0 0;\r\n\t}\r\n\r\n.leaflet-marker-icon,\r\n.leaflet-marker-shadow {\r\n\tdisplay: block;\r\n\t}\r\n\r\n/* .leaflet-container svg: reset svg max-width decleration shipped in Joomla! (joomla.org) 3.x */\r\n\r\n/* .leaflet-container img: map is broken in FF if you have max-width: 100% on tiles */\r\n\r\n.leaflet-container .leaflet-overlay-pane svg,\r\n.leaflet-container .leaflet-marker-pane img,\r\n.leaflet-container .leaflet-shadow-pane img,\r\n.leaflet-container .leaflet-tile-pane img,\r\n.leaflet-container img.leaflet-image-layer,\r\n.leaflet-container .leaflet-tile {\r\n\tmax-width: none !important;\r\n\tmax-height: none !important;\r\n\t}\r\n\r\n.leaflet-container.leaflet-touch-zoom {\r\n\ttouch-action: pan-x pan-y;\r\n\t}\r\n\r\n.leaflet-container.leaflet-touch-drag {\r\n\t/* Fallback for FF which doesn't support pinch-zoom */\r\n\ttouch-action: none;\r\n\ttouch-action: pinch-zoom;\r\n}\r\n\r\n.leaflet-container.leaflet-touch-drag.leaflet-touch-zoom {\r\n\ttouch-action: none;\r\n}\r\n\r\n.leaflet-container {\r\n\t-webkit-tap-highlight-color: transparent;\r\n}\r\n\r\n.leaflet-container a {\r\n\t-webkit-tap-highlight-color: rgba(51, 181, 229, 0.4);\r\n}\r\n\r\n.leaflet-tile {\r\n\tfilter: inherit;\r\n\tvisibility: hidden;\r\n\t}\r\n\r\n.leaflet-tile-loaded {\r\n\tvisibility: inherit;\r\n\t}\r\n\r\n.leaflet-zoom-box {\r\n\twidth: 0;\r\n\theight: 0;\r\n\tbox-sizing: border-box;\r\n\tz-index: 800;\r\n\t}\r\n\r\n/* workaround for https://bugzilla.mozilla.org/show_bug.cgi?id=888319 */\r\n\r\n.leaflet-overlay-pane svg {\r\n\t-moz-user-select: none;\r\n\t}\r\n\r\n.leaflet-pane         { z-index: 400; }\r\n\r\n.leaflet-tile-pane    { z-index: 200; }\r\n\r\n.leaflet-overlay-pane { z-index: 400; }\r\n\r\n.leaflet-shadow-pane  { z-index: 500; }\r\n\r\n.leaflet-marker-pane  { z-index: 600; }\r\n\r\n.leaflet-tooltip-pane   { z-index: 650; }\r\n\r\n.leaflet-popup-pane   { z-index: 700; }\r\n\r\n.leaflet-map-pane canvas { z-index: 100; }\r\n\r\n.leaflet-map-pane svg    { z-index: 200; }\r\n\r\n.leaflet-vml-shape {\r\n\twidth: 1px;\r\n\theight: 1px;\r\n\t}\r\n\r\n.lvml {\r\n\tbehavior: url(#default#VML);\r\n\tdisplay: inline-block;\r\n\tposition: absolute;\r\n\t}\r\n\r\n/* control positioning */\r\n\r\n.leaflet-control {\r\n\tposition: relative;\r\n\tz-index: 800;\r\n\tpointer-events: visiblePainted; /* IE 9-10 doesn't have auto */\r\n\tpointer-events: auto;\r\n\t}\r\n\r\n.leaflet-top,\r\n.leaflet-bottom {\r\n\tposition: absolute;\r\n\tz-index: 1000;\r\n\tpointer-events: none;\r\n\t}\r\n\r\n.leaflet-top {\r\n\ttop: 0;\r\n\t}\r\n\r\n.leaflet-right {\r\n\tright: 0;\r\n\t}\r\n\r\n.leaflet-bottom {\r\n\tbottom: 0;\r\n\t}\r\n\r\n.leaflet-left {\r\n\tleft: 0;\r\n\t}\r\n\r\n.leaflet-control {\r\n\tfloat: left;\r\n\tclear: both;\r\n\t}\r\n\r\n.leaflet-right .leaflet-control {\r\n\tfloat: right;\r\n\t}\r\n\r\n.leaflet-top .leaflet-control {\r\n\tmargin-top: 10px;\r\n\t}\r\n\r\n.leaflet-bottom .leaflet-control {\r\n\tmargin-bottom: 10px;\r\n\t}\r\n\r\n.leaflet-left .leaflet-control {\r\n\tmargin-left: 10px;\r\n\t}\r\n\r\n.leaflet-right .leaflet-control {\r\n\tmargin-right: 10px;\r\n\t}\r\n\r\n/* zoom and fade animations */\r\n\r\n.leaflet-fade-anim .leaflet-tile {\r\n\twill-change: opacity;\r\n\t}\r\n\r\n.leaflet-fade-anim .leaflet-popup {\r\n\topacity: 0;\r\n\ttransition: opacity 0.2s linear;\r\n\t}\r\n\r\n.leaflet-fade-anim .leaflet-map-pane .leaflet-popup {\r\n\topacity: 1;\r\n\t}\r\n\r\n.leaflet-zoom-animated {\r\n\ttransform-origin: 0 0;\r\n\t}\r\n\r\n.leaflet-zoom-anim .leaflet-zoom-animated {\r\n\twill-change: transform;\r\n\t}\r\n\r\n.leaflet-zoom-anim .leaflet-zoom-animated {\r\n\ttransition:         transform 0.25s cubic-bezier(0,0,0.25,1);\r\n\t}\r\n\r\n.leaflet-zoom-anim .leaflet-tile,\r\n.leaflet-pan-anim .leaflet-tile {\r\n\ttransition: none;\r\n\t}\r\n\r\n.leaflet-zoom-anim .leaflet-zoom-hide {\r\n\tvisibility: hidden;\r\n\t}\r\n\r\n/* cursors */\r\n\r\n.leaflet-interactive {\r\n\tcursor: pointer;\r\n\t}\r\n\r\n.leaflet-grab {\r\n\tcursor:         grab;\r\n\t}\r\n\r\n.leaflet-crosshair,\r\n.leaflet-crosshair .leaflet-interactive {\r\n\tcursor: crosshair;\r\n\t}\r\n\r\n.leaflet-popup-pane,\r\n.leaflet-control {\r\n\tcursor: auto;\r\n\t}\r\n\r\n.leaflet-dragging .leaflet-grab,\r\n.leaflet-dragging .leaflet-grab .leaflet-interactive,\r\n.leaflet-dragging .leaflet-marker-draggable {\r\n\tcursor: move;\r\n\tcursor:         grabbing;\r\n\t}\r\n\r\n/* marker & overlays interactivity */\r\n\r\n.leaflet-marker-icon,\r\n.leaflet-marker-shadow,\r\n.leaflet-image-layer,\r\n.leaflet-pane > svg path,\r\n.leaflet-tile-container {\r\n\tpointer-events: none;\r\n\t}\r\n\r\n.leaflet-marker-icon.leaflet-interactive,\r\n.leaflet-image-layer.leaflet-interactive,\r\n.leaflet-pane > svg path.leaflet-interactive,\r\nsvg.leaflet-image-layer.leaflet-interactive path {\r\n\tpointer-events: visiblePainted; /* IE 9-10 doesn't have auto */\r\n\tpointer-events: auto;\r\n\t}\r\n\r\n/* visual tweaks */\r\n\r\n.leaflet-container {\r\n\tbackground: #ddd;\r\n\toutline: 0;\r\n\t}\r\n\r\n.leaflet-container a {\r\n\tcolor: #0078A8;\r\n\t}\r\n\r\n.leaflet-container a.leaflet-active {\r\n\toutline: 2px solid orange;\r\n\t}\r\n\r\n.leaflet-zoom-box {\r\n\tborder: 2px dotted #38f;\r\n\tbackground: rgba(255,255,255,0.5);\r\n\t}\r\n\r\n/* general typography */\r\n\r\n.leaflet-container {\r\n\tfont: 12px/1.5 \"Helvetica Neue\", Arial, Helvetica, sans-serif;\r\n\t}\r\n\r\n/* general toolbar styles */\r\n\r\n.leaflet-bar {\r\n\tbox-shadow: 0 1px 5px rgba(0,0,0,0.65);\r\n\tborder-radius: 4px;\r\n\t}\r\n\r\n.leaflet-bar a,\r\n.leaflet-bar a:hover {\r\n\tbackground-color: #fff;\r\n\tborder-bottom: 1px solid #ccc;\r\n\twidth: 26px;\r\n\theight: 26px;\r\n\tline-height: 26px;\r\n\tdisplay: block;\r\n\ttext-align: center;\r\n\ttext-decoration: none;\r\n\tcolor: black;\r\n\t}\r\n\r\n.leaflet-bar a,\r\n.leaflet-control-layers-toggle {\r\n\tbackground-position: 50% 50%;\r\n\tbackground-repeat: no-repeat;\r\n\tdisplay: block;\r\n\t}\r\n\r\n.leaflet-bar a:hover {\r\n\tbackground-color: #f4f4f4;\r\n\t}\r\n\r\n.leaflet-bar a:first-child {\r\n\tborder-top-left-radius: 4px;\r\n\tborder-top-right-radius: 4px;\r\n\t}\r\n\r\n.leaflet-bar a:last-child {\r\n\tborder-bottom-left-radius: 4px;\r\n\tborder-bottom-right-radius: 4px;\r\n\tborder-bottom: none;\r\n\t}\r\n\r\n.leaflet-bar a.leaflet-disabled {\r\n\tcursor: default;\r\n\tbackground-color: #f4f4f4;\r\n\tcolor: #bbb;\r\n\t}\r\n\r\n.leaflet-touch .leaflet-bar a {\r\n\twidth: 30px;\r\n\theight: 30px;\r\n\tline-height: 30px;\r\n\t}\r\n\r\n.leaflet-touch .leaflet-bar a:first-child {\r\n\tborder-top-left-radius: 2px;\r\n\tborder-top-right-radius: 2px;\r\n\t}\r\n\r\n.leaflet-touch .leaflet-bar a:last-child {\r\n\tborder-bottom-left-radius: 2px;\r\n\tborder-bottom-right-radius: 2px;\r\n\t}\r\n\r\n/* zoom control */\r\n\r\n.leaflet-control-zoom-in,\r\n.leaflet-control-zoom-out {\r\n\tfont: bold 18px 'Lucida Console', Monaco, monospace;\r\n\ttext-indent: 1px;\r\n\t}\r\n\r\n.leaflet-touch .leaflet-control-zoom-in, .leaflet-touch .leaflet-control-zoom-out  {\r\n\tfont-size: 22px;\r\n\t}\r\n\r\n/* layers control */\r\n\r\n.leaflet-control-layers {\r\n\tbox-shadow: 0 1px 5px rgba(0,0,0,0.4);\r\n\tbackground: #fff;\r\n\tborder-radius: 5px;\r\n\t}\r\n\r\n.leaflet-control-layers-toggle {\r\n\tbackground-image: url('layers.416d91365b44e4b4f477.png');\r\n\twidth: 36px;\r\n\theight: 36px;\r\n\t}\r\n\r\n.leaflet-retina .leaflet-control-layers-toggle {\r\n\tbackground-image: url('layers-2x.8f2c4d11474275fbc161.png');\r\n\tbackground-size: 26px 26px;\r\n\t}\r\n\r\n.leaflet-touch .leaflet-control-layers-toggle {\r\n\twidth: 44px;\r\n\theight: 44px;\r\n\t}\r\n\r\n.leaflet-control-layers .leaflet-control-layers-list,\r\n.leaflet-control-layers-expanded .leaflet-control-layers-toggle {\r\n\tdisplay: none;\r\n\t}\r\n\r\n.leaflet-control-layers-expanded .leaflet-control-layers-list {\r\n\tdisplay: block;\r\n\tposition: relative;\r\n\t}\r\n\r\n.leaflet-control-layers-expanded {\r\n\tpadding: 6px 10px 6px 6px;\r\n\tcolor: #333;\r\n\tbackground: #fff;\r\n\t}\r\n\r\n.leaflet-control-layers-scrollbar {\r\n\toverflow-y: scroll;\r\n\toverflow-x: hidden;\r\n\tpadding-right: 5px;\r\n\t}\r\n\r\n.leaflet-control-layers-selector {\r\n\tmargin-top: 2px;\r\n\tposition: relative;\r\n\ttop: 1px;\r\n\t}\r\n\r\n.leaflet-control-layers label {\r\n\tdisplay: block;\r\n\t}\r\n\r\n.leaflet-control-layers-separator {\r\n\theight: 0;\r\n\tborder-top: 1px solid #ddd;\r\n\tmargin: 5px -10px 5px -6px;\r\n\t}\r\n\r\n/* Default icon URLs */\r\n\r\n.leaflet-default-icon-path {\r\n\tbackground-image: url('marker-icon.2b3e1faf89f94a483539.png');\r\n\t}\r\n\r\n/* attribution and scale controls */\r\n\r\n.leaflet-container .leaflet-control-attribution {\r\n\tbackground: #fff;\r\n\tbackground: rgba(255, 255, 255, 0.7);\r\n\tmargin: 0;\r\n\t}\r\n\r\n.leaflet-control-attribution,\r\n.leaflet-control-scale-line {\r\n\tpadding: 0 5px;\r\n\tcolor: #333;\r\n\t}\r\n\r\n.leaflet-control-attribution a {\r\n\ttext-decoration: none;\r\n\t}\r\n\r\n.leaflet-control-attribution a:hover {\r\n\ttext-decoration: underline;\r\n\t}\r\n\r\n.leaflet-container .leaflet-control-attribution,\r\n.leaflet-container .leaflet-control-scale {\r\n\tfont-size: 11px;\r\n\t}\r\n\r\n.leaflet-left .leaflet-control-scale {\r\n\tmargin-left: 5px;\r\n\t}\r\n\r\n.leaflet-bottom .leaflet-control-scale {\r\n\tmargin-bottom: 5px;\r\n\t}\r\n\r\n.leaflet-control-scale-line {\r\n\tborder: 2px solid #777;\r\n\tborder-top: none;\r\n\tline-height: 1.1;\r\n\tpadding: 2px 5px 1px;\r\n\tfont-size: 11px;\r\n\twhite-space: nowrap;\r\n\toverflow: hidden;\r\n\tbox-sizing: border-box;\r\n\r\n\tbackground: #fff;\r\n\tbackground: rgba(255, 255, 255, 0.5);\r\n\t}\r\n\r\n.leaflet-control-scale-line:not(:first-child) {\r\n\tborder-top: 2px solid #777;\r\n\tborder-bottom: none;\r\n\tmargin-top: -2px;\r\n\t}\r\n\r\n.leaflet-control-scale-line:not(:first-child):not(:last-child) {\r\n\tborder-bottom: 2px solid #777;\r\n\t}\r\n\r\n.leaflet-touch .leaflet-control-attribution,\r\n.leaflet-touch .leaflet-control-layers,\r\n.leaflet-touch .leaflet-bar {\r\n\tbox-shadow: none;\r\n\t}\r\n\r\n.leaflet-touch .leaflet-control-layers,\r\n.leaflet-touch .leaflet-bar {\r\n\tborder: 2px solid rgba(0,0,0,0.2);\r\n\tbackground-clip: padding-box;\r\n\t}\r\n\r\n/* popup */\r\n\r\n.leaflet-popup {\r\n\tposition: absolute;\r\n\ttext-align: center;\r\n\tmargin-bottom: 20px;\r\n\t}\r\n\r\n.leaflet-popup-content-wrapper {\r\n\tpadding: 1px;\r\n\ttext-align: left;\r\n\tborder-radius: 12px;\r\n\t}\r\n\r\n.leaflet-popup-content {\r\n\tmargin: 13px 19px;\r\n\tline-height: 1.4;\r\n\t}\r\n\r\n.leaflet-popup-content p {\r\n\tmargin: 18px 0;\r\n\t}\r\n\r\n.leaflet-popup-tip-container {\r\n\twidth: 40px;\r\n\theight: 20px;\r\n\tposition: absolute;\r\n\tleft: 50%;\r\n\tmargin-left: -20px;\r\n\toverflow: hidden;\r\n\tpointer-events: none;\r\n\t}\r\n\r\n.leaflet-popup-tip {\r\n\twidth: 17px;\r\n\theight: 17px;\r\n\tpadding: 1px;\r\n\r\n\tmargin: -10px auto 0;\r\n\ttransform: rotate(45deg);\r\n\t}\r\n\r\n.leaflet-popup-content-wrapper,\r\n.leaflet-popup-tip {\r\n\tbackground: white;\r\n\tcolor: #333;\r\n\tbox-shadow: 0 3px 14px rgba(0,0,0,0.4);\r\n\t}\r\n\r\n.leaflet-container a.leaflet-popup-close-button {\r\n\tposition: absolute;\r\n\ttop: 0;\r\n\tright: 0;\r\n\tpadding: 4px 4px 0 0;\r\n\tborder: none;\r\n\ttext-align: center;\r\n\twidth: 18px;\r\n\theight: 14px;\r\n\tfont: 16px/14px Tahoma, Verdana, sans-serif;\r\n\tcolor: #c3c3c3;\r\n\ttext-decoration: none;\r\n\tfont-weight: bold;\r\n\tbackground: transparent;\r\n\t}\r\n\r\n.leaflet-container a.leaflet-popup-close-button:hover {\r\n\tcolor: #999;\r\n\t}\r\n\r\n.leaflet-popup-scrolled {\r\n\toverflow: auto;\r\n\tborder-bottom: 1px solid #ddd;\r\n\tborder-top: 1px solid #ddd;\r\n\t}\r\n\r\n.leaflet-oldie .leaflet-popup-content-wrapper {\r\n\t-ms-zoom: 1;\r\n\t}\r\n\r\n.leaflet-oldie .leaflet-popup-tip {\r\n\twidth: 24px;\r\n\tmargin: 0 auto;\r\n\r\n\t-ms-filter: \"progid:DXImageTransform.Microsoft.Matrix(M11=0.70710678, M12=0.70710678, M21=-0.70710678, M22=0.70710678)\";\r\n\tfilter: progid:DXImageTransform.Microsoft.Matrix(M11=0.70710678, M12=0.70710678, M21=-0.70710678, M22=0.70710678);\r\n\t}\r\n\r\n.leaflet-oldie .leaflet-popup-tip-container {\r\n\tmargin-top: -1px;\r\n\t}\r\n\r\n.leaflet-oldie .leaflet-control-zoom,\r\n.leaflet-oldie .leaflet-control-layers,\r\n.leaflet-oldie .leaflet-popup-content-wrapper,\r\n.leaflet-oldie .leaflet-popup-tip {\r\n\tborder: 1px solid #999;\r\n\t}\r\n\r\n/* div icon */\r\n\r\n.leaflet-div-icon {\r\n\tbackground: #fff;\r\n\tborder: 1px solid #666;\r\n\t}\r\n\r\n/* Tooltip */\r\n\r\n/* Base styles for the element that has a tooltip */\r\n\r\n.leaflet-tooltip {\r\n\tposition: absolute;\r\n\tpadding: 6px;\r\n\tbackground-color: #fff;\r\n\tborder: 1px solid #fff;\r\n\tborder-radius: 3px;\r\n\tcolor: #222;\r\n\twhite-space: nowrap;\r\n\t-webkit-user-select: none;\r\n\tuser-select: none;\r\n\tpointer-events: none;\r\n\tbox-shadow: 0 1px 3px rgba(0,0,0,0.4);\r\n\t}\r\n\r\n.leaflet-tooltip.leaflet-clickable {\r\n\tcursor: pointer;\r\n\tpointer-events: auto;\r\n\t}\r\n\r\n.leaflet-tooltip-top:before,\r\n.leaflet-tooltip-bottom:before,\r\n.leaflet-tooltip-left:before,\r\n.leaflet-tooltip-right:before {\r\n\tposition: absolute;\r\n\tpointer-events: none;\r\n\tborder: 6px solid transparent;\r\n\tbackground: transparent;\r\n\tcontent: \"\";\r\n\t}\r\n\r\n/* Directions */\r\n\r\n.leaflet-tooltip-bottom {\r\n\tmargin-top: 6px;\r\n}\r\n\r\n.leaflet-tooltip-top {\r\n\tmargin-top: -6px;\r\n}\r\n\r\n.leaflet-tooltip-bottom:before,\r\n.leaflet-tooltip-top:before {\r\n\tleft: 50%;\r\n\tmargin-left: -6px;\r\n\t}\r\n\r\n.leaflet-tooltip-top:before {\r\n\tbottom: 0;\r\n\tmargin-bottom: -12px;\r\n\tborder-top-color: #fff;\r\n\t}\r\n\r\n.leaflet-tooltip-bottom:before {\r\n\ttop: 0;\r\n\tmargin-top: -12px;\r\n\tmargin-left: -6px;\r\n\tborder-bottom-color: #fff;\r\n\t}\r\n\r\n.leaflet-tooltip-left {\r\n\tmargin-left: -6px;\r\n}\r\n\r\n.leaflet-tooltip-right {\r\n\tmargin-left: 6px;\r\n}\r\n\r\n.leaflet-tooltip-left:before,\r\n.leaflet-tooltip-right:before {\r\n\ttop: 50%;\r\n\tmargin-top: -6px;\r\n\t}\r\n\r\n.leaflet-tooltip-left:before {\r\n\tright: 0;\r\n\tmargin-right: -12px;\r\n\tborder-left-color: #fff;\r\n\t}\r\n\r\n.leaflet-tooltip-right:before {\r\n\tleft: 0;\r\n\tmargin-left: -12px;\r\n\tborder-right-color: #fff;\r\n\t}\r\n"}},mo=>{mo(mo.s=753)}]);